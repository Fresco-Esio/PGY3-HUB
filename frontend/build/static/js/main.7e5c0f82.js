(()=>{"use strict";var e={8806:(e,t,s)=>{var a=s(5043),i=s(4391),r=(s(411),s(6213)),o=s(3546),n=s(7845),l=s(7782),c=s(6833),d=s(7819),u=s(7856),p=s(2024),m=s(614),x=s(6382),h=s(9350),g=s(5088),b=s(7118),y=s(8646),v=s(9917),f=s(2626),j=s(5469),w=s(1360),N=s(1680),k=s(8693),C=s(2054),S=s(1827),A=s(2119),O=s(3528),T=s(4596),_=s(9855),z=s(5087),P=s(579);const D=e=>{let{message:t="Loading..."}=e;return(0,P.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,P.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,P.jsx)(p.A,{className:"w-6 h-6 animate-spin text-blue-600"}),(0,P.jsx)("span",{className:"text-sm text-gray-600",children:t})]})})},E=(0,a.lazy)(()=>Promise.all([s.e(96),s.e(261)]).then(s.bind(s,6261))),I=(0,a.lazy)(()=>Promise.all([s.e(96),s.e(524)]).then(s.bind(s,4524))),M=(0,a.lazy)(()=>Promise.all([s.e(96),s.e(213)]).then(s.bind(s,4213))),$=(e,t)=>s=>(0,P.jsx)(a.Suspense,{fallback:(0,P.jsx)(D,{message:t}),children:(0,P.jsx)(e,{...s})}),L=($(E,"Loading editor..."),$(I,"Loading templates...")),X=$(M,"Loading literature viewer...");var R=s(5440),F=s(780),B=s(4918),Y=s(6099),H=s(3165),U=s(9996);const W={hidden:{opacity:0,scale:.3,y:50,rotate:-5},visible:{opacity:1,scale:1,y:0,rotate:0,transition:{type:"spring",damping:25,stiffness:300,duration:.6}},exit:{opacity:0,scale:.7,y:30,rotate:-3,transition:{type:"easeInOut",duration:.4}}},J={hidden:{opacity:0,backdropFilter:"blur(0px)"},visible:{opacity:1,backdropFilter:"blur(8px)",transition:{duration:.4,ease:"easeOut"}},exit:{opacity:0,backdropFilter:"blur(0px)",transition:{duration:.3,ease:"easeIn"}}},V={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"easeOut",duration:.3,delay:.1}},exit:{opacity:0,y:-10,scale:1.02,transition:{type:"easeIn",duration:.2}}},q=e=>{let{isOpen:t,data:s,onClose:i,onAnimationStart:r,onAnimationEnd:n,setMindMapData:l,autoSaveMindMapData:c,addToast:u}=e;const[x,h]=(0,a.useState)(!1),[v,f]=(0,a.useState)(!1),[j,C]=(0,a.useState)(!1),[S,A]=(0,a.useState)(!1),[O,z]=(0,a.useState)({}),[D,E]=(0,a.useState)(!1),[I,M]=(0,a.useState)(!1),[$,L]=(0,a.useState)("overview"),[X,q]=(0,a.useState)(!1),[G,K]=(0,a.useState)(null),[Q,Z]=(0,a.useState)(null),[ee,te]=(0,a.useState)({}),[se,ae]=(0,a.useState)(!1),ie=(0,a.useRef)(null);(0,a.useEffect)(()=>{t&&s&&!I?(f(!0),z({...s}),M(!0),h(!0),r&&r(),setTimeout(()=>{h(!1),n&&n()},600)):!t&&I&&M(!1)},[t,I,r,n]),(0,a.useEffect)(()=>{!(t&&s&&I)||S||D||X||x||z({...s})},[null===s||void 0===s?void 0:s.id,t,I,S,D,X,x]);const re=(0,a.useMemo)(()=>null!==O&&void 0!==O&&O.timeline&&Array.isArray(O.timeline)&&O.timeline.length>0?O.timeline.sort((e,t)=>new Date(e.timestamp)-new Date(t.timestamp)):[{id:1,timestamp:"2024-01-15T09:30:00.000Z",date:"2024-01-15",time:"09:30 AM",type:"assessment",title:"Initial Assessment",content:"Patient presented with symptoms of anxiety and depression.",details:"Comprehensive psychiatric evaluation completed. Patient reports increased anxiety over the past 3 months, difficulty sleeping, and decreased appetite. MSE reveals anxious mood, intact cognition, no psychotic features. PHQ-9 score: 14 (moderate depression). GAD-7 score: 12 (moderate anxiety).",author:"Dr. Smith",isNew:!1},{id:2,timestamp:"2024-01-22T14:15:00.000Z",date:"2024-01-22",time:"02:15 PM",type:"medication",title:"Medication Adjustment",content:"Started on Sertraline 50mg daily.",details:"After discussion of treatment options, patient agreed to trial of SSRI. Started Sertraline 50mg daily. Reviewed potential side effects including initial activation, GI upset. Plan to follow up in 2 weeks. Provided crisis resources and encouraged to call if any concerns.",author:"Dr. Smith",isNew:!1},{id:3,timestamp:"2024-02-05T11:00:00.000Z",date:"2024-02-05",time:"11:00 AM",type:"followup",title:"Follow-up Visit",content:"Patient reports mild improvement in mood.",details:"Patient tolerated medication well with minimal side effects. Reports improved energy and slightly better sleep. Still experiencing some anxiety symptoms. PHQ-9 score decreased to 10. Continue current medication, discussed therapy referral.",author:"Dr. Smith",isNew:!1},{id:4,timestamp:"2024-02-19T15:45:00.000Z",date:"2024-02-19",time:"03:45 PM",type:"therapy",title:"Therapy Session",content:"First CBT session completed.",details:"Initial therapy session with focus on psychoeducation about anxiety and depression. Introduced basic CBT concepts and breathing exercises. Patient engaged well and expressed motivation for therapy. Homework assigned: daily mood tracking and breathing practice.",author:"Sarah Johnson, LCSW",isNew:!0}],[null===O||void 0===O?void 0:O.timeline]),oe=(0,a.useCallback)(()=>{ie.current&&(ie.current.scrollTop=ie.current.scrollHeight)},[]),ne=(0,a.useCallback)(()=>{ie.current&&Q&&(setTimeout(()=>{const e=ie.current,t=e.clientHeight,s=e.scrollHeight-t+400;e.scrollTo({top:Math.max(0,s),behavior:"smooth"})},100),setTimeout(()=>{const e=ie.current;if(e){const t=e.getBoundingClientRect(),s=e.querySelector(`[data-entry-id="${Q}"]`);if(s){const a=s.getBoundingClientRect().bottom,i=t.bottom;if(a>i-20){const t=a-i+80;e.scrollTo({top:e.scrollTop+t,behavior:"smooth"})}}}},400))},[Q]),le=((0,a.useCallback)(e=>{K(t=>t===e?null:e)},[]),(0,a.useCallback)(e=>setTimeout(()=>{l(t=>{const a=t.cases.map(t=>String(t.id)===String(null===s||void 0===s?void 0:s.id)?{...t,timeline:e,updated_at:(new Date).toISOString()}:t),i={...t,cases:a};return c(i),i}),z(t=>({...t,timeline:e}))},800),[null===s||void 0===s?void 0:s.id,l,c])),ce=(0,a.useCallback)(e=>({assessment:"Clinical Assessment",medication:"Medication Update",therapy:"Therapy Session",followup:"Follow-up Visit",note:"Clinical Note"}[e]||"Clinical Entry"),[]),de=(0,a.useCallback)(()=>{if(se||Q)return;const e={id:`new-${Date.now()}`,timestamp:(new Date).toISOString(),date:(new Date).toISOString().split("T")[0],time:(new Date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),type:"followup",title:"Follow-up Visit",content:"",details:"",author:"Current User",isNew:!0,isEditing:!0},t=[...(null===O||void 0===O?void 0:O.timeline)||[],e];z(e=>({...e,timeline:t})),Z(e.id),te({...e}),ae(!0),ne()},[null===O||void 0===O?void 0:O.timeline,se,Q,ne]),ue=(0,a.useCallback)(e=>{Q!==e.id&&(Z(e.id),te({...e}),K(e.id),setTimeout(()=>{if(ie.current){const t=ie.current,s=t.querySelector(`[data-entry-id="${e.id}"]`);if(s){const e=t.getBoundingClientRect(),a=s.getBoundingClientRect(),i=300,r=a.top-e.top+a.height+i;if(r>t.clientHeight-20){const e=r-t.clientHeight+80;t.scrollTo({top:t.scrollTop+e,behavior:"smooth"})}}}},100),setTimeout(()=>{if(ie.current){const t=ie.current,s=t.querySelector(`[data-entry-id="${e.id}"]`);if(s){const e=t.getBoundingClientRect(),a=s.getBoundingClientRect().bottom,i=e.bottom;if(a>i-20){const e=a-i+60;t.scrollTo({top:t.scrollTop+e,behavior:"smooth"})}}}},400))},[Q]),pe=(0,a.useCallback)(()=>{if(!Q||!ee)return;const e=(null===O||void 0===O?void 0:O.timeline)||[];let t;const s={...ee,id:ee.id.toString().startsWith("new-")?Date.now():ee.id,isNew:ee.id.toString().startsWith("new-"),isEditing:!1,updated_at:(new Date).toISOString()};s.title=ce(s.type);const a=new Date(s.timestamp);s.date=a.toISOString().split("T")[0],s.time=a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),t=ee.id.toString().startsWith("new-")?[...e.filter(e=>e.id!==Q),s].sort((e,t)=>new Date(e.timestamp)-new Date(t.timestamp)):e.map(e=>e.id===Q?s:e).sort((e,t)=>new Date(e.timestamp)-new Date(t.timestamp)),le(t),Z(null),te({}),ae(!1),u(ee.id.toString().startsWith("new-")?"Timeline entry added successfully":"Timeline entry updated successfully","success"),ee.id.toString().startsWith("new-")&&setTimeout(()=>oe(),300)},[Q,ee,null===O||void 0===O?void 0:O.timeline,le,u,oe,ce]),me=(0,a.useCallback)(()=>{if(Q){if(ee.id&&ee.id.toString().startsWith("new-")){const e=((null===O||void 0===O?void 0:O.timeline)||[]).filter(e=>e.id!==Q);z(t=>({...t,timeline:e}))}Z(null),te({}),ae(!1),K(null)}},[Q,ee,null===O||void 0===O?void 0:O.timeline]),xe=(0,a.useCallback)(e=>{"Enter"===e.key&&e.shiftKey?(e.preventDefault(),pe()):"Escape"===e.key&&(e.preventDefault(),me())},[pe,me]),he=(0,a.useCallback)((e,t)=>{te(s=>({...s,[e]:t,..."content"===e&&{details:t}}))},[]);(0,a.useEffect)(()=>{if(re.filter(e=>e.isNew&&!e.isEditing).length>0){const e=setTimeout(()=>{const e=re.map(e=>e.isNew&&!e.isEditing?{...e,isNew:!1}:e);null!==O&&void 0!==O&&O.timeline&&le(e)},5e3);return()=>clearTimeout(e)}},[re,null===O||void 0===O?void 0:O.timeline,le]);const ge=(0,a.useCallback)(()=>{x||j||(h(!0),C(!0),r&&r(),f(!1))},[r,x,j]),be=(0,a.useCallback)(async()=>{if(!D){E(!0);try{l(e=>{const t=e.cases.map(e=>String(e.id)===String(null===s||void 0===s?void 0:s.id)?{...e,...O}:e),a={...e,cases:t};return c(a),a}),A(!1),u("Case updated successfully","success")}catch(e){console.error("Error saving case:",e),u("Failed to save case","error")}finally{E(!1)}}},[null===s||void 0===s?void 0:s.id,O,l,c,u,D]),ye=(0,a.useCallback)(async()=>{if(!D&&window.confirm("Are you sure you want to delete this case?")){E(!0);try{l(e=>{const t=e.cases.filter(e=>String(e.id)!==String(null===s||void 0===s?void 0:s.id)),a={...e,cases:t};return c(a),a}),u("Case deleted successfully","success"),ge()}catch(e){console.error("Error deleting case:",e),u("Failed to delete case","error")}finally{E(!1)}}},[null===s||void 0===s?void 0:s.id,l,c,u,ge,D]),ve=(0,a.useCallback)((e,t)=>{z(s=>({...s,[e]:t}))},[]),fe=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=O[t]||"";return S?"textarea"===s?(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,P.jsx)("textarea",{value:i,onChange:e=>ve(t,e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",rows:a.rows||3,placeholder:`Enter ${e.toLowerCase()}...`})]}):"select"===s&&a.choices?(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,P.jsxs)("select",{value:i,onChange:e=>ve(t,e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",children:[(0,P.jsxs)("option",{value:"",children:["Select ",e.toLowerCase(),"..."]}),a.choices.map(e=>(0,P.jsx)("option",{value:e,children:e},e))]})]}):(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,P.jsx)("input",{type:s,value:i,onChange:e=>ve(t,"number"===s?Number(e.target.value):e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:`Enter ${e.toLowerCase()}...`})]}):"textarea"===s?(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,P.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border min-h-[2.5rem] text-gray-800",children:i||(0,P.jsx)("span",{className:"text-gray-400 italic",children:"Not specified"})})]}):(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,P.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border text-gray-800",children:i||(0,P.jsx)("span",{className:"text-gray-400 italic",children:"Not specified"})})]})};return t?(0,P.jsx)(o.N,{mode:"wait",onExitComplete:()=>{h(!1),C(!1),M(!1),i(),n&&n()},children:v&&(0,P.jsx)(R.P.div,{initial:"hidden",animate:"visible",exit:"exit",variants:J,className:"fixed inset-0 bg-black flex items-center justify-center z-50",style:{willChange:"backdrop-filter, opacity",backfaceVisibility:"hidden",transform:"translate3d(0, 0, 0)"},onClick:e=>e.target===e.currentTarget&&ge(),children:(0,P.jsxs)(R.P.div,{initial:"hidden",animate:"visible",exit:"exit",variants:W,className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full mx-4 max-h-[85vh] overflow-hidden",style:{willChange:"transform, opacity, scale",backfaceVisibility:"hidden"},onClick:e=>e.stopPropagation(),onAnimationStart:()=>{h(!0),r&&r()},onAnimationComplete:()=>{h(!1),n&&n()},children:[(0,P.jsxs)(R.P.div,{initial:"hidden",animate:"visible",exit:"exit",variants:V,className:"bg-gradient-to-r from-indigo-600 to-blue-600 text-white px-6 py-4 flex items-center justify-between",children:[(0,P.jsxs)("div",{className:"flex items-center gap-3",children:[(0,P.jsx)(b.A,{size:24}),(0,P.jsx)("h2",{className:"text-xl font-semibold",children:"Case Details"})]}),(0,P.jsxs)("div",{className:"flex items-center gap-2",children:[!S&&!D&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("button",{onClick:()=>A(!0),className:"text-white hover:text-gray-200 p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-all",title:"Edit",children:(0,P.jsx)(T.A,{size:20})}),(0,P.jsx)("button",{onClick:ye,className:"text-white hover:text-red-200 p-2 rounded-full hover:bg-red-500 hover:bg-opacity-30 transition-all",title:"Delete",children:(0,P.jsx)(_.A,{size:20})})]}),(0,P.jsx)("button",{onClick:ge,className:"text-white hover:text-gray-200 p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-all",children:(0,P.jsx)(m.A,{size:20})})]})]}),(0,P.jsx)("div",{className:"bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 border-b border-slate-600",children:(0,P.jsx)("nav",{className:"flex flex-wrap gap-2 px-6 py-4",children:[{key:"overview",label:"Overview",icon:b.A},{key:"narrative",label:"Narrative",icon:N.A},{key:"medications",label:"Medications",icon:F.A},{key:"therapy",label:"Therapy",icon:B.A},{key:"timeline",label:"Timeline",icon:g.A},{key:"insights",label:"Insights",icon:Y.A},{key:"related",label:"Related",icon:H.A}].map(e=>{let{key:t,label:s,icon:a}=e;return(0,P.jsxs)(R.P.button,{onClick:()=>{X||(q(!0),L(t),setTimeout(()=>q(!1),300))},className:"relative flex items-center gap-2 px-4 py-3 rounded-xl font-medium text-sm transition-all duration-300 "+($===t?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-lg shadow-blue-500/25":"text-slate-300 hover:text-white hover:bg-slate-700/50 hover:shadow-md"),whileHover:{scale:$===t?1:1.02},whileTap:{scale:.98},initial:!1,animate:{scale:$===t?1.05:1,boxShadow:$===t?"0 8px 25px rgba(59, 130, 246, 0.3), 0 0 20px rgba(99, 102, 241, 0.2)":"0 2px 8px rgba(0, 0, 0, 0.1)"},transition:{duration:.3,ease:"easeOut"},children:[(0,P.jsx)(a,{size:16,className:$===t?"drop-shadow-sm":""}),s,"timeline"===t&&re.some(e=>e.isNew)&&(0,P.jsx)("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center w-4 h-4 text-xs font-bold text-white bg-red-500 rounded-full animate-pulse",children:"!"}),$===t&&(0,P.jsx)(R.P.div,{layoutId:"tabGlow",className:"absolute inset-0 bg-gradient-to-r from-blue-400/20 to-indigo-500/20 rounded-xl blur-sm",initial:!1,transition:{type:"spring",bounce:.2,duration:.6}})]},t)})})}),(0,P.jsx)(R.P.div,{className:"relative overflow-hidden bg-gradient-to-br from-slate-50 to-slate-100",layout:"position",layoutRoot:!0,transition:{layout:{duration:.4,ease:"easeInOut"},height:{duration:.4,ease:"easeInOut"}},children:(0,P.jsxs)(o.N,{mode:"wait",initial:!1,onExitComplete:()=>q(!1),children:["overview"===$&&(0,P.jsx)(R.P.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},exit:{opacity:0,x:30},transition:{duration:.4,ease:"easeOut"},layout:"position",layoutId:"tabContent",className:"p-6 overflow-y-auto max-h-[calc(85vh-200px)] scrollbar-thin scrollbar-thumb-slate-400 scrollbar-track-slate-200",children:(0,P.jsxs)("div",{className:"space-y-6",children:[(0,P.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200",children:[(0,P.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[(0,P.jsx)(b.A,{size:20,className:"text-blue-600"}),"Demographics & Basic Info"]}),(0,P.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[fe("Case ID","case_id"),fe("Primary Diagnosis","primary_diagnosis"),fe("Age","age","number"),fe("Gender","gender","select",{choices:["Male","Female","Non-binary","Other"]})]})]}),(0,P.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200",children:[(0,P.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[(0,P.jsx)(d.A,{size:20,className:"text-amber-600"}),"Initial Impressions"]}),(0,P.jsxs)("div",{className:"space-y-4",children:[fe("Chief Complaint","chiefComplaint","textarea",{rows:3}),fe("Initial Presentation","initialPresentation","textarea",{rows:4})]})]})]})},"overview"),"narrative"===$&&(0,P.jsx)(R.P.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},exit:{opacity:0,x:30},transition:{duration:.4,ease:"easeOut"},layout:"position",layoutId:"tabContent",className:"p-6 overflow-y-auto max-h-[calc(85vh-200px)] scrollbar-thin scrollbar-thumb-slate-400 scrollbar-track-slate-200",children:(0,P.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200",children:[(0,P.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[(0,P.jsx)(N.A,{size:20,className:"text-green-600"}),"Patient Story & Narrative"]}),(0,P.jsxs)("div",{className:"space-y-6",children:[fe("Current Presentation","currentPresentation","textarea",{rows:8}),(0,P.jsx)("div",{className:"text-sm text-slate-600 bg-slate-50 p-4 rounded-lg",children:(0,P.jsx)("p",{className:"italic",children:"Use this space to tell the patient's story in your own words. Include context, progression, and your narrative understanding of their journey."})})]})]})},"narrative"),"timeline"===$&&(0,P.jsxs)(R.P.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},exit:{opacity:0,x:30},transition:{duration:.4,ease:"easeOut"},layout:"position",layoutId:"tabContent",className:"p-6 h-[calc(85vh-200px)] flex flex-col",children:[(0,P.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,P.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Case Timeline"}),(0,P.jsxs)("div",{className:"flex items-center gap-2",children:[(0,P.jsxs)(R.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:de,disabled:se||Q,className:"flex items-center gap-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-sm",children:[(0,P.jsx)(w.A,{size:16}),"Add Entry"]}),(0,P.jsxs)(R.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:oe,className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[(0,P.jsx)(U.A,{size:16}),"Scroll to Latest"]})]})]}),(0,P.jsxs)("div",{className:"relative flex-1",children:[(0,P.jsx)("div",{className:"absolute top-0 left-0 right-0 h-4 bg-gradient-to-b from-white to-transparent z-10 pointer-events-none"}),(0,P.jsxs)("div",{ref:ie,className:"h-full overflow-y-auto bg-gradient-to-br from-slate-900 to-slate-800 rounded-xl p-4 space-y-3 scrollbar-thin scrollbar-thumb-slate-600 scrollbar-track-slate-800",style:{scrollbarWidth:"thin",scrollbarColor:"#475569 #1e293b"},children:[(0,P.jsx)("div",{className:"absolute left-7 top-4 bottom-4 w-0.5 bg-gradient-to-b from-blue-400 via-purple-500 to-blue-400 opacity-30"}),(0,P.jsx)(o.N,{mode:"popLayout",children:re.map((e,t)=>{var s,a;const i=Q===e.id,r=G===e.id||i;return(0,P.jsxs)(R.P.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1,transition:{delay:e.isNew&&!e.isEditing?0:.05*t,duration:.4,type:"spring",stiffness:500,damping:30}},exit:{opacity:0,y:-20,scale:.95},layout:!0,className:"relative z-10 "+(e.isNew&&!i?"animate-pulse":""),children:[(0,P.jsx)("div",{className:"absolute left-6 top-4 w-3 h-3 rounded-full border-2 border-slate-900 z-20 "+("assessment"===e.type?"bg-green-500":"medication"===e.type?"bg-blue-500":"therapy"===e.type?"bg-purple-500":"note"===e.type?"bg-yellow-500":"bg-orange-500")}),(0,P.jsxs)(R.P.div,{layout:!0,"data-entry-id":e.id,whileHover:i?{}:{scale:1.01,boxShadow:"0 8px 20px rgba(59, 130, 246, 0.12)"},className:`ml-12 bg-gradient-to-r from-slate-800 to-slate-700 rounded-lg border-l-3 transition-all duration-300 ${"assessment"===e.type?"border-green-400":"medication"===e.type?"border-blue-400":"therapy"===e.type?"border-purple-400":"note"===e.type?"border-yellow-400":"border-orange-400"} ${e.isNew&&!i?"ring-1 ring-blue-400 ring-opacity-50":""} ${i?"ring-2 ring-green-400 ring-opacity-70":""}`,children:[(0,P.jsx)("div",{className:"p-4 "+(i?"":"cursor-pointer"),onClick:i?void 0:()=>{G===e.id?K(null):ue(e)},children:(0,P.jsxs)("div",{className:"flex items-start justify-between",children:[(0,P.jsxs)("div",{className:"flex-1",children:[(0,P.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,P.jsx)("h4",{className:"text-white font-semibold text-sm",children:i?ee.title:e.title}),e.isNew&&!i&&(0,P.jsx)(R.P.span,{animate:{scale:[1,1.1,1],opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-blue-500 text-white rounded-full",children:"New"}),i&&(0,P.jsx)("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-green-500 text-white rounded-full",children:"Editing"})]}),(0,P.jsxs)("div",{className:"flex items-center gap-4 text-xs text-slate-300 mb-2",children:[(0,P.jsxs)("span",{className:"flex items-center gap-1",children:[(0,P.jsx)(y.A,{size:12}),i?ee.date:e.date]}),(0,P.jsxs)("span",{className:"flex items-center gap-1",children:[(0,P.jsx)(g.A,{size:12}),i?ee.time:e.time]}),(0,P.jsxs)("span",{children:["by ",i?ee.author:e.author]})]}),(0,P.jsx)("p",{className:"text-slate-200 text-sm",children:i?ee.content||"No content...":(null===(s=e.content)||void 0===s?void 0:s.length)>100?`${e.content.substring(0,100)}...`:e.content||"No content..."})]}),!i&&(0,P.jsx)(R.P.div,{animate:{rotate:r?180:0},transition:{duration:.2},children:(0,P.jsx)(T.A,{size:16,className:"text-slate-400"})})]})}),(0,P.jsx)(o.N,{children:i&&(0,P.jsx)(R.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:(0,P.jsx)("div",{className:"px-4 pb-4 pt-0 border-t border-slate-600",children:(0,P.jsxs)("div",{className:"space-y-3 mt-3",children:[(0,P.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-xs font-medium text-slate-300 mb-1",children:"Entry Type"}),(0,P.jsxs)("select",{value:ee.type||"followup",onChange:e=>he("type",e.target.value),className:"w-full px-2 py-1 bg-slate-700 border border-slate-600 rounded text-white text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:[(0,P.jsx)("option",{value:"assessment",children:"Assessment"}),(0,P.jsx)("option",{value:"medication",children:"Medication"}),(0,P.jsx)("option",{value:"therapy",children:"Therapy"}),(0,P.jsx)("option",{value:"followup",children:"Follow-up"}),(0,P.jsx)("option",{value:"note",children:"Note"})]})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-xs font-medium text-slate-300 mb-1",children:"Timestamp"}),(0,P.jsx)("input",{type:"datetime-local",value:ee.timestamp?new Date(ee.timestamp).toISOString().slice(0,-1):(new Date).toISOString().slice(0,-1),onChange:e=>he("timestamp",new Date(e.target.value).toISOString()),className:"w-full px-2 py-1 bg-slate-700 border border-slate-600 rounded text-white text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-xs font-medium text-slate-300 mb-1",children:"Content"}),(0,P.jsx)("textarea",{value:ee.content||"",onChange:e=>he("content",e.target.value),onKeyPress:xe,placeholder:"Enter clinical notes, observations, or updates...",rows:4,className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded text-white text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 resize-none"}),(0,P.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"Press Shift+Enter to save, Escape to cancel"})]}),(0,P.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,P.jsx)(R.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:me,className:"px-3 py-1 bg-slate-600 text-white rounded hover:bg-slate-500 transition-colors text-sm",children:"Cancel"}),(0,P.jsxs)(R.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:pe,disabled:!(null!==(a=ee.content)&&void 0!==a&&a.trim()),className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 disabled:bg-gray-500 disabled:cursor-not-allowed transition-colors text-sm flex items-center gap-1",children:[(0,P.jsx)(k.A,{size:14}),"Save"]})]})]})})})}),(0,P.jsx)(o.N,{children:r&&!i&&e.details&&e.details!==e.content&&(0,P.jsx)(R.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:(0,P.jsxs)("div",{className:"px-4 pb-4 border-t border-slate-600",children:[(0,P.jsx)("h5",{className:"text-white font-medium text-sm mb-2 mt-3",children:"Detailed Notes:"}),(0,P.jsx)("p",{className:"text-slate-300 text-sm leading-relaxed",children:e.details})]})})})]})]},e.id)})}),0===re.length&&(0,P.jsxs)(R.P.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[(0,P.jsx)(g.A,{size:48,className:"mx-auto text-slate-500 mb-4"}),(0,P.jsx)("p",{className:"text-slate-400 text-lg mb-2",children:"No timeline entries yet"}),(0,P.jsx)("p",{className:"text-slate-500 text-sm",children:'Click "Add Entry" to create the first timeline entry'})]})]}),(0,P.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-4 bg-gradient-to-t from-white to-transparent z-10 pointer-events-none"})]})]},"timeline")]})}),S&&(0,P.jsxs)("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,P.jsx)("div",{className:"text-sm text-gray-500",children:"Changes will be auto-saved"}),(0,P.jsxs)("div",{className:"flex items-center gap-3",children:[(0,P.jsx)("button",{onClick:()=>{A(!1),z({...s})},disabled:D,className:"px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors",children:"Cancel"}),(0,P.jsxs)("button",{onClick:be,disabled:D,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[D?(0,P.jsx)(p.A,{size:16,className:"animate-spin"}):(0,P.jsx)(k.A,{size:16}),D?"Saving...":"Save Changes"]})]})]})]})},`case-modal-${(null===s||void 0===s?void 0:s.id)||"default"}`)}):null},G=a.memo(q,(e,t)=>{var s,a,i,r;return e.isOpen===t.isOpen&&(null===(s=e.data)||void 0===s?void 0:s.id)===(null===(a=t.data)||void 0===a?void 0:a.id)&&(null===(i=e.data)||void 0===i?void 0:i.updated_at)===(null===(r=t.data)||void 0===r?void 0:r.updated_at)});var K=s(4919),Q=s(1161),Z=s(8487),ee=s(6210),te=s(5347),se=s(5258);const ae={hidden:{opacity:0,scale:.3,y:50,rotate:-5},visible:{opacity:1,scale:1,y:0,rotate:0,transition:{type:"spring",damping:25,stiffness:300,duration:.6}},exit:{opacity:0,scale:.7,y:30,rotate:-3,transition:{type:"easeInOut",duration:.4}}},ie={hidden:{opacity:0,backdropFilter:"blur(0px)"},visible:{opacity:1,backdropFilter:"blur(8px)",transition:{duration:.4,ease:"easeOut"}},exit:{opacity:0,backdropFilter:"blur(0px)",transition:{duration:.3,ease:"easeIn"}}},re={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"easeOut",duration:.3,delay:.1}},exit:{opacity:0,y:-10,scale:1.02,transition:{type:"easeIn",duration:.2}}},oe=e=>{let{isOpen:t,data:s,onClose:i,onAnimationStart:r,onAnimationEnd:n,setMindMapData:l,autoSaveMindMapData:c,addToast:d}=e;const[u,h]=(0,a.useState)(!1),[b,y]=(0,a.useState)(!1),[v,j]=(0,a.useState)(!1),[C,S]=(0,a.useState)(!1),[A,O]=(0,a.useState)({}),[z,D]=(0,a.useState)(!1),[E,I]=(0,a.useState)(!1),[M,$]=(0,a.useState)("overview"),[L,X]=(0,a.useState)(!1),[F,B]=(0,a.useState)(""),[U,W]=(0,a.useState)(!1);(0,a.useEffect)(()=>{t&&s&&!E?(y(!0),O({...s,resources:s.resources||[],flashcard_count:s.flashcard_count||0,completed_flashcards:s.completed_flashcards||0}),I(!0),h(!0),r&&r(),setTimeout(()=>{h(!1),n&&n()},600)):!t&&E&&I(!1)},[t,E,r,n]),(0,a.useEffect)(()=>{!(t&&s&&E)||C||z||L||u||O({...s,resources:s.resources||[],flashcard_count:s.flashcard_count||0,completed_flashcards:s.completed_flashcards||0})},[null===s||void 0===s?void 0:s.id,t,E,C,z,L,u]);const J=(0,a.useMemo)(()=>{const e=A.flashcard_count||0,t=A.completed_flashcards||0;return e>0?Math.round(t/e*100):0},[A.flashcard_count,A.completed_flashcards]),V=(0,a.useCallback)(()=>{u||v||(h(!0),j(!0),r&&r(),y(!1))},[r,u,v]),q=(0,a.useCallback)(async()=>{if(!z){D(!0);try{l(e=>{const t=e.topics.map(e=>String(e.id)===String(null===s||void 0===s?void 0:s.id)?{...e,...A}:e),a={...e,topics:t};return c(a),a}),S(!1),d("Topic updated successfully","success")}catch(e){console.error("Error saving topic:",e),d("Failed to save topic","error")}finally{D(!1)}}},[null===s||void 0===s?void 0:s.id,A,l,c,d,z]),G=(0,a.useCallback)(async()=>{if(!z&&window.confirm("Are you sure you want to delete this topic?")){D(!0);try{l(e=>{const t=e.topics.filter(e=>String(e.id)!==String(null===s||void 0===s?void 0:s.id)),a={...e,topics:t};return c(a),a}),d("Topic deleted successfully","success"),V()}catch(e){console.error("Error deleting topic:",e),d("Failed to delete topic","error")}finally{D(!1)}}},[null===s||void 0===s?void 0:s.id,l,c,d,V,z]),oe=(0,a.useCallback)((e,t)=>{O(s=>({...s,[e]:t}))},[]),ne=(0,a.useCallback)(()=>{if(!F.trim())return;const e=[...A.resources||[],F.trim()];oe("resources",e),B(""),W(!1)},[F,A.resources,oe]),le=(0,a.useCallback)(e=>{const t=A.resources.filter((t,s)=>s!==e);oe("resources",t)},[A.resources,oe]),ce=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=A[t]||"";return C?"textarea"===s?(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,P.jsx)("textarea",{value:i,onChange:e=>oe(t,e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",rows:a.rows||3,placeholder:`Enter ${e.toLowerCase()}...`})]}):"select"===s&&a.choices?(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,P.jsxs)("select",{value:i,onChange:e=>oe(t,e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",children:[(0,P.jsxs)("option",{value:"",children:["Select ",e.toLowerCase(),"..."]}),a.choices.map(e=>(0,P.jsx)("option",{value:e,children:e},e))]})]}):(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,P.jsx)("input",{type:s,value:i,onChange:e=>oe(t,"number"===s?Number(e.target.value):e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:`Enter ${e.toLowerCase()}...`})]}):"textarea"===s?(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,P.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border min-h-[2.5rem] text-gray-800",children:i||(0,P.jsx)("span",{className:"text-gray-400 italic",children:"Not specified"})})]}):(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,P.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border text-gray-800",children:i||(0,P.jsx)("span",{className:"text-gray-400 italic",children:"Not specified"})})]})};return t?(0,P.jsx)(o.N,{mode:"wait",onExitComplete:()=>{h(!1),j(!1),I(!1),i(),n&&n()},children:b&&(0,P.jsx)(R.P.div,{initial:"hidden",animate:"visible",exit:"exit",variants:ie,className:"fixed inset-0 bg-black flex items-center justify-center z-50",style:{willChange:"backdrop-filter, opacity",backfaceVisibility:"hidden",transform:"translate3d(0, 0, 0)"},onClick:e=>e.target===e.currentTarget&&V(),children:(0,P.jsxs)(R.P.div,{initial:"hidden",animate:"visible",exit:"exit",variants:ae,className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full mx-4 max-h-[85vh] overflow-hidden",style:{willChange:"transform, opacity, scale",backfaceVisibility:"hidden"},onClick:e=>e.stopPropagation(),onAnimationStart:()=>{h(!0),r&&r()},onAnimationComplete:()=>{h(!1),n&&n()},children:[(0,P.jsxs)(R.P.div,{initial:"hidden",animate:"visible",exit:"exit",variants:re,className:"bg-gradient-to-br from-slate-900 to-slate-800 text-white px-6 py-4 flex items-center justify-between",children:[(0,P.jsxs)("div",{className:"flex items-center gap-3",children:[(0,P.jsx)(f.A,{size:24}),(0,P.jsx)("h2",{className:"text-xl font-semibold",children:"Topic Details"})]}),(0,P.jsxs)("div",{className:"flex items-center gap-2",children:[!C&&!z&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("button",{onClick:()=>S(!0),className:"text-white hover:text-gray-200 p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-all",title:"Edit",children:(0,P.jsx)(T.A,{size:20})}),(0,P.jsx)("button",{onClick:G,className:"text-white hover:text-red-200 p-2 rounded-full hover:bg-red-500 hover:bg-opacity-30 transition-all",title:"Delete",children:(0,P.jsx)(_.A,{size:20})})]}),(0,P.jsx)("button",{onClick:V,className:"text-white hover:text-gray-200 p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-all",children:(0,P.jsx)(m.A,{size:20})})]})]}),(0,P.jsx)("div",{className:"bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 border-b border-slate-600",children:(0,P.jsx)("nav",{className:"flex flex-wrap gap-2 px-6 py-4",children:[{key:"overview",label:"Overview",icon:f.A},{key:"progress",label:"Progress",icon:K.A},{key:"resources",label:"Resources",icon:N.A},{key:"insights",label:"Insights",icon:Q.A},{key:"connections",label:"Connections",icon:Z.A}].map(e=>{let{key:t,label:s,icon:a}=e;return(0,P.jsxs)(R.P.button,{onClick:()=>{L||(X(!0),$(t),setTimeout(()=>X(!1),300))},className:"relative flex items-center gap-2 px-4 py-3 rounded-xl font-medium text-sm transition-all duration-300 "+(M===t?"bg-gradient-to-r from-purple-500 to-indigo-600 text-white shadow-lg shadow-purple-500/25":"text-slate-300 hover:text-white hover:bg-slate-700/50 hover:shadow-md"),whileHover:{scale:M===t?1:1.02},whileTap:{scale:.98},initial:!1,animate:{scale:M===t?1.05:1,boxShadow:M===t?"0 8px 25px rgba(147, 51, 234, 0.3), 0 0 20px rgba(99, 102, 241, 0.2)":"0 2px 8px rgba(0, 0, 0, 0.1)"},transition:{duration:.3,ease:"easeOut"},children:[(0,P.jsx)(a,{size:16,className:M===t?"drop-shadow-sm":""}),s,M===t&&(0,P.jsx)(R.P.div,{layoutId:"topicTabGlow",className:"absolute inset-0 bg-gradient-to-r from-purple-400/20 to-indigo-500/20 rounded-xl blur-sm",initial:!1,transition:{type:"spring",bounce:.2,duration:.6}})]},t)})})}),(0,P.jsx)(R.P.div,{className:"relative overflow-hidden bg-gradient-to-br from-slate-50 to-slate-100",layout:"position",layoutRoot:!0,transition:{layout:{duration:.4,ease:"easeInOut"},height:{duration:.4,ease:"easeInOut"}},children:(0,P.jsxs)(o.N,{mode:"wait",initial:!1,onExitComplete:()=>X(!1),children:["overview"===M&&(0,P.jsx)(R.P.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},exit:{opacity:0,x:30},transition:{duration:.4,ease:"easeOut"},layout:"position",layoutId:"tabContent",className:"p-6 overflow-y-auto max-h-[calc(85vh-200px)] scrollbar-thin scrollbar-thumb-slate-400 scrollbar-track-slate-200",children:(0,P.jsxs)("div",{className:"space-y-6",children:[(0,P.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200",children:[(0,P.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[(0,P.jsx)(x.A,{size:20,className:"text-purple-600"}),"Topic Information"]}),(0,P.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[ce("Title","title"),ce("Category","category","select",{choices:["Mood Disorders","Anxiety Disorders","Psychotic Disorders","Personality Disorders","Substance Use Disorders","Neurodevelopmental Disorders","Trauma-Related Disorders","Eating Disorders","Sleep Disorders","Neurocognitive Disorders","Other"]})]}),(0,P.jsx)("div",{className:"mt-6",children:ce("Description","description","textarea",{rows:4})})]}),(0,P.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200",children:[(0,P.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[(0,P.jsx)(H.A,{size:20,className:"text-green-600"}),"Learning Progress"]}),(0,P.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[ce("Total Flashcards","flashcard_count","number"),ce("Completed Flashcards","completed_flashcards","number")]}),(0,P.jsxs)("div",{className:"mt-6",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,P.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Progress"}),(0,P.jsxs)("span",{className:"text-sm text-gray-500",children:[J,"%"]})]}),(0,P.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,P.jsx)(R.P.div,{className:"bg-gradient-to-r from-purple-500 to-indigo-600 h-2 rounded-full",initial:{width:0},animate:{width:`${J}%`},transition:{duration:.8,ease:"easeOut"}})})]})]})]})},"overview"),"progress"===M&&(0,P.jsx)(R.P.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},exit:{opacity:0,x:30},transition:{duration:.4,ease:"easeOut"},layout:"position",layoutId:"tabContent",className:"p-6 overflow-y-auto max-h-[calc(85vh-200px)] scrollbar-thin scrollbar-thumb-slate-400 scrollbar-track-slate-200",children:(0,P.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200",children:[(0,P.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-6 flex items-center gap-2",children:[(0,P.jsx)(K.A,{size:20,className:"text-blue-600"}),"Learning Analytics"]}),(0,P.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,P.jsxs)(R.P.div,{whileHover:{scale:1.02},className:"bg-gradient-to-br from-green-50 to-emerald-50 p-4 rounded-lg border border-green-200",children:[(0,P.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,P.jsx)(ee.A,{size:20,className:"text-green-600"}),(0,P.jsx)("span",{className:"font-medium text-green-800",children:"Completed"})]}),(0,P.jsx)("div",{className:"text-2xl font-bold text-green-700",children:A.completed_flashcards||0}),(0,P.jsx)("div",{className:"text-sm text-green-600",children:"flashcards mastered"})]}),(0,P.jsxs)(R.P.div,{whileHover:{scale:1.02},className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-4 rounded-lg border border-blue-200",children:[(0,P.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,P.jsx)(g.A,{size:20,className:"text-blue-600"}),(0,P.jsx)("span",{className:"font-medium text-blue-800",children:"Remaining"})]}),(0,P.jsx)("div",{className:"text-2xl font-bold text-blue-700",children:Math.max(0,(A.flashcard_count||0)-(A.completed_flashcards||0))}),(0,P.jsx)("div",{className:"text-sm text-blue-600",children:"flashcards to review"})]}),(0,P.jsxs)(R.P.div,{whileHover:{scale:1.02},className:"bg-gradient-to-br from-purple-50 to-violet-50 p-4 rounded-lg border border-purple-200",children:[(0,P.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,P.jsx)(te.A,{size:20,className:"text-purple-600"}),(0,P.jsx)("span",{className:"font-medium text-purple-800",children:"Progress"})]}),(0,P.jsxs)("div",{className:"text-2xl font-bold text-purple-700",children:[J,"%"]}),(0,P.jsx)("div",{className:"text-sm text-purple-600",children:"completion rate"})]})]}),(0,P.jsxs)("div",{className:"mb-6",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,P.jsx)("span",{className:"text-lg font-medium text-gray-800",children:"Overall Progress"}),(0,P.jsxs)("span",{className:"text-sm text-gray-500",children:[A.completed_flashcards||0," / ",A.flashcard_count||0]})]}),(0,P.jsx)("div",{className:"relative",children:(0,P.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-4",children:(0,P.jsx)(R.P.div,{className:"bg-gradient-to-r from-purple-500 via-blue-500 to-indigo-600 h-4 rounded-full flex items-center justify-end pr-2",initial:{width:0},animate:{width:`${J}%`},transition:{duration:1.2,ease:"easeOut"},children:J>10&&(0,P.jsxs)("span",{className:"text-xs font-bold text-white drop-shadow-sm",children:[J,"%"]})})})})]})]})},"progress"),"resources"===M&&(0,P.jsx)(R.P.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},exit:{opacity:0,x:30},transition:{duration:.4,ease:"easeOut"},layout:"position",layoutId:"tabContent",className:"p-6 overflow-y-auto max-h-[calc(85vh-200px)] scrollbar-thin scrollbar-thumb-slate-400 scrollbar-track-slate-200",children:(0,P.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,P.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[(0,P.jsx)(N.A,{size:20,className:"text-orange-600"}),"Learning Resources"]}),C&&(0,P.jsxs)("button",{onClick:()=>W(!U),className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[(0,P.jsx)(w.A,{size:16}),"Add Resource"]})]}),C&&U&&(0,P.jsx)(R.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:(0,P.jsxs)("div",{className:"flex gap-3",children:[(0,P.jsx)("input",{type:"text",value:F,onChange:e=>B(e.target.value),placeholder:"Enter resource URL or description...",className:"flex-1 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyPress:e=>"Enter"===e.key&&ne()}),(0,P.jsx)("button",{onClick:ne,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add"})]})}),(0,P.jsx)("div",{className:"space-y-3",children:A.resources&&A.resources.length>0?A.resources.map((e,t)=>(0,P.jsxs)(R.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border",children:[(0,P.jsx)("span",{className:"text-gray-700",children:e}),C&&(0,P.jsx)("button",{onClick:()=>le(t),className:"text-red-500 hover:text-red-700 p-1 rounded",children:(0,P.jsx)(m.A,{size:16})})]},t)):(0,P.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,P.jsx)(N.A,{size:48,className:"mx-auto mb-3 text-gray-300"}),(0,P.jsx)("p",{children:"No resources added yet"}),C&&(0,P.jsx)("p",{className:"text-sm mt-1",children:'Click "Add Resource" to get started'})]})})]})},"resources"),"insights"===M&&(0,P.jsx)(R.P.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},exit:{opacity:0,x:30},transition:{duration:.4,ease:"easeOut"},layout:"position",layoutId:"tabContent",className:"p-6 overflow-y-auto max-h-[calc(85vh-200px)] scrollbar-thin scrollbar-thumb-slate-400 scrollbar-track-slate-200",children:(0,P.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200",children:[(0,P.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-6 flex items-center gap-2",children:[(0,P.jsx)(Q.A,{size:20,className:"text-yellow-600"}),"Learning Insights"]}),(0,P.jsxs)("div",{className:"space-y-4",children:[(0,P.jsx)(R.P.div,{whileHover:{scale:1.01},className:"p-4 bg-gradient-to-r from-yellow-50 to-amber-50 rounded-lg border border-yellow-200",children:(0,P.jsxs)("div",{className:"flex items-start gap-3",children:[(0,P.jsx)(Y.A,{size:20,className:"text-yellow-600 mt-1"}),(0,P.jsxs)("div",{children:[(0,P.jsx)("h4",{className:"font-medium text-yellow-800 mb-1",children:"Study Recommendation"}),(0,P.jsx)("p",{className:"text-yellow-700 text-sm",children:"Based on your progress, consider reviewing foundational concepts before advancing to complex topics."})]})]})}),(0,P.jsx)(R.P.div,{whileHover:{scale:1.01},className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:(0,P.jsxs)("div",{className:"flex items-start gap-3",children:[(0,P.jsx)(x.A,{size:20,className:"text-blue-600 mt-1"}),(0,P.jsxs)("div",{children:[(0,P.jsx)("h4",{className:"font-medium text-blue-800 mb-1",children:"Learning Pattern"}),(0,P.jsx)("p",{className:"text-blue-700 text-sm",children:"You tend to perform better with visual learning materials. Consider adding more diagrams and charts."})]})]})}),(0,P.jsx)(R.P.div,{whileHover:{scale:1.01},className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200",children:(0,P.jsxs)("div",{className:"flex items-start gap-3",children:[(0,P.jsx)(H.A,{size:20,className:"text-green-600 mt-1"}),(0,P.jsxs)("div",{children:[(0,P.jsx)("h4",{className:"font-medium text-green-800 mb-1",children:"Next Steps"}),(0,P.jsx)("p",{className:"text-green-700 text-sm",children:"Focus on completing the remaining flashcards to solidify your understanding of this topic."})]})]})})]})]})},"insights"),"connections"===M&&(0,P.jsx)(R.P.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},exit:{opacity:0,x:30},transition:{duration:.4,ease:"easeOut"},layout:"position",layoutId:"tabContent",className:"p-6 overflow-y-auto max-h-[calc(85vh-200px)] scrollbar-thin scrollbar-thumb-slate-400 scrollbar-track-slate-200",children:(0,P.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200",children:[(0,P.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-6 flex items-center gap-2",children:[(0,P.jsx)(Z.A,{size:20,className:"text-indigo-600"}),"Related Content"]}),(0,P.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,P.jsx)(se.A,{size:48,className:"mx-auto mb-3 text-gray-300"}),(0,P.jsx)("p",{children:"No connections found"}),(0,P.jsx)("p",{className:"text-sm mt-1",children:"Create connections by linking this topic to cases, tasks, or literature"})]})]})},"connections")]})}),C&&(0,P.jsxs)("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,P.jsx)("div",{className:"text-sm text-gray-500",children:"Changes will be auto-saved"}),(0,P.jsxs)("div",{className:"flex items-center gap-3",children:[(0,P.jsx)("button",{onClick:()=>{S(!1),O({...s}),W(!1)},disabled:z,className:"px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors",children:"Cancel"}),(0,P.jsxs)("button",{onClick:q,disabled:z,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[z?(0,P.jsx)(p.A,{size:16,className:"animate-spin"}):(0,P.jsx)(k.A,{size:16}),z?"Saving...":"Save Changes"]})]})]})]})},`topic-modal-${(null===s||void 0===s?void 0:s.id)||"default"}`)}):null},ne=a.memo(oe,(e,t)=>{var s,a,i,r;return e.isOpen===t.isOpen&&(null===(s=e.data)||void 0===s?void 0:s.id)===(null===(a=t.data)||void 0===a?void 0:a.id)&&(null===(i=e.data)||void 0===i?void 0:i.updated_at)===(null===(r=t.data)||void 0===r?void 0:r.updated_at)});var le=s(1482),ce=s(7719),de=s(4830),ue=s(9340);const pe={hidden:{opacity:0,scale:.3,y:50,rotate:-5},visible:{opacity:1,scale:1,y:0,rotate:0,transition:{type:"spring",damping:25,stiffness:300,duration:.6}},exit:{opacity:0,scale:.7,y:30,rotate:-3,transition:{type:"easeInOut",duration:.4}}},me={hidden:{opacity:0,backdropFilter:"blur(0px)"},visible:{opacity:1,backdropFilter:"blur(8px)",transition:{duration:.4,ease:"easeOut"}},exit:{opacity:0,backdropFilter:"blur(0px)",transition:{duration:.3,ease:"easeIn"}}},xe={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"easeOut",duration:.3,delay:.1}},exit:{opacity:0,y:-10,scale:1.02,transition:{type:"easeIn",duration:.2}}},he=e=>{var t;let{isOpen:s,data:i,onClose:r,onAnimationStart:n,onAnimationEnd:l,setMindMapData:c,autoSaveMindMapData:d,addToast:u}=e;const[x,h]=(0,a.useState)(!1),[b,f]=(0,a.useState)(!1),[j,w]=(0,a.useState)(!1),[C,S]=(0,a.useState)(!1),[A,O]=(0,a.useState)({}),[z,D]=(0,a.useState)(!1),[E,I]=(0,a.useState)(!1),[M,$]=(0,a.useState)("overview"),[L,X]=(0,a.useState)(!1);(0,a.useEffect)(()=>{s&&i&&!E?(f(!0),O({...i,status:i.status||"pending",priority:i.priority||"medium"}),I(!0),h(!0),n&&n(),setTimeout(()=>{h(!1),l&&l()},600)):!s&&E&&I(!1)},[s,E,n,l]),(0,a.useEffect)(()=>{!(s&&i&&E)||C||z||L||x||O({...i,status:i.status||"pending",priority:i.priority||"medium"})},[null===i||void 0===i?void 0:i.id,s,E,C,z,L,x]);const F=(0,a.useMemo)(()=>({low:{color:"green",label:"Low Priority",icon:le.A},medium:{color:"yellow",label:"Medium Priority",icon:le.A},high:{color:"red",label:"High Priority",icon:le.A},urgent:{color:"purple",label:"Urgent",icon:ce.A}}),[]),B=(0,a.useMemo)(()=>({pending:{color:"gray",label:"Pending",icon:g.A},in_progress:{color:"blue",label:"In Progress",icon:de.A},completed:{color:"green",label:"Completed",icon:v.A},paused:{color:"orange",label:"Paused",icon:ue.A}}),[]),Y=(0,a.useMemo)(()=>{if(!A.due_date)return!1;return new Date(A.due_date)<new Date&&"completed"!==A.status},[A.due_date,A.status]),U=(0,a.useCallback)(()=>{x||j||(h(!0),w(!0),n&&n(),f(!1))},[n,x,j]),W=(0,a.useCallback)(async()=>{if(!z){D(!0);try{c(e=>{const t=e.tasks.map(e=>String(e.id)===String(null===i||void 0===i?void 0:i.id)?{...e,...A}:e),s={...e,tasks:t};return d(s),s}),S(!1),u("Task updated successfully","success")}catch(e){console.error("Error saving task:",e),u("Failed to save task","error")}finally{D(!1)}}},[null===i||void 0===i?void 0:i.id,A,c,d,u,z]),J=(0,a.useCallback)(async()=>{if(!z&&window.confirm("Are you sure you want to delete this task?")){D(!0);try{c(e=>{const t=e.tasks.filter(e=>String(e.id)!==String(null===i||void 0===i?void 0:i.id)),s={...e,tasks:t};return d(s),s}),u("Task deleted successfully","success"),U()}catch(e){console.error("Error deleting task:",e),u("Failed to delete task","error")}finally{D(!1)}}},[null===i||void 0===i?void 0:i.id,c,d,u,U,z]),V=(0,a.useCallback)(e=>{O(t=>({...t,status:e}))},[]),q=(0,a.useCallback)((e,t)=>{O(s=>({...s,[e]:t}))},[]),G=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=A[t]||"";return C?"textarea"===s?(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,P.jsx)("textarea",{value:i,onChange:e=>q(t,e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",rows:a.rows||3,placeholder:`Enter ${e.toLowerCase()}...`})]}):"select"===s&&a.choices?(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,P.jsxs)("select",{value:i,onChange:e=>q(t,e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",children:[(0,P.jsxs)("option",{value:"",children:["Select ",e.toLowerCase(),"..."]}),a.choices.map(e=>(0,P.jsx)("option",{value:e.value,children:e.label},e.value))]})]}):"date"===s?(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,P.jsx)("input",{type:"date",value:i,onChange:e=>q(t,e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"})]}):(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,P.jsx)("input",{type:s,value:i,onChange:e=>q(t,"number"===s?Number(e.target.value):e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:`Enter ${e.toLowerCase()}...`})]}):"textarea"===s?(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,P.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border min-h-[2.5rem] text-gray-800",children:i||(0,P.jsx)("span",{className:"text-gray-400 italic",children:"Not specified"})})]}):"select"===s?(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,P.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border text-gray-800",children:i||(0,P.jsx)("span",{className:"text-gray-400 italic",children:"Not specified"})})]}):"date"===s?(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,P.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border text-gray-800",children:i?new Date(i).toLocaleDateString():(0,P.jsx)("span",{className:"text-gray-400 italic",children:"Not set"})})]}):(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,P.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border text-gray-800",children:i||(0,P.jsx)("span",{className:"text-gray-400 italic",children:"Not specified"})})]})};return s?(0,P.jsx)(o.N,{mode:"wait",onExitComplete:()=>{h(!1),w(!1),I(!1),r(),l&&l()},children:b&&(0,P.jsx)(R.P.div,{initial:"hidden",animate:"visible",exit:"exit",variants:me,className:"fixed inset-0 bg-black flex items-center justify-center z-50",style:{willChange:"backdrop-filter, opacity",backfaceVisibility:"hidden",transform:"translate3d(0, 0, 0)"},onClick:e=>e.target===e.currentTarget&&U(),children:(0,P.jsxs)(R.P.div,{initial:"hidden",animate:"visible",exit:"exit",variants:pe,className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full mx-4 max-h-[85vh] overflow-hidden",style:{willChange:"transform, opacity, scale",backfaceVisibility:"hidden"},onClick:e=>e.stopPropagation(),onAnimationStart:()=>{h(!0),n&&n()},onAnimationComplete:()=>{h(!1),l&&l()},children:[(0,P.jsxs)(R.P.div,{initial:"hidden",animate:"visible",exit:"exit",variants:xe,className:"bg-gradient-to-br from-slate-900 to-slate-800 text-white px-6 py-4 flex items-center justify-between",children:[(0,P.jsxs)("div",{className:"flex items-center gap-3",children:[(0,P.jsx)(v.A,{size:24}),(0,P.jsx)("h2",{className:"text-xl font-semibold",children:"Task Details"}),Y&&(0,P.jsxs)(R.P.div,{animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},className:"flex items-center gap-1 px-2 py-1 bg-red-500 rounded-full text-xs font-medium",children:[(0,P.jsx)(ce.A,{size:12}),"Overdue"]})]}),(0,P.jsxs)("div",{className:"flex items-center gap-2",children:[!C&&!z&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("button",{onClick:()=>S(!0),className:"text-white hover:text-gray-200 p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-all",title:"Edit",children:(0,P.jsx)(T.A,{size:20})}),(0,P.jsx)("button",{onClick:J,className:"text-white hover:text-red-200 p-2 rounded-full hover:bg-red-500 hover:bg-opacity-30 transition-all",title:"Delete",children:(0,P.jsx)(_.A,{size:20})})]}),(0,P.jsx)("button",{onClick:U,className:"text-white hover:text-gray-200 p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-all",children:(0,P.jsx)(m.A,{size:20})})]})]}),(0,P.jsx)("div",{className:"bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 border-b border-slate-600",children:(0,P.jsx)("nav",{className:"flex flex-wrap gap-2 px-6 py-4",children:[{key:"overview",label:"Overview",icon:v.A},{key:"progress",label:"Progress",icon:K.A},{key:"connections",label:"Connections",icon:Z.A},{key:"details",label:"Details",icon:N.A}].map(e=>{let{key:t,label:s,icon:a}=e;return(0,P.jsxs)(R.P.button,{onClick:()=>{L||(X(!0),$(t),setTimeout(()=>X(!1),300))},className:"relative flex items-center gap-2 px-4 py-3 rounded-xl font-medium text-sm transition-all duration-300 "+(M===t?"bg-gradient-to-r from-emerald-500 to-teal-600 text-white shadow-lg shadow-emerald-500/25":"text-slate-300 hover:text-white hover:bg-slate-700/50 hover:shadow-md"),whileHover:{scale:M===t?1:1.02},whileTap:{scale:.98},initial:!1,animate:{scale:M===t?1.05:1,boxShadow:M===t?"0 8px 25px rgba(16, 185, 129, 0.3), 0 0 20px rgba(20, 184, 166, 0.2)":"0 2px 8px rgba(0, 0, 0, 0.1)"},transition:{duration:.3,ease:"easeOut"},children:[(0,P.jsx)(a,{size:16,className:M===t?"drop-shadow-sm":""}),s,M===t&&(0,P.jsx)(R.P.div,{layoutId:"taskTabGlow",className:"absolute inset-0 bg-gradient-to-r from-emerald-400/20 to-teal-500/20 rounded-xl blur-sm",initial:!1,transition:{type:"spring",bounce:.2,duration:.6}})]},t)})})}),(0,P.jsx)(R.P.div,{className:"relative overflow-hidden bg-gradient-to-br from-slate-50 to-slate-100",layout:"position",layoutRoot:!0,transition:{layout:{duration:.4,ease:"easeInOut"},height:{duration:.4,ease:"easeInOut"}},children:(0,P.jsxs)(o.N,{mode:"wait",initial:!1,onExitComplete:()=>X(!1),children:["overview"===M&&(0,P.jsx)(R.P.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},exit:{opacity:0,x:30},transition:{duration:.4,ease:"easeOut"},layout:"position",layoutId:"tabContent",className:"p-6 overflow-y-auto max-h-[calc(85vh-200px)] scrollbar-thin scrollbar-thumb-slate-400 scrollbar-track-slate-200",children:(0,P.jsxs)("div",{className:"space-y-6",children:[(0,P.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200",children:[(0,P.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[(0,P.jsx)(H.A,{size:20,className:"text-emerald-600"}),"Task Information"]}),(0,P.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[G("Title","title"),G("Priority","priority","select",{choices:[{value:"low",label:"Low Priority"},{value:"medium",label:"Medium Priority"},{value:"high",label:"High Priority"},{value:"urgent",label:"Urgent"}]})]}),(0,P.jsx)("div",{className:"mt-6",children:G("Description","description","textarea",{rows:4})})]}),(0,P.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200",children:[(0,P.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[(0,P.jsx)(g.A,{size:20,className:"text-blue-600"}),"Status & Timeline"]}),(0,P.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[G("Status","status","select",{choices:[{value:"pending",label:"Pending"},{value:"in_progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"paused",label:"Paused"}]}),G("Due Date","due_date","date")]}),(0,P.jsxs)("div",{className:"mt-6",children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Quick Status Update"}),(0,P.jsx)("div",{className:"flex flex-wrap gap-3",children:Object.entries(B).map(e=>{let[t,s]=e;const a=s.icon,i=A.status===t;return(0,P.jsxs)(R.P.button,{onClick:()=>V(t),disabled:!C,whileHover:C?{scale:1.05}:{},whileTap:C?{scale:.95}:{},className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all "+(i?`bg-${s.color}-100 text-${s.color}-800 border-2 border-${s.color}-300`:"bg-gray-100 text-gray-600 border-2 border-gray-200 "+(C?"hover:bg-gray-200":"cursor-not-allowed opacity-50")),children:[(0,P.jsx)(a,{size:16}),s.label]},t)})})]})]})]})},"overview"),"progress"===M&&(0,P.jsx)(R.P.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},exit:{opacity:0,x:30},transition:{duration:.4,ease:"easeOut"},layout:"position",layoutId:"tabContent",className:"p-6 overflow-y-auto max-h-[calc(85vh-200px)] scrollbar-thin scrollbar-thumb-slate-400 scrollbar-track-slate-200",children:(0,P.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200",children:[(0,P.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-6 flex items-center gap-2",children:[(0,P.jsx)(K.A,{size:20,className:"text-blue-600"}),"Task Progress"]}),(0,P.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,P.jsxs)(R.P.div,{whileHover:{scale:1.02},className:"p-4 rounded-lg border-2 "+("completed"===A.status?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"),children:[(0,P.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,P.jsx)(v.A,{size:20,className:"completed"===A.status?"text-green-600":"text-gray-400"}),(0,P.jsx)("span",{className:"font-medium "+("completed"===A.status?"text-green-800":"text-gray-600"),children:"Completion"})]}),(0,P.jsx)("div",{className:"text-2xl font-bold "+("completed"===A.status?"text-green-700":"text-gray-700"),children:"completed"===A.status?"100%":"0%"})]}),(0,P.jsxs)(R.P.div,{whileHover:{scale:1.02},className:"p-4 rounded-lg border-2 "+(Y?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200"),children:[(0,P.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,P.jsx)(y.A,{size:20,className:Y?"text-red-600":"text-blue-600"}),(0,P.jsx)("span",{className:"font-medium "+(Y?"text-red-800":"text-blue-800"),children:"Due Date"})]}),(0,P.jsx)("div",{className:"text-lg font-bold "+(Y?"text-red-700":"text-blue-700"),children:A.due_date?new Date(A.due_date).toLocaleDateString():"Not set"}),Y&&(0,P.jsx)("div",{className:"text-sm text-red-600 mt-1",children:"Overdue"})]}),(0,P.jsxs)(R.P.div,{whileHover:{scale:1.02},className:"p-4 rounded-lg border-2 "+("urgent"===A.priority||"high"===A.priority?"bg-orange-50 border-orange-200":"bg-gray-50 border-gray-200"),children:[(0,P.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,P.jsx)(le.A,{size:20,className:"urgent"===A.priority||"high"===A.priority?"text-orange-600":"text-gray-600"}),(0,P.jsx)("span",{className:"font-medium "+("urgent"===A.priority||"high"===A.priority?"text-orange-800":"text-gray-800"),children:"Priority"})]}),(0,P.jsx)("div",{className:"text-lg font-bold "+("urgent"===A.priority||"high"===A.priority?"text-orange-700":"text-gray-700"),children:(null===(t=F[A.priority])||void 0===t?void 0:t.label)||"Not set"})]})]})]})},"progress"),"connections"===M&&(0,P.jsx)(R.P.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},exit:{opacity:0,x:30},transition:{duration:.4,ease:"easeOut"},layout:"position",layoutId:"tabContent",className:"p-6 overflow-y-auto max-h-[calc(85vh-200px)] scrollbar-thin scrollbar-thumb-slate-400 scrollbar-track-slate-200",children:(0,P.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200",children:[(0,P.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-6 flex items-center gap-2",children:[(0,P.jsx)(Z.A,{size:20,className:"text-indigo-600"}),"Related Content"]}),(0,P.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[G("Linked Case ID","linked_case_id"),G("Linked Topic ID","linked_topic_id")]}),(0,P.jsxs)("div",{className:"mt-8 text-center py-8 text-gray-500",children:[(0,P.jsx)(Z.A,{size:48,className:"mx-auto mb-3 text-gray-300"}),(0,P.jsx)("p",{children:"No connections found"}),(0,P.jsx)("p",{className:"text-sm mt-1",children:"Link this task to cases or topics to create connections"})]})]})},"connections"),"details"===M&&(0,P.jsx)(R.P.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},exit:{opacity:0,x:30},transition:{duration:.4,ease:"easeOut"},layout:"position",layoutId:"tabContent",className:"p-6 overflow-y-auto max-h-[calc(85vh-200px)] scrollbar-thin scrollbar-thumb-slate-400 scrollbar-track-slate-200",children:(0,P.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200",children:[(0,P.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-6 flex items-center gap-2",children:[(0,P.jsx)(N.A,{size:20,className:"text-gray-600"}),"Additional Details"]}),(0,P.jsxs)("div",{className:"space-y-6",children:[(0,P.jsxs)("div",{className:"text-sm text-gray-600 bg-slate-50 p-4 rounded-lg",children:[(0,P.jsx)("p",{className:"font-medium mb-2",children:"Task Details"}),(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsxs)("p",{children:[(0,P.jsx)("span",{className:"font-medium",children:"Created:"})," ",null!==i&&void 0!==i&&i.created_at?new Date(i.created_at).toLocaleString():"Unknown"]}),(0,P.jsxs)("p",{children:[(0,P.jsx)("span",{className:"font-medium",children:"Last Updated:"})," ",null!==i&&void 0!==i&&i.updated_at?new Date(i.updated_at).toLocaleString():"Unknown"]}),(0,P.jsxs)("p",{children:[(0,P.jsx)("span",{className:"font-medium",children:"Task ID:"})," ",(null===i||void 0===i?void 0:i.id)||"Unknown"]})]})]}),(0,P.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,P.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"Task Management Tips"}),(0,P.jsxs)("ul",{className:"text-blue-700 text-sm space-y-1",children:[(0,P.jsx)("li",{children:"\u2022 Break large tasks into smaller, manageable subtasks"}),(0,P.jsx)("li",{children:"\u2022 Set realistic due dates to maintain accountability"}),(0,P.jsx)("li",{children:"\u2022 Link tasks to relevant cases or topics for better organization"}),(0,P.jsx)("li",{children:"\u2022 Update status regularly to track progress"})]})]})]})]})},"details")]})}),C&&(0,P.jsxs)("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,P.jsx)("div",{className:"text-sm text-gray-500",children:"Changes will be auto-saved"}),(0,P.jsxs)("div",{className:"flex items-center gap-3",children:[(0,P.jsx)("button",{onClick:()=>{S(!1),O({...i})},disabled:z,className:"px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors",children:"Cancel"}),(0,P.jsxs)("button",{onClick:W,disabled:z,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors flex items-center gap-2",children:[z?(0,P.jsx)(p.A,{size:16,className:"animate-spin"}):(0,P.jsx)(k.A,{size:16}),z?"Saving...":"Save Changes"]})]})]})]})},`task-modal-${(null===i||void 0===i?void 0:i.id)||"default"}`)}):null},ge=a.memo(he,(e,t)=>{var s,a,i,r;return e.isOpen===t.isOpen&&(null===(s=e.data)||void 0===s?void 0:s.id)===(null===(a=t.data)||void 0===a?void 0:a.id)&&(null===(i=e.data)||void 0===i?void 0:i.updated_at)===(null===(r=t.data)||void 0===r?void 0:r.updated_at)});function be(e,t,s){const{x:a,y:i,width:r,height:o}=e,{x:n,y:l}=t,{x:c,y:d}=s,u=a,p=a+r,m=i,x=i+o,h=c-n,g=d-l;if(Math.abs(h)<.001)return{x:n,y:g>0?x:m,side:g>0?"bottom":"top"};if(Math.abs(g)<.001)return{x:h>0?p:u,y:l,side:h>0?"right":"left"};const b=g/h,y=l-b*n,v=[],f=b*u+y;f>=m&&f<=x&&v.push({x:u,y:f,side:"left",distance:Math.hypot(u-n,f-l)});const j=b*p+y;j>=m&&j<=x&&v.push({x:p,y:j,side:"right",distance:Math.hypot(p-n,j-l)});const w=(m-y)/b;w>=u&&w<=p&&v.push({x:w,y:m,side:"top",distance:Math.hypot(w-n,m-l)});const N=(x-y)/b;N>=u&&N<=p&&v.push({x:N,y:x,side:"bottom",distance:Math.hypot(N-n,x-l)});const k=v.filter(e=>{const t=e.x-n,s=e.y-l;return(h>0&&t>=0||h<0&&t<=0)&&(g>0&&s>=0||g<0&&s<=0)});return k.sort((e,t)=>e.distance-t.distance),k[0]||{x:n,y:l,side:"center"}}const ye=(0,a.memo)(e=>{var t,s,i,r,o,l;let{id:c,source:d,target:u,sourceX:p,sourceY:m,targetX:x,targetY:h,sourcePosition:g,targetPosition:b,style:y={},markerEnd:v,markerStart:f,data:j,...w}=e;const{getNode:N}=(0,n.VH)();let k,C;try{k=N(d),C=N(u)}catch(T){k=null,C=null}const{edgePath:S,labelX:A,labelY:O}=(0,a.useMemo)(()=>{if(null!==j&&void 0!==j&&j.__isAnimating||null!==j&&void 0!==j&&j.__forceUpdate)return{edgePath:`M${p},${m} L${x},${h}`,labelX:(p+x)/2,labelY:(m+h)/2};if(!k||!C)return{edgePath:`M${p},${m} L${x},${h}`,labelX:(p+x)/2,labelY:(m+h)/2};try{var e,t,s,a,i,r,o,n,l,c;const d=Boolean(k.width||(null===(e=k.dimensions)||void 0===e?void 0:e.width)||(null===(t=k.data)||void 0===t?void 0:t.width)||(null===(s=k.style)||void 0===s?void 0:s.width)),u=Boolean(C.width||(null===(a=C.dimensions)||void 0===a?void 0:a.width)||(null===(i=C.data)||void 0===i?void 0:i.width)||(null===(r=C.style)||void 0===r?void 0:r.width));if(!d||!u)return{edgePath:`M${p},${m} L${x},${h}`,labelX:(p+x)/2,labelY:(m+h)/2};const g=e=>{var t,s,a,i;const r="topic"===e.type?180:200,o="topic"===e.type?50:100;return{width:e.width||(null===(t=e.dimensions)||void 0===t?void 0:t.width)||(null===(s=e.data)||void 0===s?void 0:s.width)||r,height:e.height||(null===(a=e.dimensions)||void 0===a?void 0:a.height)||(null===(i=e.data)||void 0===i?void 0:i.height)||o}},b=g(k),y=g(C),v=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourcePosition:a={x:0,y:0},targetPosition:i={x:0,y:0},sourceWidth:r=200,sourceHeight:o=100,targetWidth:n=200,targetHeight:l=100,sourceX:c,sourceY:d,targetX:u,targetY:p,offset:m=0}=s;if(void 0!==c&&void 0!==d&&void 0!==u&&void 0!==p&&(r<=10||n<=10))return{sourceX:c,sourceY:d,targetX:u,targetY:p,sourceSide:"direct",targetSide:"direct"};const x={x:a.x+r/2,y:a.y+o/2},h={x:i.x+n/2,y:i.y+l/2},g={x:a.x,y:a.y,width:r,height:o},b={x:i.x,y:i.y,width:n,height:l},y=be(g,x,h),v=be(b,h,x),f=h.x-x.x,j=h.y-x.y,w=Math.sqrt(f*f+j*j);if(w>0){const e=f/w,t=j/w,s=3;y.x-=e*s,y.y-=t*s,v.x+=e*s,v.y+=t*s,m>0&&(y.x+=e*m,y.y+=t*m,v.x-=e*m,v.y-=t*m)}return!!s.debug&&(console.log("Source Node:",e),console.log("Target Node:",t),console.log("Source Intersection:",y),console.log("Target Intersection:",v)),{sourceX:y.x,sourceY:y.y,targetX:v.x,targetY:v.y,sourceSide:y.side,targetSide:v.side}}(k,C,{sourcePosition:{x:(null===(o=k.positionAbsolute)||void 0===o?void 0:o.x)||k.position.x,y:(null===(n=k.positionAbsolute)||void 0===n?void 0:n.y)||k.position.y},targetPosition:{x:(null===(l=C.positionAbsolute)||void 0===l?void 0:l.x)||C.position.x,y:(null===(c=C.positionAbsolute)||void 0===c?void 0:c.y)||C.position.y},sourceX:p,sourceY:m,targetX:x,targetY:h,sourceWidth:b.width,sourceHeight:b.height,targetWidth:y.width,targetHeight:y.height,debug:!1}),{sourceX:f,sourceY:j,targetX:w,targetY:N}=v;return{edgePath:`M ${f},${j} L ${w},${N}`,labelX:(f+w)/2,labelY:(j+N)/2}}catch(T){return console.warn("FloatingEdge calculation error:",T),{edgePath:`M${p},${m} L${x},${h}`,labelX:(p+x)/2,labelY:(m+h)/2}}},[d,u,p,m,x,h,null===j||void 0===j?void 0:j.__forceUpdate,null===j||void 0===j?void 0:j.__isAnimating,null===(t=k)||void 0===t?void 0:t.id,null===(s=C)||void 0===s?void 0:s.id,null===(i=k)||void 0===i?void 0:i.width,null===(r=k)||void 0===r?void 0:r.height,null===(o=C)||void 0===o?void 0:o.width,null===(l=C)||void 0===l?void 0:l.height]);return(0,P.jsx)(n.tE,{id:c,path:S,labelX:A,labelY:O,style:{stroke:"#64748b",strokeWidth:3,strokeLinecap:"round",strokeOpacity:.95,transition:"none",...y},markerEnd:v,markerStart:f})},(e,t)=>{var s,a;return e.sourceX===t.sourceX&&e.sourceY===t.sourceY&&e.targetX===t.targetX&&e.targetY===t.targetY&&e.source===t.source&&e.target===t.target&&(null===(s=e.data)||void 0===s?void 0:s.__forceUpdate)===(null===(a=t.data)||void 0===a?void 0:a.__forceUpdate)}),ve=ye,fe=(0,a.memo)(e=>{let{id:t,source:s,target:a,sourceX:i,sourceY:r,targetX:o,targetY:c,sourcePosition:d,targetPosition:u,style:p={},markerEnd:m,markerStart:x,label:h,sourceHandleId:g,targetHandleId:b,data:y,selected:v,animated:f}=e;const[j,w,N]=(0,l.Fp)({sourceX:i,sourceY:r,sourcePosition:d,targetX:o,targetY:c,targetPosition:u});return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(n.tE,{id:t,path:j,style:p,markerEnd:m,markerStart:x}),h&&(0,P.jsx)(n.rV,{children:(0,P.jsx)("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${w}px,${N}px)`,fontSize:12,pointerEvents:"all"},className:"nodrag nopan bg-white px-2 py-1 rounded shadow border text-xs",children:h})})]})});fe.displayName="EnhancedEdge";const je=fe,we=e=>{let{fromX:t,fromY:s,toX:a,toY:i,connectionLineStyle:r}=e;const o=`M ${t},${s} L ${a},${i}`,n={stroke:"#3b82f6",strokeWidth:3.5,strokeLinecap:"round",strokeDasharray:"5,3",filter:"drop-shadow(0 0 6px rgba(59, 130, 246, 0.6))",animation:"flowingDash 1s linear infinite",...r};return(0,P.jsxs)("g",{children:[(0,P.jsx)("path",{d:o,fill:"none",style:n}),(0,P.jsx)("path",{d:o,fill:"none",stroke:"transparent",strokeWidth:15,style:{pointerEvents:"stroke"}})]})},Ne=e=>{let{message:t="Loading your mind map...",progress:s=null}=e;return(0,P.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center z-50",children:(0,P.jsxs)("div",{className:"text-center",children:[(0,P.jsxs)("div",{className:"relative mb-6",children:[(0,P.jsx)(x.A,{className:"w-16 h-16 text-blue-600 mx-auto animate-pulse"}),(0,P.jsx)(Y.A,{className:"w-6 h-6 text-purple-500 absolute -top-2 -right-2 animate-bounce"})]}),(0,P.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-4",children:[(0,P.jsx)(p.A,{className:"w-6 h-6 animate-spin text-blue-600"}),(0,P.jsx)("span",{className:"text-lg font-medium text-gray-700",children:t})]}),null!==s&&(0,P.jsx)("div",{className:"w-64 bg-gray-200 rounded-full h-2 mx-auto mb-2",children:(0,P.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300 ease-out",style:{width:`${Math.max(0,Math.min(100,s))}%`}})}),(0,P.jsx)("div",{className:"text-sm text-gray-500 max-w-md mx-auto mt-4",children:(0,P.jsx)("p",{children:"\ud83d\udca1 Tip: Use the force layout button to auto-arrange your nodes"})})]})})};const ke=[{id:1,title:"Efficacy of Cognitive Behavioral Therapy for Depression: A Meta-Analysis",authors:"Smith, J.A., Johnson, B.K., Williams, C.D.",year:"2023",type:"meta-analysis",journal:"Journal of Clinical Psychology",volume:"79",pages:"234-251",doi:"10.1002/jclp.23456",abstract:"This meta-analysis examines the efficacy of cognitive behavioral therapy (CBT) for treating major depressive disorder across 45 randomized controlled trials involving 3,242 participants. Results indicate that CBT shows significant effectiveness with a large effect size (d = 0.85) compared to control conditions. The analysis also reveals that individual CBT may be more effective than group CBT for severe depression cases.",keywords:"cognitive behavioral therapy, depression, meta-analysis, psychotherapy, mental health",notes:"",pdf_url:"https://39409560-62b0-4839-a8c9-4bc285999ef7.preview.emergentagent.com".replace(/\/$/,"")}/api`,Te=console.error;console.error=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];t[0]&&t[0].includes&&t[0].includes("ResizeObserver loop")||Te(...t)};const _e=e=>{let{message:t,type:s="success",onClose:i,duration:r=3e3}=e;(0,a.useEffect)(()=>{const e=setTimeout(i,r);return()=>clearTimeout(e)},[i,r]);return(0,P.jsx)("div",{className:`fixed top-4 right-4 z-50 px-6 py-3 rounded-lg shadow-lg transition-all duration-500 transform ${{success:"bg-green-600 text-white border-l-4 border-green-400",error:"bg-red-600 text-white border-l-4 border-red-400",info:"bg-blue-600 text-white border-l-4 border-blue-400",saving:"bg-purple-600 text-white border-l-4 border-purple-400"}[s]}`,children:(0,P.jsxs)("div",{className:"flex items-center",children:[(()=>{switch(s){case"success":default:return(0,P.jsx)(c.A,{size:16,className:"mr-2"});case"error":return(0,P.jsx)(d.A,{size:16,className:"mr-2"});case"info":return(0,P.jsx)(u.A,{size:16,className:"mr-2"});case"saving":return(0,P.jsx)(p.A,{size:16,className:"mr-2 animate-spin"})}})(),(0,P.jsx)("span",{className:"text-sm font-medium",children:t}),(0,P.jsx)("button",{onClick:i,className:"ml-4 text-white hover:text-gray-200 transition-colors",children:(0,P.jsx)(m.A,{size:14})})]})})},ze=e=>{let{onClick:t,loading:s,disabled:a,children:i,className:r,icon:o,...n}=e;return(0,P.jsx)("button",{onClick:t,disabled:a||s,className:`${r} transform transition-all duration-200 hover:scale-105 active:scale-95 ${a||s?"cursor-not-allowed opacity-50":"hover:shadow-lg"}`,...n,children:(0,P.jsxs)("div",{className:"flex items-center gap-2",children:[s?(0,P.jsx)(p.A,{size:16,className:"animate-spin"}):o?(0,P.jsx)(o,{size:16}):null,i]})})},Pe="pgy3_mindmap_data",De={save:(()=>{let e;return function(t,s,a){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];clearTimeout(e),s&&s();e=setTimeout(()=>{try{const e={version:"1.1",timestamp:(new Date).toISOString(),data:t};localStorage.setItem(Pe,JSON.stringify(e)),console.log("Mind map data auto-saved to localStorage"),a&&a(!0)}catch(e){if(console.error("Error saving to localStorage:",e),a&&a(!1,e),"QuotaExceededError"===e.name){console.warn("localStorage quota exceeded, clearing old data...");try{localStorage.removeItem(Pe)}catch(s){console.error("Error clearing localStorage:",s)}}}},i?1200:800)}})(),load:()=>{try{const e=localStorage.getItem(Pe);if(!e)return console.log("No localStorage data found"),null;const t=JSON.parse(e);return"1.1"!==t.version?(console.log("localStorage version mismatch, clearing old data"),localStorage.removeItem(Pe),null):(console.log("Mind map data loaded from localStorage",t.timestamp),t.data)}catch(e){console.error("Error loading from localStorage:",e);try{localStorage.removeItem(Pe)}catch(t){console.error("Error clearing corrupted localStorage:",t)}return null}},clear:()=>{try{localStorage.removeItem(Pe),console.log("localStorage data cleared")}catch(e){console.error("Error clearing localStorage:",e)}},getStorageInfo:()=>{try{const e=localStorage.getItem(Pe);if(!e)return null;const t=JSON.parse(e);return{version:t.version,timestamp:t.timestamp,size:new Blob([e]).size}}catch(e){return null}}},Ee={topic:e=>{let{data:t,selected:s}=e;const[i,r]=(0,a.useState)(t.skipAnimation||!1);(0,a.useEffect)(()=>{if(!t.skipAnimation){const e=setTimeout(()=>r(!0),100);return()=>clearTimeout(e)}},[t.skipAnimation]);const o=t.flashcard_count>0?(t.completed_flashcards||0)/t.flashcard_count*100:0;return(0,P.jsxs)("div",{className:`group px-4 py-3 rounded-xl shadow-lg border-2 transition-all duration-700 min-w-[220px] relative hover:shadow-2xl transform hover:scale-105 backdrop-blur-sm ${s?"border-teal-400 shadow-xl scale-105 ring-4 ring-teal-200 animate-pulse":"border-transparent hover:border-teal-300 hover:ring-2 hover:ring-teal-100"} ${i?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-75 translate-y-8"}`,style:{backgroundColor:t.color||"#3B82F6",color:"white",boxShadow:s?`0 0 20px ${t.color||"#3B82F6"}40`:`0 4px 20px ${t.color||"#3B82F6"}20`,transition:"all 0.7s cubic-bezier(0.34, 1.56, 0.64, 1), transform 0.3s ease"},children:[(0,P.jsx)(n.h7,{id:"top",type:"source",position:l.yX.Top,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{left:"50%",transform:"translateX(-50%)",zIndex:2},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"top",type:"target",position:l.yX.Top,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{left:"50%",transform:"translateX(-50%)",zIndex:1},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"right",type:"source",position:l.yX.Right,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{top:"50%",transform:"translateY(-50%)",zIndex:2},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"right",type:"target",position:l.yX.Right,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{top:"50%",transform:"translateY(-50%)",zIndex:1},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"bottom",type:"source",position:l.yX.Bottom,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{left:"50%",transform:"translateX(-50%)",zIndex:2},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"bottom",type:"target",position:l.yX.Bottom,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{left:"50%",transform:"translateX(-50%)",zIndex:1},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"left",type:"source",position:l.yX.Left,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{top:"50%",transform:"translateY(-50%)",zIndex:2},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"left",type:"target",position:l.yX.Left,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{top:"50%",transform:"translateY(-50%)",zIndex:1},isConnectable:!0}),t.priority&&(0,P.jsx)("div",{className:"absolute -top-2 -right-2",children:(0,P.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold border-2 border-white "+("high"===t.priority?"bg-red-500":"medium"===t.priority?"bg-yellow-500":"bg-green-500"),children:"high"===t.priority?"!":"medium"===t.priority?"\u2022":"\u2713"})}),(0,P.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,P.jsxs)("div",{className:"flex items-center gap-1",children:[(0,P.jsx)(x.A,{size:16,className:"drop-shadow-sm"}),t.tags&&t.tags.length>0&&(0,P.jsx)(h.A,{size:12,className:"opacity-75"})]}),(0,P.jsx)("div",{className:"font-semibold text-sm truncate flex-1",children:t.label}),t.onDelete&&(0,P.jsx)("button",{onClick:e=>{1===e.detail&&(e.stopPropagation(),setTimeout(()=>{t.onDelete()},200))},onDoubleClick:e=>{e.preventDefault()},className:"ml-auto p-1 hover:bg-white hover:bg-opacity-20 rounded transition-all duration-200 hover:scale-110 opacity-70 hover:opacity-100",children:(0,P.jsx)(m.A,{size:12})})]}),(0,P.jsx)("div",{className:"text-xs opacity-90 mb-2",children:t.category}),t.flashcard_count>0&&(0,P.jsxs)("div",{className:"text-xs mt-2 space-y-1",children:[(0,P.jsxs)("div",{className:"flex justify-between items-center",children:[(0,P.jsxs)("span",{className:"opacity-90",children:[t.completed_flashcards,"/",t.flashcard_count," flashcards"]}),(0,P.jsxs)("span",{className:"font-semibold",children:[Math.round(o),"%"]})]}),(0,P.jsx)("div",{className:"w-full bg-white bg-opacity-20 rounded-full h-2 overflow-hidden",children:(0,P.jsx)("div",{className:"h-full bg-white rounded-full transition-all duration-1000 ease-out",style:{width:`${o}%`}})})]}),t.tags&&t.tags.length>0&&(0,P.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[t.tags.slice(0,3).map((e,t)=>(0,P.jsx)("span",{className:"px-2 py-1 bg-white bg-opacity-20 rounded-full text-xs",children:e},t)),t.tags.length>3&&(0,P.jsxs)("span",{className:"px-2 py-1 bg-white bg-opacity-20 rounded-full text-xs",children:["+",t.tags.length-3]})]}),t.updated_at&&(0,P.jsx)("div",{className:"absolute bottom-1 right-1 opacity-50",children:(0,P.jsx)(g.A,{size:10})})]})},case:e=>{let{data:t,selected:s}=e;const[i,r]=(0,a.useState)(t.skipAnimation||!1);(0,a.useEffect)(()=>{if(!t.skipAnimation){const e=setTimeout(()=>r(!0),150);return()=>clearTimeout(e)}},[t.skipAnimation]);const o=(e=>{var t,s;const a=(null===(t=e.chief_complaint)||void 0===t?void 0:t.toLowerCase())||"",i=(null===(s=e.diagnosis)||void 0===s?void 0:s.toLowerCase())||"";return["emergency","urgent","crisis","acute","severe"].some(e=>a.includes(e)||i.includes(e))?"high":"normal"})(t);return(0,P.jsxs)("div",{className:`group px-4 py-3 rounded-xl shadow-lg border-2 transition-all duration-600 min-w-[220px] bg-white relative hover:shadow-2xl transform hover:scale-105 ${s?"border-blue-400 shadow-xl scale-105 ring-4 ring-blue-200":"border-gray-200 hover:border-blue-300 hover:ring-2 hover:ring-blue-100"} ${"high"===o?"ring-2 ring-red-300":""} ${i?"opacity-100 scale-100 translate-y-0 rotate-0":"opacity-0 scale-90 translate-y-6 rotate-1"}`,style:{transition:"all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.3s ease"},children:[(0,P.jsx)(n.h7,{id:"top",type:"source",position:l.yX.Top,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{left:"50%",transform:"translateX(-50%)",zIndex:2},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"top",type:"target",position:l.yX.Top,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{left:"50%",transform:"translateX(-50%)",zIndex:1},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"right",type:"source",position:l.yX.Right,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{top:"50%",transform:"translateY(-50%)",zIndex:2},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"right",type:"target",position:l.yX.Right,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{top:"50%",transform:"translateY(-50%)",zIndex:1},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"bottom",type:"source",position:l.yX.Bottom,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{left:"50%",transform:"translateX(-50%)",zIndex:2},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"bottom",type:"target",position:l.yX.Bottom,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{left:"50%",transform:"translateX(-50%)",zIndex:1},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"left",type:"source",position:l.yX.Left,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{top:"50%",transform:"translateY(-50%)",zIndex:2},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"left",type:"target",position:l.yX.Left,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{top:"50%",transform:"translateY(-50%)",zIndex:1},isConnectable:!0}),"high"===o&&(0,P.jsx)("div",{className:"absolute -top-2 -right-2",children:(0,P.jsx)("div",{className:"w-6 h-6 bg-red-500 rounded-full flex items-center justify-center border-2 border-white animate-pulse",children:(0,P.jsx)(d.A,{size:14,className:"text-white"})})}),(0,P.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,P.jsxs)("div",{className:"flex items-center gap-1",children:[(0,P.jsx)(b.A,{size:16,className:"text-blue-600"}),t.linked_topics&&t.linked_topics.length>0&&(0,P.jsx)("div",{className:"text-xs bg-blue-100 text-blue-600 px-1 rounded",children:t.linked_topics.length})]}),(0,P.jsx)("div",{className:"font-semibold text-sm text-gray-800 truncate flex-1",children:t.label}),t.onDelete&&(0,P.jsx)("button",{onClick:e=>{1===e.detail&&(e.stopPropagation(),setTimeout(()=>{t.onDelete()},200))},onDoubleClick:e=>{e.preventDefault()},className:"ml-auto p-1 hover:bg-gray-200 rounded transition-all duration-200 hover:scale-110 opacity-70 hover:opacity-100",children:(0,P.jsx)(m.A,{size:12})})]}),(0,P.jsx)("div",{className:"text-xs text-gray-600 mb-2 truncate",children:t.diagnosis}),(0,P.jsxs)("div",{className:"space-y-1",children:[t.age&&(0,P.jsxs)("div",{className:"text-xs text-blue-600 flex items-center gap-1",children:[(0,P.jsx)(y.A,{size:10}),"Age: ",t.age]}),t.status&&(0,P.jsx)("span",{className:`inline-block px-2 py-1 rounded-full text-xs border ${(e=>{switch(e){case"active":return"bg-green-100 text-green-800 border-green-200";case"archived":return"bg-gray-100 text-gray-800 border-gray-200";case"follow_up":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}})(t.status)}`,children:t.status})]}),t.tasks_count&&t.tasks_count>0&&(0,P.jsxs)("div",{className:"mt-2 text-xs text-gray-500 flex items-center gap-1",children:[(0,P.jsx)(v.A,{size:10}),t.completed_tasks||0,"/",t.tasks_count," tasks"]}),t.updated_at&&(0,P.jsx)("div",{className:"absolute bottom-1 right-1 opacity-30",children:(0,P.jsx)(g.A,{size:10})})]})},task:e=>{let{data:t,selected:s}=e;const[i,r]=(0,a.useState)(t.skipAnimation||!1);(0,a.useEffect)(()=>{if(!t.skipAnimation){const e=setTimeout(()=>r(!0),200);return()=>clearTimeout(e)}},[t.skipAnimation]);return(0,P.jsxs)("div",{className:`group px-4 py-3 rounded-xl shadow-lg border-2 transition-all duration-500 min-w-[200px] text-white relative hover:shadow-2xl transform hover:scale-105 ${s?"border-yellow-400 shadow-xl scale-105 ring-4 ring-yellow-200":"border-transparent hover:border-yellow-300 hover:ring-2 hover:ring-yellow-100"} ${{pending:"bg-yellow-500",in_progress:"bg-blue-600",completed:"bg-green-700 opacity-60"}[t.status]||"bg-gray-500"} ${i?"opacity-100 scale-100 translate-x-0":"opacity-0 scale-85 -translate-x-4"}`,style:{transition:"all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55), transform 0.3s ease"},children:[(0,P.jsx)(n.h7,{id:"top",type:"source",position:l.yX.Top,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{left:"50%",transform:"translateX(-50%)",zIndex:2},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"top",type:"target",position:l.yX.Top,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{left:"50%",transform:"translateX(-50%)",zIndex:1},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"right",type:"source",position:l.yX.Right,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{top:"50%",transform:"translateY(-50%)",zIndex:2},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"right",type:"target",position:l.yX.Right,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{top:"50%",transform:"translateY(-50%)",zIndex:1},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"bottom",type:"source",position:l.yX.Bottom,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{left:"50%",transform:"translateX(-50%)",zIndex:2},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"bottom",type:"target",position:l.yX.Bottom,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{left:"50%",transform:"translateX(-50%)",zIndex:1},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"left",type:"source",position:l.yX.Left,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{top:"50%",transform:"translateY(-50%)",zIndex:2},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"left",type:"target",position:l.yX.Left,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{top:"50%",transform:"translateY(-50%)",zIndex:1},isConnectable:!0}),(0,P.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,P.jsx)(v.A,{size:16}),(0,P.jsx)("div",{className:"font-semibold text-sm",children:t.label}),t.onDelete&&(0,P.jsx)("button",{onClick:e=>{1===e.detail&&(e.stopPropagation(),setTimeout(()=>{t.onDelete()},200))},onDoubleClick:e=>{e.preventDefault()},className:"ml-auto p-1 hover:bg-white hover:bg-opacity-20 rounded transition-all duration-200 hover:scale-110 opacity-70 hover:opacity-100",children:(0,P.jsx)(m.A,{size:12})})]}),(0,P.jsxs)("div",{className:"text-xs opacity-90",children:["Priority: ",t.priority]}),t.due_date&&(0,P.jsxs)("div",{className:"text-xs mt-1 opacity-90",children:["Due: ",new Date(t.due_date).toLocaleDateString()]})]})},literature:e=>{let{data:t,selected:s}=e;const[i,r]=(0,a.useState)(t.skipAnimation||!1);return(0,a.useEffect)(()=>{if(!t.skipAnimation){const e=setTimeout(()=>r(!0),250);return()=>clearTimeout(e)}},[t.skipAnimation]),(0,P.jsxs)("div",{className:`group px-4 py-3 rounded-xl shadow-lg border-2 transition-all duration-650 min-w-[200px] bg-purple-50 relative hover:shadow-2xl transform hover:scale-105 ${s?"border-purple-400 shadow-xl scale-105 ring-4 ring-purple-200":"border-purple-200 hover:border-purple-300 hover:ring-2 hover:ring-purple-100"} ${i?"opacity-100 scale-100 translate-x-0 rotate-0":"opacity-0 scale-95 translate-x-4 -rotate-1"}`,style:{transition:"all 0.65s cubic-bezier(0.175, 0.885, 0.32, 1.275), transform 0.3s ease"},children:[(0,P.jsx)(n.h7,{id:"top",type:"source",position:l.yX.Top,className:"w-3 h-3 !bg-purple-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{left:"50%",transform:"translateX(-50%)",zIndex:2},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"top",type:"target",position:l.yX.Top,className:"w-3 h-3 !bg-purple-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{left:"50%",transform:"translateX(-50%)",zIndex:1},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"right",type:"source",position:l.yX.Right,className:"w-3 h-3 !bg-purple-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{top:"50%",transform:"translateY(-50%)",zIndex:2},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"right",type:"target",position:l.yX.Right,className:"w-3 h-3 !bg-purple-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{top:"50%",transform:"translateY(-50%)",zIndex:1},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"bottom",type:"source",position:l.yX.Bottom,className:"w-3 h-3 !bg-purple-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{left:"50%",transform:"translateX(-50%)",zIndex:2},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"bottom",type:"target",position:l.yX.Bottom,className:"w-3 h-3 !bg-purple-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{left:"50%",transform:"translateX(-50%)",zIndex:1},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"left",type:"source",position:l.yX.Left,className:"w-3 h-3 !bg-purple-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{top:"50%",transform:"translateY(-50%)",zIndex:2},isConnectable:!0}),(0,P.jsx)(n.h7,{id:"left",type:"target",position:l.yX.Left,className:"w-3 h-3 !bg-purple-500 transition-all duration-300 hover:scale-150 cursor-pointer opacity-0 group-hover:opacity-100",style:{top:"50%",transform:"translateY(-50%)",zIndex:1},isConnectable:!0}),(0,P.jsxs)("div",{className:"flex items-center gap-2 mb-1 cursor-pointer",onClick:e=>{1===e.detail&&(e.stopPropagation(),setTimeout(()=>{t.onLiteratureClick&&t.onLiteratureClick(t)},200))},onDoubleClick:e=>{e.preventDefault()},children:[(0,P.jsx)(f.A,{size:16,className:"text-purple-600"}),(0,P.jsx)("div",{className:"font-semibold text-sm text-gray-800",children:t.label}),t.onDelete&&(0,P.jsx)("button",{onClick:e=>{1===e.detail&&(e.stopPropagation(),setTimeout(()=>{t.onDelete()},200))},onDoubleClick:e=>{e.preventDefault()},className:"ml-auto p-1 hover:bg-purple-200 rounded transition-all duration-200 hover:scale-110 opacity-70 hover:opacity-100",children:(0,P.jsx)(m.A,{size:12})})]}),(0,P.jsx)("div",{className:"text-xs text-gray-600",children:t.authors}),(0,P.jsx)("div",{className:"text-xs text-purple-600 mt-1",children:t.year})]})}},Ie=e=>{let{isOpen:t,onClose:s,onSelect:i,templates:r}=e;const[o,n]=(0,a.useState)(null);if((0,a.useEffect)(()=>{if(!t){const e=setTimeout(()=>n(null),300);return()=>clearTimeout(e)}},[t]),!t)return null;const l=[{type:"topic",label:"Psychiatric Topic",icon:x.A,color:"bg-blue-600",description:"Add a new psychiatric topic or disorder"},{type:"literature",label:"Literature",icon:f.A,color:"bg-purple-600",description:"Add research papers, articles, or references"},{type:"case",label:"Patient Case",icon:b.A,color:"bg-indigo-600",description:"Add a new patient case study"},{type:"task",label:"Task",icon:v.A,color:"bg-amber-600",description:"Add a task or to-do item"}],c=function(){i(o,arguments.length>0&&void 0!==arguments[0]?arguments[0]:null),s()},d=o?(r||[]).filter(e=>e.nodeType===o):[];return(0,P.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm animate-in fade-in-25 duration-300",children:(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl p-6 max-w-md w-full mx-4 transform transition-all duration-300 ease-out",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,P.jsxs)("div",{className:"flex items-center gap-3",children:[o&&(0,P.jsx)("button",{onClick:()=>n(null),className:"text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-100 transition-colors",children:(0,P.jsx)(j.A,{size:20})}),(0,P.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:o?`Select a ${o} template`:"Add New Node"})]}),(0,P.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 p-1",children:(0,P.jsx)(m.A,{size:20})})]}),(0,P.jsxs)("div",{className:"relative overflow-hidden",style:{minHeight:"200px"},children:[(0,P.jsx)("div",{className:"transition-transform duration-300 ease-in-out "+(o?"-translate-x-full opacity-0":"translate-x-0 opacity-100"),children:(0,P.jsx)("div",{className:"space-y-3",children:l.map(e=>{let{type:t,label:s,icon:a,color:i,description:r}=e;return(0,P.jsxs)("button",{onClick:()=>{n(t)},className:"w-full flex items-center gap-4 p-4 rounded-lg border-2 border-gray-200 hover:border-blue-400 hover:bg-blue-50 transition-all text-left",children:[(0,P.jsx)("div",{className:`${i} p-2 rounded-lg text-white`,children:(0,P.jsx)(a,{size:20})}),(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{className:"font-medium text-gray-800",children:s}),(0,P.jsx)("div",{className:"text-sm text-gray-500",children:r})]})]},t)})})}),(0,P.jsx)("div",{className:"absolute top-0 left-0 w-full transition-transform duration-300 ease-in-out "+(o?"translate-x-0 opacity-100":"translate-x-full opacity-0"),children:o&&(0,P.jsxs)("div",{className:"space-y-3",children:[(0,P.jsxs)("button",{onClick:()=>c(null),className:"w-full flex items-center gap-4 p-4 rounded-lg border-2 border-dashed border-gray-300 hover:border-blue-400 hover:bg-blue-50 transition-all text-left",children:[(0,P.jsx)("div",{className:"bg-gray-200 p-2 rounded-lg text-gray-600",children:(0,P.jsx)(w.A,{size:20})}),(0,P.jsxs)("div",{children:[(0,P.jsxs)("div",{className:"font-medium text-gray-800",children:["Create Blank ",o]}),(0,P.jsx)("div",{className:"text-sm text-gray-500",children:"Start with an empty node."})]})]}),d.map(e=>{var t,s,a;return(0,P.jsxs)("button",{onClick:()=>c(e.id),className:"w-full flex items-center gap-4 p-4 rounded-lg border-2 border-gray-200 hover:border-blue-400 hover:bg-blue-50 transition-all text-left",children:[(0,P.jsx)("div",{className:"bg-indigo-100 p-2 rounded-lg text-indigo-600",children:(0,P.jsx)(N.A,{size:20})}),(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{className:"font-medium text-gray-800",children:e.name}),(0,P.jsx)("div",{className:"text-sm text-gray-500 truncate",children:(null===(t=e.data)||void 0===t?void 0:t.description)||(null===(s=e.data)||void 0===s?void 0:s.abstract)||(null===(a=e.data)||void 0===a?void 0:a.assessment_plan)||"No description"})]})]},e.id)}),0===d.length&&(0,P.jsx)("div",{className:"text-center text-sm text-gray-500 py-4",children:"No templates found for this node type."})]})})]})]})})},Me=e=>{let{edge:t,isOpen:s,onClose:i,onSave:r}=e;const[o,n]=(0,a.useState)((null===t||void 0===t?void 0:t.label)||"");(0,a.useEffect)(()=>{n((null===t||void 0===t?void 0:t.label)||"")},[t]);const l=()=>{r(t.id,o),i()};return s&&t?(0,P.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm",children:(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl p-6 max-w-md w-full mx-4 transform transition-all",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,P.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Edit Connection Label"}),(0,P.jsx)("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 p-1 transition-colors",children:(0,P.jsx)(m.A,{size:20})})]}),(0,P.jsxs)("div",{className:"mb-6",children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Connection Label"}),(0,P.jsx)("input",{type:"text",value:o,onChange:e=>n(e.target.value),onKeyPress:e=>{"Enter"===e.key?l():"Escape"===e.key&&i()},placeholder:"Enter a label for this connection...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",autoFocus:!0}),(0,P.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Press Enter to save, Escape to cancel"})]}),(0,P.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,P.jsx)("button",{onClick:i,className:"px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors",children:"Cancel"}),(0,P.jsxs)("button",{onClick:l,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[(0,P.jsx)(k.A,{size:16}),"Save Label"]})]})]})}):null},$e=()=>{var e,t,s,i,c,d;const{fitView:u,setCenter:m,zoomTo:h,getViewport:g}=(0,n.VH)(),[y,j,N]=(0,n.ck)([]),[D,E,I]=(0,n.fM)([]),[M,$]=(0,a.useState)({topics:[],cases:[],tasks:[],literature:[],connections:[]}),[R,F]=(0,a.useState)(!1),[B,Y]=(0,a.useState)(null),[H,U]=(0,a.useState)(!0),[W,J]=(0,a.useState)(0),[V,q]=(0,a.useState)("Initializing..."),[K,Q]=(0,a.useState)(!0),[Z,ee]=(0,a.useState)(null),[te,se]=(0,a.useState)(!1),[ae,ie]=(0,a.useState)({isOpen:!1,data:null}),[re,oe]=(0,a.useState)({isOpen:!1,data:null}),[le,ce]=(0,a.useState)({isOpen:!1,data:null}),de=(0,a.useRef)(null),ue=(0,a.useRef)(null),pe=(0,a.useRef)(null),[me,xe]=(0,a.useState)(!1),[he,be]=(0,a.useState)(!1),[ye,fe]=(0,a.useState)(!1),[ke,Ce]=(0,a.useState)(null),[Te,Pe]=(0,a.useState)(!1),[$e,Xe]=(0,a.useState)({isOpen:!1,edge:null}),[Re,Fe]=(0,a.useState)([]),[Be,Ye]=(0,a.useState)({show:!1,progress:0,message:""}),[He,Ue]=(0,a.useState)([]),[We,Je]=(0,a.useState)(!1),[Ve,qe]=(0,a.useState)({isOpen:!1,data:null}),[Ge,Ke]=(0,a.useState)(!1),[Qe,Ze]=(0,a.useState)({case:!1,topic:!1,task:!1,literature:!1}),et=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;const a={id:Date.now(),message:e,type:t,duration:s};Ue(e=>[...e,a])},[]),tt=(0,a.useCallback)(e=>{Ue(t=>t.filter(t=>t.id!==e))},[]),st=(0,a.useCallback)(e=>{var t,s,a;const i=ae.isOpen||re.isOpen||le.isOpen||Ve.isOpen,r=Object.values(Qe).some(e=>e),o=ae.isOpen&&(null===(t=ae.data)||void 0===t?void 0:t.isTabTransitioning)||re.isOpen&&(null===(s=re.data)||void 0===s?void 0:s.isTabTransitioning)||le.isOpen&&(null===(a=le.data)||void 0===a?void 0:a.isTabTransitioning);if(Ge||i||o||r){console.log("Deferring auto-save during animation, modal interaction, or tab transition");return void setTimeout(()=>st(e),o||r?2e3:1e3)}De.save(e,()=>Pe(!0),(e,t)=>{Pe(!1),e?Ce(new Date):(et("Auto-save failed","error",4e3),console.error("Auto-save error:",t))},Ge),window.requestIdleCallback?window.requestIdleCallback(()=>{Ge||Object.values(Qe).some(e=>e)||nt(e)},{timeout:5e3}):setTimeout(()=>{Ge||Object.values(Qe).some(e=>e)||nt(e)},100)},[et,Ge,Qe,ae.isOpen,re.isOpen,le.isOpen,Ve.isOpen]);(0,a.useCallback)(e=>{const t=ae.isOpen||re.isOpen||le.isOpen||Ve.isOpen,s=Object.values(Qe).some(e=>e);Ge||t||s||(De.save(e,null,null,Ge),clearTimeout(window.positionBackendSaveTimeout),window.positionBackendSaveTimeout=setTimeout(()=>{st(e)},800))},[Ge,Qe,ae.isOpen,re.isOpen,le.isOpen,Ve.isOpen,st]);(0,a.useEffect)(()=>{ae.isOpen&&ae.data?de.current={...ae.data}:ae.isOpen||(de.current=null)},[ae.isOpen,null===(e=ae.data)||void 0===e?void 0:e.id]),(0,a.useEffect)(()=>{re.isOpen&&re.data?ue.current={...re.data}:re.isOpen||(ue.current=null)},[re.isOpen,null===(t=re.data)||void 0===t?void 0:t.id]),(0,a.useEffect)(()=>{le.isOpen&&le.data?pe.current={...le.data}:le.isOpen||(pe.current=null)},[le.isOpen,null===(s=le.data)||void 0===s?void 0:s.id]);const at=(0,a.useCallback)(e=>{console.log("Deleting node with full ID:",e);const[t,...s]=e.split("-"),a=s.join("-"),i="literature"===t?"literature":`${t}s`;$(s=>{const r=(s[i]||[]).filter(e=>String(e.id)!==a),o=(s.connections||[]).filter(t=>t.source!==e&&t.target!==e),n={...s,[i]:r,connections:o};return st(n),et(`${t.charAt(0).toUpperCase()+t.slice(1)} deleted.`,"success"),n}),j(t=>t.filter(t=>t.id!==e)),E(t=>t.filter(t=>t.source!==e&&t.target!==e))},[$,st,et,j,E]),it=(0,a.useCallback)(e=>{Ke(!0),qe({isOpen:!0,data:e}),setTimeout(()=>Ke(!1),700)},[]),rt=(0,a.useCallback)(()=>{j(e=>e.map(e=>{const t=e.id.split("-")[0],s=e.id.split("-")[1];let a=e.data.label;if("case"===t){var i;const e=null===(i=M.cases)||void 0===i?void 0:i.find(e=>e.id===s);e&&(a=e.primaryDiagnosis||e.primary_diagnosis||e.title||"Untitled Case")}else if("topic"===t){var r;const e=null===(r=M.topics)||void 0===r?void 0:r.find(e=>e.id===s);e&&(a=e.title||"Untitled Topic")}else if("task"===t){var o;const e=null===(o=M.tasks)||void 0===o?void 0:o.find(e=>e.id===s);e&&(a=e.title||"Untitled Task")}else if("literature"===t){var n;const e=null===(n=M.literature)||void 0===n?void 0:n.find(e=>e.id===s);e&&(a=e.title||"Untitled Literature")}return a!==e.data.label?{...e,data:{...e.data,label:a}}:e}))},[M,j]);(0,a.useEffect)(()=>{var e,t,s,a;M&&((null===(e=M.cases)||void 0===e?void 0:e.length)>0||(null===(t=M.topics)||void 0===t?void 0:t.length)>0||(null===(s=M.tasks)||void 0===s?void 0:s.length)>0||(null===(a=M.literature)||void 0===a?void 0:a.length)>0)&&(rt(),0===y.length&&(console.log("Converting data to React Flow nodes due to data change"),setTimeout(()=>{ot(M,!1)},100)))},[M,rt,y.length]);const ot=(0,a.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=[...e.topics.map(e=>({...e,type:"topic"})),...e.cases.map(e=>({...e,type:"case"})),...e.tasks.map(e=>({...e,type:"task"})),...e.literature.map(e=>({...e,type:"literature"}))];let a;const i=s.some(e=>e.position&&"number"===typeof e.position.x&&"number"===typeof e.position.y);if(s.length>0&&t&&!i)try{const{forceSimulation:t,forceManyBody:i,forceLink:r,forceCenter:o,forceCollide:n}=await Ae(),l=s.map((e,t)=>{var s,a;return{id:`${e.type}-${e.id}`,x:(null===(s=e.position)||void 0===s?void 0:s.x)||200*(Math.random()-.5),y:(null===(a=e.position)||void 0===a?void 0:a.y)||200*(Math.random()-.5),type:e.type}}),c=(e.connections||[]).map(e=>({source:e.source,target:e.target,id:e.id})).filter(e=>{const t=new Set(l.map(e=>e.id));return t.has(e.source)&&t.has(e.target)}),d=t(l).force("link",r(c).id(e=>e.id).distance(200).strength(.5)).force("charge",i().strength(-800).distanceMax(400)).force("center",o(window.innerWidth/3,window.innerHeight/2)).force("collision",n().radius(80)).stop();for(let e=0;e<300;e++)d.tick();const u=new Map;l.forEach(e=>{u.set(e.id,{x:e.x,y:e.y})}),a=s.map(e=>{const t=`${e.type}-${e.id}`,s=u.get(t)||{x:0,y:0};return{...e,position:s}})}catch(n){console.warn("Failed to apply initial layout, using fallback positioning:",n),a=s}else a=s;const r=(a||s).map((e,t)=>{const a=`${e.type}-${e.id}`,i="case"===e.type?{...e,chiefComplaint:e.chiefComplaint||e.chief_complaint||"",initialPresentation:e.initialPresentation||e.initial_presentation||"",currentPresentation:e.currentPresentation||e.current_presentation||"",medicationHistory:e.medicationHistory||e.medication_history||"",therapyProgress:e.therapyProgress||e.therapy_progress||"",defensePatterns:e.defensePatterns||e.defense_patterns||"",clinicalReflection:e.clinicalReflection||e.clinical_reflection||""}:e;let r;if(e.position&&"number"===typeof e.position.x&&"number"===typeof e.position.y)r=e.position;else{const e=Math.ceil(Math.sqrt(s.length)),a=250,i=150;r={x:t%e*a+300,y:Math.floor(t/e)*a+i}}return{id:a,type:e.type,position:r,data:{...i,onDelete:()=>at(a),onLiteratureClick:"literature"===e.type?it:void 0,skipAnimation:K}}}),o=((e,t)=>{const s=new Set(t);return e.filter(e=>s.has(e.source)&&s.has(e.target)).map(e=>({id:e.id,source:e.source,target:e.target,label:e.label,type:"floating",style:{strokeWidth:2,stroke:"#64748b",opacity:.85},animated:!1,updatable:!0}))})(e.connections||[],r.map(e=>e.id));j(r),E(o)},[j,E,at,it,K]),nt=(0,a.useCallback)(async e=>{const t={topics:JSON.parse(JSON.stringify(e.topics||[])),cases:JSON.parse(JSON.stringify(e.cases||[])),tasks:JSON.parse(JSON.stringify(e.tasks||[])),literature:JSON.parse(JSON.stringify(e.literature||[])),connections:JSON.parse(JSON.stringify(e.connections||[]))};try{const e=(new Date).toISOString();t.topics=t.topics.map((t,s)=>{var a,i;return{id:String(t.id||`${Date.now()}-${s}-topic`),title:t.title||"Untitled Topic",description:t.description||"",category:t.category||"Uncategorized",color:t.color||"#3B82F6",position:{x:Number(null===(a=t.position)||void 0===a?void 0:a.x)||0,y:Number(null===(i=t.position)||void 0===i?void 0:i.y)||0},flashcard_count:Number(t.flashcard_count)||0,completed_flashcards:Number(t.completed_flashcards)||0,resources:Array.isArray(t.resources)?t.resources:[],created_at:t.created_at||e,updated_at:e}}),t.cases=t.cases.map((t,s)=>{var a,i;return{id:String(t.id||`${Date.now()}-${s}-case`),case_id:t.case_id||`CASE-${Date.now()}-${s}`,encounter_date:t.encounter_date||e,primary_diagnosis:t.primary_diagnosis||"Unspecified",secondary_diagnoses:Array.isArray(t.secondary_diagnoses)?t.secondary_diagnoses:[],age:void 0!==t.age?Number(t.age):null,gender:t.gender||null,chief_complaint:t.chiefComplaint||t.chief_complaint||"",initial_presentation:t.initialPresentation||t.initial_presentation||"",current_presentation:t.currentPresentation||t.current_presentation||"",medication_history:t.medicationHistory||t.medication_history||"",therapy_progress:t.therapyProgress||t.therapy_progress||"",defense_patterns:t.defensePatterns||t.defense_patterns||"",clinical_reflection:t.clinicalReflection||t.clinical_reflection||"",history_present_illness:t.history_present_illness||null,medical_history:t.medical_history||null,medications:Array.isArray(t.medications)?t.medications:[],mental_status_exam:t.mental_status_exam||null,assessment_plan:t.assessment_plan||null,notes:t.notes||null,status:t.status||"active",linked_topics:Array.isArray(t.linked_topics)?t.linked_topics:[],position:{x:Number(null===(a=t.position)||void 0===a?void 0:a.x)||0,y:Number(null===(i=t.position)||void 0===i?void 0:i.y)||0},created_at:t.created_at||e,updated_at:e}}),t.tasks=t.tasks.map((t,s)=>{var a,i;return{id:String(t.id||`${Date.now()}-${s}-task`),title:t.title||"Untitled Task",description:t.description||null,status:t.status||"pending",priority:t.priority||"medium",due_date:t.due_date||null,linked_case_id:t.linked_case_id||null,linked_topic_id:t.linked_topic_id||null,position:{x:Number(null===(a=t.position)||void 0===a?void 0:a.x)||0,y:Number(null===(i=t.position)||void 0===i?void 0:i.y)||0},created_at:t.created_at||e,updated_at:e}}),t.literature=t.literature.map((t,s)=>{var a,i;return{id:String(t.id||`${Date.now()}-${s}-lit`),title:t.title||"Untitled Literature",authors:t.authors||null,publication:t.publication||null,year:void 0!==t.year?Number(t.year):null,doi:t.doi||null,abstract:t.abstract||null,notes:t.notes||null,pdf_path:t.pdf_path||null,linked_topics:Array.isArray(t.linked_topics)?t.linked_topics:[],position:{x:Number(null===(a=t.position)||void 0===a?void 0:a.x)||0,y:Number(null===(i=t.position)||void 0===i?void 0:i.y)||0},created_at:t.created_at||e,updated_at:e}}),t.connections=t.connections.map((e,t)=>({id:String(e.id||`${Date.now()}-${t}-conn`),source:e.source||"",target:e.target||"",label:e.label||""})),t.connections=t.connections.filter(e=>e.source&&e.target&&"string"===typeof e.source&&"string"===typeof e.target&&e.source.length>0&&e.target.length>0),console.log("Sending cleaned data to backend:",t);const s=await r.A.put(`${Oe}/mindmap-data`,t,{headers:{"Content-Type":"application/json"}});console.log("Backend save successful:",s.data)}catch(n){var s,a,i,o;console.error("Failed to save to backend:",(null===(s=n.response)||void 0===s?void 0:s.data)||n.message),422===(null===(a=n.response)||void 0===a?void 0:a.status)&&null!==(i=n.response)&&void 0!==i&&null!==(o=i.data)&&void 0!==o&&o.detail&&(console.error("Validation errors:"),console.error(JSON.stringify(n.response.data.detail,null,2)),console.error("Request data that caused validation error:"),console.error(JSON.stringify(t,null,2)))}},[]),lt=(0,a.useCallback)(e=>{const t=`conn-${Date.now()}`,s={...e,id:t,type:"floating",style:{strokeWidth:2,stroke:"#64748b",opacity:.85,transition:"none"},data:{__forceUpdate:Date.now()},interactionWidth:20};E(e=>(0,l.rN)(s,e)),$(t=>{const a=[...t.connections,{id:s.id,source:e.source,target:e.target,label:""}],i={...t,connections:a};return st(i),i})},[E,$,st]),ct=(0,a.useCallback)((e,t)=>{Y(t),j(e=>e.map(e=>({...e,selected:e.id===t.id})))},[j]),dt=(0,a.useCallback)((e,t)=>{const[s,a]=t.id.split("-");if(("case"!==s||!ae.isOpen)&&("topic"!==s||!re.isOpen)&&("task"!==s||!le.isOpen)&&("literature"!==s||!Ve.isOpen)){if("literature"===s){const e=M.literature.find(e=>String(e.id)===a);return void(e&&qe({isOpen:!0,data:e}))}if("case"===s){const e=M.cases.find(e=>String(e.id)===a);return void(e&&(Ze(e=>({...e,case:!0})),ie({isOpen:!0,data:e}),setTimeout(()=>{Ze(e=>({...e,case:!1}))},800)))}if("topic"===s){const e=M.topics.find(e=>String(e.id)===a);return void(e&&(Ze(e=>({...e,topic:!0})),oe({isOpen:!0,data:e}),setTimeout(()=>{Ze(e=>({...e,topic:!1}))},800)))}if("task"===s){const e=M.tasks.find(e=>String(e.id)===a);return void(e&&(Ze(e=>({...e,task:!0})),ce({isOpen:!0,data:e}),setTimeout(()=>{Ze(e=>({...e,task:!1}))},800)))}}},[M,ae.isOpen,re.isOpen,le.isOpen,Ve.isOpen]),ut=(0,a.useCallback)((e,t)=>{E(e=>e.filter(e=>e.id!==t.id)),$(e=>{const s=e.connections.filter(e=>e.id!==t.id),a={...e,connections:s};return st(a),et("Connection deleted","success"),a})},[E,$,st,et]),pt=(0,a.useCallback)((e,t)=>{e.preventDefault(),Xe({isOpen:!0,edge:t})},[]),mt=(0,a.useCallback)((e,t)=>{E(s=>s.map(s=>s.id===e?{...s,label:t}:s)),$(s=>{const a=s.connections.map(s=>s.id===e?{...s,label:t}:s),i={...s,connections:a};return st(i),i})},[E,$,st]),xt=(0,a.useCallback)((e,t)=>{E(e=>e.map(e=>e.id===t.id?{...e,className:"highlighted"}:e))},[E]),ht=(0,a.useCallback)((e,t)=>{E(e=>e.map(e=>e.id===t.id?{...e,className:""}:e))},[E]),gt=(0,a.useCallback)(async()=>{if(0!==y.length)try{const{forceSimulation:e,forceManyBody:t,forceLink:s,forceCenter:a,forceCollide:i}=await Ae(),r=[...D],o=new Set(y.map(e=>e.id)),n=r.filter(e=>o.has(e.source)&&o.has(e.target)),l=n.map(e=>({source:e.source,target:e.target,id:e.id})),c=y.map(e=>({id:e.id,x:e.position.x,y:e.position.y,fx:null,fy:null})),d=e(c).force("link",s(l).id(e=>e.id).distance(200).strength(.5)).force("charge",t().strength(-800).distanceMax(400)).force("center",a(window.innerWidth/3,window.innerHeight/2)).force("collision",i().radius(80)).stop(),p=50,m=400;let x=0;const h=()=>{const e=Math.min(p,m-x);for(let t=0;t<e;t++)d.tick();if(x+=e,x<m)requestAnimationFrame(h);else{const e=c.map(e=>({...y.find(t=>t.id===e.id),position:{x:e.x,y:e.y}}));j(e),E(n),$(t=>{const s={...t};return e.forEach(e=>{var t;const[a,i]=e.id.split("-"),r=null===(t=s["literature"===a?"literature":`${a}s`])||void 0===t?void 0:t.find(e=>String(e.id)===i);r&&(r.position=e.position)}),s}),setTimeout(()=>{u({duration:800,padding:.2})},200)}};requestAnimationFrame(h)}catch(e){console.error("Force layout failed:",e),et("Layout calculation failed","error")}},[y,D,j,E,$,u,et]),bt=(0,a.useCallback)(()=>{try{gt(),et("Nodes realigned successfully","success")}catch(e){console.error("Force layout error:",e),et("Failed to realign nodes","error")}},[gt,et]),yt=(0,a.useCallback)(()=>{if(!window.confirm("Are you sure you want to clear the entire mind map?"))return;const e={topics:[],cases:[],tasks:[],literature:[],connections:[]};$(e),j([]),E([]),Y(null),ie({isOpen:!1,data:null}),oe({isOpen:!1,data:null}),ce({isOpen:!1,data:null}),qe({isOpen:!1,data:null}),ee(null),st(e),et("Mind map cleared successfully","success")},[j,E,st,et]),vt=(0,a.useCallback)(e=>{if(N(e),Ge)return void console.log("Skipping position updates during animation");const t=e.filter(e=>"position"===e.type&&e.position);t.length>0&&(console.log("Processing position changes:",t),$(e=>{const s={...e};return t.forEach(e=>{if(e.position){var t;const[a,i]=e.id.split("-"),r=null===(t=s["literature"===a?"literature":`${a}s`])||void 0===t?void 0:t.find(e=>String(e.id)===i);r&&(r.position={...e.position},console.log(`Updated ${a} ${i} position to:`,e.position))}}),De.save(s,null,null,!1),s}),setTimeout(()=>{st(M)},500))},[N,$,Ge,st,M]),ft=(0,a.useCallback)((e,t)=>{clearTimeout(window.dragSaveTimeout),window.dragSaveTimeout=setTimeout(()=>{$(e=>(st(e),e))},500)},[st]),jt=(0,a.useCallback)(async()=>{U(!0),J(10),q("Checking local data...");try{const t=De.load();if(t)return J(30),q("Loading from cache..."),t.connections||(t.connections=[]),$(t),J(60),q("Applying layout..."),await ot(t,!0),J(90),q("Finalizing..."),U(!1),Q(!1),J(100),void setTimeout(async()=>{try{const e=await r.A.get(`${Oe}/mindmap-data`);JSON.stringify(e.data)!==JSON.stringify(t)&&(e.data.connections||(e.data.connections=[]),$(e.data),await ot(e.data),st(e.data),et("Data synchronized with server","info"))}catch(e){console.warn("Background sync failed:",e)}},500);J(20),q("Loading from server...");try{const e=await r.A.get(`${Oe}/mindmap-data`);e.data.connections||(e.data.connections=[]),J(50),q("Processing data..."),$(e.data),J(80),q("Applying layout..."),await ot(e.data,!0),st(e.data),J(100),U(!1),Q(!1)}catch(e){console.warn("Backend loading failed, populating with sample data:",e),J(60),q("Loading sample data...");$({topics:[],cases:[],tasks:[],literature:[],connections:[]}),setTimeout(()=>{Se($,st,et)},100),J(100),U(!1),Q(!1)}}catch(t){console.error("Error loading mind map:",t),et("Failed to load mind map","error"),U(!1),Q(!1)}},[et,st,ot]);(0,a.useEffect)(()=>{jt(),Fe([{id:"template1",name:"Schizophrenia Workup",nodeType:"case",data:{primary_diagnosis:"Schizophrenia",chief_complaint:"Auditory hallucinations"}},{id:"template2",name:"MDD Follow-up",nodeType:"case",data:{primary_diagnosis:"Major Depressive Disorder",status:"follow_up"}},{id:"template3",name:"CBT for Anxiety",nodeType:"topic",data:{title:"CBT for Anxiety",category:"Anxiety Disorders"}}])},[]);const wt=(0,a.useCallback)((e,t)=>{if(!e||!e.id||!e.data)return!1;if(!t)return!0;const s=t.toLowerCase().trim();if(!s)return!0;try{const t=e.id.split("-"),a=t.length>0?t[0]:"",i=t.length>1?t[1]:"";let r=!1;if(!r&&e.data.label){r=e.data.label.toLowerCase().includes(s)}if(!r&&a&&(r=a.includes(s)),!r&&"case"===a&&i&&(r=`case-${i}`.toLowerCase().includes(s)),!r)if("case"===a){r=(e.data.primary_diagnosis||e.data.primaryDiagnosis||"").toLowerCase().includes(s)}else if("topic"===a){r=(e.data.title||"").toLowerCase().includes(s)}else if("literature"===a){const t=(e.data.title||"").toLowerCase(),a=(e.data.authors||"").toLowerCase();r=t.includes(s)||a.includes(s)}if(!r&&e.data.category){r=e.data.category.toLowerCase().includes(s)}return r}catch(a){return console.error("Error in nodeMatchesSearch for node:",e.id,a),!1}},[]);if((0,a.useEffect)(()=>{const e=e=>{var t;if("INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName){if(e.ctrlKey||e.metaKey)switch(e.key){case"n":e.preventDefault(),se(!0);break;case"e":e.preventDefault(),F(!R);break;case"r":e.preventDefault(),bt();break;case"f":e.preventDefault(),null===(t=document.querySelector('input[type="text"][placeholder*="Search"]'))||void 0===t||t.focus()}"Escape"===e.key&&(Y(null),ie({isOpen:!1,data:null}),oe({isOpen:!1,data:null}),ce({isOpen:!1,data:null}),qe({isOpen:!1,data:null}),se(!1),Je(!1),!ae.isOpen&&!re.isOpen&&!le.isOpen&&Ve.isOpen)}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[R,bt,ae,re,le,Ve,te,We]),(0,a.useEffect)(()=>{(me&&!he&&y.length>0||K&&y.length>0)&&be(!0)},[me,he,y,K]),(0,a.useEffect)(()=>{if(0===y.length)return;Object.values(Qe).some(e=>e)},[Z,y,wt,Ge,Qe]),(0,a.useEffect)(()=>{if(!me)return;const e=document.getElementById("search-filter-styles")||document.createElement("style");e.id="search-filter-styles",document.getElementById("search-filter-styles")||document.head.appendChild(e);e.textContent="\n      /* Default node styling */\n      .react-flow__node {\n        transition: opacity 0.3s ease, transform 0.3s ease, filter 0.3s ease !important;\n      }\n      \n      /* Search dimmed nodes */\n      .react-flow__node.search-dimmed {\n        opacity: 0.15 !important;\n        filter: grayscale(0.7) !important;\n        transform: scale(0.9) !important;\n      }\n      \n      /* Selected node highlighting */\n      .react-flow__node.search-selected {\n        box-shadow: 0 0 0 2px #10b981, 0 0 20px rgba(16, 185, 129, 0.6) !important;\n        z-index: 1000 !important;\n      }\n      \n      /* Ensure dragging still works */\n      .react-flow__node.search-dimmed {\n        pointer-events: auto !important;\n      }\n    "},[me]),H)return(0,P.jsx)(Ne,{message:V,progress:W});return(0,P.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,P.jsxs)("div",{className:"w-80 bg-gradient-to-b from-slate-800 to-slate-900 text-white p-6 shadow-2xl flex flex-col",children:[(0,P.jsxs)("div",{className:"mb-8",children:[(0,P.jsx)("div",{className:"text-3xl font-bold tracking-wide text-white",children:"PGY-3 HQ"}),(0,P.jsx)("div",{className:"text-sm text-slate-300 mt-2",children:"Psychiatry Resident Dashboard"})]}),(0,P.jsxs)("div",{className:"mb-6",children:[(0,P.jsx)("h3",{className:"text-sm font-semibold text-slate-300 mb-3",children:"Filter by Category"}),(0,P.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,P.jsx)("button",{onClick:()=>ee(null),className:"px-3 py-2 rounded-lg text-xs transition-all "+(null===Z?"bg-teal-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"),children:"All"}),(0,P.jsxs)("button",{onClick:()=>ee("topic"),className:"px-3 py-2 rounded-lg text-xs transition-all flex items-center gap-1 "+("topic"===Z?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"),children:[(0,P.jsx)(x.A,{size:12}),"Topics"]}),(0,P.jsxs)("button",{onClick:()=>ee("case"),className:"px-3 py-2 rounded-lg text-xs transition-all flex items-center gap-1 "+("case"===Z?"bg-indigo-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"),children:[(0,P.jsx)(b.A,{size:12}),"Cases"]}),(0,P.jsxs)("button",{onClick:()=>ee("task"),className:"px-3 py-2 rounded-lg text-xs transition-all flex items-center gap-1 "+("task"===Z?"bg-amber-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"),children:[(0,P.jsx)(v.A,{size:12}),"Tasks"]}),(0,P.jsxs)("button",{onClick:()=>ee("literature"),className:"px-3 py-2 rounded-lg text-xs transition-all flex items-center gap-1 "+("literature"===Z?"bg-purple-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"),children:[(0,P.jsx)(f.A,{size:12}),"Literature"]})]})]}),(0,P.jsx)("div",{className:"mb-4 p-3 bg-slate-700 bg-opacity-50 rounded-lg",children:(0,P.jsx)("div",{className:"flex items-center gap-2 text-xs",children:Te?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(p.A,{size:12,className:"animate-spin"}),(0,P.jsx)("span",{className:"text-amber-300",children:"Saving..."})]}):ke?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(C.A,{size:12,className:"text-green-400"}),(0,P.jsxs)("span",{className:"text-slate-300",children:["Last saved: ",ke.toLocaleTimeString()]})]}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(S.A,{size:12,className:"text-slate-400"}),(0,P.jsx)("span",{className:"text-slate-400",children:"Auto-save enabled"})]})})}),(0,P.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,P.jsx)(ze,{onClick:bt,icon:A.A,className:"w-full bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md text-sm",children:"Realign Nodes"}),(0,P.jsx)(ze,{onClick:()=>Je(!0),icon:O.A,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md text-sm",children:"Manage Templates"}),(0,P.jsx)(ze,{onClick:()=>Se($,st,et),icon:f.A,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-md text-sm",children:"Add Sample Literature"}),(0,P.jsx)(ze,{onClick:()=>F(!R),icon:R?k.A:T.A,className:"w-full px-4 py-2 rounded-md text-sm "+(R?"bg-teal-600":"bg-slate-600"),children:R?"Exit Edit Mode":"Edit Mind Map"}),(0,P.jsx)(ze,{onClick:()=>se(!0),icon:w.A,className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm",children:"Add New Node"}),(0,P.jsx)(ze,{onClick:yt,icon:_.A,className:"w-full bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md text-sm",children:"Clear All Data"})]}),B&&(0,P.jsxs)("div",{className:"mt-auto p-4 bg-slate-700 bg-opacity-50 rounded-lg",children:[(0,P.jsx)("h3",{className:"text-sm font-semibold text-slate-300 mb-2",children:"Selected Node"}),(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsxs)("div",{className:"flex items-center gap-2",children:["topic"===B.type&&(0,P.jsx)(x.A,{size:14,className:"text-blue-400"}),"case"===B.type&&(0,P.jsx)(b.A,{size:14,className:"text-indigo-400"}),"task"===B.type&&(0,P.jsx)(v.A,{size:14,className:"text-amber-400"}),"literature"===B.type&&(0,P.jsx)(f.A,{size:14,className:"text-purple-400"}),(0,P.jsx)("span",{className:"text-sm text-white font-medium truncate",children:B.data.label})]}),B.data.category&&(0,P.jsxs)("div",{className:"text-xs text-slate-400",children:["Category: ",B.data.category]}),B.data.status&&(0,P.jsxs)("div",{className:"text-xs text-slate-400",children:["Status: ",B.data.status]}),(0,P.jsxs)("button",{onClick:()=>{const[e,t]=B.id.split("-"),s=M["literature"===e?"literature":`${e}s`].find(e=>String(e.id)===t);s&&("case"===e?ie({isOpen:!0,data:s}):"topic"===e?oe({isOpen:!0,data:s}):"task"===e?ce({isOpen:!0,data:s}):"literature"===e&&it(s))},className:"w-full mt-2 px-3 py-2 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded-lg transition-colors flex items-center gap-2",children:[(0,P.jsx)(z.A,{size:12}),"View Details"]})]})]}),!B&&(0,P.jsxs)("div",{className:"mt-auto p-3 bg-slate-700 bg-opacity-30 rounded-lg",children:[(0,P.jsx)("h4",{className:"text-xs font-semibold text-slate-300 mb-2",children:"Keyboard Shortcuts"}),(0,P.jsxs)("div",{className:"space-y-1 text-xs text-slate-400",children:[(0,P.jsx)("div",{children:"Ctrl+N - Add Node"}),(0,P.jsx)("div",{children:"Ctrl+E - Toggle Edit Mode"}),(0,P.jsx)("div",{children:"Ctrl+R - Realign Nodes"}),(0,P.jsx)("div",{children:"Esc - Clear Selection"})]})]})]}),(0,P.jsx)("div",{className:"flex-1 relative",children:(0,P.jsx)(Le,{children:(0,P.jsxs)(n.Gc,{nodes:y,edges:D,onNodesChange:vt,onEdgesChange:I,onConnect:lt,onNodeClick:ct,onNodeDoubleClick:dt,onNodeDragStop:ft,onEdgeDoubleClick:ut,onEdgeContextMenu:pt,onEdgeMouseEnter:xt,onEdgeMouseLeave:ht,nodeTypes:Ee,edgeTypes:{floating:ve,enhanced:je},nodesDraggable:!0,nodesConnectable:R,elementsSelectable:!0,onInit:e=>{xe(!0),window.reactFlowInstance=e},onError:(e,t)=>{console.warn("React Flow Error:",e,t),!Ge||t.includes("dimensions")},fitView:!0,snapToGrid:!1,snapGrid:[15,15],elevateEdgesOnSelect:!1,connectionLineComponent:we,connectionLineStyle:{stroke:"#3b82f6",strokeWidth:3.5,opacity:.9,strokeLinecap:"round",strokeDasharray:"5,3",filter:"drop-shadow(0 0 6px rgba(59, 130, 246, 0.6))",animation:"flowingDash 1s linear infinite"},defaultEdgeOptions:{type:"enhanced",style:{strokeWidth:2.5,stroke:"#64748b",opacity:.9,strokeLinecap:"round",transition:"none"}},className:"bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,P.jsx)(n.VS,{color:"#aaa",gap:16}),(0,P.jsx)(n.H2,{}),(0,P.jsx)(n.of,{})]})})}),We&&(0,P.jsx)(L,{isOpen:We,onClose:()=>Je(!1),templates:Re,setTemplates:Fe}),Ve.isOpen&&(0,P.jsx)(X,{isOpen:Ve.isOpen,onClose:()=>{Ke(!0),qe({isOpen:!1,data:null}),setTimeout(()=>Ke(!1),500)},onAnimationStart:()=>Ke(!0),onAnimationEnd:()=>Ke(!1),literatureData:Ve.data,allNodes:y,connections:M.connections||[],setMindMapData:$,autoSaveMindMapData:st,addToast:et}),te&&(0,P.jsx)(Ie,{isOpen:te,onClose:()=>se(!1),onSelect:(e,t)=>{var s,a,i,r;se(!1);const o=Date.now(),n=`${e}-${o}`;let l={id:o,label:`New ${e}`};"case"===e&&(l={...l,chiefComplaint:"",initialPresentation:"",currentPresentation:"",medicationHistory:"",therapyProgress:"",defensePatterns:"",clinicalReflection:""});const c=((null===(s=M.topics)||void 0===s?void 0:s.length)||0)+((null===(a=M.cases)||void 0===a?void 0:a.length)||0)+((null===(i=M.tasks)||void 0===i?void 0:i.length)||0)+((null===(r=M.literature)||void 0===r?void 0:r.length)||0),d=Math.ceil(Math.sqrt(c+1)),u={x:c%d*280+400,y:280*Math.floor(c/d)+150},p={id:n,type:e,position:u,data:{...l,onDelete:()=>at(n)}};$(t=>{const s="literature"===e?"literature":`${e}s`,a={...p.data,position:p.position};delete a.onDelete;const i={...t,[s]:[...t[s]||[],a]};return st(i),i}),j(e=>e.concat(p))},templates:Re}),(0,P.jsx)(o.N,{mode:"wait",children:ae.isOpen&&(0,P.jsx)(G,{isOpen:ae.isOpen,data:de.current||ae.data,onClose:()=>{Ze(e=>({...e,case:!0})),ie({isOpen:!1,data:null})},onAnimationStart:()=>{Ke(!0),Ze(e=>({...e,case:!0}))},onAnimationEnd:()=>{Ke(!1),Ze(e=>({...e,case:!1}))},setMindMapData:$,autoSaveMindMapData:st,addToast:et},`case-modal-${(null===(i=ae.data)||void 0===i?void 0:i.id)||"default"}`)}),(0,P.jsx)(o.N,{mode:"wait",children:re.isOpen&&(0,P.jsx)(ne,{isOpen:re.isOpen,data:ue.current||re.data,onClose:()=>{Ze(e=>({...e,topic:!0})),oe({isOpen:!1,data:null})},onAnimationStart:()=>{Ke(!0),Ze(e=>({...e,topic:!0}))},onAnimationEnd:()=>{Ke(!1),Ze(e=>({...e,topic:!1}))},setMindMapData:$,autoSaveMindMapData:st,addToast:et},`topic-modal-${(null===(c=re.data)||void 0===c?void 0:c.id)||"default"}`)}),(0,P.jsx)(o.N,{mode:"wait",children:le.isOpen&&(0,P.jsx)(ge,{isOpen:le.isOpen,data:pe.current||le.data,onClose:()=>{Ze(e=>({...e,task:!0})),ce({isOpen:!1,data:null})},onAnimationStart:()=>{Ke(!0),Ze(e=>({...e,task:!0}))},onAnimationEnd:()=>{Ke(!1),Ze(e=>({...e,task:!1}))},setMindMapData:$,autoSaveMindMapData:st,addToast:et},`task-modal-${(null===(d=le.data)||void 0===d?void 0:d.id)||"default"}`)}),(0,P.jsx)(Me,{isOpen:$e.isOpen,edge:$e.edge,onClose:()=>Xe({isOpen:!1,edge:null}),onSave:mt}),H&&(0,P.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-80 flex items-center justify-center z-50",children:(0,P.jsx)(p.A,{size:48,className:"animate-spin text-blue-600"})}),He.map(e=>(0,P.jsx)(_e,{message:e.message,type:e.type,duration:e.duration,onClose:()=>tt(e.id)},e.id))]})};class Le extends a.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return e.message&&e.message.includes("dimensions")?(console.warn("React Flow dimension error caught, recovering..."),{hasError:!1}):{hasError:!0}}componentDidCatch(e,t){e.message&&e.message.includes("dimensions")?setTimeout(()=>{window.reactFlowInstance&&window.reactFlowInstance.fitView()},100):console.error("React Flow Error:",e,t)}render(){return this.state.hasError?(0,P.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,P.jsxs)("div",{className:"text-center",children:[(0,P.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Mind Map Temporarily Unavailable"}),(0,P.jsx)("p",{className:"text-gray-600 mb-4",children:"There was an issue with the mind map. Please refresh the page."}),(0,P.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Refresh Page"})]})}):this.props.children}}const Xe=()=>(0,P.jsx)(n.Ln,{children:(0,P.jsx)($e,{})});const Re=function(){return(0,P.jsx)(Xe,{})};i.createRoot(document.getElementById("root")).render((0,P.jsx)(a.StrictMode,{children:(0,P.jsx)(Re,{})}))}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var r=t[a]={id:a,loaded:!1,exports:{}};return e[a](r,r.exports,s),r.loaded=!0,r.exports}s.m=e,(()=>{var e=[];s.O=(t,a,i,r)=>{if(!a){var o=1/0;for(d=0;d<e.length;d++){a=e[d][0],i=e[d][1],r=e[d][2];for(var n=!0,l=0;l<a.length;l++)(!1&r||o>=r)&&Object.keys(s.O).every(e=>s.O[e](a[l]))?a.splice(l--,1):(n=!1,r<o&&(o=r));if(n){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[a,i,r]}})(),(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;s.t=function(a,i){if(1&i&&(a=this(a)),8&i)return a;if("object"===typeof a&&a){if(4&i&&a.__esModule)return a;if(16&i&&"function"===typeof a.then)return a}var r=Object.create(null);s.r(r);var o={};e=e||[null,t({}),t([]),t(t)];for(var n=2&i&&a;("object"==typeof n||"function"==typeof n)&&!~e.indexOf(n);n=t(n))Object.getOwnPropertyNames(n).forEach(e=>o[e]=()=>a[e]);return o.default=()=>a,s.d(r,o),r}})(),s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce((t,a)=>(s.f[a](e,t),t),[])),s.u=e=>"static/js/"+e+"."+{213:"c0413f75",261:"de3004f3",524:"c4c81a9f"}[e]+".chunk.js",s.miniCssF=e=>{},s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="frontend:";s.l=(a,i,r,o)=>{if(e[a])e[a].push(i);else{var n,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==t+r){n=u;break}}n||(l=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,s.nc&&n.setAttribute("nonce",s.nc),n.setAttribute("data-webpack",t+r),n.src=a),e[a]=[i];var p=(t,s)=>{n.onerror=n.onload=null,clearTimeout(m);var i=e[a];if(delete e[a],n.parentNode&&n.parentNode.removeChild(n),i&&i.forEach(e=>e(s)),t)return t(s)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=p.bind(null,n.onerror),n.onload=p.bind(null,n.onload),l&&document.head.appendChild(n)}}})(),s.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),s.p="/",(()=>{var e={792:0};s.f.j=(t,a)=>{var i=s.o(e,t)?e[t]:void 0;if(0!==i)if(i)a.push(i[2]);else{var r=new Promise((s,a)=>i=e[t]=[s,a]);a.push(i[2]=r);var o=s.p+s.u(t),n=new Error;s.l(o,a=>{if(s.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var r=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;n.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",n.name="ChunkLoadError",n.type=r,n.request=o,i[1](n)}},"chunk-"+t,t)}},s.O.j=t=>0===e[t];var t=(t,a)=>{var i,r,o=a[0],n=a[1],l=a[2],c=0;if(o.some(t=>0!==e[t])){for(i in n)s.o(n,i)&&(s.m[i]=n[i]);if(l)var d=l(s)}for(t&&t(a);c<o.length;c++)r=o[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(d)},a=self.webpackChunkfrontend=self.webpackChunkfrontend||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=s.O(void 0,[967,497,96],()=>s(8806));a=s.O(a)})();
//# sourceMappingURL=main.7e5c0f82.js.map