/*! For license information please see main.3f02044c.js.LICENSE.txt */
(()=>{var e={3577:(e,t,n)=>{e.exports={graphlib:n(7938),layout:n(6675),debug:n(3774),util:{time:n(5641).time,notime:n(5641).notime},version:n(5185)}},5673:(e,t,n)=>{"use strict";var r=n(8208),o=n(3130);e.exports={run:function(e){var t="greedy"===e.graph().acyclicer?o(e,function(e){return function(t){return e.edge(t).weight}}(e)):function(e){var t=[],n={},o={};function i(a){r.has(o,a)||(o[a]=!0,n[a]=!0,r.forEach(e.outEdges(a),(function(e){r.has(n,e.w)?t.push(e):i(e.w)})),delete n[a])}return r.forEach(e.nodes(),i),t}(e);r.forEach(t,(function(t){var n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,r.uniqueId("rev"))}))},undo:function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}}))}}},5972:(e,t,n)=>{var r=n(8208),o=n(5641);function i(e,t,n,r,i,a){var l={width:0,height:0,rank:a,borderType:t},s=i[t][a-1],c=o.addDummyNode(e,"border",l,n);i[t][a]=c,e.setParent(c,r),s&&e.setEdge(s,c,{weight:1})}e.exports=function(e){r.forEach(e.children(),(function t(n){var o=e.children(n),a=e.node(n);if(o.length&&r.forEach(o,t),r.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var l=a.minRank,s=a.maxRank+1;l<s;++l)i(e,"borderLeft","_bl",n,a,l),i(e,"borderRight","_br",n,a,l)}}))}},1981:(e,t,n)=>{"use strict";var r=n(8208);function o(e){r.forEach(e.nodes(),(function(t){i(e.node(t))})),r.forEach(e.edges(),(function(t){i(e.edge(t))}))}function i(e){var t=e.width;e.width=e.height,e.height=t}function a(e){e.y=-e.y}function l(e){var t=e.x;e.x=e.y,e.y=t}e.exports={adjust:function(e){var t=e.graph().rankdir.toLowerCase();"lr"!==t&&"rl"!==t||o(e)},undo:function(e){var t=e.graph().rankdir.toLowerCase();"bt"!==t&&"rl"!==t||function(e){r.forEach(e.nodes(),(function(t){a(e.node(t))})),r.forEach(e.edges(),(function(t){var n=e.edge(t);r.forEach(n.points,a),r.has(n,"y")&&a(n)}))}(e);"lr"!==t&&"rl"!==t||(!function(e){r.forEach(e.nodes(),(function(t){l(e.node(t))})),r.forEach(e.edges(),(function(t){var n=e.edge(t);r.forEach(n.points,l),r.has(n,"x")&&l(n)}))}(e),o(e))}}},6684:e=>{function t(){var e={};e._next=e._prev=e,this._sentinel=e}function n(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function r(e,t){if("_next"!==e&&"_prev"!==e)return t}e.exports=t,t.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return n(t),t},t.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&n(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},t.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,r)),n=n._prev;return"["+e.join(", ")+"]"}},3774:(e,t,n)=>{var r=n(8208),o=n(5641),i=n(7938).Graph;e.exports={debugOrdering:function(e){var t=o.buildLayerMatrix(e),n=new i({compound:!0,multigraph:!0}).setGraph({});return r.forEach(e.nodes(),(function(t){n.setNode(t,{label:t}),n.setParent(t,"layer"+e.node(t).rank)})),r.forEach(e.edges(),(function(e){n.setEdge(e.v,e.w,{},e.name)})),r.forEach(t,(function(e,t){var o="layer"+t;n.setNode(o,{rank:"same"}),r.reduce(e,(function(e,t){return n.setEdge(e,t,{style:"invis"}),t}))})),n}}},7938:(e,t,n)=>{var r;try{r=n(9207)}catch(o){}r||(r=window.graphlib),e.exports=r},3130:(e,t,n)=>{var r=n(8208),o=n(7938).Graph,i=n(6684);e.exports=function(e,t){if(e.nodeCount()<=1)return[];var n=function(e,t){var n=new o,a=0,l=0;r.forEach(e.nodes(),(function(e){n.setNode(e,{v:e,in:0,out:0})})),r.forEach(e.edges(),(function(e){var r=n.edge(e.v,e.w)||0,o=t(e),i=r+o;n.setEdge(e.v,e.w,i),l=Math.max(l,n.node(e.v).out+=o),a=Math.max(a,n.node(e.w).in+=o)}));var c=r.range(l+a+3).map((function(){return new i})),u=a+1;return r.forEach(n.nodes(),(function(e){s(c,u,n.node(e))})),{graph:n,buckets:c,zeroIdx:u}}(e,t||a),c=function(e,t,n){var r,o=[],i=t[t.length-1],a=t[0];for(;e.nodeCount();){for(;r=a.dequeue();)l(e,t,n,r);for(;r=i.dequeue();)l(e,t,n,r);if(e.nodeCount())for(var s=t.length-2;s>0;--s)if(r=t[s].dequeue()){o=o.concat(l(e,t,n,r,!0));break}}return o}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(c,(function(t){return e.outEdges(t.v,t.w)})),!0)};var a=r.constant(1);function l(e,t,n,o,i){var a=i?[]:void 0;return r.forEach(e.inEdges(o.v),(function(r){var o=e.edge(r),l=e.node(r.v);i&&a.push({v:r.v,w:r.w}),l.out-=o,s(t,n,l)})),r.forEach(e.outEdges(o.v),(function(r){var o=e.edge(r),i=r.w,a=e.node(i);a.in-=o,s(t,n,a)})),e.removeNode(o.v),a}function s(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}},6675:(e,t,n)=>{"use strict";var r=n(8208),o=n(5673),i=n(2786),a=n(2460),l=n(5641).normalizeRanks,s=n(6467),c=n(5641).removeEmptyRanks,u=n(5146),d=n(5972),f=n(1981),p=n(550),h=n(1277),g=n(5641),m=n(7938).Graph;e.exports=function(e,t){var n=t&&t.debugTiming?g.time:g.notime;n("layout",(function(){var t=n("  buildLayoutGraph",(function(){return function(e){var t=new m({multigraph:!0,compound:!0}),n=C(e.graph());return t.setGraph(r.merge({},y,_(n,v),r.pick(n,b))),r.forEach(e.nodes(),(function(n){var o=C(e.node(n));t.setNode(n,r.defaults(_(o,x),w)),t.setParent(n,e.parent(n))})),r.forEach(e.edges(),(function(n){var o=C(e.edge(n));t.setEdge(n,r.merge({},S,_(o,k),r.pick(o,E)))})),t}(e)}));n("  runLayout",(function(){!function(e,t){t("    makeSpaceForEdgeLabels",(function(){!function(e){var t=e.graph();t.ranksep/=2,r.forEach(e.edges(),(function(n){var r=e.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(e)})),t("    removeSelfEdges",(function(){!function(e){r.forEach(e.edges(),(function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}}))}(e)})),t("    acyclic",(function(){o.run(e)})),t("    nestingGraph.run",(function(){u.run(e)})),t("    rank",(function(){a(g.asNonCompoundGraph(e))})),t("    injectEdgeLabelProxies",(function(){!function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),o={rank:(e.node(t.w).rank-r.rank)/2+r.rank,e:t};g.addDummyNode(e,"edge-proxy",o,"_ep")}}))}(e)})),t("    removeEmptyRanks",(function(){c(e)})),t("    nestingGraph.cleanup",(function(){u.cleanup(e)})),t("    normalizeRanks",(function(){l(e)})),t("    assignRankMinMax",(function(){!function(e){var t=0;r.forEach(e.nodes(),(function(n){var o=e.node(n);o.borderTop&&(o.minRank=e.node(o.borderTop).rank,o.maxRank=e.node(o.borderBottom).rank,t=r.max(t,o.maxRank))})),e.graph().maxRank=t}(e)})),t("    removeEdgeLabelProxies",(function(){!function(e){r.forEach(e.nodes(),(function(t){var n=e.node(t);"edge-proxy"===n.dummy&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))}))}(e)})),t("    normalize.run",(function(){i.run(e)})),t("    parentDummyChains",(function(){s(e)})),t("    addBorderSegments",(function(){d(e)})),t("    order",(function(){p(e)})),t("    insertSelfEdges",(function(){!function(e){var t=g.buildLayerMatrix(e);r.forEach(t,(function(t){var n=0;r.forEach(t,(function(t,o){var i=e.node(t);i.order=o+n,r.forEach(i.selfEdges,(function(t){g.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:i.rank,order:o+ ++n,e:t.e,label:t.label},"_se")})),delete i.selfEdges}))}))}(e)})),t("    adjustCoordinateSystem",(function(){f.adjust(e)})),t("    position",(function(){h(e)})),t("    positionSelfEdges",(function(){!function(e){r.forEach(e.nodes(),(function(t){var n=e.node(t);if("selfedge"===n.dummy){var r=e.node(n.e.v),o=r.x+r.width/2,i=r.y,a=n.x-o,l=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:o+2*a/3,y:i-l},{x:o+5*a/6,y:i-l},{x:o+a,y:i},{x:o+5*a/6,y:i+l},{x:o+2*a/3,y:i+l}],n.label.x=n.x,n.label.y=n.y}}))}(e)})),t("    removeBorderNodes",(function(){!function(e){r.forEach(e.nodes(),(function(t){if(e.children(t).length){var n=e.node(t),o=e.node(n.borderTop),i=e.node(n.borderBottom),a=e.node(r.last(n.borderLeft)),l=e.node(r.last(n.borderRight));n.width=Math.abs(l.x-a.x),n.height=Math.abs(i.y-o.y),n.x=a.x+n.width/2,n.y=o.y+n.height/2}})),r.forEach(e.nodes(),(function(t){"border"===e.node(t).dummy&&e.removeNode(t)}))}(e)})),t("    normalize.undo",(function(){i.undo(e)})),t("    fixupEdgeLabelCoords",(function(){!function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(e)})),t("    undoCoordinateSystem",(function(){f.undo(e)})),t("    translateGraph",(function(){!function(e){var t=Number.POSITIVE_INFINITY,n=0,o=Number.POSITIVE_INFINITY,i=0,a=e.graph(),l=a.marginx||0,s=a.marginy||0;function c(e){var r=e.x,a=e.y,l=e.width,s=e.height;t=Math.min(t,r-l/2),n=Math.max(n,r+l/2),o=Math.min(o,a-s/2),i=Math.max(i,a+s/2)}r.forEach(e.nodes(),(function(t){c(e.node(t))})),r.forEach(e.edges(),(function(t){var n=e.edge(t);r.has(n,"x")&&c(n)})),t-=l,o-=s,r.forEach(e.nodes(),(function(n){var r=e.node(n);r.x-=t,r.y-=o})),r.forEach(e.edges(),(function(n){var i=e.edge(n);r.forEach(i.points,(function(e){e.x-=t,e.y-=o})),r.has(i,"x")&&(i.x-=t),r.has(i,"y")&&(i.y-=o)})),a.width=n-t+l,a.height=i-o+s}(e)})),t("    assignNodeIntersects",(function(){!function(e){r.forEach(e.edges(),(function(t){var n,r,o=e.edge(t),i=e.node(t.v),a=e.node(t.w);o.points?(n=o.points[0],r=o.points[o.points.length-1]):(o.points=[],n=a,r=i),o.points.unshift(g.intersectRect(i,n)),o.points.push(g.intersectRect(a,r))}))}(e)})),t("    reversePoints",(function(){!function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);n.reversed&&n.points.reverse()}))}(e)})),t("    acyclic.undo",(function(){o.undo(e)}))}(t,n)})),n("  updateInputGraph",(function(){!function(e,t){r.forEach(e.nodes(),(function(n){var r=e.node(n),o=t.node(n);r&&(r.x=o.x,r.y=o.y,t.children(n).length&&(r.width=o.width,r.height=o.height))})),r.forEach(e.edges(),(function(n){var o=e.edge(n),i=t.edge(n);o.points=i.points,r.has(i,"x")&&(o.x=i.x,o.y=i.y)})),e.graph().width=t.graph().width,e.graph().height=t.graph().height}(e,t)}))}))};var v=["nodesep","edgesep","ranksep","marginx","marginy"],y={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],x=["width","height"],w={width:0,height:0},k=["minlen","weight","width","height","labeloffset"],S={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},E=["labelpos"];function _(e,t){return r.mapValues(r.pick(e,t),Number)}function C(e){var t={};return r.forEach(e,(function(e,n){t[n.toLowerCase()]=e})),t}},8208:(e,t,n)=>{var r;try{r={cloneDeep:n(6434),constant:n(2541),defaults:n(1163),each:n(2580),filter:n(723),find:n(8990),flatten:n(819),forEach:n(5491),forIn:n(7717),has:n(2117),isUndefined:n(141),last:n(4065),map:n(3411),mapValues:n(1733),max:n(539),merge:n(4677),min:n(6745),minBy:n(9364),now:n(4757),pick:n(2616),range:n(6604),reduce:n(2759),sortBy:n(7424),uniqueId:n(111),values:n(6727),zipObject:n(8129)}}catch(o){}r||(r=window._),e.exports=r},5146:(e,t,n)=>{var r=n(8208),o=n(5641);function i(e,t,n,a,l,s,c){var u=e.children(c);if(u.length){var d=o.addBorderNode(e,"_bt"),f=o.addBorderNode(e,"_bb"),p=e.node(c);e.setParent(d,c),p.borderTop=d,e.setParent(f,c),p.borderBottom=f,r.forEach(u,(function(r){i(e,t,n,a,l,s,r);var o=e.node(r),u=o.borderTop?o.borderTop:r,p=o.borderBottom?o.borderBottom:r,h=o.borderTop?a:2*a,g=u!==p?1:l-s[c]+1;e.setEdge(d,u,{weight:h,minlen:g,nestingEdge:!0}),e.setEdge(p,f,{weight:h,minlen:g,nestingEdge:!0})})),e.parent(c)||e.setEdge(t,d,{weight:0,minlen:l+s[c]})}else c!==t&&e.setEdge(t,c,{weight:0,minlen:n})}e.exports={run:function(e){var t=o.addDummyNode(e,"root",{},"_root"),n=function(e){var t={};function n(o,i){var a=e.children(o);a&&a.length&&r.forEach(a,(function(e){n(e,i+1)})),t[o]=i}return r.forEach(e.children(),(function(e){n(e,1)})),t}(e),a=r.max(r.values(n))-1,l=2*a+1;e.graph().nestingRoot=t,r.forEach(e.edges(),(function(t){e.edge(t).minlen*=l}));var s=function(e){return r.reduce(e.edges(),(function(t,n){return t+e.edge(n).weight}),0)}(e)+1;r.forEach(e.children(),(function(r){i(e,t,l,s,a,n,r)})),e.graph().nodeRankFactor=l},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,r.forEach(e.edges(),(function(t){e.edge(t).nestingEdge&&e.removeEdge(t)}))}}},2786:(e,t,n)=>{"use strict";var r=n(8208),o=n(5641);e.exports={run:function(e){e.graph().dummyChains=[],r.forEach(e.edges(),(function(t){!function(e,t){var n,r,i,a=t.v,l=e.node(a).rank,s=t.w,c=e.node(s).rank,u=t.name,d=e.edge(t),f=d.labelRank;if(c===l+1)return;for(e.removeEdge(t),i=0,++l;l<c;++i,++l)d.points=[],r={width:0,height:0,edgeLabel:d,edgeObj:t,rank:l},n=o.addDummyNode(e,"edge",r,"_d"),l===f&&(r.width=d.width,r.height=d.height,r.dummy="edge-label",r.labelpos=d.labelpos),e.setEdge(a,n,{weight:d.weight},u),0===i&&e.graph().dummyChains.push(n),a=n;e.setEdge(a,s,{weight:d.weight},u)}(e,t)}))},undo:function(e){r.forEach(e.graph().dummyChains,(function(t){var n,r=e.node(t),o=r.edgeLabel;for(e.setEdge(r.edgeObj,o);r.dummy;)n=e.successors(t)[0],e.removeNode(t),o.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(o.x=r.x,o.y=r.y,o.width=r.width,o.height=r.height),t=n,r=e.node(t)}))}}},8381:(e,t,n)=>{var r=n(8208);e.exports=function(e,t,n){var o,i={};r.forEach(n,(function(n){for(var r,a,l=e.parent(n);l;){if((r=e.parent(l))?(a=i[r],i[r]=l):(a=o,o=l),a&&a!==l)return void t.setEdge(a,l);l=r}}))}},6297:(e,t,n)=>{var r=n(8208);e.exports=function(e,t){return r.map(t,(function(t){var n=e.inEdges(t);if(n.length){var o=r.reduce(n,(function(t,n){var r=e.edge(n),o=e.node(n.v);return{sum:t.sum+r.weight*o.order,weight:t.weight+r.weight}}),{sum:0,weight:0});return{v:t,barycenter:o.sum/o.weight,weight:o.weight}}return{v:t}}))}},1987:(e,t,n)=>{var r=n(8208),o=n(7938).Graph;e.exports=function(e,t,n){var i=function(e){var t;for(;e.hasNode(t=r.uniqueId("_root")););return t}(e),a=new o({compound:!0}).setGraph({root:i}).setDefaultNodeLabel((function(t){return e.node(t)}));return r.forEach(e.nodes(),(function(o){var l=e.node(o),s=e.parent(o);(l.rank===t||l.minRank<=t&&t<=l.maxRank)&&(a.setNode(o),a.setParent(o,s||i),r.forEach(e[n](o),(function(t){var n=t.v===o?t.w:t.v,i=a.edge(n,o),l=r.isUndefined(i)?0:i.weight;a.setEdge(n,o,{weight:e.edge(t).weight+l})})),r.has(l,"minRank")&&a.setNode(o,{borderLeft:l.borderLeft[t],borderRight:l.borderRight[t]}))})),a}},4308:(e,t,n)=>{"use strict";var r=n(8208);function o(e,t,n){for(var o=r.zipObject(n,r.map(n,(function(e,t){return t}))),i=r.flatten(r.map(t,(function(t){return r.sortBy(r.map(e.outEdges(t),(function(t){return{pos:o[t.w],weight:e.edge(t).weight}})),"pos")})),!0),a=1;a<n.length;)a<<=1;var l=2*a-1;a-=1;var s=r.map(new Array(l),(function(){return 0})),c=0;return r.forEach(i.forEach((function(e){var t=e.pos+a;s[t]+=e.weight;for(var n=0;t>0;)t%2&&(n+=s[t+1]),s[t=t-1>>1]+=e.weight;c+=e.weight*n}))),c}e.exports=function(e,t){for(var n=0,r=1;r<t.length;++r)n+=o(e,t[r-1],t[r]);return n}},550:(e,t,n)=>{"use strict";var r=n(8208),o=n(5819),i=n(4308),a=n(9791),l=n(1987),s=n(8381),c=n(7938).Graph,u=n(5641);function d(e,t,n){return r.map(t,(function(t){return l(e,t,n)}))}function f(e,t){var n=new c;r.forEach(e,(function(e){var o=e.graph().root,i=a(e,o,n,t);r.forEach(i.vs,(function(t,n){e.node(t).order=n})),s(e,n,i.vs)}))}function p(e,t){r.forEach(t,(function(t){r.forEach(t,(function(t,n){e.node(t).order=n}))}))}e.exports=function(e){var t=u.maxRank(e),n=d(e,r.range(1,t+1),"inEdges"),a=d(e,r.range(t-1,-1,-1),"outEdges"),l=o(e);p(e,l);for(var s,c=Number.POSITIVE_INFINITY,h=0,g=0;g<4;++h,++g){f(h%2?n:a,h%4>=2),l=u.buildLayerMatrix(e);var m=i(e,l);m<c&&(g=0,s=r.cloneDeep(l),c=m)}p(e,s)}},5819:(e,t,n)=>{"use strict";var r=n(8208);e.exports=function(e){var t={},n=r.filter(e.nodes(),(function(t){return!e.children(t).length})),o=r.max(r.map(n,(function(t){return e.node(t).rank}))),i=r.map(r.range(o+1),(function(){return[]}));var a=r.sortBy(n,(function(t){return e.node(t).rank}));return r.forEach(a,(function n(o){if(r.has(t,o))return;t[o]=!0;var a=e.node(o);i[a.rank].push(o),r.forEach(e.successors(o),n)})),i}},8396:(e,t,n)=>{"use strict";var r=n(8208);e.exports=function(e,t){var n={};return r.forEach(e,(function(e,t){var o=n[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};r.isUndefined(e.barycenter)||(o.barycenter=e.barycenter,o.weight=e.weight)})),r.forEach(t.edges(),(function(e){var t=n[e.v],o=n[e.w];r.isUndefined(t)||r.isUndefined(o)||(o.indegree++,t.out.push(n[e.w]))})),function(e){var t=[];function n(e){return function(t){t.merged||(r.isUndefined(t.barycenter)||r.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&function(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight);t.weight&&(n+=t.barycenter*t.weight,r+=t.weight);e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}function o(t){return function(n){n.in.push(t),0===--n.indegree&&e.push(n)}}for(;e.length;){var i=e.pop();t.push(i),r.forEach(i.in.reverse(),n(i)),r.forEach(i.out,o(i))}return r.map(r.filter(t,(function(e){return!e.merged})),(function(e){return r.pick(e,["vs","i","barycenter","weight"])}))}(r.filter(n,(function(e){return!e.indegree})))}},9791:(e,t,n)=>{var r=n(8208),o=n(6297),i=n(8396),a=n(388);e.exports=function e(t,n,l,s){var c=t.children(n),u=t.node(n),d=u?u.borderLeft:void 0,f=u?u.borderRight:void 0,p={};d&&(c=r.filter(c,(function(e){return e!==d&&e!==f})));var h=o(t,c);r.forEach(h,(function(n){if(t.children(n.v).length){var o=e(t,n.v,l,s);p[n.v]=o,r.has(o,"barycenter")&&(i=n,a=o,r.isUndefined(i.barycenter)?(i.barycenter=a.barycenter,i.weight=a.weight):(i.barycenter=(i.barycenter*i.weight+a.barycenter*a.weight)/(i.weight+a.weight),i.weight+=a.weight))}var i,a}));var g=i(h,l);!function(e,t){r.forEach(e,(function(e){e.vs=r.flatten(e.vs.map((function(e){return t[e]?t[e].vs:e})),!0)}))}(g,p);var m=a(g,s);if(d&&(m.vs=r.flatten([d,m.vs,f],!0),t.predecessors(d).length)){var v=t.node(t.predecessors(d)[0]),y=t.node(t.predecessors(f)[0]);r.has(m,"barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+v.order+y.order)/(m.weight+2),m.weight+=2}return m}},388:(e,t,n)=>{var r=n(8208),o=n(5641);function i(e,t,n){for(var o;t.length&&(o=r.last(t)).i<=n;)t.pop(),e.push(o.vs),n++;return n}e.exports=function(e,t){var n=o.partition(e,(function(e){return r.has(e,"barycenter")})),a=n.lhs,l=r.sortBy(n.rhs,(function(e){return-e.i})),s=[],c=0,u=0,d=0;a.sort((f=!!t,function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:f?t.i-e.i:e.i-t.i})),d=i(s,l,d),r.forEach(a,(function(e){d+=e.vs.length,s.push(e.vs),c+=e.barycenter*e.weight,u+=e.weight,d=i(s,l,d)}));var f;var p={vs:r.flatten(s,!0)};u&&(p.barycenter=c/u,p.weight=u);return p}},6467:(e,t,n)=>{var r=n(8208);e.exports=function(e){var t=function(e){var t={},n=0;function o(i){var a=n;r.forEach(e.children(i),o),t[i]={low:a,lim:n++}}return r.forEach(e.children(),o),t}(e);r.forEach(e.graph().dummyChains,(function(n){for(var r=e.node(n),o=r.edgeObj,i=function(e,t,n,r){var o,i,a=[],l=[],s=Math.min(t[n].low,t[r].low),c=Math.max(t[n].lim,t[r].lim);o=n;do{o=e.parent(o),a.push(o)}while(o&&(t[o].low>s||c>t[o].lim));i=o,o=r;for(;(o=e.parent(o))!==i;)l.push(o);return{path:a.concat(l.reverse()),lca:i}}(e,t,o.v,o.w),a=i.path,l=i.lca,s=0,c=a[s],u=!0;n!==o.w;){if(r=e.node(n),u){for(;(c=a[s])!==l&&e.node(c).maxRank<r.rank;)s++;c===l&&(u=!1)}if(!u){for(;s<a.length-1&&e.node(c=a[s+1]).minRank<=r.rank;)s++;c=a[s]}e.setParent(n,c),n=e.successors(n)[0]}}))}},9558:(e,t,n)=>{"use strict";var r=n(8208),o=n(7938).Graph,i=n(5641);function a(e,t){var n={};return r.reduce(t,(function(t,o){var i=0,a=0,l=t.length,c=r.last(o);return r.forEach(o,(function(t,u){var d=function(e,t){if(e.node(t).dummy)return r.find(e.predecessors(t),(function(t){return e.node(t).dummy}))}(e,t),f=d?e.node(d).order:l;(d||t===c)&&(r.forEach(o.slice(a,u+1),(function(t){r.forEach(e.predecessors(t),(function(r){var o=e.node(r),a=o.order;!(a<i||f<a)||o.dummy&&e.node(t).dummy||s(n,r,t)}))})),a=u+1,i=f)})),o})),n}function l(e,t){var n={};function o(t,o,i,a,l){var c;r.forEach(r.range(o,i),(function(o){c=t[o],e.node(c).dummy&&r.forEach(e.predecessors(c),(function(t){var r=e.node(t);r.dummy&&(r.order<a||r.order>l)&&s(n,t,c)}))}))}return r.reduce(t,(function(t,n){var i,a=-1,l=0;return r.forEach(n,(function(r,s){if("border"===e.node(r).dummy){var c=e.predecessors(r);c.length&&(i=e.node(c[0]).order,o(n,l,s,a,i),l=s,a=i)}o(n,l,n.length,i,t.length)})),n})),n}function s(e,t,n){if(t>n){var r=t;t=n,n=r}var o=e[t];o||(e[t]=o={}),o[n]=!0}function c(e,t,n){if(t>n){var o=t;t=n,n=o}return r.has(e[t],n)}function u(e,t,n,o){var i={},a={},l={};return r.forEach(t,(function(e){r.forEach(e,(function(e,t){i[e]=e,a[e]=e,l[e]=t}))})),r.forEach(t,(function(e){var t=-1;r.forEach(e,(function(e){var s=o(e);if(s.length){s=r.sortBy(s,(function(e){return l[e]}));for(var u=(s.length-1)/2,d=Math.floor(u),f=Math.ceil(u);d<=f;++d){var p=s[d];a[e]===e&&t<l[p]&&!c(n,e,p)&&(a[p]=e,a[e]=i[e]=i[p],t=l[p])}}}))})),{root:i,align:a}}function d(e,t,n,i,a){var l={},s=function(e,t,n,i){var a=new o,l=e.graph(),s=function(e,t,n){return function(o,i,a){var l,s=o.node(i),c=o.node(a),u=0;if(u+=s.width/2,r.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":l=-s.width/2;break;case"r":l=s.width/2}if(l&&(u+=n?l:-l),l=0,u+=(s.dummy?t:e)/2,u+=(c.dummy?t:e)/2,u+=c.width/2,r.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":l=c.width/2;break;case"r":l=-c.width/2}return l&&(u+=n?l:-l),l=0,u}}(l.nodesep,l.edgesep,i);return r.forEach(t,(function(t){var o;r.forEach(t,(function(t){var r=n[t];if(a.setNode(r),o){var i=n[o],l=a.edge(i,r);a.setEdge(i,r,Math.max(s(e,t,o),l||0))}o=t}))})),a}(e,t,n,a),c=a?"borderLeft":"borderRight";function u(e,t){for(var n=s.nodes(),r=n.pop(),o={};r;)o[r]?e(r):(o[r]=!0,n.push(r),n=n.concat(t(r))),r=n.pop()}return u((function(e){l[e]=s.inEdges(e).reduce((function(e,t){return Math.max(e,l[t.v]+s.edge(t))}),0)}),s.predecessors.bind(s)),u((function(t){var n=s.outEdges(t).reduce((function(e,t){return Math.min(e,l[t.w]-s.edge(t))}),Number.POSITIVE_INFINITY),r=e.node(t);n!==Number.POSITIVE_INFINITY&&r.borderType!==c&&(l[t]=Math.max(l[t],n))}),s.successors.bind(s)),r.forEach(i,(function(e){l[e]=l[n[e]]})),l}function f(e,t){return r.minBy(r.values(t),(function(t){var n=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return r.forIn(t,(function(t,r){var i=function(e,t){return e.node(t).width}(e,r)/2;n=Math.max(t+i,n),o=Math.min(t-i,o)})),n-o}))}function p(e,t){var n=r.values(t),o=r.min(n),i=r.max(n);r.forEach(["u","d"],(function(n){r.forEach(["l","r"],(function(a){var l,s=n+a,c=e[s];if(c!==t){var u=r.values(c);(l="l"===a?o-r.min(u):i-r.max(u))&&(e[s]=r.mapValues(c,(function(e){return e+l})))}}))}))}function h(e,t){return r.mapValues(e.ul,(function(n,o){if(t)return e[t.toLowerCase()][o];var i=r.sortBy(r.map(e,o));return(i[1]+i[2])/2}))}e.exports={positionX:function(e){var t,n=i.buildLayerMatrix(e),o=r.merge(a(e,n),l(e,n)),s={};r.forEach(["u","d"],(function(i){t="u"===i?n:r.values(n).reverse(),r.forEach(["l","r"],(function(n){"r"===n&&(t=r.map(t,(function(e){return r.values(e).reverse()})));var a=("u"===i?e.predecessors:e.successors).bind(e),l=u(e,t,o,a),c=d(e,t,l.root,l.align,"r"===n);"r"===n&&(c=r.mapValues(c,(function(e){return-e}))),s[i+n]=c}))}));var c=f(e,s);return p(s,c),h(s,e.graph().align)},findType1Conflicts:a,findType2Conflicts:l,addConflict:s,hasConflict:c,verticalAlignment:u,horizontalCompaction:d,alignCoordinates:p,findSmallestWidthAlignment:f,balance:h}},1277:(e,t,n)=>{"use strict";var r=n(8208),o=n(5641),i=n(9558).positionX;e.exports=function(e){(function(e){var t=o.buildLayerMatrix(e),n=e.graph().ranksep,i=0;r.forEach(t,(function(t){var o=r.max(r.map(t,(function(t){return e.node(t).height})));r.forEach(t,(function(t){e.node(t).y=i+o/2})),i+=o+n}))})(e=o.asNonCompoundGraph(e)),r.forEach(i(e),(function(t,n){e.node(n).x=t}))}},3088:(e,t,n)=>{"use strict";var r=n(8208),o=n(7938).Graph,i=n(5758).slack;function a(e,t){return r.forEach(e.nodes(),(function n(o){r.forEach(t.nodeEdges(o),(function(r){var a=r.v,l=o===a?r.w:a;e.hasNode(l)||i(t,r)||(e.setNode(l,{}),e.setEdge(o,l,{}),n(l))}))})),e.nodeCount()}function l(e,t){return r.minBy(t.edges(),(function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return i(t,n)}))}function s(e,t,n){r.forEach(e.nodes(),(function(e){t.node(e).rank+=n}))}e.exports=function(e){var t,n,r=new o({directed:!1}),c=e.nodes()[0],u=e.nodeCount();r.setNode(c,{});for(;a(r,e)<u;)t=l(r,e),n=r.hasNode(t.v)?i(e,t):-i(e,t),s(r,e,n);return r}},2460:(e,t,n)=>{"use strict";var r=n(5758).longestPath,o=n(3088),i=n(4501);e.exports=function(e){switch(e.graph().ranker){case"network-simplex":default:l(e);break;case"tight-tree":!function(e){r(e),o(e)}(e);break;case"longest-path":a(e)}};var a=r;function l(e){i(e)}},4501:(e,t,n)=>{"use strict";var r=n(8208),o=n(3088),i=n(5758).slack,a=n(5758).longestPath,l=n(7938).alg.preorder,s=n(7938).alg.postorder,c=n(5641).simplify;function u(e){e=c(e),a(e);var t,n=o(e);for(p(n),d(n,e);t=g(n);)v(n,e,t,m(n,e,t))}function d(e,t){var n=s(e,e.nodes());n=n.slice(0,n.length-1),r.forEach(n,(function(n){!function(e,t,n){var r=e.node(n),o=r.parent;e.edge(n,o).cutvalue=f(e,t,n)}(e,t,n)}))}function f(e,t,n){var o=e.node(n).parent,i=!0,a=t.edge(n,o),l=0;return a||(i=!1,a=t.edge(o,n)),l=a.weight,r.forEach(t.nodeEdges(n),(function(r){var a,s,c=r.v===n,u=c?r.w:r.v;if(u!==o){var d=c===i,f=t.edge(r).weight;if(l+=d?f:-f,a=n,s=u,e.hasEdge(a,s)){var p=e.edge(n,u).cutvalue;l+=d?-p:p}}})),l}function p(e,t){arguments.length<2&&(t=e.nodes()[0]),h(e,{},1,t)}function h(e,t,n,o,i){var a=n,l=e.node(o);return t[o]=!0,r.forEach(e.neighbors(o),(function(i){r.has(t,i)||(n=h(e,t,n,i,o))})),l.low=a,l.lim=n++,i?l.parent=i:delete l.parent,n}function g(e){return r.find(e.edges(),(function(t){return e.edge(t).cutvalue<0}))}function m(e,t,n){var o=n.v,a=n.w;t.hasEdge(o,a)||(o=n.w,a=n.v);var l=e.node(o),s=e.node(a),c=l,u=!1;l.lim>s.lim&&(c=s,u=!0);var d=r.filter(t.edges(),(function(t){return u===y(e,e.node(t.v),c)&&u!==y(e,e.node(t.w),c)}));return r.minBy(d,(function(e){return i(t,e)}))}function v(e,t,n,o){var i=n.v,a=n.w;e.removeEdge(i,a),e.setEdge(o.v,o.w,{}),p(e),d(e,t),function(e,t){var n=r.find(e.nodes(),(function(e){return!t.node(e).parent})),o=l(e,n);o=o.slice(1),r.forEach(o,(function(n){var r=e.node(n).parent,o=t.edge(n,r),i=!1;o||(o=t.edge(r,n),i=!0),t.node(n).rank=t.node(r).rank+(i?o.minlen:-o.minlen)}))}(e,t)}function y(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}e.exports=u,u.initLowLimValues=p,u.initCutValues=d,u.calcCutValue=f,u.leaveEdge=g,u.enterEdge=m,u.exchangeEdges=v},5758:(e,t,n)=>{"use strict";var r=n(8208);e.exports={longestPath:function(e){var t={};r.forEach(e.sources(),(function n(o){var i=e.node(o);if(r.has(t,o))return i.rank;t[o]=!0;var a=r.min(r.map(e.outEdges(o),(function(t){return n(t.w)-e.edge(t).minlen})));return a!==Number.POSITIVE_INFINITY&&void 0!==a&&null!==a||(a=0),i.rank=a}))},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}}},5641:(e,t,n)=>{"use strict";var r=n(8208),o=n(7938).Graph;function i(e,t,n,o){var i;do{i=r.uniqueId(o)}while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function a(e){return r.max(r.map(e.nodes(),(function(t){var n=e.node(t).rank;if(!r.isUndefined(n))return n})))}e.exports={addDummyNode:i,simplify:function(e){var t=(new o).setGraph(e.graph());return r.forEach(e.nodes(),(function(n){t.setNode(n,e.node(n))})),r.forEach(e.edges(),(function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})})),t},asNonCompoundGraph:function(e){var t=new o({multigraph:e.isMultigraph()}).setGraph(e.graph());return r.forEach(e.nodes(),(function(n){e.children(n).length||t.setNode(n,e.node(n))})),r.forEach(e.edges(),(function(n){t.setEdge(n,e.edge(n))})),t},successorWeights:function(e){var t=r.map(e.nodes(),(function(t){var n={};return r.forEach(e.outEdges(t),(function(t){n[t.w]=(n[t.w]||0)+e.edge(t).weight})),n}));return r.zipObject(e.nodes(),t)},predecessorWeights:function(e){var t=r.map(e.nodes(),(function(t){var n={};return r.forEach(e.inEdges(t),(function(t){n[t.v]=(n[t.v]||0)+e.edge(t).weight})),n}));return r.zipObject(e.nodes(),t)},intersectRect:function(e,t){var n,r,o=e.x,i=e.y,a=t.x-o,l=t.y-i,s=e.width/2,c=e.height/2;if(!a&&!l)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(l)*s>Math.abs(a)*c?(l<0&&(c=-c),n=c*a/l,r=c):(a<0&&(s=-s),n=s,r=s*l/a);return{x:o+n,y:i+r}},buildLayerMatrix:function(e){var t=r.map(r.range(a(e)+1),(function(){return[]}));return r.forEach(e.nodes(),(function(n){var o=e.node(n),i=o.rank;r.isUndefined(i)||(t[i][o.order]=n)})),t},normalizeRanks:function(e){var t=r.min(r.map(e.nodes(),(function(t){return e.node(t).rank})));r.forEach(e.nodes(),(function(n){var o=e.node(n);r.has(o,"rank")&&(o.rank-=t)}))},removeEmptyRanks:function(e){var t=r.min(r.map(e.nodes(),(function(t){return e.node(t).rank}))),n=[];r.forEach(e.nodes(),(function(r){var o=e.node(r).rank-t;n[o]||(n[o]=[]),n[o].push(r)}));var o=0,i=e.graph().nodeRankFactor;r.forEach(n,(function(t,n){r.isUndefined(t)&&n%i!==0?--o:o&&r.forEach(t,(function(t){e.node(t).rank+=o}))}))},addBorderNode:function(e,t,n,r){var o={width:0,height:0};arguments.length>=4&&(o.rank=n,o.order=r);return i(e,"border",o,t)},maxRank:a,partition:function(e,t){var n={lhs:[],rhs:[]};return r.forEach(e,(function(e){t(e)?n.lhs.push(e):n.rhs.push(e)})),n},time:function(e,t){var n=r.now();try{return t()}finally{console.log(e+" time: "+(r.now()-n)+"ms")}},notime:function(e,t){return t()}}},5185:e=>{e.exports="0.8.5"},9207:(e,t,n)=>{var r=n(9383);e.exports={Graph:r.Graph,json:n(1097),alg:n(8582),version:r.version}},5992:(e,t,n)=>{var r=n(5750);e.exports=function(e){var t,n={},o=[];function i(o){r.has(n,o)||(n[o]=!0,t.push(o),r.each(e.successors(o),i),r.each(e.predecessors(o),i))}return r.each(e.nodes(),(function(e){t=[],i(e),t.length&&o.push(t)})),o}},2125:(e,t,n)=>{var r=n(5750);function o(e,t,n,i,a,l){r.has(i,t)||(i[t]=!0,n||l.push(t),r.each(a(t),(function(t){o(e,t,n,i,a,l)})),n&&l.push(t))}e.exports=function(e,t,n){r.isArray(t)||(t=[t]);var i=(e.isDirected()?e.successors:e.neighbors).bind(e),a=[],l={};return r.each(t,(function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);o(e,t,"post"===n,l,i,a)})),a}},8976:(e,t,n)=>{var r=n(5822),o=n(5750);e.exports=function(e,t,n){return o.transform(e.nodes(),(function(o,i){o[i]=r(e,i,t,n)}),{})}},5822:(e,t,n)=>{var r=n(5750),o=n(4428);e.exports=function(e,t,n,r){return function(e,t,n,r){var i,a,l={},s=new o,c=function(e){var t=e.v!==i?e.v:e.w,r=l[t],o=n(e),c=a.distance+o;if(o<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+o);c<r.distance&&(r.distance=c,r.predecessor=i,s.decrease(t,c))};e.nodes().forEach((function(e){var n=e===t?0:Number.POSITIVE_INFINITY;l[e]={distance:n},s.add(e,n)}));for(;s.size()>0&&(i=s.removeMin(),(a=l[i]).distance!==Number.POSITIVE_INFINITY);)r(i).forEach(c);return l}(e,String(t),n||i,r||function(t){return e.outEdges(t)})};var i=r.constant(1)},247:(e,t,n)=>{var r=n(5750),o=n(8808);e.exports=function(e){return r.filter(o(e),(function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])}))}},6945:(e,t,n)=>{var r=n(5750);e.exports=function(e,t,n){return function(e,t,n){var r={},o=e.nodes();return o.forEach((function(e){r[e]={},r[e][e]={distance:0},o.forEach((function(t){e!==t&&(r[e][t]={distance:Number.POSITIVE_INFINITY})})),n(e).forEach((function(n){var o=n.v===e?n.w:n.v,i=t(n);r[e][o]={distance:i,predecessor:e}}))})),o.forEach((function(e){var t=r[e];o.forEach((function(n){var i=r[n];o.forEach((function(n){var r=i[e],o=t[n],a=i[n],l=r.distance+o.distance;l<a.distance&&(a.distance=l,a.predecessor=o.predecessor)}))}))})),r}(e,t||o,n||function(t){return e.outEdges(t)})};var o=r.constant(1)},8582:(e,t,n)=>{e.exports={components:n(5992),dijkstra:n(5822),dijkstraAll:n(8976),findCycles:n(247),floydWarshall:n(6945),isAcyclic:n(9825),postorder:n(1896),preorder:n(127),prim:n(6368),tarjan:n(8808),topsort:n(8353)}},9825:(e,t,n)=>{var r=n(8353);e.exports=function(e){try{r(e)}catch(t){if(t instanceof r.CycleException)return!1;throw t}return!0}},1896:(e,t,n)=>{var r=n(2125);e.exports=function(e,t){return r(e,t,"post")}},127:(e,t,n)=>{var r=n(2125);e.exports=function(e,t){return r(e,t,"pre")}},6368:(e,t,n)=>{var r=n(5750),o=n(191),i=n(4428);e.exports=function(e,t){var n,a=new o,l={},s=new i;function c(e){var r=e.v===n?e.w:e.v,o=s.priority(r);if(void 0!==o){var i=t(e);i<o&&(l[r]=n,s.decrease(r,i))}}if(0===e.nodeCount())return a;r.each(e.nodes(),(function(e){s.add(e,Number.POSITIVE_INFINITY),a.setNode(e)})),s.decrease(e.nodes()[0],0);var u=!1;for(;s.size()>0;){if(n=s.removeMin(),r.has(l,n))a.setEdge(n,l[n]);else{if(u)throw new Error("Input graph is not connected: "+e);u=!0}e.nodeEdges(n).forEach(c)}return a}},8808:(e,t,n)=>{var r=n(5750);e.exports=function(e){var t=0,n=[],o={},i=[];function a(l){var s=o[l]={onStack:!0,lowlink:t,index:t++};if(n.push(l),e.successors(l).forEach((function(e){r.has(o,e)?o[e].onStack&&(s.lowlink=Math.min(s.lowlink,o[e].index)):(a(e),s.lowlink=Math.min(s.lowlink,o[e].lowlink))})),s.lowlink===s.index){var c,u=[];do{c=n.pop(),o[c].onStack=!1,u.push(c)}while(l!==c);i.push(u)}}return e.nodes().forEach((function(e){r.has(o,e)||a(e)})),i}},8353:(e,t,n)=>{var r=n(5750);function o(e){var t={},n={},o=[];if(r.each(e.sinks(),(function a(l){if(r.has(n,l))throw new i;r.has(t,l)||(n[l]=!0,t[l]=!0,r.each(e.predecessors(l),a),delete n[l],o.push(l))})),r.size(t)!==e.nodeCount())throw new i;return o}function i(){}e.exports=o,o.CycleException=i,i.prototype=new Error},4428:(e,t,n)=>{var r=n(5750);function o(){this._arr=[],this._keyIndices={}}e.exports=o,o.prototype.size=function(){return this._arr.length},o.prototype.keys=function(){return this._arr.map((function(e){return e.key}))},o.prototype.has=function(e){return r.has(this._keyIndices,e)},o.prototype.priority=function(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority},o.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},o.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!r.has(n,e)){var o=this._arr,i=o.length;return n[e]=i,o.push({key:e,priority:t}),this._decrease(i),!0}return!1},o.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},o.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},o.prototype._heapify=function(e){var t=this._arr,n=2*e,r=n+1,o=e;n<t.length&&(o=t[n].priority<t[o].priority?n:o,r<t.length&&(o=t[r].priority<t[o].priority?r:o),o!==e&&(this._swap(e,o),this._heapify(o)))},o.prototype._decrease=function(e){for(var t,n=this._arr,r=n[e].priority;0!==e&&!(n[t=e>>1].priority<r);)this._swap(e,t),e=t},o.prototype._swap=function(e,t){var n=this._arr,r=this._keyIndices,o=n[e],i=n[t];n[e]=i,n[t]=o,r[i.key]=e,r[o.key]=t}},191:(e,t,n)=>{"use strict";var r=n(5750);e.exports=i;var o="\0";function i(e){this._isDirected=!r.has(e,"directed")||e.directed,this._isMultigraph=!!r.has(e,"multigraph")&&e.multigraph,this._isCompound=!!r.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[o]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function a(e,t){e[t]?e[t]++:e[t]=1}function l(e,t){--e[t]||delete e[t]}function s(e,t,n,o){var i=""+t,a=""+n;if(!e&&i>a){var l=i;i=a,a=l}return i+"\x01"+a+"\x01"+(r.isUndefined(o)?"\0":o)}function c(e,t){return s(e,t.v,t.w,t.name)}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(e){return this._label=e,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(e){return r.isFunction(e)||(e=r.constant(e)),this._defaultNodeLabelFn=e,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return r.keys(this._nodes)},i.prototype.sources=function(){var e=this;return r.filter(this.nodes(),(function(t){return r.isEmpty(e._in[t])}))},i.prototype.sinks=function(){var e=this;return r.filter(this.nodes(),(function(t){return r.isEmpty(e._out[t])}))},i.prototype.setNodes=function(e,t){var n=arguments,o=this;return r.each(e,(function(e){n.length>1?o.setNode(e,t):o.setNode(e)})),this},i.prototype.setNode=function(e,t){return r.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=o,this._children[e]={},this._children[o][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},i.prototype.node=function(e){return this._nodes[e]},i.prototype.hasNode=function(e){return r.has(this._nodes,e)},i.prototype.removeNode=function(e){var t=this;if(r.has(this._nodes,e)){var n=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],r.each(this.children(e),(function(e){t.setParent(e)})),delete this._children[e]),r.each(r.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],r.each(r.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},i.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(t))t=o;else{for(var n=t+="";!r.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},i.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},i.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!==o)return t}},i.prototype.children=function(e){if(r.isUndefined(e)&&(e=o),this._isCompound){var t=this._children[e];if(t)return r.keys(t)}else{if(e===o)return this.nodes();if(this.hasNode(e))return[]}},i.prototype.predecessors=function(e){var t=this._preds[e];if(t)return r.keys(t)},i.prototype.successors=function(e){var t=this._sucs[e];if(t)return r.keys(t)},i.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return r.union(t,this.successors(e))},i.prototype.isLeaf=function(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length},i.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;r.each(this._nodes,(function(n,r){e(r)&&t.setNode(r,n)})),r.each(this._edgeObjs,(function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,n.edge(e))}));var o={};function i(e){var r=n.parent(e);return void 0===r||t.hasNode(r)?(o[e]=r,r):r in o?o[r]:i(r)}return this._isCompound&&r.each(t.nodes(),(function(e){t.setParent(e,i(e))})),t},i.prototype.setDefaultEdgeLabel=function(e){return r.isFunction(e)||(e=r.constant(e)),this._defaultEdgeLabelFn=e,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return r.values(this._edgeObjs)},i.prototype.setPath=function(e,t){var n=this,o=arguments;return r.reduce(e,(function(e,r){return o.length>1?n.setEdge(e,r,t):n.setEdge(e,r),r})),this},i.prototype.setEdge=function(){var e,t,n,o,i=!1,l=arguments[0];"object"===typeof l&&null!==l&&"v"in l?(e=l.v,t=l.w,n=l.name,2===arguments.length&&(o=arguments[1],i=!0)):(e=l,t=arguments[1],n=arguments[3],arguments.length>2&&(o=arguments[2],i=!0)),e=""+e,t=""+t,r.isUndefined(n)||(n=""+n);var c=s(this._isDirected,e,t,n);if(r.has(this._edgeLabels,c))return i&&(this._edgeLabels[c]=o),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[c]=i?o:this._defaultEdgeLabelFn(e,t,n);var u=function(e,t,n,r){var o=""+t,i=""+n;if(!e&&o>i){var a=o;o=i,i=a}var l={v:o,w:i};r&&(l.name=r);return l}(this._isDirected,e,t,n);return e=u.v,t=u.w,Object.freeze(u),this._edgeObjs[c]=u,a(this._preds[t],e),a(this._sucs[e],t),this._in[t][c]=u,this._out[e][c]=u,this._edgeCount++,this},i.prototype.edge=function(e,t,n){var r=1===arguments.length?c(this._isDirected,arguments[0]):s(this._isDirected,e,t,n);return this._edgeLabels[r]},i.prototype.hasEdge=function(e,t,n){var o=1===arguments.length?c(this._isDirected,arguments[0]):s(this._isDirected,e,t,n);return r.has(this._edgeLabels,o)},i.prototype.removeEdge=function(e,t,n){var r=1===arguments.length?c(this._isDirected,arguments[0]):s(this._isDirected,e,t,n),o=this._edgeObjs[r];return o&&(e=o.v,t=o.w,delete this._edgeLabels[r],delete this._edgeObjs[r],l(this._preds[t],e),l(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this},i.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var o=r.values(n);return t?r.filter(o,(function(e){return e.v===t})):o}},i.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var o=r.values(n);return t?r.filter(o,(function(e){return e.w===t})):o}},i.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))}},9383:(e,t,n)=>{e.exports={Graph:n(191),version:n(8311)}},1097:(e,t,n)=>{var r=n(5750),o=n(191);function i(e){return r.map(e.nodes(),(function(t){var n=e.node(t),o=e.parent(t),i={v:t};return r.isUndefined(n)||(i.value=n),r.isUndefined(o)||(i.parent=o),i}))}function a(e){return r.map(e.edges(),(function(t){var n=e.edge(t),o={v:t.v,w:t.w};return r.isUndefined(t.name)||(o.name=t.name),r.isUndefined(n)||(o.value=n),o}))}e.exports={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:i(e),edges:a(e)};r.isUndefined(e.graph())||(t.value=r.clone(e.graph()));return t},read:function(e){var t=new o(e.options).setGraph(e.value);return r.each(e.nodes,(function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)})),r.each(e.edges,(function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)})),t}}},5750:(e,t,n)=>{var r;try{r={clone:n(1740),constant:n(2541),each:n(2580),filter:n(723),has:n(2117),isArray:n(4052),isEmpty:n(4320),isFunction:n(1629),isUndefined:n(141),keys:n(8673),map:n(3411),reduce:n(2759),size:n(5640),transform:n(2717),union:n(450),values:n(6727)}}catch(o){}r||(r=window._),e.exports=r},8311:e=>{e.exports="2.1.8"},7685:(e,t,n)=>{var r=n(7937)(n(6552),"DataView");e.exports=r},8724:(e,t,n)=>{var r=n(7615),o=n(5051),i=n(2154),a=n(8734),l=n(2662);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=l,e.exports=s},7160:(e,t,n)=>{var r=n(7563),o=n(9935),i=n(4190),a=n(1946),l=n(1714);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=l,e.exports=s},5204:(e,t,n)=>{var r=n(7937)(n(6552),"Map");e.exports=r},4816:(e,t,n)=>{var r=n(7251),o=n(7159),i=n(438),a=n(9394),l=n(6874);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=l,e.exports=s},5387:(e,t,n)=>{var r=n(7937)(n(6552),"Promise");e.exports=r},2070:(e,t,n)=>{var r=n(7937)(n(6552),"Set");e.exports=r},8902:(e,t,n)=>{var r=n(4816),o=n(6179),i=n(6704);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,e.exports=a},5538:(e,t,n)=>{var r=n(7160),o=n(4545),i=n(793),a=n(7760),l=n(3892),s=n(6788);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=l,c.prototype.set=s,e.exports=c},9812:(e,t,n)=>{var r=n(6552).Symbol;e.exports=r},2929:(e,t,n)=>{var r=n(6552).Uint8Array;e.exports=r},6600:(e,t,n)=>{var r=n(7937)(n(6552),"WeakMap");e.exports=r},1170:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},726:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},7529:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}},5866:(e,t,n)=>{var r=n(8468);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},1558:e=>{e.exports=function(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}},3204:(e,t,n)=>{var r=n(3343),o=n(2777),i=n(4052),a=n(4543),l=n(9194),s=n(1268),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=i(e),u=!n&&o(e),d=!n&&!u&&a(e),f=!n&&!u&&!d&&s(e),p=n||u||d||f,h=p?r(e.length,String):[],g=h.length;for(var m in e)!t&&!c.call(e,m)||p&&("length"==m||d&&("offset"==m||"parent"==m)||f&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||l(m,g))||h.push(m);return h}},149:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},8895:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},9421:e=>{e.exports=function(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}},2587:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},4724:(e,t,n)=>{var r=n(396)("length");e.exports=r},3868:(e,t,n)=>{var r=n(1775),o=n(3211);e.exports=function(e,t,n){(void 0!==n&&!o(e[t],n)||void 0===n&&!(t in e))&&r(e,t,n)}},8420:(e,t,n)=>{var r=n(1775),o=n(3211),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];i.call(e,t)&&o(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},1340:(e,t,n)=>{var r=n(3211);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},1104:(e,t,n)=>{var r=n(6614),o=n(8673);e.exports=function(e,t){return e&&r(t,o(t),e)}},5119:(e,t,n)=>{var r=n(6614),o=n(474);e.exports=function(e,t){return e&&r(t,o(t),e)}},1775:(e,t,n)=>{var r=n(5654);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},7132:(e,t,n)=>{var r=n(5538),o=n(726),i=n(8420),a=n(1104),l=n(5119),s=n(4353),c=n(1980),u=n(8124),d=n(9075),f=n(9395),p=n(8592),h=n(6924),g=n(8268),m=n(8630),v=n(310),y=n(4052),b=n(4543),x=n(7887),w=n(6686),k=n(5921),S=n(8673),E=n(474),_="[object Arguments]",C="[object Function]",N="[object Object]",P={};P[_]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object DataView]"]=P["[object Boolean]"]=P["[object Date]"]=P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Map]"]=P["[object Number]"]=P[N]=P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object Symbol]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P["[object Error]"]=P[C]=P["[object WeakMap]"]=!1,e.exports=function e(t,n,j,O,M,z){var A,T=1&n,R=2&n,D=4&n;if(j&&(A=M?j(t,O,M,z):j(t)),void 0!==A)return A;if(!w(t))return t;var L=y(t);if(L){if(A=g(t),!T)return c(t,A)}else{var I=h(t),F=I==C||"[object GeneratorFunction]"==I;if(b(t))return s(t,T);if(I==N||I==_||F&&!M){if(A=R||F?{}:v(t),!T)return R?d(t,l(A,t)):u(t,a(A,t))}else{if(!P[I])return M?t:{};A=m(t,I,T)}}z||(z=new r);var B=z.get(t);if(B)return B;z.set(t,A),k(t)?t.forEach((function(r){A.add(e(r,n,j,r,t,z))})):x(t)&&t.forEach((function(r,o){A.set(o,e(r,n,j,o,t,z))}));var V=L?void 0:(D?R?p:f:R?E:S)(t);return o(V||t,(function(r,o){V&&(r=t[o=r]),i(A,o,e(r,n,j,o,t,z))})),A}},1817:(e,t,n)=>{var r=n(6686),o=Object.create,i=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=i},5652:(e,t,n)=>{var r=n(4664),o=n(6516)(r);e.exports=o},9742:(e,t,n)=>{var r=n(9841);e.exports=function(e,t,n){for(var o=-1,i=e.length;++o<i;){var a=e[o],l=t(a);if(null!=l&&(void 0===s?l===l&&!r(l):n(l,s)))var s=l,c=a}return c}},7171:(e,t,n)=>{var r=n(5652);e.exports=function(e,t){var n=[];return r(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n}},5816:e=>{e.exports=function(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}},755:(e,t,n)=>{var r=n(8895),o=n(7116);e.exports=function e(t,n,i,a,l){var s=-1,c=t.length;for(i||(i=o),l||(l=[]);++s<c;){var u=t[s];n>0&&i(u)?n>1?e(u,n-1,i,a,l):r(l,u):a||(l[l.length]=u)}return l}},4258:(e,t,n)=>{var r=n(5906)();e.exports=r},4664:(e,t,n)=>{var r=n(4258),o=n(8673);e.exports=function(e,t){return e&&r(e,t,o)}},2969:(e,t,n)=>{var r=n(5324),o=n(914);e.exports=function(e,t){for(var n=0,i=(t=r(t,e)).length;null!=e&&n<i;)e=e[o(t[n++])];return n&&n==i?e:void 0}},4262:(e,t,n)=>{var r=n(8895),o=n(4052);e.exports=function(e,t,n){var i=t(e);return o(e)?i:r(i,n(e))}},6913:(e,t,n)=>{var r=n(9812),o=n(4552),i=n(6095),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):i(e)}},7498:e=>{e.exports=function(e,t){return e>t}},6741:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e,n){return null!=e&&t.call(e,n)}},7894:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},8468:(e,t,n)=>{var r=n(5816),o=n(644),i=n(4020);e.exports=function(e,t,n){return t===t?i(e,t,n):r(e,o,n)}},5193:(e,t,n)=>{var r=n(6913),o=n(2761);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},6989:(e,t,n)=>{var r=n(6399),o=n(2761);e.exports=function e(t,n,i,a,l){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!==t&&n!==n:r(t,n,i,a,e,l))}},6399:(e,t,n)=>{var r=n(5538),o=n(3668),i=n(9987),a=n(5752),l=n(6924),s=n(4052),c=n(4543),u=n(1268),d="[object Arguments]",f="[object Array]",p="[object Object]",h=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,g,m,v){var y=s(e),b=s(t),x=y?f:l(e),w=b?f:l(t),k=(x=x==d?p:x)==p,S=(w=w==d?p:w)==p,E=x==w;if(E&&c(e)){if(!c(t))return!1;y=!0,k=!1}if(E&&!k)return v||(v=new r),y||u(e)?o(e,t,n,g,m,v):i(e,t,x,n,g,m,v);if(!(1&n)){var _=k&&h.call(e,"__wrapped__"),C=S&&h.call(t,"__wrapped__");if(_||C){var N=_?e.value():e,P=C?t.value():t;return v||(v=new r),m(N,P,n,g,v)}}return!!E&&(v||(v=new r),a(e,t,n,g,m,v))}},5791:(e,t,n)=>{var r=n(6924),o=n(2761);e.exports=function(e){return o(e)&&"[object Map]"==r(e)}},6532:(e,t,n)=>{var r=n(5538),o=n(6989);e.exports=function(e,t,n,i){var a=n.length,l=a,s=!i;if(null==e)return!l;for(e=Object(e);a--;){var c=n[a];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<l;){var u=(c=n[a])[0],d=e[u],f=c[1];if(s&&c[2]){if(void 0===d&&!(u in e))return!1}else{var p=new r;if(i)var h=i(d,f,u,e,t,p);if(!(void 0===h?o(f,d,3,i,p):h))return!1}}return!0}},644:e=>{e.exports=function(e){return e!==e}},6954:(e,t,n)=>{var r=n(1629),o=n(7857),i=n(6686),a=n(6996),l=/^\[object .+?Constructor\]$/,s=Function.prototype,c=Object.prototype,u=s.toString,d=c.hasOwnProperty,f=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(r(e)?f:l).test(a(e))}},449:(e,t,n)=>{var r=n(6924),o=n(2761);e.exports=function(e){return o(e)&&"[object Set]"==r(e)}},5428:(e,t,n)=>{var r=n(6913),o=n(6173),i=n(2761),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!a[r(e)]}},9096:(e,t,n)=>{var r=n(9256),o=n(5029),i=n(3279),a=n(4052),l=n(3932);e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?a(e)?o(e[0],e[1]):r(e):l(e)}},3713:(e,t,n)=>{var r=n(6140),o=n(1143),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},8122:(e,t,n)=>{var r=n(6686),o=n(6140),i=n(3516),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=o(e),n=[];for(var l in e)("constructor"!=l||!t&&a.call(e,l))&&n.push(l);return n}},61:e=>{e.exports=function(e,t){return e<t}},8883:(e,t,n)=>{var r=n(5652),o=n(6571);e.exports=function(e,t){var n=-1,i=o(e)?Array(e.length):[];return r(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}},9256:(e,t,n)=>{var r=n(6532),o=n(3781),i=n(1310);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},5029:(e,t,n)=>{var r=n(6989),o=n(3097),i=n(3366),a=n(2597),l=n(9417),s=n(1310),c=n(914);e.exports=function(e,t){return a(e)&&l(t)?s(c(e),t):function(n){var a=o(n,e);return void 0===a&&a===t?i(n,e):r(t,a,3)}}},3253:(e,t,n)=>{var r=n(5538),o=n(3868),i=n(4258),a=n(3223),l=n(6686),s=n(474),c=n(3737);e.exports=function e(t,n,u,d,f){t!==n&&i(n,(function(i,s){if(f||(f=new r),l(i))a(t,n,s,u,e,d,f);else{var p=d?d(c(t,s),i,s+"",t,n,f):void 0;void 0===p&&(p=i),o(t,s,p)}}),s)}},3223:(e,t,n)=>{var r=n(3868),o=n(4353),i=n(8710),a=n(1980),l=n(310),s=n(2777),c=n(4052),u=n(6272),d=n(4543),f=n(1629),p=n(6686),h=n(2322),g=n(1268),m=n(3737),v=n(1609);e.exports=function(e,t,n,y,b,x,w){var k=m(e,n),S=m(t,n),E=w.get(S);if(E)r(e,n,E);else{var _=x?x(k,S,n+"",e,t,w):void 0,C=void 0===_;if(C){var N=c(S),P=!N&&d(S),j=!N&&!P&&g(S);_=S,N||P||j?c(k)?_=k:u(k)?_=a(k):P?(C=!1,_=o(S,!0)):j?(C=!1,_=i(S,!0)):_=[]:h(S)||s(S)?(_=k,s(k)?_=v(k):p(k)&&!f(k)||(_=l(S))):C=!1}C&&(w.set(S,_),b(_,S,y,x,w),w.delete(S)),r(e,n,_)}}},2536:(e,t,n)=>{var r=n(149),o=n(2969),i=n(9096),a=n(8883),l=n(320),s=n(7574),c=n(5893),u=n(3279),d=n(4052);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return d(e)?function(t){return o(t,1===e.length?e[0]:e)}:e})):[u];var f=-1;t=r(t,s(i));var p=a(e,(function(e,n,o){return{criteria:r(t,(function(t){return t(e)})),index:++f,value:e}}));return l(p,(function(e,t){return c(e,t,n)}))}},4008:(e,t,n)=>{var r=n(7449),o=n(3366);e.exports=function(e,t){return r(e,t,(function(t,n){return o(e,n)}))}},7449:(e,t,n)=>{var r=n(2969),o=n(9261),i=n(5324);e.exports=function(e,t,n){for(var a=-1,l=t.length,s={};++a<l;){var c=t[a],u=r(e,c);n(u,c)&&o(s,i(c,e),u)}return s}},396:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},2866:(e,t,n)=>{var r=n(2969);e.exports=function(e){return function(t){return r(t,e)}}},9676:e=>{var t=Math.ceil,n=Math.max;e.exports=function(e,r,o,i){for(var a=-1,l=n(t((r-e)/(o||1)),0),s=Array(l);l--;)s[i?l:++a]=e,e+=o;return s}},6487:e=>{e.exports=function(e,t,n,r,o){return o(e,(function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)})),n}},5647:(e,t,n)=>{var r=n(3279),o=n(5636),i=n(6350);e.exports=function(e,t){return i(o(e,t,r),e+"")}},9261:(e,t,n)=>{var r=n(8420),o=n(5324),i=n(9194),a=n(6686),l=n(914);e.exports=function(e,t,n,s){if(!a(e))return e;for(var c=-1,u=(t=o(t,e)).length,d=u-1,f=e;null!=f&&++c<u;){var p=l(t[c]),h=n;if("__proto__"===p||"constructor"===p||"prototype"===p)return e;if(c!=d){var g=f[p];void 0===(h=s?s(g,p,f):void 0)&&(h=a(g)?g:i(t[c+1])?[]:{})}r(f,p,h),f=f[p]}return e}},8325:(e,t,n)=>{var r=n(2541),o=n(5654),i=n(3279),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:i;e.exports=a},320:e=>{e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},3343:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},8541:(e,t,n)=>{var r=n(9812),o=n(149),i=n(4052),a=n(9841),l=r?r.prototype:void 0,s=l?l.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return o(t,e)+"";if(a(t))return s?s.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},1141:(e,t,n)=>{var r=n(143),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},7574:e=>{e.exports=function(e){return function(t){return e(t)}}},4416:(e,t,n)=>{var r=n(8902),o=n(5866),i=n(1558),a=n(8114),l=n(8182),s=n(2074);e.exports=function(e,t,n){var c=-1,u=o,d=e.length,f=!0,p=[],h=p;if(n)f=!1,u=i;else if(d>=200){var g=t?null:l(e);if(g)return s(g);f=!1,u=a,h=new r}else h=t?[]:p;e:for(;++c<d;){var m=e[c],v=t?t(m):m;if(m=n||0!==m?m:0,f&&v===v){for(var y=h.length;y--;)if(h[y]===v)continue e;t&&h.push(v),p.push(m)}else u(h,v,n)||(h!==p&&h.push(v),p.push(m))}return p}},6983:(e,t,n)=>{var r=n(149);e.exports=function(e,t){return r(t,(function(t){return e[t]}))}},9377:e=>{e.exports=function(e,t,n){for(var r=-1,o=e.length,i=t.length,a={};++r<o;){var l=r<i?t[r]:void 0;n(a,e[r],l)}return a}},8114:e=>{e.exports=function(e,t){return e.has(t)}},5111:(e,t,n)=>{var r=n(3279);e.exports=function(e){return"function"==typeof e?e:r}},5324:(e,t,n)=>{var r=n(4052),o=n(2597),i=n(4079),a=n(1069);e.exports=function(e,t){return r(e)?e:o(e,t)?[e]:i(a(e))}},1516:(e,t,n)=>{var r=n(2929);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},4353:(e,t,n)=>{e=n.nmd(e);var r=n(6552),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,a=i&&i.exports===o?r.Buffer:void 0,l=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=l?l(n):new e.constructor(n);return e.copy(r),r}},6806:(e,t,n)=>{var r=n(1516);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},8962:e=>{var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},1295:(e,t,n)=>{var r=n(9812),o=r?r.prototype:void 0,i=o?o.valueOf:void 0;e.exports=function(e){return i?Object(i.call(e)):{}}},8710:(e,t,n)=>{var r=n(1516);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},6599:(e,t,n)=>{var r=n(9841);e.exports=function(e,t){if(e!==t){var n=void 0!==e,o=null===e,i=e===e,a=r(e),l=void 0!==t,s=null===t,c=t===t,u=r(t);if(!s&&!u&&!a&&e>t||a&&l&&c&&!s&&!u||o&&l&&c||!n&&c||!i)return 1;if(!o&&!a&&!u&&e<t||u&&n&&i&&!o&&!a||s&&n&&i||!l&&i||!c)return-1}return 0}},5893:(e,t,n)=>{var r=n(6599);e.exports=function(e,t,n){for(var o=-1,i=e.criteria,a=t.criteria,l=i.length,s=n.length;++o<l;){var c=r(i[o],a[o]);if(c)return o>=s?c:c*("desc"==n[o]?-1:1)}return e.index-t.index}},1980:e=>{e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},6614:(e,t,n)=>{var r=n(8420),o=n(1775);e.exports=function(e,t,n,i){var a=!n;n||(n={});for(var l=-1,s=t.length;++l<s;){var c=t[l],u=i?i(n[c],e[c],c,n,e):void 0;void 0===u&&(u=e[c]),a?o(n,c,u):r(n,c,u)}return n}},8124:(e,t,n)=>{var r=n(6614),o=n(9621);e.exports=function(e,t){return r(e,o(e),t)}},9075:(e,t,n)=>{var r=n(6614),o=n(6326);e.exports=function(e,t){return r(e,o(e),t)}},3440:(e,t,n)=>{var r=n(6552)["__core-js_shared__"];e.exports=r},4570:(e,t,n)=>{var r=n(5647),o=n(929);e.exports=function(e){return r((function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,l=i>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,l&&o(n[0],n[1],l)&&(a=i<3?void 0:a,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,a)}return t}))}},6516:(e,t,n)=>{var r=n(6571);e.exports=function(e,t){return function(n,o){if(null==n)return n;if(!r(n))return e(n,o);for(var i=n.length,a=t?i:-1,l=Object(n);(t?a--:++a<i)&&!1!==o(l[a],a,l););return n}}},5906:e=>{e.exports=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),l=a.length;l--;){var s=a[e?l:++o];if(!1===n(i[s],s,i))break}return t}}},9995:(e,t,n)=>{var r=n(9096),o=n(6571),i=n(8673);e.exports=function(e){return function(t,n,a){var l=Object(t);if(!o(t)){var s=r(n,3);t=i(t),n=function(e){return s(l[e],e,l)}}var c=e(t,n,a);return c>-1?l[s?t[c]:c]:void 0}}},3331:(e,t,n)=>{var r=n(9676),o=n(929),i=n(7303);e.exports=function(e){return function(t,n,a){return a&&"number"!=typeof a&&o(t,n,a)&&(n=a=void 0),t=i(t),void 0===n?(n=t,t=0):n=i(n),a=void 0===a?t<n?1:-1:i(a),r(t,n,a,e)}}},8182:(e,t,n)=>{var r=n(2070),o=n(5713),i=n(2074),a=r&&1/i(new r([,-0]))[1]==1/0?function(e){return new r(e)}:o;e.exports=a},5654:(e,t,n)=>{var r=n(7937),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=o},3668:(e,t,n)=>{var r=n(8902),o=n(2587),i=n(8114);e.exports=function(e,t,n,a,l,s){var c=1&n,u=e.length,d=t.length;if(u!=d&&!(c&&d>u))return!1;var f=s.get(e),p=s.get(t);if(f&&p)return f==t&&p==e;var h=-1,g=!0,m=2&n?new r:void 0;for(s.set(e,t),s.set(t,e);++h<u;){var v=e[h],y=t[h];if(a)var b=c?a(y,v,h,t,e,s):a(v,y,h,e,t,s);if(void 0!==b){if(b)continue;g=!1;break}if(m){if(!o(t,(function(e,t){if(!i(m,t)&&(v===e||l(v,e,n,a,s)))return m.push(t)}))){g=!1;break}}else if(v!==y&&!l(v,y,n,a,s)){g=!1;break}}return s.delete(e),s.delete(t),g}},9987:(e,t,n)=>{var r=n(9812),o=n(2929),i=n(3211),a=n(3668),l=n(4160),s=n(2074),c=r?r.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,d,f){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=l;case"[object Set]":var h=1&r;if(p||(p=s),e.size!=t.size&&!h)return!1;var g=f.get(e);if(g)return g==t;r|=2,f.set(e,t);var m=a(p(e),p(t),r,c,d,f);return f.delete(e),m;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},5752:(e,t,n)=>{var r=n(9395),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,i,a,l){var s=1&n,c=r(e),u=c.length;if(u!=r(t).length&&!s)return!1;for(var d=u;d--;){var f=c[d];if(!(s?f in t:o.call(t,f)))return!1}var p=l.get(e),h=l.get(t);if(p&&h)return p==t&&h==e;var g=!0;l.set(e,t),l.set(t,e);for(var m=s;++d<u;){var v=e[f=c[d]],y=t[f];if(i)var b=s?i(y,v,f,t,e,l):i(v,y,f,e,t,l);if(!(void 0===b?v===y||a(v,y,n,i,l):b)){g=!1;break}m||(m="constructor"==f)}if(g&&!m){var x=e.constructor,w=t.constructor;x==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(g=!1)}return l.delete(e),l.delete(t),g}},5857:(e,t,n)=>{var r=n(819),o=n(5636),i=n(6350);e.exports=function(e){return i(o(e,void 0,r),e+"")}},7105:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},9395:(e,t,n)=>{var r=n(4262),o=n(9621),i=n(8673);e.exports=function(e){return r(e,i,o)}},8592:(e,t,n)=>{var r=n(4262),o=n(6326),i=n(474);e.exports=function(e){return r(e,i,o)}},2622:(e,t,n)=>{var r=n(705);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},3781:(e,t,n)=>{var r=n(9417),o=n(8673);e.exports=function(e){for(var t=o(e),n=t.length;n--;){var i=t[n],a=e[i];t[n]=[i,a,r(a)]}return t}},7937:(e,t,n)=>{var r=n(6954),o=n(4657);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},5990:(e,t,n)=>{var r=n(3028)(Object.getPrototypeOf,Object);e.exports=r},4552:(e,t,n)=>{var r=n(9812),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,l=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,l),n=e[l];try{e[l]=void 0;var r=!0}catch(s){}var o=a.call(e);return r&&(t?e[l]=n:delete e[l]),o}},9621:(e,t,n)=>{var r=n(7529),o=n(7828),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,l=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return i.call(e,t)})))}:o;e.exports=l},6326:(e,t,n)=>{var r=n(8895),o=n(5990),i=n(9621),a=n(7828),l=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,i(e)),e=o(e);return t}:a;e.exports=l},6924:(e,t,n)=>{var r=n(7685),o=n(5204),i=n(5387),a=n(2070),l=n(6600),s=n(6913),c=n(6996),u="[object Map]",d="[object Promise]",f="[object Set]",p="[object WeakMap]",h="[object DataView]",g=c(r),m=c(o),v=c(i),y=c(a),b=c(l),x=s;(r&&x(new r(new ArrayBuffer(1)))!=h||o&&x(new o)!=u||i&&x(i.resolve())!=d||a&&x(new a)!=f||l&&x(new l)!=p)&&(x=function(e){var t=s(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case g:return h;case m:return u;case v:return d;case y:return f;case b:return p}return t}),e.exports=x},4657:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},9057:(e,t,n)=>{var r=n(5324),o=n(2777),i=n(4052),a=n(9194),l=n(6173),s=n(914);e.exports=function(e,t,n){for(var c=-1,u=(t=r(t,e)).length,d=!1;++c<u;){var f=s(t[c]);if(!(d=null!=e&&n(e,f)))break;e=e[f]}return d||++c!=u?d:!!(u=null==e?0:e.length)&&l(u)&&a(f,u)&&(i(e)||o(e))}},6311:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},7615:(e,t,n)=>{var r=n(5575);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},5051:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},2154:(e,t,n)=>{var r=n(5575),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(t,e)?t[e]:void 0}},8734:(e,t,n)=>{var r=n(5575),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},2662:(e,t,n)=>{var r=n(5575);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},8268:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},8630:(e,t,n)=>{var r=n(1516),o=n(6806),i=n(8962),a=n(1295),l=n(8710);e.exports=function(e,t,n){var s=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new s(+e);case"[object DataView]":return o(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return l(e,n);case"[object Map]":case"[object Set]":return new s;case"[object Number]":case"[object String]":return new s(e);case"[object RegExp]":return i(e);case"[object Symbol]":return a(e)}}},310:(e,t,n)=>{var r=n(1817),o=n(5990),i=n(6140);e.exports=function(e){return"function"!=typeof e.constructor||i(e)?{}:r(o(e))}},7116:(e,t,n)=>{var r=n(9812),o=n(2777),i=n(4052),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return i(e)||o(e)||!!(a&&e&&e[a])}},9194:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},929:(e,t,n)=>{var r=n(3211),o=n(6571),i=n(9194),a=n(6686);e.exports=function(e,t,n){if(!a(n))return!1;var l=typeof t;return!!("number"==l?o(n)&&i(t,n.length):"string"==l&&t in n)&&r(n[t],e)}},2597:(e,t,n)=>{var r=n(4052),o=n(9841),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||(a.test(e)||!i.test(e)||null!=t&&e in Object(t))}},705:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},7857:(e,t,n)=>{var r=n(3440),o=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!o&&o in e}},6140:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},9417:(e,t,n)=>{var r=n(6686);e.exports=function(e){return e===e&&!r(e)}},7563:e=>{e.exports=function(){this.__data__=[],this.size=0}},9935:(e,t,n)=>{var r=n(1340),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():o.call(t,n,1),--this.size,!0)}},4190:(e,t,n)=>{var r=n(1340);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},1946:(e,t,n)=>{var r=n(1340);e.exports=function(e){return r(this.__data__,e)>-1}},1714:(e,t,n)=>{var r=n(1340);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},7251:(e,t,n)=>{var r=n(8724),o=n(7160),i=n(5204);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},7159:(e,t,n)=>{var r=n(2622);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},438:(e,t,n)=>{var r=n(2622);e.exports=function(e){return r(this,e).get(e)}},9394:(e,t,n)=>{var r=n(2622);e.exports=function(e){return r(this,e).has(e)}},6874:(e,t,n)=>{var r=n(2622);e.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},4160:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},1310:e=>{e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},8259:(e,t,n)=>{var r=n(5797);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},5575:(e,t,n)=>{var r=n(7937)(Object,"create");e.exports=r},1143:(e,t,n)=>{var r=n(3028)(Object.keys,Object);e.exports=r},3516:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},6832:(e,t,n)=>{e=n.nmd(e);var r=n(7105),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,a=i&&i.exports===o&&r.process,l=function(){try{var e=i&&i.require&&i.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(t){}}();e.exports=l},6095:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},3028:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},5636:(e,t,n)=>{var r=n(1170),o=Math.max;e.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,l=o(i.length-t,0),s=Array(l);++a<l;)s[a]=i[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=i[a];return c[t]=n(s),r(e,this,c)}}},6552:(e,t,n)=>{var r=n(7105),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},3737:e=>{e.exports=function(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}},6179:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},6704:e=>{e.exports=function(e){return this.__data__.has(e)}},2074:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},6350:(e,t,n)=>{var r=n(8325),o=n(6578)(r);e.exports=o},6578:e=>{var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var o=t(),i=16-(o-r);if(r=o,i>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},4545:(e,t,n)=>{var r=n(7160);e.exports=function(){this.__data__=new r,this.size=0}},793:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},7760:e=>{e.exports=function(e){return this.__data__.get(e)}},3892:e=>{e.exports=function(e){return this.__data__.has(e)}},6788:(e,t,n)=>{var r=n(7160),o=n(5204),i=n(4816);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!o||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(a)}return n.set(e,t),this.size=n.size,this}},4020:e=>{e.exports=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}},1632:(e,t,n)=>{var r=n(4724),o=n(6311),i=n(7168);e.exports=function(e){return o(e)?i(e):r(e)}},4079:(e,t,n)=>{var r=n(8259),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,(function(e,n,r,o){t.push(r?o.replace(i,"$1"):n||e)})),t}));e.exports=a},914:(e,t,n)=>{var r=n(9841);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},6996:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},143:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},7168:e=>{var t="\\ud800-\\udfff",n="["+t+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",i="[^"+t+"]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+r+"|"+o+")"+"?",c="[\\ufe0e\\ufe0f]?",u=c+s+("(?:\\u200d(?:"+[i,a,l].join("|")+")"+c+s+")*"),d="(?:"+[i+r+"?",r,a,l,n].join("|")+")",f=RegExp(o+"(?="+o+")|"+d+u,"g");e.exports=function(e){for(var t=f.lastIndex=0;f.test(e);)++t;return t}},1740:(e,t,n)=>{var r=n(7132);e.exports=function(e){return r(e,4)}},6434:(e,t,n)=>{var r=n(7132);e.exports=function(e){return r(e,5)}},2541:e=>{e.exports=function(e){return function(){return e}}},1163:(e,t,n)=>{var r=n(5647),o=n(3211),i=n(929),a=n(474),l=Object.prototype,s=l.hasOwnProperty,c=r((function(e,t){e=Object(e);var n=-1,r=t.length,c=r>2?t[2]:void 0;for(c&&i(t[0],t[1],c)&&(r=1);++n<r;)for(var u=t[n],d=a(u),f=-1,p=d.length;++f<p;){var h=d[f],g=e[h];(void 0===g||o(g,l[h])&&!s.call(e,h))&&(e[h]=u[h])}return e}));e.exports=c},2580:(e,t,n)=>{e.exports=n(5491)},3211:e=>{e.exports=function(e,t){return e===t||e!==e&&t!==t}},723:(e,t,n)=>{var r=n(7529),o=n(7171),i=n(9096),a=n(4052);e.exports=function(e,t){return(a(e)?r:o)(e,i(t,3))}},8990:(e,t,n)=>{var r=n(9995)(n(2520));e.exports=r},2520:(e,t,n)=>{var r=n(5816),o=n(9096),i=n(9140),a=Math.max;e.exports=function(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var s=null==n?0:i(n);return s<0&&(s=a(l+s,0)),r(e,o(t,3),s)}},819:(e,t,n)=>{var r=n(755);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},5491:(e,t,n)=>{var r=n(726),o=n(5652),i=n(5111),a=n(4052);e.exports=function(e,t){return(a(e)?r:o)(e,i(t))}},7717:(e,t,n)=>{var r=n(4258),o=n(5111),i=n(474);e.exports=function(e,t){return null==e?e:r(e,o(t),i)}},3097:(e,t,n)=>{var r=n(2969);e.exports=function(e,t,n){var o=null==e?void 0:r(e,t);return void 0===o?n:o}},2117:(e,t,n)=>{var r=n(6741),o=n(9057);e.exports=function(e,t){return null!=e&&o(e,t,r)}},3366:(e,t,n)=>{var r=n(7894),o=n(9057);e.exports=function(e,t){return null!=e&&o(e,t,r)}},3279:e=>{e.exports=function(e){return e}},2777:(e,t,n)=>{var r=n(5193),o=n(2761),i=Object.prototype,a=i.hasOwnProperty,l=i.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(e){return o(e)&&a.call(e,"callee")&&!l.call(e,"callee")};e.exports=s},4052:e=>{var t=Array.isArray;e.exports=t},6571:(e,t,n)=>{var r=n(1629),o=n(6173);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},6272:(e,t,n)=>{var r=n(6571),o=n(2761);e.exports=function(e){return o(e)&&r(e)}},4543:(e,t,n)=>{e=n.nmd(e);var r=n(6552),o=n(14),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,l=a&&a.exports===i?r.Buffer:void 0,s=(l?l.isBuffer:void 0)||o;e.exports=s},4320:(e,t,n)=>{var r=n(3713),o=n(6924),i=n(2777),a=n(4052),l=n(6571),s=n(4543),c=n(6140),u=n(1268),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(l(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||s(e)||u(e)||i(e)))return!e.length;var t=o(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!r(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},1629:(e,t,n)=>{var r=n(6913),o=n(6686);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},6173:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},7887:(e,t,n)=>{var r=n(5791),o=n(7574),i=n(6832),a=i&&i.isMap,l=a?o(a):r;e.exports=l},6686:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},2761:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},2322:(e,t,n)=>{var r=n(6913),o=n(5990),i=n(2761),a=Function.prototype,l=Object.prototype,s=a.toString,c=l.hasOwnProperty,u=s.call(Object);e.exports=function(e){if(!i(e)||"[object Object]"!=r(e))return!1;var t=o(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==u}},5921:(e,t,n)=>{var r=n(449),o=n(7574),i=n(6832),a=i&&i.isSet,l=a?o(a):r;e.exports=l},620:(e,t,n)=>{var r=n(6913),o=n(4052),i=n(2761);e.exports=function(e){return"string"==typeof e||!o(e)&&i(e)&&"[object String]"==r(e)}},9841:(e,t,n)=>{var r=n(6913),o=n(2761);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},1268:(e,t,n)=>{var r=n(5428),o=n(7574),i=n(6832),a=i&&i.isTypedArray,l=a?o(a):r;e.exports=l},141:e=>{e.exports=function(e){return void 0===e}},8673:(e,t,n)=>{var r=n(3204),o=n(3713),i=n(6571);e.exports=function(e){return i(e)?r(e):o(e)}},474:(e,t,n)=>{var r=n(3204),o=n(8122),i=n(6571);e.exports=function(e){return i(e)?r(e,!0):o(e)}},4065:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},3411:(e,t,n)=>{var r=n(149),o=n(9096),i=n(8883),a=n(4052);e.exports=function(e,t){return(a(e)?r:i)(e,o(t,3))}},1733:(e,t,n)=>{var r=n(1775),o=n(4664),i=n(9096);e.exports=function(e,t){var n={};return t=i(t,3),o(e,(function(e,o,i){r(n,o,t(e,o,i))})),n}},539:(e,t,n)=>{var r=n(9742),o=n(7498),i=n(3279);e.exports=function(e){return e&&e.length?r(e,i,o):void 0}},5797:(e,t,n)=>{var r=n(4816);function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(o.Cache||r),n}o.Cache=r,e.exports=o},4677:(e,t,n)=>{var r=n(3253),o=n(4570)((function(e,t,n){r(e,t,n)}));e.exports=o},6745:(e,t,n)=>{var r=n(9742),o=n(61),i=n(3279);e.exports=function(e){return e&&e.length?r(e,i,o):void 0}},9364:(e,t,n)=>{var r=n(9742),o=n(9096),i=n(61);e.exports=function(e,t){return e&&e.length?r(e,o(t,2),i):void 0}},5713:e=>{e.exports=function(){}},4757:(e,t,n)=>{var r=n(6552);e.exports=function(){return r.Date.now()}},2616:(e,t,n)=>{var r=n(4008),o=n(5857)((function(e,t){return null==e?{}:r(e,t)}));e.exports=o},3932:(e,t,n)=>{var r=n(396),o=n(2866),i=n(2597),a=n(914);e.exports=function(e){return i(e)?r(a(e)):o(e)}},6604:(e,t,n)=>{var r=n(3331)();e.exports=r},2759:(e,t,n)=>{var r=n(9421),o=n(5652),i=n(9096),a=n(6487),l=n(4052);e.exports=function(e,t,n){var s=l(e)?r:a,c=arguments.length<3;return s(e,i(t,4),n,c,o)}},5640:(e,t,n)=>{var r=n(3713),o=n(6924),i=n(6571),a=n(620),l=n(1632);e.exports=function(e){if(null==e)return 0;if(i(e))return a(e)?l(e):e.length;var t=o(e);return"[object Map]"==t||"[object Set]"==t?e.size:r(e).length}},7424:(e,t,n)=>{var r=n(755),o=n(2536),i=n(5647),a=n(929),l=i((function(e,t){if(null==e)return[];var n=t.length;return n>1&&a(e,t[0],t[1])?t=[]:n>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),o(e,r(t,1),[])}));e.exports=l},7828:e=>{e.exports=function(){return[]}},14:e=>{e.exports=function(){return!1}},7303:(e,t,n)=>{var r=n(801),o=1/0;e.exports=function(e){return e?(e=r(e))===o||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},9140:(e,t,n)=>{var r=n(7303);e.exports=function(e){var t=r(e),n=t%1;return t===t?n?t-n:t:0}},801:(e,t,n)=>{var r=n(1141),o=n(6686),i=n(9841),a=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=l.test(e);return n||s.test(e)?c(e.slice(2),n?2:8):a.test(e)?NaN:+e}},1609:(e,t,n)=>{var r=n(6614),o=n(474);e.exports=function(e){return r(e,o(e))}},1069:(e,t,n)=>{var r=n(8541);e.exports=function(e){return null==e?"":r(e)}},2717:(e,t,n)=>{var r=n(726),o=n(1817),i=n(4664),a=n(9096),l=n(5990),s=n(4052),c=n(4543),u=n(1629),d=n(6686),f=n(1268);e.exports=function(e,t,n){var p=s(e),h=p||c(e)||f(e);if(t=a(t,4),null==n){var g=e&&e.constructor;n=h?p?new g:[]:d(e)&&u(g)?o(l(e)):{}}return(h?r:i)(e,(function(e,r,o){return t(n,e,r,o)})),n}},450:(e,t,n)=>{var r=n(755),o=n(5647),i=n(4416),a=n(6272),l=o((function(e){return i(r(e,1,a,!0))}));e.exports=l},111:(e,t,n)=>{var r=n(1069),o=0;e.exports=function(e){var t=++o;return r(e)+t}},6727:(e,t,n)=>{var r=n(6983),o=n(8673);e.exports=function(e){return null==e?[]:r(e,o(e))}},8129:(e,t,n)=>{var r=n(8420),o=n(9377);e.exports=function(e,t){return o(e||[],t||[],r)}},7004:(e,t,n)=>{"use strict";var r=n(8853),o=n(5043),i=n(7950);function a(e){var t="https://d079a299-d109-44a5-8380-50d81d53784f.preview.emergentagent.com","/api"),Td=e=>{let{message:n,type:r="success",onClose:o,duration:i=3e3}=e;(0,t.useEffect)((()=>{const e=setTimeout(o,i);return()=>clearTimeout(e)}),[o,i]);return(0,At.jsx)("div",{className:"".concat("fixed top-4 right-4 z-50 px-6 py-3 rounded-lg shadow-lg transition-all duration-500 transform"," ").concat({success:"bg-green-600 text-white border-l-4 border-green-400",error:"bg-red-600 text-white border-l-4 border-red-400",info:"bg-blue-600 text-white border-l-4 border-blue-400",saving:"bg-purple-600 text-white border-l-4 border-purple-400"}[r]),children:(0,At.jsxs)("div",{className:"flex items-center",children:[(()=>{switch(r){case"success":default:return(0,At.jsx)(dd,{size:16,className:"mr-2"});case"error":return(0,At.jsx)(fd,{size:16,className:"mr-2"});case"info":return(0,At.jsx)(pd,{size:16,className:"mr-2"});case"saving":return(0,At.jsx)(hd,{size:16,className:"mr-2 animate-spin"})}})(),(0,At.jsx)("span",{className:"text-sm font-medium",children:n}),(0,At.jsx)("button",{onClick:o,className:"ml-4 text-white hover:text-gray-200 transition-colors",children:(0,At.jsx)(gd,{size:14})})]})})},Rd=e=>{let{onClick:t,loading:n,disabled:r,children:o,className:i,icon:a}=e,l=c(e,zd);return(0,At.jsx)("button",s(s({onClick:t,disabled:r||n,className:"".concat(i," transform transition-all duration-200 hover:scale-105 active:scale-95 ").concat(r||n?"cursor-not-allowed opacity-50":"hover:shadow-lg")},l),{},{children:(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[n?(0,At.jsx)(hd,{size:16,className:"animate-spin"}):a?(0,At.jsx)(a,{size:16}):null,o]})}))},Dd="pgy3_mindmap_data",Ld={save:(()=>{let e;return(t,n,r)=>{clearTimeout(e),n&&n(),e=setTimeout((()=>{try{const e={version:"1.1",timestamp:(new Date).toISOString(),data:t};localStorage.setItem(Dd,JSON.stringify(e)),console.log("Mind map data auto-saved to localStorage"),r&&r(!0)}catch(e){if(console.error("Error saving to localStorage:",e),r&&r(!1,e),"QuotaExceededError"===e.name){console.warn("localStorage quota exceeded, clearing old data...");try{localStorage.removeItem(Dd)}catch(n){console.error("Error clearing localStorage:",n)}}}}),800)}})(),load:()=>{try{const e=localStorage.getItem(Dd);if(!e)return console.log("No localStorage data found"),null;const t=JSON.parse(e);return"1.1"!==t.version?(console.log("localStorage version mismatch, clearing old data"),localStorage.removeItem(Dd),null):(console.log("Mind map data loaded from localStorage",t.timestamp),t.data)}catch(e){console.error("Error loading from localStorage:",e);try{localStorage.removeItem(Dd)}catch(t){console.error("Error clearing corrupted localStorage:",t)}return null}},clear:()=>{try{localStorage.removeItem(Dd),console.log("localStorage data cleared")}catch(e){console.error("Error clearing localStorage:",e)}},getStorageInfo:()=>{try{const e=localStorage.getItem(Dd);if(!e)return null;const t=JSON.parse(e);return{version:t.version,timestamp:t.timestamp,size:new Blob([e]).size}}catch(e){return null}}},Id=(e,t)=>{if(!e||0===e.length)return"";t&&t(10,"Preparing headers...");t&&t(30,"Processing case data...");const n=e.map(((n,r)=>(t&&t(30+r/e.length*50,"Processing case ".concat(r+1,"/").concat(e.length,"...")),[n.case_id||"",n.encounter_date?new Date(n.encounter_date).toLocaleDateString():"",n.primary_diagnosis||"",Array.isArray(n.secondary_diagnoses)?n.secondary_diagnoses.join("; "):"",n.age||"",n.gender||"",n.chief_complaint||"",n.history_present_illness||"",n.medical_history||"",Array.isArray(n.medications)?n.medications.join("; "):"",n.mental_status_exam||"",n.assessment_plan||"",n.status||"",n.notes||"",n.created_at?new Date(n.created_at).toLocaleDateString():"",n.updated_at?new Date(n.updated_at).toLocaleDateString():"",Array.isArray(n.linked_topics)?n.linked_topics.length:"0","PGY-3 System"])));t&&t(85,"Formatting CSV content...");const r=e=>{const t=String(e);return t.includes(",")||t.includes('"')||t.includes("\n")?'"'.concat(t.replace(/"/g,'""'),'"'):t},o=[["Case ID","Encounter Date","Primary Diagnosis","Secondary Diagnoses","Age","Gender","Chief Complaint","History of Present Illness","Medical History","Medications","Mental Status Exam","Assessment & Plan","Status","Notes","Created Date","Updated Date","Linked Topics Count","Last Modified By"].map(r).join(","),...n.map((e=>e.map(r).join(",")))].join("\n");return t&&t(100,"CSV generation complete!"),o},Fd=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"patient_cases.csv";const n=new Blob([e],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),o=URL.createObjectURL(n);r.setAttribute("href",o),r.setAttribute("download",t),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(o)},Bd=e=>{if(!e||0===e.length)return null;const t={},n={},r={"18-30":0,"31-50":0,"51-70":0,"70+":0,Unknown:0},o={};return e.forEach((e=>{e.primary_diagnosis&&(t[e.primary_diagnosis]=(t[e.primary_diagnosis]||0)+1),e.status&&(n[e.status]=(n[e.status]||0)+1),e.age?e.age<=30?r["18-30"]++:e.age<=50?r["31-50"]++:e.age<=70?r["51-70"]++:r["70+"]++:r.Unknown++,e.gender&&(o[e.gender]=(o[e.gender]||0)+1)})),{totalCases:e.length,diagnoses:t,statuses:n,ageGroups:r,genders:o}},Vd={topic:e=>{let{data:t,selected:n}=e;const r=t.flashcard_count>0?(t.completed_flashcards||0)/t.flashcard_count*100:0;return(0,At.jsxs)("div",{className:"group px-4 py-3 rounded-xl shadow-lg border-2 transition-all duration-500 min-w-[220px] relative hover:shadow-2xl transform hover:scale-105 backdrop-blur-sm ".concat(n?"border-teal-400 shadow-xl scale-105 ring-4 ring-teal-200 animate-pulse":"border-transparent hover:border-teal-300 hover:ring-2 hover:ring-teal-100"),style:{backgroundColor:t.color||"#3B82F6",color:"white",boxShadow:n?"0 0 20px ".concat(t.color||"#3B82F6","40"):"0 4px 20px ".concat(t.color||"#3B82F6","20")},children:[(0,At.jsx)(vc,{id:"target-top",type:"target",position:Ji.Top,className:"w-3 h-3 !bg-white border-2 border-current transition-all duration-300 hover:scale-150 opacity-60 hover:opacity-100",style:{left:"50%",transform:"translateX(-50%)"}}),(0,At.jsx)(vc,{id:"source-bottom",type:"source",position:Ji.Bottom,className:"w-3 h-3 !bg-white border-2 border-current transition-all duration-300 hover:scale-150 opacity-60 hover:opacity-100",style:{left:"50%",transform:"translateX(-50%)"}}),(0,At.jsx)(vc,{id:"target-left",type:"target",position:Ji.Left,className:"w-3 h-3 !bg-white border-2 border-current transition-all duration-300 hover:scale-150 opacity-60 hover:opacity-100",style:{top:"30%",transform:"translateY(-50%)"}}),(0,At.jsx)(vc,{id:"source-left",type:"source",position:Ji.Left,className:"w-3 h-3 !bg-white border-2 border-current transition-all duration-300 hover:scale-150 opacity-60 hover:opacity-100",style:{top:"70%",transform:"translateY(-50%)"}}),(0,At.jsx)(vc,{id:"target-right",type:"target",position:Ji.Right,className:"w-3 h-3 !bg-white border-2 border-current transition-all duration-300 hover:scale-150 opacity-60 hover:opacity-100",style:{top:"30%",transform:"translateY(-50%)"}}),(0,At.jsx)(vc,{id:"source-right",type:"source",position:Ji.Right,className:"w-3 h-3 !bg-white border-2 border-current transition-all duration-300 hover:scale-150 opacity-60 hover:opacity-100",style:{top:"70%",transform:"translateY(-50%)"}}),t.priority&&(0,At.jsx)("div",{className:"absolute -top-2 -right-2",children:(0,At.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold border-2 border-white ".concat("high"===t.priority?"bg-red-500":"medium"===t.priority?"bg-yellow-500":"bg-green-500"),children:"high"===t.priority?"!":"medium"===t.priority?"\u2022":"\u2713"})}),(0,At.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,At.jsxs)("div",{className:"flex items-center gap-1",children:[(0,At.jsx)(md,{size:16,className:"drop-shadow-sm"}),t.tags&&t.tags.length>0&&(0,At.jsx)(vd,{size:12,className:"opacity-75"})]}),(0,At.jsx)("div",{className:"font-semibold text-sm truncate flex-1",children:t.label}),t.onDelete&&(0,At.jsx)("button",{onClick:e=>{e.stopPropagation(),t.onDelete()},className:"ml-auto p-1 hover:bg-white hover:bg-opacity-20 rounded transition-all duration-200 hover:scale-110 opacity-0 group-hover:opacity-100",children:(0,At.jsx)(gd,{size:12})})]}),(0,At.jsx)("div",{className:"text-xs opacity-90 mb-2",children:t.category}),t.flashcard_count>0&&(0,At.jsxs)("div",{className:"text-xs mt-2 space-y-1",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center",children:[(0,At.jsxs)("span",{className:"opacity-90",children:[t.completed_flashcards,"/",t.flashcard_count," flashcards"]}),(0,At.jsxs)("span",{className:"font-semibold",children:[Math.round(r),"%"]})]}),(0,At.jsx)("div",{className:"w-full bg-white bg-opacity-20 rounded-full h-2 overflow-hidden",children:(0,At.jsx)("div",{className:"h-full bg-white rounded-full transition-all duration-1000 ease-out",style:{width:"".concat(r,"%")}})})]}),t.tags&&t.tags.length>0&&(0,At.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[t.tags.slice(0,3).map(((e,t)=>(0,At.jsx)("span",{className:"px-2 py-1 bg-white bg-opacity-20 rounded-full text-xs",children:e},t))),t.tags.length>3&&(0,At.jsxs)("span",{className:"px-2 py-1 bg-white bg-opacity-20 rounded-full text-xs",children:["+",t.tags.length-3]})]}),t.updated_at&&(0,At.jsx)("div",{className:"absolute bottom-1 right-1 opacity-50",children:(0,At.jsx)(yd,{size:10})})]})},case:e=>{let{data:t,selected:n}=e;const r=(e=>{var t,n;const r=(null===(t=e.chief_complaint)||void 0===t?void 0:t.toLowerCase())||"",o=(null===(n=e.diagnosis)||void 0===n?void 0:n.toLowerCase())||"";return["emergency","urgent","crisis","acute","severe"].some((e=>r.includes(e)||o.includes(e)))?"high":"normal"})(t);return(0,At.jsxs)("div",{className:"group px-4 py-3 rounded-xl shadow-lg border-2 transition-all duration-500 min-w-[220px] bg-white relative hover:shadow-2xl transform hover:scale-105 ".concat(n?"border-blue-400 shadow-xl scale-105 ring-4 ring-blue-200":"border-gray-200 hover:border-blue-300 hover:ring-2 hover:ring-blue-100"," ").concat("high"===r?"ring-2 ring-red-300":""),children:[(0,At.jsx)(vc,{id:"target-top",type:"target",position:Ji.Top,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 opacity-60 hover:opacity-100",style:{left:"50%",transform:"translateX(-50%)"}}),(0,At.jsx)(vc,{id:"source-bottom",type:"source",position:Ji.Bottom,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 opacity-60 hover:opacity-100",style:{left:"50%",transform:"translateX(-50%)"}}),(0,At.jsx)(vc,{id:"target-left",type:"target",position:Ji.Left,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 opacity-60 hover:opacity-100",style:{top:"30%",transform:"translateY(-50%)"}}),(0,At.jsx)(vc,{id:"source-left",type:"source",position:Ji.Left,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 opacity-60 hover:opacity-100",style:{top:"70%",transform:"translateY(-50%)"}}),(0,At.jsx)(vc,{id:"target-right",type:"target",position:Ji.Right,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 opacity-60 hover:opacity-100",style:{top:"30%",transform:"translateY(-50%)"}}),(0,At.jsx)(vc,{id:"source-right",type:"source",position:Ji.Right,className:"w-3 h-3 !bg-blue-500 transition-all duration-300 hover:scale-150 opacity-60 hover:opacity-100",style:{top:"70%",transform:"translateY(-50%)"}}),"high"===r&&(0,At.jsx)("div",{className:"absolute -top-2 -right-2",children:(0,At.jsx)("div",{className:"w-6 h-6 bg-red-500 rounded-full flex items-center justify-center border-2 border-white animate-pulse",children:(0,At.jsx)(fd,{size:14,className:"text-white"})})}),(0,At.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,At.jsxs)("div",{className:"flex items-center gap-1",children:[(0,At.jsx)(bd,{size:16,className:"text-blue-600"}),t.linked_topics&&t.linked_topics.length>0&&(0,At.jsx)("div",{className:"text-xs bg-blue-100 text-blue-600 px-1 rounded",children:t.linked_topics.length})]}),(0,At.jsx)("div",{className:"font-semibold text-sm text-gray-800 truncate flex-1",children:t.label}),t.onDelete&&(0,At.jsx)("button",{onClick:e=>{e.stopPropagation(),t.onDelete()},className:"ml-auto p-1 hover:bg-gray-200 rounded transition-all duration-200 hover:scale-110 opacity-0 group-hover:opacity-100",children:(0,At.jsx)(gd,{size:12})})]}),(0,At.jsx)("div",{className:"text-xs text-gray-600 mb-2 truncate",children:t.diagnosis}),(0,At.jsxs)("div",{className:"space-y-1",children:[t.age&&(0,At.jsxs)("div",{className:"text-xs text-blue-600 flex items-center gap-1",children:[(0,At.jsx)(xd,{size:10}),"Age: ",t.age]}),t.status&&(0,At.jsx)("span",{className:"inline-block px-2 py-1 rounded-full text-xs border ".concat((e=>{switch(e){case"active":return"bg-green-100 text-green-800 border-green-200";case"archived":return"bg-gray-100 text-gray-800 border-gray-200";case"follow_up":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}})(t.status)),children:t.status})]}),t.tasks_count&&t.tasks_count>0&&(0,At.jsxs)("div",{className:"mt-2 text-xs text-gray-500 flex items-center gap-1",children:[(0,At.jsx)(wd,{size:10}),t.completed_tasks||0,"/",t.tasks_count," tasks"]}),t.updated_at&&(0,At.jsx)("div",{className:"absolute bottom-1 right-1 opacity-30",children:(0,At.jsx)(yd,{size:10})})]})},task:e=>{let{data:t,selected:n}=e;return(0,At.jsxs)("div",{className:"group px-4 py-3 rounded-xl shadow-lg border-2 transition-all duration-500 min-w-[200px] text-white relative hover:shadow-2xl transform hover:scale-105 ".concat(n?"border-yellow-400 shadow-xl scale-105 ring-4 ring-yellow-200":"border-transparent hover:border-yellow-300 hover:ring-2 hover:ring-yellow-100"," ").concat({pending:"bg-yellow-500",in_progress:"bg-blue-500",completed:"bg-green-500"}[t.status]||"bg-gray-500"),children:[(0,At.jsx)(vc,{id:"target-top",type:"target",position:Ji.Top,className:"w-3 h-3 !bg-white transition-all duration-300 hover:scale-150 opacity-60 hover:opacity-100",style:{left:"50%",transform:"translateX(-50%)"}}),(0,At.jsx)(vc,{id:"source-bottom",type:"source",position:Ji.Bottom,className:"w-3 h-3 !bg-white transition-all duration-300 hover:scale-150 opacity-60 hover:opacity-100",style:{left:"50%",transform:"translateX(-50%)"}}),(0,At.jsx)(vc,{id:"target-left",type:"target",position:Ji.Left,className:"w-3 h-3 !bg-white transition-all duration-300 hover:scale-150 opacity-60 hover:opacity-100",style:{top:"30%",transform:"translateY(-50%)"}}),(0,At.jsx)(vc,{id:"source-left",type:"source",position:Ji.Left,className:"w-3 h-3 !bg-white transition-all duration-300 hover:scale-150 opacity-60 hover:opacity-100",style:{top:"70%",transform:"translateY(-50%)"}}),(0,At.jsx)(vc,{id:"target-right",type:"target",position:Ji.Right,className:"w-3 h-3 !bg-white transition-all duration-300 hover:scale-150 opacity-60 hover:opacity-100",style:{top:"30%",transform:"translateY(-50%)"}}),(0,At.jsx)(vc,{id:"source-right",type:"source",position:Ji.Right,className:"w-3 h-3 !bg-white transition-all duration-300 hover:scale-150 opacity-60 hover:opacity-100",style:{top:"70%",transform:"translateY(-50%)"}}),(0,At.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,At.jsx)(wd,{size:16}),(0,At.jsx)("div",{className:"font-semibold text-sm",children:t.label}),t.onDelete&&(0,At.jsx)("button",{onClick:e=>{e.stopPropagation(),t.onDelete()},className:"ml-auto p-1 hover:bg-white hover:bg-opacity-20 rounded transition-all duration-200 hover:scale-110 opacity-0 group-hover:opacity-100",children:(0,At.jsx)(gd,{size:12})})]}),(0,At.jsxs)("div",{className:"text-xs opacity-90",children:["Priority: ",t.priority]}),t.due_date&&(0,At.jsxs)("div",{className:"text-xs mt-1 opacity-90",children:["Due: ",new Date(t.due_date).toLocaleDateString()]})]})},literature:e=>{let{data:t,selected:n}=e;return(0,At.jsxs)("div",{className:"group px-4 py-3 rounded-xl shadow-lg border-2 transition-all duration-500 min-w-[200px] bg-purple-50 relative hover:shadow-2xl transform hover:scale-105 ".concat(n?"border-purple-400 shadow-xl scale-105 ring-4 ring-purple-200":"border-purple-200 hover:border-purple-300 hover:ring-2 hover:ring-purple-100"),children:[(0,At.jsx)(vc,{id:"target-top",type:"target",position:Ji.Top,className:"w-3 h-3 !bg-purple-500 transition-all duration-300 hover:scale-150 opacity-60 hover:opacity-100",style:{left:"50%",transform:"translateX(-50%)"}}),(0,At.jsx)(vc,{id:"source-bottom",type:"source",position:Ji.Bottom,className:"w-3 h-3 !bg-purple-500 transition-all duration-300 hover:scale-150 opacity-60 hover:opacity-100",style:{left:"50%",transform:"translateX(-50%)"}}),(0,At.jsx)(vc,{id:"target-left",type:"target",position:Ji.Left,className:"w-3 h-3 !bg-purple-500 transition-all duration-300 hover:scale-150 opacity-60 hover:opacity-100",style:{top:"30%",transform:"translateY(-50%)"}}),(0,At.jsx)(vc,{id:"source-left",type:"source",position:Ji.Left,className:"w-3 h-3 !bg-purple-500 transition-all duration-300 hover:scale-150 opacity-60 hover:opacity-100",style:{top:"70%",transform:"translateY(-50%)"}}),(0,At.jsx)(vc,{id:"target-right",type:"target",position:Ji.Right,className:"w-3 h-3 !bg-purple-500 transition-all duration-300 hover:scale-150 opacity-60 hover:opacity-100",style:{top:"30%",transform:"translateY(-50%)"}}),(0,At.jsx)(vc,{id:"source-right",type:"source",position:Ji.Right,className:"w-3 h-3 !bg-purple-500 transition-all duration-300 hover:scale-150 opacity-60 hover:opacity-100",style:{top:"70%",transform:"translateY(-50%)"}}),(0,At.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,At.jsx)(kd,{size:16,className:"text-purple-600"}),(0,At.jsx)("div",{className:"font-semibold text-sm text-gray-800",children:t.label}),t.onDelete&&(0,At.jsx)("button",{onClick:e=>{e.stopPropagation(),t.onDelete()},className:"ml-auto p-1 hover:bg-purple-200 rounded transition-all duration-200 hover:scale-110 opacity-0 group-hover:opacity-100",children:(0,At.jsx)(gd,{size:12})})]}),(0,At.jsx)("div",{className:"text-xs text-gray-600",children:t.authors}),(0,At.jsx)("div",{className:"text-xs text-purple-600 mt-1",children:t.year})]})}},Hd=t.memo((e=>{let{type:n,data:r,onClose:o,setMindMapData:i,loadMindMapData:a,onAutoSave:l}=e;const[c,u]=(0,t.useState)(!1),[d,f]=(0,t.useState)(r),[p,h]=(0,t.useState)(r),[g,m]=(0,t.useState)(!1);(0,t.useEffect)((()=>{r&&r!==p&&(f(r),h(r))}),[r]);const v=(0,t.useMemo)((()=>d&&d.flashcard_count?(d.completed_flashcards||0)/d.flashcard_count*100:0),[null===d||void 0===d?void 0:d.completed_flashcards,null===d||void 0===d?void 0:d.flashcard_count]),y=(0,t.useCallback)(((e,t)=>{f((n=>s(s({},n),{},{[e]:t})))}),[]),b=(0,t.useCallback)((async()=>{if(!g&&null!==r&&void 0!==r&&r.id){m(!0);try{const e="literature"===n?"literature":"".concat(n,"s"),t=await zt.put("".concat(Ad,"/").concat(e,"/").concat(r.id),d);u(!1),h(d);const o=t.data;i((e=>{const t=s({},e);if("literature"===n)t.literature=t.literature.map((e=>e.id===r.id?o:e));else{const e=n+"s";t[e]=t[e].map((e=>e.id===r.id?o:e))}return l&&setTimeout((()=>l(t)),0),t}))}catch(e){console.error("Error saving data:",e)}finally{m(!1)}}}),[n,null===r||void 0===r?void 0:r.id,d,i,l,g]),x=(0,t.useCallback)((()=>{f(p),u(!1)}),[p]),w=(0,t.useCallback)((async()=>{if(!g&&null!==r&&void 0!==r&&r.id&&window.confirm("Are you sure you want to delete this ".concat(n,"?"))){m(!0);try{const e="literature"===n?"literature":"".concat(n,"s");await zt.delete("".concat(Ad,"/").concat(e,"/").concat(r.id)),i((e=>{const t=s({},e);if("literature"===n)t.literature=t.literature.filter((e=>e.id!==r.id));else{const e=n+"s";t[e]=t[e].filter((e=>e.id!==r.id))}return l&&setTimeout((()=>l(t)),0),t})),o()}catch(e){console.error("Error deleting data:",e)}finally{m(!1)}}}),[n,null===r||void 0===r?void 0:r.id,i,l,o,g]);if(!r)return(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-40 backdrop-blur-sm",onClick:e=>{e.target===e.currentTarget&&o()},children:(0,At.jsx)("div",{className:"bg-white rounded-xl shadow-2xl p-6 max-w-4xl w-full mx-4 max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:(0,At.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,At.jsx)(hd,{size:24,className:"animate-spin text-blue-600"}),(0,At.jsx)("span",{className:"ml-2 text-gray-500",children:"Loading..."})]})})});if(r&&0===Object.keys(r).length)return(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-40 backdrop-blur-sm",onClick:e=>{e.target===e.currentTarget&&o()},children:(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl p-6 max-w-4xl w-full mx-4 max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Error Loading Data"}),(0,At.jsx)("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 p-2 rounded-full hover:bg-gray-100 transition-colors",children:(0,At.jsx)(gd,{size:20})})]}),(0,At.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)(fd,{size:48,className:"text-red-500 mx-auto mb-4"}),(0,At.jsx)("p",{className:"text-gray-600",children:"Failed to load data. Please try again."}),(0,At.jsx)("button",{onClick:o,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Close"})]})})]})});const k=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!d)return null;const o=d[t]||"";if(c){if("textarea"===n)return(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:e}),(0,At.jsx)("textarea",{value:o,onChange:e=>y(t,e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",rows:r.rows||3})]},t);var i;if("select"===n)return(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:e}),(0,At.jsx)("select",{value:o,onChange:e=>y(t,e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",children:null===(i=r.choices)||void 0===i?void 0:i.map((e=>(0,At.jsx)("option",{value:e,children:e},e)))})]},t);{let r=o;if("date"===n&&o)try{const e=new Date(o);isNaN(e.getTime())||(r=e.toISOString().split("T")[0])}catch(a){console.warn("Error formatting date:",o)}return(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:e}),(0,At.jsx)("input",{type:n,value:r,onChange:e=>y(t,e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"})]},t)}}return(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:e}),(0,At.jsx)("p",{className:"text-gray-600",children:o||"No ".concat(e.toLowerCase()," available.")})]},t)};return(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-40 backdrop-blur-sm",onClick:e=>{e.target===e.currentTarget&&o()},children:(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full mx-4 max-h-[80vh] overflow-hidden animate-in fade-in duration-300",onClick:e=>e.stopPropagation(),children:[(0,At.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,At.jsxs)("h2",{className:"text-lg font-semibold text-gray-800 capitalize",children:[n," Details"]}),(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[!c&&!g&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(Rd,{onClick:()=>u(!0),icon:Ed,className:"text-blue-600 hover:text-blue-800 p-2 rounded-full hover:bg-blue-50",title:"Edit"}),(0,At.jsx)(Rd,{onClick:w,loading:g,icon:_d,className:"text-red-600 hover:text-red-800 p-2 rounded-full hover:bg-red-50",title:"Delete"})]}),(0,At.jsx)("button",{onClick:o,className:"text-gray-600 hover:text-gray-800 p-2 rounded-full hover:bg-gray-100 transition-colors border border-gray-300 hover:border-gray-400",disabled:g,title:"Close",children:(0,At.jsx)(gd,{size:20})})]})]}),(0,At.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(80vh-160px)]",children:(()=>{if(!d)return(0,At.jsx)("div",{children:"Loading..."});switch(n){case"topic":return(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"flex items-center gap-4",children:[(0,At.jsx)("div",{className:"w-4 h-4 rounded-full transition-colors",style:{backgroundColor:d.color||"#3B82F6"}}),k("Title","title")]}),k("Description","description","textarea",{rows:4}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[k("Category","category"),(0,At.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,At.jsxs)("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[(0,At.jsx)(Sd,{size:16}),"Flashcard Progress"]}),(0,At.jsxs)("div",{className:"space-y-2",children:[(0,At.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,At.jsx)("span",{children:"Completed"}),(0,At.jsxs)("span",{children:[d.completed_flashcards||0,"/",d.flashcard_count||0]})]}),(0,At.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,At.jsx)("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-500",style:{width:"".concat(v,"%")}})})]})]})]})]});case"literature":return(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"flex items-center gap-4",children:[(0,At.jsx)(kd,{className:"text-purple-600",size:24}),k("Title","title")]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[k("Authors","authors"),k("Publication","publication")]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[k("Year","year","number"),k("DOI","doi")]}),k("Abstract","abstract","textarea",{rows:4}),k("Notes","notes","textarea",{rows:3})]});case"case":return(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"flex items-center gap-4",children:[(0,At.jsx)(bd,{className:"text-blue-600",size:24}),k("Case ID","case_id")]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[k("Primary Diagnosis","primary_diagnosis"),k("Age","age","number")]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[k("Gender","gender","select",{choices:["Male","Female","Non-binary","Other"]}),k("Status","status","select",{choices:["active","archived","follow_up"]})]}),k("Chief Complaint","chief_complaint","textarea",{rows:3}),k("History of Present Illness","history_present_illness","textarea",{rows:4}),k("Mental Status Exam","mental_status_exam","textarea",{rows:4}),k("Assessment & Plan","assessment_plan","textarea",{rows:4})]});case"task":return(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"flex items-center gap-4",children:[(0,At.jsx)(wd,{className:"text-amber-600",size:24}),k("Title","title")]}),k("Description","description","textarea",{rows:3}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[k("Status","status","select",{choices:["pending","in_progress","completed"]}),k("Priority","priority","select",{choices:["low","medium","high"]}),k("Due Date","due_date","date")]})]});default:return(0,At.jsx)("div",{children:"Unknown node type"})}})()}),c&&(0,At.jsxs)("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex items-center justify-end gap-3",children:[(0,At.jsx)(Rd,{onClick:x,disabled:g,className:"px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-100",children:"Cancel"}),(0,At.jsx)(Rd,{onClick:b,loading:g,icon:Cd,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:g?"Saving...":"Save Changes"})]})]})})})),Ud=e=>{let{isOpen:t,onClose:n,onSelect:r}=e;if(!t)return null;const o=[{type:"topic",label:"Psychiatric Topic",icon:md,color:"bg-blue-600",description:"Add a new psychiatric topic or disorder"},{type:"literature",label:"Literature",icon:kd,color:"bg-purple-600",description:"Add research papers, articles, or references"},{type:"case",label:"Patient Case",icon:bd,color:"bg-indigo-600",description:"Add a new patient case study"},{type:"task",label:"Task",icon:wd,color:"bg-amber-600",description:"Add a task or to-do item"}];return(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl p-6 max-w-md w-full mx-4",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,At.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Add New Node"}),(0,At.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 p-1",children:(0,At.jsx)(gd,{size:20})})]}),(0,At.jsx)("div",{className:"space-y-3",children:o.map((e=>{let{type:t,label:o,icon:i,color:a,description:l}=e;return(0,At.jsxs)("button",{onClick:()=>{r(t),n()},className:"w-full flex items-center gap-4 p-4 rounded-lg border-2 border-gray-200 hover:border-gray-300 hover:bg-gray-50 transition-all",children:[(0,At.jsx)("div",{className:"".concat(a," p-2 rounded-lg text-white"),children:(0,At.jsx)(i,{size:20})}),(0,At.jsxs)("div",{className:"text-left",children:[(0,At.jsx)("div",{className:"font-medium text-gray-800",children:o}),(0,At.jsx)("div",{className:"text-sm text-gray-500",children:l})]})]},t)}))})]})})},Wd=()=>{var e;const{fitView:n,setCenter:r,zoomTo:o,getViewport:i}=Js(),[a,l,c]=function(e){const[n,r]=(0,t.useState)(e),o=(0,t.useCallback)((e=>r((t=>Bs(e,t)))),[]);return[n,r,o]}([]),[u,d,f]=function(e){const[n,r]=(0,t.useState)(e),o=(0,t.useCallback)((e=>r((t=>Vs(e,t)))),[]);return[n,r,o]}([]),[p,h]=(0,t.useState)({topics:[],cases:[],tasks:[],literature:[]}),[g,m]=(0,t.useState)(!1),[v,y]=(0,t.useState)(null),[b,x]=(0,t.useState)(!0),[w,k]=(0,t.useState)(null),[S,E]=(0,t.useState)(!1),[_,C]=(0,t.useState)(null),[N,P]=(0,t.useState)(null),[j,O]=(0,t.useState)(!1),[M,z]=(0,t.useState)(!1),[A,T]=(0,t.useState)(!1),[R,D]=(0,t.useState)(null),[L,I]=(0,t.useState)(!1),[F,B]=(0,t.useState)({show:!1,progress:0,message:""}),[V,H]=(0,t.useState)([]),U=(0,t.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;const r={id:Date.now(),message:e,type:t,duration:n};H((e=>[...e,r]))}),[]),W=(0,t.useCallback)((e=>{H((t=>t.filter((t=>t.id!==e))))}),[]),Y=(0,t.useCallback)((e=>{Ld.save(e,(()=>{I(!0)}),((e,t)=>{I(!1),e?(D(new Date),U("Data auto-saved","saving",2e3)):(U("Auto-save failed","error",4e3),console.error("Auto-save error:",t))}))}),[U]),q=(0,t.useCallback)((async()=>{if(window.confirm("Are you sure you want to clear the entire mind map? This action cannot be undone."))try{const e={topics:[],cases:[],tasks:[],literature:[]};h(e),l([]),d([]),Y(e),U("Mind map cleared successfully","success"),y(null),C(null),P(null),k(null)}catch(e){console.error("Error clearing mind map:",e),U("Failed to clear mind map","error")}}),[h,l,d,Y,U]),X=(0,t.useCallback)((e=>{c(e);e.filter((e=>"position"===e.type&&!1===e.dragging)).length>0&&setTimeout((()=>{const e=s({},p);a.forEach((t=>{const[n,r]=t.id.split("-"),o="literature"===n?"literature":n+"s";if(e[o]){const n=e[o].find((e=>e.id===r));n&&(n.position=t.position)}})),h(e),Y(e),console.log("Node positions auto-saved to localStorage")}),100)}),[c,p,a,Y]);(0,t.useEffect)((()=>{Z()}),[]),(0,t.useEffect)((()=>{p.topics.length>0&&setTimeout((()=>{var e,t,n;console.log("Mode switching - refreshing nodes with current mindMapData:"),console.log("Literature connections:",null===(e=p.literature)||void 0===e?void 0:e.map((e=>({id:e.id,title:e.title,linked_topics:e.linked_topics})))),console.log("Case connections:",null===(t=p.cases)||void 0===t?void 0:t.map((e=>({id:e.id,case_id:e.case_id,linked_topics:e.linked_topics})))),console.log("Task connections:",null===(n=p.tasks)||void 0===n?void 0:n.map((e=>({id:e.id,title:e.title,linked_case_id:e.linked_case_id,linked_topic_id:e.linked_topic_id})))),J(p,!0)}),800)}),[g]),(0,t.useEffect)((()=>{j&&p.topics.length>0&&!M&&!b&&setTimeout((()=>{console.log("Applying initial hierarchical layout from useEffect..."),ae(),z(!0)}),1e3)}),[j,p,M,b]),(0,t.useEffect)((()=>{var e;(p.topics.length>0||p.cases.length>0||p.tasks.length>0||(null===(e=p.literature)||void 0===e?void 0:e.length)>0)&&(console.log("Updating React Flow nodes from mindMapData changes (preserving positions)"),J(p,!0))}),[p,J]);const Z=async()=>{try{var e;const n=Ld.load();var t;if(n)return console.log("Loading data from localStorage"),h(n),J(n),x(!1),j&&!M&&(n.topics.length>0||n.cases.length>0||n.tasks.length>0||(null===(t=n.literature)||void 0===t?void 0:t.length)>0)&&setTimeout((()=>{console.log("Applying initial layout from localStorage..."),ae(),z(!0)}),100),void setTimeout((()=>{K()}),2e3);console.log("No localStorage data found, loading from API");const r=await zt.get("".concat(Ad,"/mindmap-data"));h(r.data),J(r.data),x(!1),Y(r.data),j&&!M&&(r.data.topics.length>0||r.data.cases.length>0||r.data.tasks.length>0||(null===(e=r.data.literature)||void 0===e?void 0:e.length)>0)&&(console.log("Applying initial layout from API..."),setTimeout((()=>{ae(),z(!0)}),100))}catch(n){console.error("Error loading mind map data:",n),x(!1)}},K=async()=>{try{const e=(await zt.get("".concat(Ad,"/mindmap-data"))).data,t=Ld.load();t&&JSON.stringify(t)!==JSON.stringify(e)&&console.log("Backend data differs from localStorage, keeping localStorage version")}catch(e){console.warn("Background sync with backend failed:",e)}},G=(0,t.useCallback)((()=>{console.log("React Flow initialized"),O(!0),p.topics.length>0&&!M&&setTimeout((()=>{console.log("Applying initial layout after React Flow init..."),ae(),z(!0)}),100)}),[p,M]),$=async(e,t)=>{if(window.confirm("Are you sure you want to delete this ".concat(t,"?")))try{await zt.delete("".concat(Ad,"/").concat(t,"s/").concat(e)),l((n=>n.filter((n=>n.id!=="".concat(t,"-").concat(e))))),d((n=>n.filter((n=>!n.id.includes("".concat(t,"-").concat(e)))))),h((n=>{const r=s({},n),o="literature"===t?"literature":t+"s";return r[o]&&(r[o]=r[o].filter((t=>t.id!==e))),Y(r),r})),U("".concat(t.charAt(0).toUpperCase()+t.slice(1)," deleted successfully"),"success")}catch(n){console.error("Error deleting node:",n),U("Failed to delete ".concat(t),"error")}},Q=e=>{let t=[];switch(e){case"topics":t=a.filter((e=>"topic"===e.type));break;case"literature":t=a.filter((e=>"literature"===e.type));break;case"cases":t=a.filter((e=>"case"===e.type));break;case"tasks":t=a.filter((e=>"task"===e.type))}k(e),!g&&t.length>0&&setTimeout((()=>{n({nodes:t.map((e=>({id:e.id}))),duration:800,padding:.2,minZoom:.5,maxZoom:1.5})}),300),U("Showing ".concat(t.length," ").concat(e),"info",2e3)},J=function(e){const t=[],n=[],r={};arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&a.length>0&&a.forEach((e=>{r[e.id]=e.position})),e.topics.forEach((e=>{const n="topic-".concat(e.id),o=r[n];t.push({id:n,type:"topic",position:o||e.position||{x:0,y:0},data:{label:e.title,category:e.category,color:e.color,flashcard_count:e.flashcard_count,completed_flashcards:e.completed_flashcards,originalData:e,onDelete:g?()=>$(e.id,"topic"):void 0}})})),e.literature&&e.literature.forEach((e=>{const o="literature-".concat(e.id),i=r[o];t.push({id:o,type:"literature",position:i||e.position||{x:0,y:0},data:{label:e.title,authors:e.authors,year:e.year,originalData:e,onDelete:g?()=>$(e.id,"literature"):void 0}}),e.linked_topics&&e.linked_topics.length>0&&(console.log("Creating ".concat(e.linked_topics.length,' edges for literature "').concat(e.title,'"')),e.linked_topics.forEach((t=>{const r="literature-".concat(e.id,"-topic-").concat(t);console.log("Creating edge: ".concat(r)),n.push({id:r,source:"topic-".concat(t),target:"literature-".concat(e.id),type:"smoothstep",style:{stroke:"#8B5CF6",strokeWidth:2,strokeDasharray:"4,4"}})})))})),e.cases.forEach((e=>{const o="case-".concat(e.id),i=r[o];t.push({id:o,type:"case",position:i||e.position||{x:0,y:0},data:{label:e.case_id,diagnosis:e.primary_diagnosis,age:e.age,originalData:e,onDelete:g?()=>$(e.id,"case"):void 0}}),e.linked_topics&&e.linked_topics.length>0&&(console.log("Creating ".concat(e.linked_topics.length,' edges for case "').concat(e.case_id,'"')),e.linked_topics.forEach((t=>{const r="topic-".concat(t,"-case-").concat(e.id);console.log("Creating edge: ".concat(r)),n.push({id:r,source:"topic-".concat(t),target:"case-".concat(e.id),type:"smoothstep",style:{stroke:"#3B82F6",strokeWidth:3}})})))})),e.tasks.forEach((e=>{const o="task-".concat(e.id),i=r[o];t.push({id:o,type:"task",position:i||e.position||{x:0,y:0},data:{label:e.title,priority:e.priority,status:e.status,due_date:e.due_date,originalData:e,onDelete:g?()=>$(e.id,"task"):void 0}}),e.linked_case_id?n.push({id:"case-".concat(e.linked_case_id,"-task-").concat(e.id),source:"case-".concat(e.linked_case_id),target:"task-".concat(e.id),type:"smoothstep",style:{stroke:"#F59E0B",strokeWidth:2}}):e.linked_topic_id&&n.push({id:"topic-".concat(e.linked_topic_id,"-task-").concat(e.id),source:"topic-".concat(e.linked_topic_id),target:"task-".concat(e.id),type:"smoothstep",style:{stroke:"#F59E0B",strokeWidth:2}})})),console.log("convertDataToReactFlow completed: ".concat(t.length," nodes, ").concat(n.length," edges")),l(t),d(n)},ee=(0,t.useCallback)((e=>{console.log("Creating new connection:",e);const t=s(s({},e),{},{type:"smoothstep",style:{stroke:"#6B7280",strokeWidth:2}});d((e=>$a(t,e)));const n=e.source.split("-")[1],r=e.target.split("-")[1],o=e.source.split("-")[0],i=e.target.split("-")[0];console.log("Connection details:",{sourceType:o,sourceId:n,targetType:i,targetId:r}),h((e=>{const t=s({},e);let a=!1;if("topic"===o&&"literature"===i?t.literature=t.literature.map((e=>{if(e.id===r){const t=e.linked_topics||[];if(!t.includes(n))return a=!0,s(s({},e),{},{linked_topics:[...t,n]})}return e})):"topic"===o&&"case"===i?t.cases=t.cases.map((e=>{if(e.id===r){const t=e.linked_topics||[];if(!t.includes(n))return a=!0,s(s({},e),{},{linked_topics:[...t,n]})}return e})):"case"===o&&"task"===i?t.tasks=t.tasks.map((e=>e.id===r&&e.linked_case_id!==n?(a=!0,s(s({},e),{},{linked_case_id:n})):e)):"topic"===o&&"task"===i?t.tasks=t.tasks.map((e=>e.id===r&&e.linked_topic_id!==n?(a=!0,s(s({},e),{},{linked_topic_id:n})):e)):"literature"===o&&"topic"===i?t.literature=t.literature.map((e=>{if(e.id===n){const t=e.linked_topics||[];if(!t.includes(r))return a=!0,s(s({},e),{},{linked_topics:[...t,r]})}return e})):"case"===o&&"topic"===i?t.cases=t.cases.map((e=>{if(e.id===n){const t=e.linked_topics||[];if(!t.includes(r))return a=!0,s(s({},e),{},{linked_topics:[...t,r]})}return e})):"task"===o&&"case"===i?t.tasks=t.tasks.map((e=>e.id===n&&e.linked_case_id!==r?(a=!0,s(s({},e),{},{linked_case_id:r})):e)):"task"===o&&"topic"===i&&(t.tasks=t.tasks.map((e=>e.id===n&&e.linked_topic_id!==r?(a=!0,s(s({},e),{},{linked_topic_id:r})):e))),a){var l,c,u;console.log("Successfully updated mindMapData with new connection"),console.log("Updated data structure:",{literature:null===(l=t.literature)||void 0===l?void 0:l.map((e=>({id:e.id,title:e.title,linked_topics:e.linked_topics}))),cases:null===(c=t.cases)||void 0===c?void 0:c.map((e=>({id:e.id,case_id:e.case_id,linked_topics:e.linked_topics}))),tasks:null===(u=t.tasks)||void 0===u?void 0:u.map((e=>({id:e.id,title:e.title,linked_case_id:e.linked_case_id,linked_topic_id:e.linked_topic_id})))}),Y(t);try{const e={version:"1.1",timestamp:(new Date).toISOString(),data:t};localStorage.setItem("pgy3_mindmap_data",JSON.stringify(e)),console.log("Connection data immediately saved to localStorage")}catch(d){console.error("Error immediately saving connection:",d)}U("Connection created and saved","success",2e3)}else console.log("Connection already exists or unsupported connection type");return t}))}),[d,h,Y,U]),te=(e,t)=>{y(t),console.log("Node clicked:",t)},ne=(0,t.useCallback)((async(e,t)=>{try{console.log("Loading subpage data for:",e,t);const n="literature"===e?"literature":"".concat(e,"s");console.log("API endpoint:","".concat(Ad,"/").concat(n,"/").concat(t));const r=new AbortController,o=setTimeout((()=>r.abort()),1e4),i=await zt.get("".concat(Ad,"/").concat(n,"/").concat(t),{signal:r.signal});clearTimeout(o),console.log("Successfully loaded subpage data:",i.data),requestAnimationFrame((()=>{P(i.data)}))}catch(n){console.error("Full error details:",n),"AbortError"===n.name?(console.warn("Request timed out for:",e,t),U("Loading timed out. Please try again.","error")):(console.error("Error loading subpage data:",n),U("Error loading data. Please try again.","error")),P({})}}),[U]),re=(0,t.useCallback)(((e,t)=>{if(console.log("=== DEBUGGING SUBPAGE OPENING ==="),console.log("Double-clicking node:",t),console.log("Node ID:",t.id),console.log("Current openSubpage state:",_),_)return void console.log("Subpage already open, ignoring click");const n=t.id.split("-")[0],r=t.id.substring(n.length+1);if(console.log("Extracted nodeType:",n,"nodeId:",r),!n||!r)return console.error("Invalid node data:",{nodeType:n,nodeId:r}),void U("Invalid node data","error");console.log("Setting openSubpage state..."),C({type:n,id:r}),P(null),console.log("Triggering async data load..."),requestAnimationFrame((()=>{ne(n,r)}))}),[_,U,ne]),oe=(0,t.useCallback)((()=>{C(null),P(null)}),[]),ie=(0,t.useCallback)(((e,t)=>{if(g&&window.confirm("Are you sure you want to delete this connection?")){console.log("Deleting edge:",t),d((e=>e.filter((e=>e.id!==t.id))));const e=t.source.split("-")[1],n=t.target.split("-")[1],r=t.source.split("-")[0],o=t.target.split("-")[0];h((t=>{const i=s({},t);let a=!1;if("topic"===r&&"literature"===o||"literature"===r&&"topic"===o){const t="literature"===r?e:n,o="topic"===r?e:n;i.literature=i.literature.map((e=>{if(e.id===t){const t=e.linked_topics||[],n=t.filter((e=>e!==o));if(n.length!==t.length)return a=!0,s(s({},e),{},{linked_topics:n})}return e}))}else if("topic"===r&&"case"===o||"case"===r&&"topic"===o){const t="case"===r?e:n,o="topic"===r?e:n;i.cases=i.cases.map((e=>{if(e.id===t){const t=e.linked_topics||[],n=t.filter((e=>e!==o));if(n.length!==t.length)return a=!0,s(s({},e),{},{linked_topics:n})}return e}))}else if("case"===r&&"task"===o||"task"===r&&"case"===o){const t="task"===r?e:n,o="case"===r?e:n;i.tasks=i.tasks.map((e=>e.id===t&&e.linked_case_id===o?(a=!0,s(s({},e),{},{linked_case_id:null})):e))}else if("topic"===r&&"task"===o||"task"===r&&"topic"===o){const t="task"===r?e:n,o="topic"===r?e:n;i.tasks=i.tasks.map((e=>e.id===t&&e.linked_topic_id===o?(a=!0,s(s({},e),{},{linked_topic_id:null})):e))}return a&&(console.log("Successfully removed connection from mindMapData"),Y(i),U("Connection deleted and saved","success",2e3)),i})),U("Connection deleted","success",2e3)}}),[g,d,h,Y,U]),ae=()=>{if(a&&0!==a.length)try{console.log("Applying category-based column layout to ".concat(a.length," nodes"));const e=i(),{x:t,y:r,zoom:o}=e,c=window.innerWidth-320,u=window.innerHeight,d=-t/o+c/2/o,f=-r/o+u/2/o,p={topics:a.filter((e=>"topic"===e.type)),literature:a.filter((e=>"literature"===e.type)),cases:a.filter((e=>"case"===e.type)),tasks:a.filter((e=>"task"===e.type))},g=Object.keys(p).filter((e=>p[e].length>0)),m=300,v=d-g.length*m/2;let y=[...a];g.forEach(((e,t)=>{const n=p[e],r=v+t*m,o=Math.max(0,150*(n.length-1)),i=f-o/2;n.forEach(((e,t)=>{const n=y.findIndex((t=>t.id===e.id));-1!==n&&(y[n]=s(s({},y[n]),{},{position:{x:r,y:i+150*t}}))}))})),l(y),setTimeout((()=>{console.log("Auto-saving realigned positions..."),h((e=>{const t=s({},e);return y.forEach((e=>{const[n,r]=e.id.split("-"),o="literature"===n?"literature":n+"s";if(t[o]){const n=t[o].find((e=>e.id===r));n&&(n.position=e.position)}})),Y(t),t}))}),200),setTimeout((()=>{try{n({duration:1e3,padding:.25,includeHiddenNodes:!1,minZoom:.5,maxZoom:1.5}),console.log("Viewport adjusted to center realigned nodes")}catch(e){console.error("Error adjusting viewport:",e)}}),500),console.log("Category-based column layout applied successfully"),U("Nodes arranged by category","success",2e3)}catch(e){console.error("Error applying layout:",e),U("Layout failed","error",3e3)}else console.log("No nodes to realign")};(0,t.useMemo)((()=>({onNodesChange:X,onEdgesChange:f,onConnect:ee,onNodeClick:te,onNodeDoubleClick:re,onInit:G})),[X,f,ee,te,re,G]),(0,t.useMemo)((()=>({nodes:a,edges:u,nodeTypes:Vd,fitView:!0,nodesDraggable:!0,nodesConnectable:g,edgesReconnectable:g,edgesFocusable:g,elementsSelectable:!0,className:"bg-gradient-to-br from-slate-50 to-slate-100",defaultEdgeOptions:{type:"smoothstep",style:{strokeWidth:2,stroke:"#6B7280"},markerEnd:{type:"arrowclosed",width:15,height:15,color:"#6B7280"}}})),[a,u,Vd,g]);return(0,At.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,At.jsxs)("div",{className:"w-80 bg-gradient-to-b from-slate-800 to-slate-900 text-white p-6 shadow-2xl",children:[(0,At.jsxs)("div",{className:"mb-8",children:[(0,At.jsx)("div",{className:"text-3xl font-thin tracking-wide text-white mb-1",children:"PGY-3"}),(0,At.jsx)("div",{className:"text-3xl font-bold tracking-wide text-white",children:"HQ"}),(0,At.jsx)("div",{className:"text-sm text-slate-300 mt-2",children:"Psychiatry Resident Dashboard"})]}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{onClick:()=>_?oe():Q("topics"),className:"bg-slate-700 bg-opacity-50 rounded-full px-4 py-2 text-sm hover:bg-slate-600 transition-colors cursor-pointer flex items-center gap-2 ".concat("topics"===w?"ring-2 ring-teal-400 bg-slate-600":""),children:[(0,At.jsx)(md,{size:16}),"Topics (",p.topics.length,")"]}),(0,At.jsxs)("div",{onClick:()=>_?oe():Q("literature"),className:"bg-slate-700 bg-opacity-50 rounded-full px-4 py-2 text-sm hover:bg-slate-600 transition-colors cursor-pointer flex items-center gap-2 ".concat("literature"===w?"ring-2 ring-teal-400 bg-slate-600":""),children:[(0,At.jsx)(kd,{size:16}),"Literature (",(null===(e=p.literature)||void 0===e?void 0:e.length)||0,")"]}),(0,At.jsxs)("div",{onClick:()=>_?oe():Q("cases"),className:"bg-slate-700 bg-opacity-50 rounded-full px-4 py-2 text-sm hover:bg-slate-600 transition-colors cursor-pointer flex items-center gap-2 ".concat("cases"===w?"ring-2 ring-teal-400 bg-slate-600":""),children:[(0,At.jsx)(bd,{size:16}),"Cases (",p.cases.length,")"]}),(0,At.jsxs)("div",{onClick:()=>_?oe():Q("tasks"),className:"bg-slate-700 bg-opacity-50 rounded-full px-4 py-2 text-sm hover:bg-slate-600 transition-colors cursor-pointer flex items-center gap-2 ".concat("tasks"===w?"ring-2 ring-teal-400 bg-slate-600":""),children:[(0,At.jsx)(wd,{size:16}),"Tasks (",p.tasks.length,")"]}),w&&!_&&(0,At.jsxs)("button",{onClick:()=>{J(p),k(null),setTimeout((()=>{n({duration:800,padding:.1})}),100)},className:"w-full bg-teal-600 bg-opacity-50 rounded-full px-4 py-2 text-sm hover:bg-teal-700 transition-colors cursor-pointer flex items-center gap-2 justify-center",children:[(0,At.jsx)(Sd,{size:16}),"Reset View"]})]}),(0,At.jsxs)("div",{className:"mt-8 space-y-3",children:[(0,At.jsx)("div",{className:"text-sm font-semibold text-slate-300 mb-3",children:"Mind Map Controls"}),(0,At.jsx)(Rd,{onClick:ae,icon:Nd,className:"w-full bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md text-sm",children:"Realign Nodes"}),(0,At.jsx)(Rd,{onClick:async()=>{try{if(T(!0),B({show:!0,progress:0,message:"Initializing export..."}),!p.cases||0===p.cases.length)return void U("No patient cases found to export.","error");console.log("Exporting",p.cases.length,"patient cases..."),U("Starting export...","info",2e3);const e=Id(p.cases,((e,t)=>{B({show:!0,progress:e,message:t})}));if(!e)return void U("Error generating CSV content.","error");const t=(new Date).toISOString().split("T")[0],n=(new Date).toTimeString().split(" ")[0].replace(/:/g,"-"),r="patient_cases_".concat(t,"_").concat(n,".csv");B({show:!0,progress:95,message:"Downloading file..."}),Fd(e,r),console.log("Successfully exported ".concat(p.cases.length," patient cases to ").concat(r));const o=Bd(p.cases),i="Successfully exported ".concat(p.cases.length," patient cases! \n        Primary diagnoses: ").concat(Object.keys(o.diagnoses).length);setTimeout((()=>{U(i,"success",5e3),B({show:!0,progress:100,message:"Export complete!"}),setTimeout((()=>{B({show:!1,progress:0,message:""})}),2e3)}),500)}catch(e){console.error("Error exporting patient cases:",e),U("Error exporting patient cases. Please try again.","error"),B({show:!1,progress:0,message:""})}finally{setTimeout((()=>{T(!1)}),2e3)}},loading:A,disabled:0===p.cases.length,icon:A?hd:Pd,className:"w-full text-white px-4 py-2 rounded-md text-sm ".concat(0===p.cases.length?"bg-gray-500 cursor-not-allowed":"bg-green-600 hover:bg-green-700"),children:A?"Exporting...":"Export Patient Cases (".concat(p.cases.length,")")}),(0,At.jsx)(Rd,{onClick:()=>{const e=!g;m(e),J(p,!0),U(e?"Edit mode enabled":"Edit mode disabled","info",2e3)},icon:g?Cd:Ed,className:"w-full px-4 py-2 rounded-md text-sm ".concat(g?"bg-teal-600 hover:bg-teal-700 text-white":"bg-slate-600 hover:bg-slate-500 text-white"),children:g?"Exit Edit Mode":"Edit Mind Map"}),g&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("button",{onClick:()=>E(!0),className:"w-full flex items-center gap-2 px-4 py-2 rounded-md text-sm bg-blue-600 hover:bg-blue-700 transition-colors",children:[(0,At.jsx)(jd,{size:16}),"Add New Node"]}),(0,At.jsx)(Rd,{onClick:q,icon:_d,className:"w-full bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md text-sm",children:"Clear Entire Map"}),(0,At.jsxs)("div",{className:"text-xs text-slate-400 mt-4",children:[(0,At.jsx)("div",{className:"mb-2",children:"Hierarchy:"}),(0,At.jsxs)("div",{className:"space-y-1",children:[(0,At.jsx)("div",{children:"\u2022 Topics \u2192 Literature"}),(0,At.jsx)("div",{children:"\u2022 Topics \u2192 Cases"}),(0,At.jsx)("div",{children:"\u2022 Cases \u2192 Tasks"})]}),(0,At.jsx)("div",{className:"mt-3 text-xs text-slate-300",children:"\ud83d\udca1 Node positions auto-save when moved"})]})]}),(0,At.jsxs)("div",{className:"mt-4 p-3 bg-slate-700 bg-opacity-30 rounded-lg border border-slate-600",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("div",{className:"flex items-center gap-2 text-xs text-slate-300",children:L?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(hd,{size:12,className:"animate-spin text-purple-400"}),(0,At.jsx)("span",{className:"text-purple-400",children:"Saving..."})]}):R?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(dd,{size:12,className:"text-green-400"}),(0,At.jsx)("span",{className:"text-green-400",children:"Auto-saved"})]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(Od,{size:12,className:"text-slate-400"}),(0,At.jsx)("span",{children:"Ready"})]})}),R&&(0,At.jsx)("div",{className:"text-xs text-slate-400",children:R.toLocaleTimeString()})]}),(0,At.jsx)("div",{className:"mt-2 text-xs text-slate-500",children:(0,At.jsxs)("div",{className:"flex items-center gap-1",children:[(0,At.jsx)(Md,{size:10}),(0,At.jsx)("span",{children:"Local storage active"})]})})]})]}),0===p.topics.length&&(0,At.jsxs)("div",{className:"mt-8 p-4 bg-slate-700 bg-opacity-50 rounded-lg",children:[(0,At.jsx)("p",{className:"text-sm text-slate-300 mb-3",children:"No data found. Initialize with sample data to get started."}),(0,At.jsx)("button",{onClick:async()=>{try{await zt.post("".concat(Ad,"/init-sample-data")),Z()}catch(e){console.error("Error initializing sample data:",e)}},className:"bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded-md text-sm transition-colors",children:"Initialize Sample Data"})]}),v&&!_&&(0,At.jsxs)("div",{className:"mt-8 p-4 bg-slate-700 bg-opacity-50 rounded-lg border border-teal-500",children:[(0,At.jsx)("h3",{className:"font-semibold mb-2 text-teal-300",children:"Selected Node"}),(0,At.jsxs)("p",{className:"text-sm text-slate-300 capitalize",children:[(0,At.jsx)("span",{className:"font-medium",children:v.type}),": ",v.data.label]}),(0,At.jsx)("button",{onClick:()=>{const e=v.id.split("-")[0],t=v.id.substring(e.length+1);console.log("Opening subpage from sidebar for:",e,t),C({type:e,id:t}),ne(e,t)},className:"mt-3 text-xs text-teal-400 hover:text-teal-300 underline",children:"View Details \u2192"})]})]}),(0,At.jsx)("div",{className:"flex-1 relative",children:(0,At.jsxs)(Ou,{nodes:a,edges:u,onNodesChange:X,onEdgesChange:f,onConnect:ee,onNodeClick:te,onNodeDoubleClick:re,onEdgeDoubleClick:ie,onInit:G,nodeTypes:Vd,fitView:!0,nodesDraggable:!0,nodesConnectable:g,edgesReconnectable:g,edgesFocusable:g,elementsSelectable:!0,className:"bg-gradient-to-br from-slate-50 to-slate-100",defaultEdgeOptions:{type:"smoothstep",style:{strokeWidth:2,stroke:"#6B7280"},markerEnd:{type:"arrowclosed",width:15,height:15,color:"#6B7280"}},children:[(0,At.jsx)(Lu,{color:"#aaa",gap:16}),(0,At.jsx)(qu,{}),(0,At.jsx)(td,{nodeColor:e=>{switch(e.type){case"topic":return e.data.color||"#3B82F6";case"case":return"#6B7280";case"task":return"#F59E0B";case"literature":return"#8B5CF6";default:return"#9CA3AF"}},maskColor:"rgba(0, 0, 0, 0.2)",className:"bg-white rounded-lg shadow-lg border"}),(0,At.jsxs)(bs,{position:"top-right",className:"bg-white rounded-lg shadow-lg p-4 m-4",children:[(0,At.jsx)("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Instructions"}),(0,At.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,At.jsx)("div",{children:"\u2022 Click to select nodes"}),(0,At.jsx)("div",{children:"\u2022 Double-click nodes to view details"}),(0,At.jsx)("div",{children:"\u2022 Hover and drag to reposition"}),(0,At.jsxs)("div",{children:["\u2022 ",g?"Connect nodes by dragging handles":"Edit mode: create connections"]}),g&&(0,At.jsx)("div",{children:"\u2022 Double-click connections to delete"}),(0,At.jsx)("div",{children:'\u2022 Use "Realign Nodes" for auto layout'}),(0,At.jsx)("div",{children:"\u2022 Zoom with mouse wheel"})]})]})]})}),_&&(0,At.jsx)(Hd,{type:_.type,data:N,onClose:oe,setMindMapData:h,loadMindMapData:Z,onAutoSave:Y}),(0,At.jsx)(Ud,{isOpen:S,onClose:()=>E(!1),onSelect:async e=>{try{const t=()=>{const e=a.map((e=>e.position)),t=i(),{x:n,y:r,zoom:o}=t,l=-n/o+(window.innerWidth-320)/2/o,s=-r/o+window.innerHeight/2/o;for(let i=0;i<20;i++){const t=2*i*Math.PI/8,n=150*(1+Math.floor(i/8)),r={x:l+Math.cos(t)*n,y:s+Math.sin(t)*n};if(!e.some((e=>Math.abs(e.x-r.x)<250&&Math.abs(e.y-r.y)<150)))return r}return{x:l+200*(Math.random()-.5),y:s+200*(Math.random()-.5)}},n=t();let r={};switch(e){case"topic":r={title:"New Topic",description:"New topic description",category:"New Category",color:"#3B82F6"};break;case"case":r={case_id:"CASE-".concat(Date.now()),encounter_date:(new Date).toISOString(),primary_diagnosis:"New Diagnosis",chief_complaint:"New complaint",linked_topics:[]};break;case"task":r={title:"New Task",description:"New task description",priority:"medium",status:"pending"};break;case"literature":r={title:"New Literature",authors:"New Author",publication:"New Publication",year:(new Date).getFullYear(),linked_topics:[]}}r.position=n;const o=(await zt.post("".concat(Ad,"/").concat("literature"===e?"literature":e+"s"),r)).data,c={id:"".concat(e,"-").concat(o.id),type:e,position:n,data:s(s(s(s(s({label:"case"===e?o.case_id:o.title},"topic"===e&&{category:o.category,color:o.color,flashcard_count:o.flashcard_count||0,completed_flashcards:o.completed_flashcards||0}),"case"===e&&{diagnosis:o.primary_diagnosis,age:o.age}),"task"===e&&{priority:o.priority,status:o.status,due_date:o.due_date}),"literature"===e&&{authors:o.authors,year:o.year}),{},{originalData:o,onDelete:g?()=>$(o.id,e):void 0})};l((e=>[...e,c])),h((t=>{const n=s(s({},t),{},{["literature"===e?"literature":e+"s"]:[...t["literature"===e?"literature":e+"s"],o]});return Y(n),n}))}catch(t){console.error("Error adding new node:",t)}}}),V.map((e=>(0,At.jsx)(Td,{message:e.message,type:e.type,onClose:()=>W(e.id),duration:e.duration},e.id))),F.show&&(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,At.jsx)("div",{className:"bg-white rounded-xl shadow-2xl p-8 max-w-md w-full mx-4",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"mb-4",children:(0,At.jsx)(hd,{size:40,className:"mx-auto text-blue-600 animate-spin"})}),(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Exporting Patient Cases"}),(0,At.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:F.message}),(0,At.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-4",children:(0,At.jsx)("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-500 ease-out",style:{width:"".concat(F.progress,"%")}})}),(0,At.jsxs)("div",{className:"text-sm font-medium text-blue-600",children:[Math.round(F.progress),"% Complete"]})]})})}),L&&(0,At.jsx)("div",{className:"fixed bottom-4 left-4 z-40",children:(0,At.jsxs)("div",{className:"bg-purple-600 text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2 animate-pulse",children:[(0,At.jsx)(hd,{size:16,className:"animate-spin"}),(0,At.jsx)("span",{className:"text-sm font-medium",children:"Saving..."})]})})]})};const Yd=function(){return(0,At.jsx)(Nu,{children:(0,At.jsx)(Wd,{})})};r.createRoot(document.getElementById("root")).render((0,At.jsx)(t.StrictMode,{children:(0,At.jsx)(Yd,{})}))})()})();
//# sourceMappingURL=main.3f02044c.js.map