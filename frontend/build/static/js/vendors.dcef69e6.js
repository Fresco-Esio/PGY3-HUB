/*! For license information please see vendors.dcef69e6.js.LICENSE.txt */
(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[96],{14:e=>{e.exports=function(){return!1}},61:e=>{e.exports=function(e,t){return e<t}},111:(e,t,n)=>{var o=n(1069),r=0;e.exports=function(e){var t=++r;return o(e)+t}},127:(e,t,n)=>{var o=n(2125);e.exports=function(e,t){return o(e,t,"pre")}},129:(e,t,n)=>{"use strict";n.d(t,{KE:()=>rt,YY:()=>pe,CU:()=>ae,bP:()=>ct,Yv:()=>dt,gk:()=>J,AB:()=>ht,iI:()=>F,zU:()=>W,BQ:()=>Ue,OX:()=>it,Zc:()=>ut,KV:()=>K,jT:()=>st,JJ:()=>at,tG:()=>lt});var o=n(7184),r=n(1140),i=n(2195),s=n(4282),a=n(8115);const l=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function c(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const d=(e,t,n)=>{let r=c(e,n);if(!r)return!1;let i=f(r);if(!i){let n=r.blockRange(),o=n&&(0,a.jP)(n);return null!=o&&(t&&t(e.tr.lift(n,o).scrollIntoView()),!0)}let l=i.nodeBefore;if(M(e,i,t,-1))return!0;if(0==r.parent.content.size&&(h(l,"end")||o.nh.isSelectable(l)))for(let c=r.depth;;c--){let n=(0,a.$L)(e.doc,r.before(c),r.after(c),s.Ji.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(h(l,"end")?o.LN.findFrom(r.doc.resolve(r.mapping.map(i.pos,-1)),-1):o.nh.create(r.doc,i.pos-l.nodeSize)),t(r.scrollIntoView())}return!0}if(1==c||r.node(c-1).childCount>1)break}return!(!l.isAtom||i.depth!=r.depth-1)&&(t&&t(e.tr.delete(i.pos-l.nodeSize,i.pos).scrollIntoView()),!0)};function u(e,t,n){let r=t.nodeBefore,i=t.pos-1;for(;!r.isTextblock;i--){if(r.type.spec.isolating)return!1;let e=r.lastChild;if(!e)return!1;r=e}let l=t.nodeAfter,c=t.pos+1;for(;!l.isTextblock;c++){if(l.type.spec.isolating)return!1;let e=l.firstChild;if(!e)return!1;l=e}let d=(0,a.$L)(e.doc,i,c,s.Ji.empty);if(!d||d.from!=i||d instanceof a.Ln&&d.slice.size>=c-i)return!1;if(n){let t=e.tr.step(d);t.setSelection(o.U3.create(t.doc,i)),n(t.scrollIntoView())}return!0}function h(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(let o=e;o;o="start"==t?o.firstChild:o.lastChild){if(o.isTextblock)return!0;if(n&&1!=o.childCount)return!1}return!1}const p=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;s=f(r)}let a=s&&s.nodeBefore;return!(!a||!o.nh.isSelectable(a))&&(t&&t(e.tr.setSelection(o.nh.create(e.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function f(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function m(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const g=(e,t,n)=>{let r=m(e,n);if(!r)return!1;let i=v(r);if(!i)return!1;let l=i.nodeAfter;if(M(e,i,t,1))return!0;if(0==r.parent.content.size&&(h(l,"start")||o.nh.isSelectable(l))){let n=(0,a.$L)(e.doc,r.before(),r.after(),s.Ji.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(h(l,"start")?o.LN.findFrom(r.doc.resolve(r.mapping.map(i.pos)),1):o.nh.create(r.doc,r.mapping.map(i.pos))),t(r.scrollIntoView())}return!0}}return!(!l.isAtom||i.depth!=r.depth-1)&&(t&&t(e.tr.delete(i.pos,i.pos+l.nodeSize).scrollIntoView()),!0)},y=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;s=v(r)}let a=s&&s.nodeAfter;return!(!a||!o.nh.isSelectable(a))&&(t&&t(e.tr.setSelection(o.nh.create(e.doc,s.pos)).scrollIntoView()),!0)};function v(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const x=(e,t)=>{let{$head:n,$anchor:o}=e.selection;return!(!n.parent.type.spec.code||!n.sameParent(o))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)};function b(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const w=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),a=b(i.contentMatchAt(s));if(!a||!i.canReplaceWith(s,s,a))return!1;if(t){let r=n.after(),i=e.tr.replaceWith(r,r,a.createAndFill());i.setSelection(o.LN.near(i.doc.resolve(r),1)),t(i.scrollIntoView())}return!0},S=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof o.i5||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=b(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let n=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=e.tr.insert(n,s.createAndFill());a.setSelection(o.U3.create(a.doc,n+1)),t(a.scrollIntoView())}return!0},k=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if((0,a.zy)(e.doc,o))return t&&t(e.tr.split(o).scrollIntoView()),!0}let o=n.blockRange(),r=o&&(0,a.jP)(o);return null!=r&&(t&&t(e.tr.lift(o,r).scrollIntoView()),!0)};const E=(e,t)=>{let{$from:n,$to:r}=e.selection;if(e.selection instanceof o.nh&&e.selection.node.isBlock)return!(!n.parentOffset||!(0,a.zy)(e.doc,n.pos))&&(t&&t(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let i,s,l=[],c=!1,d=!1;for(let o=n.depth;;o--){if(n.node(o).isBlock){c=n.end(o)==n.pos+(n.depth-o),d=n.start(o)==n.pos-(n.depth-o),s=b(n.node(o-1).contentMatchAt(n.indexAfter(o-1)));let e=C&&C(r.parent,c,n);l.unshift(e||(c&&s?{type:s}:null)),i=o;break}if(1==o)return!1;l.unshift(null)}let u=e.tr;(e.selection instanceof o.U3||e.selection instanceof o.i5)&&u.deleteSelection();let h=u.mapping.map(n.pos),p=(0,a.zy)(u.doc,h,l.length,l);if(p||(l[0]=s?{type:s}:null,p=(0,a.zy)(u.doc,h,l.length,l)),!p)return!1;if(u.split(h,l.length,l),!c&&d&&n.node(i).type!=s){let e=u.mapping.map(n.before(i)),t=u.doc.resolve(e);s&&n.node(i-1).canReplaceWith(t.index(),t.index()+1,s)&&u.setNodeMarkup(u.mapping.map(n.before(i)),s)}return t&&t(u.scrollIntoView()),!0};var C;function M(e,t,n,r){let i,l,c=t.nodeBefore,d=t.nodeAfter,u=c.type.spec.isolating||d.type.spec.isolating;if(!u&&function(e,t,n){let o=t.nodeBefore,r=t.nodeAfter,i=t.index();return!!(o&&r&&o.type.compatibleContent(r.type))&&(!o.content.size&&t.parent.canReplace(i-1,i)?(n&&n(e.tr.delete(t.pos-o.nodeSize,t.pos).scrollIntoView()),!0):!(!t.parent.canReplace(i,i+1)||!r.isTextblock&&!(0,a.n9)(e.doc,t.pos))&&(n&&n(e.tr.join(t.pos).scrollIntoView()),!0))}(e,t,n))return!0;let p=!u&&t.parent.canReplace(t.index(),t.index()+1);if(p&&(i=(l=c.contentMatchAt(c.childCount)).findWrapping(d.type))&&l.matchType(i[0]||d.type).validEnd){if(n){let o=t.pos+d.nodeSize,r=s.FK.empty;for(let e=i.length-1;e>=0;e--)r=s.FK.from(i[e].create(null,r));r=s.FK.from(c.copy(r));let l=e.tr.step(new a.Wg(t.pos-1,o,t.pos,o,new s.Ji(r,1,0),i.length,!0)),u=l.doc.resolve(o+2*i.length);u.nodeAfter&&u.nodeAfter.type==c.type&&(0,a.n9)(l.doc,u.pos)&&l.join(u.pos),n(l.scrollIntoView())}return!0}let f=d.type.spec.isolating||r>0&&u?null:o.LN.findFrom(t,1),m=f&&f.$from.blockRange(f.$to),g=m&&(0,a.jP)(m);if(null!=g&&g>=t.depth)return n&&n(e.tr.lift(m,g).scrollIntoView()),!0;if(p&&h(d,"start",!0)&&h(c,"end")){let o=c,r=[];for(;r.push(o),!o.isTextblock;)o=o.lastChild;let i=d,l=1;for(;!i.isTextblock;i=i.firstChild)l++;if(o.canReplace(o.childCount,o.childCount,i.content)){if(n){let o=s.FK.empty;for(let e=r.length-1;e>=0;e--)o=s.FK.from(r[e].copy(o));n(e.tr.step(new a.Wg(t.pos-r.length,t.pos+d.nodeSize,t.pos+l,t.pos+d.nodeSize-l,new s.Ji(o,r.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function O(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return!!i.node(s).isTextblock&&(n&&n(t.tr.setSelection(o.U3.create(t.doc,e<0?i.start(s):i.end(s)))),!0)}}const T=O(-1),A=O(1);function N(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,o){let r=!1;for(let i=0;i<n.selection.ranges.length&&!r;i++){let{$from:{pos:o},$to:{pos:s}}=n.selection.ranges[i];n.doc.nodesBetween(o,s,(o,i)=>{if(r)return!1;if(o.isTextblock&&!o.hasMarkup(e,t))if(o.type==e)r=!0;else{let t=n.doc.resolve(i),o=t.index();r=t.parent.canReplaceWith(o,o+1,e)}})}if(!r)return!1;if(o){let r=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:i},$to:{pos:s}}=n.selection.ranges[o];r.setBlockType(i,s,e,t)}o(r.scrollIntoView())}return!0}}function P(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,o){for(let r=0;r<t.length;r++)if(t[r](e,n,o))return!0;return!1}}let D=P(l,d,p),R=P(l,g,y);const I={Enter:P(x,S,k,E),"Mod-Enter":w,Backspace:D,"Mod-Backspace":D,"Shift-Backspace":D,Delete:R,"Mod-Delete":R,"Mod-a":(e,t)=>(t&&t(e.tr.setSelection(new o.i5(e.doc))),!0)},L={"Ctrl-h":I.Backspace,"Alt-Backspace":I["Mod-Backspace"],"Ctrl-d":I.Delete,"Ctrl-Alt-Backspace":I["Mod-Delete"],"Alt-Delete":I["Mod-Delete"],"Alt-d":I["Mod-Delete"],"Ctrl-a":T,"Ctrl-e":A};for(let pt in I)L[pt]=I[pt];"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&os.platform();function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,o){let{$from:r,$to:i}=n.selection,l=r.blockRange(i);if(!l)return!1;let c=o?n.tr:null;return!!function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=!1,i=t,l=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&0==t.startIndex){if(0==t.$from.index(t.depth-1))return!1;let e=l.resolve(t.start-2);i=new s.u$(e,e,t.depth),t.endIndex<t.parent.childCount&&(t=new s.u$(t.$from,l.resolve(t.$to.end(t.depth)),t.depth)),r=!0}let c=(0,a.oM)(i,n,o,t);if(!c)return!1;e&&function(e,t,n,o,r){let i=s.FK.empty;for(let a=n.length-1;a>=0;a--)i=s.FK.from(n[a].type.create(n[a].attrs,i));e.step(new a.Wg(t.start-(o?2:0),t.end,t.start,t.end,new s.Ji(i,0,0),n.length,!0));let l=0;for(let s=0;s<n.length;s++)n[s].type==r&&(l=s+1);let c=n.length-l,d=t.start+n.length-(o?2:0),u=t.parent;for(let s=t.startIndex,h=t.endIndex,p=!0;s<h;s++,p=!1)!p&&(0,a.zy)(e.doc,d,c)&&(e.split(d,c),d+=2*c),d+=u.child(s).nodeSize}(e,t,c,r,n);return!0}(c,l,e,t)&&(o&&o(c.scrollIntoView()),!0)}}function B(e){return function(t,n){let{$from:o,$to:r}=t.selection,i=o.blockRange(r,t=>t.childCount>0&&t.firstChild.type==e);return!!i&&(!n||(o.node(i.depth-1).type==e?function(e,t,n,o){let r=e.tr,i=o.end,l=o.$to.end(o.depth);i<l&&(r.step(new a.Wg(i-1,l,i,l,new s.Ji(s.FK.from(n.create(null,o.parent.copy())),1,0),1,!0)),o=new s.u$(r.doc.resolve(o.$from.pos),r.doc.resolve(l),o.depth));const c=(0,a.jP)(o);if(null==c)return!1;r.lift(o,c);let d=r.doc.resolve(r.mapping.map(i,-1)-1);(0,a.n9)(r.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&r.join(d.pos);return t(r.scrollIntoView()),!0}(t,n,e,i):function(e,t,n){let o=e.tr,r=n.parent;for(let s=n.end,a=n.endIndex-1,m=n.startIndex;a>m;a--)s-=r.child(a).nodeSize,o.delete(s-1,s+1);let i=o.doc.resolve(n.start),l=i.nodeAfter;if(o.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let c=0==n.startIndex,d=n.endIndex==r.childCount,u=i.node(-1),h=i.index(-1);if(!u.canReplace(h+(c?0:1),h+1,l.content.append(d?s.FK.empty:s.FK.from(r))))return!1;let p=i.pos,f=p+l.nodeSize;return o.step(new a.Wg(p-(c?1:0),f+(d?1:0),p+1,f-1,new s.Ji((c?s.FK.empty:s.FK.from(r.copy(s.FK.empty))).append(d?s.FK.empty:s.FK.from(r.copy(s.FK.empty))),c?0:1,d?0:1),c?0:1)),t(o.scrollIntoView()),!0}(t,n,i)))}}function _(e){const{state:t,transaction:n}=e;let{selection:o}=n,{doc:r}=n,{storedMarks:i}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return i},get selection(){return o},get doc(){return r},get tr(){return o=n.selection,r=n.doc,i=n.storedMarks,n}}}class V{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){var e=this;const{rawCommands:t,editor:n,state:o}=this,{view:r}=n,{tr:i}=o,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(t=>{let[n,o]=t;return[n,function(){const t=o(...arguments)(s);return i.getMeta("preventDispatch")||e.hasCustomState||r.dispatch(i),t}]}))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e){var t=this;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{rawCommands:o,editor:r,state:i}=this,{view:s}=r,a=[],l=!!e,c=e||i.tr,d={...Object.fromEntries(Object.entries(o).map(e=>{let[o,r]=e;return[o,function(){const e=t.buildProps(c,n),o=r(...arguments)(e);return a.push(o),d}]})),run:()=>(l||!n||c.getMeta("preventDispatch")||this.hasCustomState||s.dispatch(c),a.every(e=>!0===e))};return d}createCan(e){const{rawCommands:t,state:n}=this,o=!1,r=e||n.tr,i=this.buildProps(r,o),s=Object.fromEntries(Object.entries(t).map(e=>{let[t,n]=e;return[t,function(){return n(...arguments)({...i,dispatch:void 0})}]}));return{...s,chain:()=>this.createChain(r,o)}}buildProps(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{rawCommands:n,editor:o,state:r}=this,{view:i}=o,s={tr:e,editor:o,view:i,state:_({state:r,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(e=>{let[t,n]=e;return[t,function(){return n(...arguments)(s)}]}))}};return s}}class z{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];const r=this.callbacks[e];return r&&r.forEach(e=>e.apply(this,n)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(e=>e!==t):delete this.callbacks[e]),this}once(e,t){var n=this;const o=function(){n.off(e,o);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];t.apply(n,i)};return this.on(e,o)}removeAllListeners(){this.callbacks={}}}function F(e,t,n){if(void 0===e.config[t]&&e.parent)return F(e.parent,t,n);if("function"===typeof e.config[t]){return e.config[t].bind({...n,parent:e.parent?F(e.parent,t,n):null})}return e.config[t]}function $(e){return{baseExtensions:e.filter(e=>"extension"===e.type),nodeExtensions:e.filter(e=>"node"===e.type),markExtensions:e.filter(e=>"mark"===e.type)}}function H(e){const t=[],{nodeExtensions:n,markExtensions:o}=$(e),r=[...n,...o],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(e=>{const n=F(e,"addGlobalAttributes",{name:e.name,options:e.options,storage:e.storage,extensions:r});if(!n)return;n().forEach(e=>{e.types.forEach(n=>{Object.entries(e.attributes).forEach(e=>{let[o,r]=e;t.push({type:n,name:o,attribute:{...i,...r}})})})})}),r.forEach(e=>{const n={name:e.name,options:e.options,storage:e.storage},o=F(e,"addAttributes",n);if(!o)return;const r=o();Object.entries(r).forEach(n=>{let[o,r]=n;const s={...i,...r};"function"===typeof(null===s||void 0===s?void 0:s.default)&&(s.default=s.default()),(null===s||void 0===s?void 0:s.isRequired)&&void 0===(null===s||void 0===s?void 0:s.default)&&delete s.default,t.push({type:e.name,name:o,attribute:s})})}),t}function U(e,t){if("string"===typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function K(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(e=>!!e).reduce((e,t)=>{const n={...e};return Object.entries(t).forEach(e=>{let[t,o]=e;if(n[t])if("class"===t){const e=o?String(o).split(" "):[],r=n[t]?n[t].split(" "):[],i=e.filter(e=>!r.includes(e));n[t]=[...r,...i].join(" ")}else if("style"===t){const e=o?o.split(";").map(e=>e.trim()).filter(Boolean):[],r=n[t]?n[t].split(";").map(e=>e.trim()).filter(Boolean):[],i=new Map;r.forEach(e=>{const[t,n]=e.split(":").map(e=>e.trim());i.set(t,n)}),e.forEach(e=>{const[t,n]=e.split(":").map(e=>e.trim());i.set(t,n)}),n[t]=Array.from(i.entries()).map(e=>{let[t,n]=e;return`${t}: ${n}`}).join("; ")}else n[t]=o;else n[t]=o}),n},{})}function W(e,t){return t.filter(t=>t.type===e.type.name).filter(e=>e.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:{[t.name]:e.attrs[t.name]}).reduce((e,t)=>K(e,t),{})}function q(e){return"function"===typeof e}function J(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(q(e)){for(var n=arguments.length,o=new Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];return t?e.bind(t)(...o):e(...o)}return e}function X(e,t){return"style"in e?e:{...e,getAttrs:n=>{const o=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===o)return!1;const r=t.reduce((e,t)=>{const o=t.attribute.parseHTML?t.attribute.parseHTML(n):function(e){return"string"!==typeof e?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):"true"===e||"false"!==e&&e}(n.getAttribute(t.name));return null===o||void 0===o?e:{...e,[t.name]:o}},{});return{...o,...r}}}}function Z(e){return Object.fromEntries(Object.entries(e).filter(e=>{let[t,n]=e;return("attrs"!==t||!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===Object.keys(e).length&&e.constructor===Object}(n))&&(null!==n&&void 0!==n)}))}function Y(e,t){var n;const o=H(e),{nodeExtensions:r,markExtensions:i}=$(e),a=null===(n=r.find(e=>F(e,"topNode")))||void 0===n?void 0:n.name,l=Object.fromEntries(r.map(n=>{const r=o.filter(e=>e.type===n.name),i={name:n.name,options:n.options,storage:n.storage,editor:t},s=Z({...e.reduce((e,t)=>{const o=F(t,"extendNodeSchema",i);return{...e,...o?o(n):{}}},{}),content:J(F(n,"content",i)),marks:J(F(n,"marks",i)),group:J(F(n,"group",i)),inline:J(F(n,"inline",i)),atom:J(F(n,"atom",i)),selectable:J(F(n,"selectable",i)),draggable:J(F(n,"draggable",i)),code:J(F(n,"code",i)),whitespace:J(F(n,"whitespace",i)),linebreakReplacement:J(F(n,"linebreakReplacement",i)),defining:J(F(n,"defining",i)),isolating:J(F(n,"isolating",i)),attrs:Object.fromEntries(r.map(e=>{var t;return[e.name,{default:null===(t=null===e||void 0===e?void 0:e.attribute)||void 0===t?void 0:t.default}]}))}),a=J(F(n,"parseHTML",i));a&&(s.parseDOM=a.map(e=>X(e,r)));const l=F(n,"renderHTML",i);l&&(s.toDOM=e=>l({node:e,HTMLAttributes:W(e,r)}));const c=F(n,"renderText",i);return c&&(s.toText=c),[n.name,s]})),c=Object.fromEntries(i.map(n=>{const r=o.filter(e=>e.type===n.name),i={name:n.name,options:n.options,storage:n.storage,editor:t},s=Z({...e.reduce((e,t)=>{const o=F(t,"extendMarkSchema",i);return{...e,...o?o(n):{}}},{}),inclusive:J(F(n,"inclusive",i)),excludes:J(F(n,"excludes",i)),group:J(F(n,"group",i)),spanning:J(F(n,"spanning",i)),code:J(F(n,"code",i)),attrs:Object.fromEntries(r.map(e=>{var t;return[e.name,{default:null===(t=null===e||void 0===e?void 0:e.attribute)||void 0===t?void 0:t.default}]}))}),a=J(F(n,"parseHTML",i));a&&(s.parseDOM=a.map(e=>X(e,r)));const l=F(n,"renderHTML",i);return l&&(s.toDOM=e=>l({mark:e,HTMLAttributes:W(e,r)})),[n.name,s]}));return new s.Sj({topNode:a,nodes:l,marks:c})}function G(e,t){return t.nodes[e]||t.marks[e]||null}function Q(e,t){return Array.isArray(t)?t.some(t=>("string"===typeof t?t:t.name)===e.name):t}function ee(e,t){const n=s.ZF.fromSchema(t).serializeFragment(e),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}function te(e){return"[object RegExp]"===Object.prototype.toString.call(e)}class ne{constructor(e){this.find=e.find,this.handler=e.handler}}function oe(e){var t;const{editor:n,from:o,to:r,text:i,rules:s,plugin:a}=e,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(o);if(c.parent.type.spec.code||(null===(t=c.nodeBefore||c.nodeAfter)||void 0===t?void 0:t.marks.find(e=>e.type.spec.code)))return!1;let d=!1;const u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n="";const o=e.parentOffset;return e.parent.nodesBetween(Math.max(0,o-t),o,(e,t,r,i)=>{var s,a;const l=(null===(a=(s=e.type.spec).toText)||void 0===a?void 0:a.call(s,{node:e,pos:t,parent:r,index:i}))||e.textContent||"%leaf%";n+=e.isAtom&&!e.isText?l:l.slice(0,Math.max(0,o-t))}),n}(c)+i;return s.forEach(e=>{if(d)return;const t=((e,t)=>{if(te(t))return t.exec(e);const n=t(e);if(!n)return null;const o=[n.text];return o.index=n.index,o.input=e,o.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),o.push(n.replaceWith)),o})(u,e.find);if(!t)return;const s=l.state.tr,c=_({state:l.state,transaction:s}),h={from:o-(t[0].length-i.length),to:r},{commands:p,chain:f,can:m}=new V({editor:n,state:c});null!==e.handler({state:c,range:h,match:t,commands:p,chain:f,can:m})&&s.steps.length&&(s.setMeta(a,{transform:s,from:o,to:r,text:i}),l.dispatch(s),d=!0)}),d}function re(e){const{editor:t,rules:n}=e,r=new o.k_({state:{init:()=>null,apply(e,o,i){const a=e.getMeta(r);if(a)return a;const l=e.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:e}=l;"string"===typeof e||(e=ee(s.FK.from(e),i.schema));const{from:o}=l,a=o+e.length;oe({editor:t,from:o,to:a,text:e,rules:n,plugin:r})}),e.selectionSet||e.docChanged?null:o}},props:{handleTextInput:(e,o,i,s)=>oe({editor:t,from:o,to:i,text:s,rules:n,plugin:r}),handleDOMEvents:{compositionend:e=>(setTimeout(()=>{const{$cursor:o}=e.state.selection;o&&oe({editor:t,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(e,o){if("Enter"!==o.key)return!1;const{$cursor:i}=e.state.selection;return!!i&&oe({editor:t,from:i.pos,to:i.pos,text:"\n",rules:n,plugin:r})}},isInputRules:!0});return r}function ie(e){return"Object"===function(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)&&(e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype)}function se(e,t){const n={...e};return ie(e)&&ie(t)&&Object.keys(t).forEach(o=>{ie(t[o])&&ie(e[o])?n[o]=se(e[o],t[o]):n[o]=t[o]}),n}class ae{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=J(F(this,"addOptions",{name:this.name}))),this.storage=J(F(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(){return new ae(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.extend({...this.config,addOptions:()=>se(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new ae(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=J(F(t,"addOptions",{name:t.name})),t.storage=J(F(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit(e){let{editor:t,mark:n}=e;const{tr:o}=t.state,r=t.state.selection.$from;if(r.pos===r.end()){const e=r.marks();if(!!!e.find(e=>(null===e||void 0===e?void 0:e.type.name)===n.name))return!1;const i=e.find(e=>(null===e||void 0===e?void 0:e.type.name)===n.name);return i&&o.removeStoredMark(i),o.insertText(" ",r.pos),t.view.dispatch(o),!0}return!1}}class le{constructor(e){this.find=e.find,this.handler=e.handler}}function ce(e){const{editor:t,state:n,from:o,to:r,rule:i,pasteEvent:s,dropEvent:a}=e,{commands:l,chain:c,can:d}=new V({editor:t,state:n}),u=[];n.doc.nodesBetween(o,r,(e,t)=>{if(!e.isTextblock||e.type.spec.code)return;const h=Math.max(o,t),p=Math.min(r,t+e.content.size);((e,t,n)=>{if(te(t))return[...e.matchAll(t)];const o=t(e,n);return o?o.map(t=>{const n=[t.text];return n.index=t.index,n.input=e,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(t.replaceWith)),n}):[]})(e.textBetween(h-t,p-t,void 0,"\ufffc"),i.find,s).forEach(e=>{if(void 0===e.index)return;const t=h+e.index+1,o=t+e[0].length,r={from:n.tr.mapping.map(t),to:n.tr.mapping.map(o)},p=i.handler({state:n,range:r,match:e,commands:l,chain:c,can:d,pasteEvent:s,dropEvent:a});u.push(p)})});return u.every(e=>null!==e)}let de=null;function ue(e){const{editor:t,rules:n}=e;let r,i=null,a=!1,l=!1,c="undefined"!==typeof ClipboardEvent?new ClipboardEvent("paste"):null;try{r="undefined"!==typeof DragEvent?new DragEvent("drop"):null}catch{r=null}const d=e=>{let{state:n,from:o,to:i,rule:s,pasteEvt:a}=e;const l=n.tr,d=_({state:n,transaction:l});if(ce({editor:t,state:d,from:Math.max(o-1,0),to:i.b-1,rule:s,pasteEvent:a,dropEvent:r})&&l.steps.length){try{r="undefined"!==typeof DragEvent?new DragEvent("drop"):null}catch{r=null}return c="undefined"!==typeof ClipboardEvent?new ClipboardEvent("paste"):null,l}};return n.map(e=>new o.k_({view(e){const n=n=>{var o;i=(null===(o=e.dom.parentElement)||void 0===o?void 0:o.contains(n.target))?e.dom.parentElement:null,i&&(de=t)},o=()=>{de&&(de=null)};return window.addEventListener("dragstart",n),window.addEventListener("dragend",o),{destroy(){window.removeEventListener("dragstart",n),window.removeEventListener("dragend",o)}}},props:{handleDOMEvents:{drop:(e,t)=>{if(l=i===e.dom.parentElement,r=t,!l){const e=de;(null===e||void 0===e?void 0:e.isEditable)&&setTimeout(()=>{const t=e.state.selection;t&&e.commands.deleteRange({from:t.from,to:t.to})},10)}return!1},paste:(e,t)=>{var n;const o=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/html");return c=t,a=!!(null===o||void 0===o?void 0:o.includes("data-pm-slice")),!1}}},appendTransaction:(t,n,o)=>{const r=t[0],i="paste"===r.getMeta("uiEvent")&&!a,u="drop"===r.getMeta("uiEvent")&&!l,h=r.getMeta("applyPasteRules"),p=!!h;if(!i&&!u&&!p)return;if(p){let{text:t}=h;"string"===typeof t||(t=ee(s.FK.from(t),o.schema));const{from:n}=h,r=n+t.length,i=(e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return null===(t=n.clipboardData)||void 0===t||t.setData("text/html",e),n})(t);return d({rule:e,state:o,from:n,to:{b:r},pasteEvt:i})}const f=n.doc.content.findDiffStart(o.doc.content),m=n.doc.content.findDiffEnd(o.doc.content);return"number"===typeof f&&m&&f!==m.b?d({rule:e,state:o,from:f,to:m,pasteEvt:c}):void 0}}))}class he{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=he.resolve(e),this.schema=Y(this.extensions,t),this.setupExtensions()}static resolve(e){const t=he.sort(he.flatten(e)),n=function(e){const t=e.filter((t,n)=>e.indexOf(t)!==n);return Array.from(new Set(t))}(t.map(e=>e.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(e=>`'${e}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(e=>{const t=F(e,"addExtensions",{name:e.name,options:e.options,storage:e.storage});return t?[e,...this.flatten(t())]:e}).flat(10)}static sort(e){return e.sort((e,t)=>{const n=F(e,"priority")||100,o=F(t,"priority")||100;return n>o?-1:n<o?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const n=F(t,"addCommands",{name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:G(t.name,this.schema)});return n?{...e,...n()}:e},{})}get plugins(){const{editor:e}=this,t=he.sort([...this.extensions].reverse()),n=[],o=[],r=t.map(t=>{const r={name:t.name,options:t.options,storage:t.storage,editor:e,type:G(t.name,this.schema)},s=[],a=F(t,"addKeyboardShortcuts",r);let l={};if("mark"===t.type&&F(t,"exitable",r)&&(l.ArrowRight=()=>ae.handleExit({editor:e,mark:t})),a){const t=Object.fromEntries(Object.entries(a()).map(t=>{let[n,o]=t;return[n,()=>o({editor:e})]}));l={...l,...t}}const c=(0,i.w)(l);s.push(c);const d=F(t,"addInputRules",r);Q(t,e.options.enableInputRules)&&d&&n.push(...d());const u=F(t,"addPasteRules",r);Q(t,e.options.enablePasteRules)&&u&&o.push(...u());const h=F(t,"addProseMirrorPlugins",r);if(h){const e=h();s.push(...e)}return s}).flat();return[re({editor:e,rules:n}),...ue({editor:e,rules:o}),...r]}get attributes(){return H(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=$(this.extensions);return Object.fromEntries(t.filter(e=>!!F(e,"addNodeView")).map(t=>{const n=this.attributes.filter(e=>e.type===t.name),o={name:t.name,options:t.options,storage:t.storage,editor:e,type:U(t.name,this.schema)},r=F(t,"addNodeView",o);if(!r)return[];return[t.name,(o,i,s,a,l)=>{const c=W(o,n);return r()({node:o,view:i,getPos:s,decorations:a,innerDecorations:l,editor:e,extension:t,HTMLAttributes:c})}]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:G(e.name,this.schema)};if("mark"===e.type){(null===(t=J(F(e,"keepOnSplit",n)))||void 0===t||t)&&this.splittableMarks.push(e.name)}const o=F(e,"onBeforeCreate",n),r=F(e,"onCreate",n),i=F(e,"onUpdate",n),s=F(e,"onSelectionUpdate",n),a=F(e,"onTransaction",n),l=F(e,"onFocus",n),c=F(e,"onBlur",n),d=F(e,"onDestroy",n);o&&this.editor.on("beforeCreate",o),r&&this.editor.on("create",r),i&&this.editor.on("update",i),s&&this.editor.on("selectionUpdate",s),a&&this.editor.on("transaction",a),l&&this.editor.on("focus",l),c&&this.editor.on("blur",c),d&&this.editor.on("destroy",d)})}}class pe{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=J(F(this,"addOptions",{name:this.name}))),this.storage=J(F(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(){return new pe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.extend({...this.config,addOptions:()=>se(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new pe({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=J(F(t,"addOptions",{name:t.name})),t.storage=J(F(t,"addStorage",{name:t.name,options:t.options})),t}}function fe(e,t,n){const{from:o,to:r}=t,{blockSeparator:i="\n\n",textSerializers:s={}}=n||{};let a="";return e.nodesBetween(o,r,(e,n,l,c)=>{var d;e.isBlock&&n>o&&(a+=i);const u=null===s||void 0===s?void 0:s[e.type.name];if(u)return l&&(a+=u({node:e,pos:n,parent:l,index:c,range:t})),!1;e.isText&&(a+=null===(d=null===e||void 0===e?void 0:e.text)||void 0===d?void 0:d.slice(Math.max(o,n)-n,r-n))}),a}function me(e){return Object.fromEntries(Object.entries(e.nodes).filter(e=>{let[,t]=e;return t.spec.toText}).map(e=>{let[t,n]=e;return[t,n.spec.toText]}))}const ge=pe.create({name:"clipboardTextSerializer",addOptions:()=>({blockSeparator:void 0}),addProseMirrorPlugins(){return[new o.k_({key:new o.hs("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:o,selection:r}=t,{ranges:i}=r,s=Math.min(...i.map(e=>e.$from.pos)),a=Math.max(...i.map(e=>e.$to.pos)),l=me(n);return fe(o,{from:s,to:a},{...void 0!==this.options.blockSeparator?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}});function ye(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{strict:!0};const o=Object.keys(t);return!o.length||o.every(o=>n.strict?t[o]===e[o]:te(t[o])?t[o].test(e[o]):t[o]===e[o])}function ve(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.find(e=>e.type===t&&ye(Object.fromEntries(Object.keys(n).map(t=>[t,e.attrs[t]])),n))}function xe(e,t){return!!ve(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function be(e,t,n){var o;if(!e||!t)return;let r=e.parent.childAfter(e.parentOffset);if(r.node&&r.node.marks.some(e=>e.type===t)||(r=e.parent.childBefore(e.parentOffset)),!r.node||!r.node.marks.some(e=>e.type===t))return;n=n||(null===(o=r.node.marks[0])||void 0===o?void 0:o.attrs);if(!ve([...r.node.marks],t,n))return;let i=r.index,s=e.start()+r.offset,a=i+1,l=s+r.node.nodeSize;for(;i>0&&xe([...e.parent.child(i-1).marks],t,n);)i-=1,s-=e.parent.child(i).nodeSize;for(;a<e.parent.childCount&&xe([...e.parent.child(a).marks],t,n);)l+=e.parent.child(a).nodeSize,a+=1;return{from:s,to:l}}function we(e,t){if("string"===typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function Se(e){return e instanceof o.U3}function ke(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.min(Math.max(e,t),n)}function Ee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return null;const n=o.LN.atStart(e),r=o.LN.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return r;const i=n.from,s=r.to;return"all"===t?o.U3.create(e,ke(0,i,s),ke(e.content.size,i,s)):o.U3.create(e,ke(t,i,s),ke(t,i,s))}function Ce(){return"Android"===navigator.platform||/android/i.test(navigator.userAgent)}function Me(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Oe=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const o=t[n];3===o.nodeType&&o.nodeValue&&/^(\n\s\s|\n)$/.test(o.nodeValue)?e.removeChild(o):1===o.nodeType&&Oe(o)}return e};function Te(e){const t=`<body>${e}</body>`,n=(new window.DOMParser).parseFromString(t,"text/html").body;return Oe(n)}function Ae(e,t,n){if(e instanceof s.bP||e instanceof s.FK)return e;n={slice:!0,parseOptions:{},...n};const o="string"===typeof e;if("object"===typeof e&&null!==e)try{if(Array.isArray(e)&&e.length>0)return s.FK.fromArray(e.map(e=>t.nodeFromJSON(e)));const o=t.nodeFromJSON(e);return n.errorOnInvalidContent&&o.check(),o}catch(r){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:r});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),Ae("",t,n)}if(o){if(n.errorOnInvalidContent){let o=!1,r="";const i=new s.Sj({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:e=>(o=!0,r="string"===typeof e?e:e.outerHTML,null)}]}})});if(n.slice?s.S4.fromSchema(i).parseSlice(Te(e),n.parseOptions):s.S4.fromSchema(i).parse(Te(e),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${r}`)})}const o=s.S4.fromSchema(t);return n.slice?o.parseSlice(Te(e),n.parseOptions).content:o.parse(Te(e),n.parseOptions)}return Ae("",t,n)}function Ne(){return"undefined"!==typeof navigator&&/Mac/.test(navigator.platform)}function Pe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{from:o,to:r,empty:i}=e.selection,s=t?U(t,e.schema):null,a=[];e.doc.nodesBetween(o,r,(e,t)=>{if(e.isText)return;const n=Math.max(o,t),i=Math.min(r,t+e.nodeSize);a.push({node:e,from:n,to:i})});const l=r-o,c=a.filter(e=>!s||s.name===e.node.type.name).filter(e=>ye(e.node.attrs,n,{strict:!1}));if(i)return!!c.length;return c.reduce((e,t)=>e+t.to-t.from,0)>=l}function De(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function Re(e,t){const n="string"===typeof t?[t]:t;return Object.keys(e).reduce((t,o)=>(n.includes(o)||(t[o]=e[o]),t),{})}function Ie(e,t){return Ae(e,t,{slice:!1,parseOptions:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},errorOnInvalidContent:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).errorOnInvalidContent})}function Le(e,t){const n=we(t,e.schema),{from:o,to:r,empty:i}=e.selection,s=[];i?(e.storedMarks&&s.push(...e.storedMarks),s.push(...e.selection.$head.marks())):e.doc.nodesBetween(o,r,e=>{s.push(...e.marks)});const a=s.find(e=>e.type.name===n.name);return a?{...a.attrs}:{}}function je(e){return t=>function(e,t){for(let n=e.depth;n>0;n-=1){const o=e.node(n);if(t(o))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:o}}}(t.$from,e)}function Be(e,t){return fe(e,{from:0,to:e.content.size},t)}function _e(e,t){const n=De("string"===typeof t?t:t.name,e.schema);return"node"===n?function(e,t){const n=U(t,e.schema),{from:o,to:r}=e.selection,i=[];e.doc.nodesBetween(o,r,e=>{i.push(e)});const s=i.reverse().find(e=>e.type.name===n.name);return s?{...s.attrs}:{}}(e,t):"mark"===n?Le(e,t):{}}function Ve(e,t,n){const o=[];return e===t?n.resolve(e).marks().forEach(t=>{const r=be(n.resolve(e),t.type);r&&o.push({mark:t,...r})}):n.nodesBetween(e,t,(e,t)=>{e&&void 0!==(null===e||void 0===e?void 0:e.nodeSize)&&o.push(...e.marks.map(n=>({from:t,to:t+e.nodeSize,mark:n})))}),o}function ze(e,t,n){return Object.fromEntries(Object.entries(n).filter(n=>{let[o]=n;const r=e.find(e=>e.type===t&&e.name===o);return!!r&&r.attribute.keepOnSplit}))}function Fe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{empty:o,ranges:r}=e.selection,i=t?we(t,e.schema):null;if(o)return!!(e.storedMarks||e.selection.$from.marks()).filter(e=>!i||i.name===e.type.name).find(e=>ye(e.attrs,n,{strict:!1}));let s=0;const a=[];if(r.forEach(t=>{let{$from:n,$to:o}=t;const r=n.pos,i=o.pos;e.doc.nodesBetween(r,i,(e,t)=>{if(!e.isText&&!e.marks.length)return;const n=Math.max(r,t),o=Math.min(i,t+e.nodeSize);s+=o-n,a.push(...e.marks.map(e=>({mark:e,from:n,to:o})))})}),0===s)return!1;const l=a.filter(e=>!i||i.name===e.mark.type.name).filter(e=>ye(e.mark.attrs,n,{strict:!1})).reduce((e,t)=>e+t.to-t.from,0),c=a.filter(e=>!i||e.mark.type!==i&&e.mark.type.excludes(i)).reduce((e,t)=>e+t.to-t.from,0);return(l>0?l+c:l)>=s}function $e(e,t){const{nodeExtensions:n}=$(t),o=n.find(t=>t.name===e);if(!o)return!1;const r=J(F(o,"group",{name:o.name,options:o.options,storage:o.storage}));return"string"===typeof r&&r.split(" ").includes("list")}function He(e){let{checkChildren:t=!0,ignoreWhitespace:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var o;if(n){if("hardBreak"===e.type.name)return!0;if(e.isText)return/^\s*$/m.test(null!==(o=e.text)&&void 0!==o?o:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(0===e.content.childCount)return!0;if(t){let o=!0;return e.content.forEach(e=>{!1!==o&&(He(e,{ignoreWhitespace:n,checkChildren:t})||(o=!1))}),o}return!1}function Ue(e){return e instanceof o.nh}function Ke(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const o=n.filter(e=>null===t||void 0===t?void 0:t.includes(e.type.name));e.tr.ensureMarks(o)}}const We=(e,t)=>{const n=je(e=>e.type===t)(e.selection);if(!n)return!0;const o=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===o)return!0;const r=e.doc.nodeAt(o);return n.node.type!==(null===r||void 0===r?void 0:r.type)||!(0,a.n9)(e.doc,n.pos)||(e.join(n.pos),!0)},qe=(e,t)=>{const n=je(e=>e.type===t)(e.selection);if(!n)return!0;const o=e.doc.resolve(n.start).after(n.depth);if(void 0===o)return!0;const r=e.doc.nodeAt(o);return n.node.type!==(null===r||void 0===r?void 0:r.type)||!(0,a.n9)(e.doc,o)||(e.join(o),!0)};var Je=Object.freeze({__proto__:null,blur:()=>e=>{let{editor:t,view:n}=e;return requestAnimationFrame(()=>{var e;t.isDestroyed||(n.dom.blur(),null===(e=null===window||void 0===window?void 0:window.getSelection())||void 0===e||e.removeAllRanges())}),!0},clearContent:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t=>{let{commands:n}=t;return n.setContent("",e)}},clearNodes:()=>e=>{let{state:t,tr:n,dispatch:o}=e;const{selection:r}=n,{ranges:i}=r;return!o||(i.forEach(e=>{let{$from:o,$to:r}=e;t.doc.nodesBetween(o.pos,r.pos,(e,t)=>{if(e.type.isText)return;const{doc:o,mapping:r}=n,i=o.resolve(r.map(t)),s=o.resolve(r.map(t+e.nodeSize)),l=i.blockRange(s);if(!l)return;const c=(0,a.jP)(l);if(e.type.isTextblock){const{defaultType:e}=i.parent.contentMatchAt(i.index());n.setNodeMarkup(l.start,e)}(c||0===c)&&n.lift(l,c)})}),!0)},command:e=>t=>e(t),createParagraphNear:()=>e=>{let{state:t,dispatch:n}=e;return S(t,n)},cut:(e,t)=>n=>{let{editor:r,tr:i}=n;const{state:s}=r,a=s.doc.slice(e.from,e.to);i.deleteRange(e.from,e.to);const l=i.mapping.map(t);return i.insert(l,a.content),i.setSelection(new o.U3(i.doc.resolve(Math.max(l-1,0)))),!0},deleteCurrentNode:()=>e=>{let{tr:t,dispatch:n}=e;const{selection:o}=t,r=o.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1){if(i.node(s).type===r.type){if(n){const e=i.before(s),n=i.after(s);t.delete(e,n).scrollIntoView()}return!0}}return!1},deleteNode:e=>t=>{let{tr:n,state:o,dispatch:r}=t;const i=U(e,o.schema),s=n.selection.$anchor;for(let e=s.depth;e>0;e-=1){if(s.node(e).type===i){if(r){const t=s.before(e),o=s.after(e);n.delete(t,o).scrollIntoView()}return!0}}return!1},deleteRange:e=>t=>{let{tr:n,dispatch:o}=t;const{from:r,to:i}=e;return o&&n.delete(r,i),!0},deleteSelection:()=>e=>{let{state:t,dispatch:n}=e;return l(t,n)},enter:()=>e=>{let{commands:t}=e;return t.keyboardShortcut("Enter")},exitCode:()=>e=>{let{state:t,dispatch:n}=e;return w(t,n)},extendMarkRange:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:i,dispatch:s}=n;const a=we(e,i.schema),{doc:l,selection:c}=r,{$from:d,from:u,to:h}=c;if(s){const e=be(d,a,t);if(e&&e.from<=u&&e.to>=h){const t=o.U3.create(l,e.from,e.to);r.setSelection(t)}}return!0}},first:e=>t=>{const n="function"===typeof e?e(t):e;for(let e=0;e<n.length;e+=1)if(n[e](t))return!0;return!1},focus:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{editor:o,view:r,tr:i,dispatch:s}=n;t={scrollIntoView:!0,...t};const a=()=>{(Me()||Ce())&&r.dom.focus(),requestAnimationFrame(()=>{o.isDestroyed||(r.focus(),(null===t||void 0===t?void 0:t.scrollIntoView)&&o.commands.scrollIntoView())})};if(r.hasFocus()&&null===e||!1===e)return!0;if(s&&null===e&&!Se(o.state.selection))return a(),!0;const l=Ee(i.doc,e)||o.state.selection,c=o.state.selection.eq(l);return s&&(c||i.setSelection(l),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),a()),!0}},forEach:(e,t)=>n=>e.every((e,o)=>t(e,{...n,index:o})),insertContent:(e,t)=>n=>{let{tr:o,commands:r}=n;return r.insertContentAt({from:o.selection.from,to:o.selection.to},e,t)},insertContentAt:(e,t,n)=>r=>{let{tr:i,dispatch:l,editor:c}=r;var d;if(l){let r;const l=e=>{c.emit("contentError",{editor:c,error:e,disableCollaboration:()=>{c.storage.collaboration&&(c.storage.collaboration.isDisabled=!0)}})},h={preserveWhitespace:"full",...(n={parseOptions:c.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n}).parseOptions};if(!n.errorOnInvalidContent&&!c.options.enableContentCheck&&c.options.emitContentError)try{Ae(t,c.schema,{parseOptions:h,errorOnInvalidContent:!0})}catch(u){l(u)}try{r=Ae(t,c.schema,{parseOptions:h,errorOnInvalidContent:null!==(d=n.errorOnInvalidContent)&&void 0!==d?d:c.options.enableContentCheck})}catch(u){return l(u),!1}let{from:p,to:f}="number"===typeof e?{from:e,to:e}:{from:e.from,to:e.to},m=!0,g=!0;if(("type"in r?[r]:r).forEach(e=>{e.check(),m=!!m&&(e.isText&&0===e.marks.length),g=!!g&&e.isBlock}),p===f&&g){const{parent:e}=i.doc.resolve(p);e.isTextblock&&!e.type.spec.code&&!e.childCount&&(p-=1,f+=1)}let y;if(m){if(Array.isArray(t))y=t.map(e=>e.text||"").join("");else if(t instanceof s.FK){let e="";t.forEach(t=>{t.text&&(e+=t.text)}),y=e}else y="object"===typeof t&&t&&t.text?t.text:t;i.insertText(y,p,f)}else y=r,i.replaceWith(p,f,y);n.updateSelection&&function(e,t,n){const r=e.steps.length-1;if(r<t)return;const i=e.steps[r];if(!(i instanceof a.Ln||i instanceof a.Wg))return;const s=e.mapping.maps[r];let l=0;s.forEach((e,t,n,o)=>{0===l&&(l=o)}),e.setSelection(o.LN.near(e.doc.resolve(l),n))}(i,i.steps.length-1,-1),n.applyInputRules&&i.setMeta("applyInputRules",{from:p,text:y}),n.applyPasteRules&&i.setMeta("applyPasteRules",{from:p,text:y})}return!0},joinBackward:()=>e=>{let{state:t,dispatch:n}=e;return d(t,n)},joinDown:()=>e=>{let{state:t,dispatch:n}=e;return((e,t)=>{let n,r=e.selection;if(r instanceof o.nh){if(r.node.isTextblock||!(0,a.n9)(e.doc,r.to))return!1;n=r.to}else if(n=(0,a.N0)(e.doc,r.to,1),null==n)return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0})(t,n)},joinForward:()=>e=>{let{state:t,dispatch:n}=e;return g(t,n)},joinItemBackward:()=>e=>{let{state:t,dispatch:n,tr:o}=e;try{const e=(0,a.N0)(t.doc,t.selection.$from.pos,-1);return null!==e&&void 0!==e&&(o.join(e,2),n&&n(o),!0)}catch{return!1}},joinItemForward:()=>e=>{let{state:t,dispatch:n,tr:o}=e;try{const e=(0,a.N0)(t.doc,t.selection.$from.pos,1);return null!==e&&void 0!==e&&(o.join(e,2),n&&n(o),!0)}catch{return!1}},joinTextblockBackward:()=>e=>{let{state:t,dispatch:n}=e;return((e,t,n)=>{let o=c(e,n);if(!o)return!1;let r=f(o);return!!r&&u(e,r,t)})(t,n)},joinTextblockForward:()=>e=>{let{state:t,dispatch:n}=e;return((e,t,n)=>{let o=m(e,n);if(!o)return!1;let r=v(o);return!!r&&u(e,r,t)})(t,n)},joinUp:()=>e=>{let{state:t,dispatch:n}=e;return((e,t)=>{let n,r=e.selection,i=r instanceof o.nh;if(i){if(r.node.isTextblock||!(0,a.n9)(e.doc,r.from))return!1;n=r.from}else if(n=(0,a.N0)(e.doc,r.from,-1),null==n)return!1;if(t){let r=e.tr.join(n);i&&r.setSelection(o.nh.create(r.doc,n-e.doc.resolve(n).nodeBefore.nodeSize)),t(r.scrollIntoView())}return!0})(t,n)},keyboardShortcut:e=>t=>{let{editor:n,view:o,tr:r,dispatch:i}=t;const s=function(e){const t=e.split(/-(?!$)/);let n,o,r,i,s=t[t.length-1];"Space"===s&&(s=" ");for(let a=0;a<t.length-1;a+=1){const e=t[a];if(/^(cmd|meta|m)$/i.test(e))i=!0;else if(/^a(lt)?$/i.test(e))n=!0;else if(/^(c|ctrl|control)$/i.test(e))o=!0;else if(/^s(hift)?$/i.test(e))r=!0;else{if(!/^mod$/i.test(e))throw new Error(`Unrecognized modifier name: ${e}`);Me()||Ne()?i=!0:o=!0}}return n&&(s=`Alt-${s}`),o&&(s=`Ctrl-${s}`),i&&(s=`Meta-${s}`),r&&(s=`Shift-${s}`),s}(e).split(/-(?!$)/),a=s.find(e=>!["Alt","Ctrl","Meta","Shift"].includes(e)),l=new KeyboardEvent("keydown",{key:"Space"===a?" ":a,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),c=n.captureTransaction(()=>{o.someProp("handleKeyDown",e=>e(o,l))});return null===c||void 0===c||c.steps.forEach(e=>{const t=e.map(r.mapping);t&&i&&r.maybeStep(t)}),!0},lift:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:o,dispatch:r}=n;return!!Pe(o,U(e,o.schema),t)&&((e,t)=>{let{$from:n,$to:o}=e.selection,r=n.blockRange(o),i=r&&(0,a.jP)(r);return null!=i&&(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)})(o,r)}},liftEmptyBlock:()=>e=>{let{state:t,dispatch:n}=e;return k(t,n)},liftListItem:e=>t=>{let{state:n,dispatch:o}=t;return B(U(e,n.schema))(n,o)},newlineInCode:()=>e=>{let{state:t,dispatch:n}=e;return x(t,n)},resetAttributes:(e,t)=>n=>{let{tr:o,state:r,dispatch:i}=n,s=null,a=null;const l=De("string"===typeof e?e:e.name,r.schema);return!!l&&("node"===l&&(s=U(e,r.schema)),"mark"===l&&(a=we(e,r.schema)),i&&o.selection.ranges.forEach(e=>{r.doc.nodesBetween(e.$from.pos,e.$to.pos,(e,n)=>{s&&s===e.type&&o.setNodeMarkup(n,void 0,Re(e.attrs,t)),a&&e.marks.length&&e.marks.forEach(r=>{a===r.type&&o.addMark(n,n+e.nodeSize,a.create(Re(r.attrs,t)))})})}),!0)},scrollIntoView:()=>e=>{let{tr:t,dispatch:n}=e;return n&&t.scrollIntoView(),!0},selectAll:()=>e=>{let{tr:t,dispatch:n}=e;if(n){const e=new o.i5(t.doc);t.setSelection(e)}return!0},selectNodeBackward:()=>e=>{let{state:t,dispatch:n}=e;return p(t,n)},selectNodeForward:()=>e=>{let{state:t,dispatch:n}=e;return y(t,n)},selectParentNode:()=>e=>{let{state:t,dispatch:n}=e;return((e,t)=>{let n,{$from:r,to:i}=e.selection,s=r.sharedDepth(i);return 0!=s&&(n=r.before(s),t&&t(e.tr.setSelection(o.nh.create(e.doc,n))),!0)})(t,n)},selectTextblockEnd:()=>e=>{let{state:t,dispatch:n}=e;return A(t,n)},selectTextblockStart:()=>e=>{let{state:t,dispatch:n}=e;return T(t,n)},setContent:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return r=>{let{editor:i,tr:s,dispatch:a,commands:l}=r;var c,d;const{doc:u}=s;if("full"!==n.preserveWhitespace){const r=Ie(e,i.schema,n,{errorOnInvalidContent:null!==(c=o.errorOnInvalidContent)&&void 0!==c?c:i.options.enableContentCheck});return a&&s.replaceWith(0,u.content.size,r).setMeta("preventUpdate",!t),!0}return a&&s.setMeta("preventUpdate",!t),l.insertContentAt({from:0,to:u.content.size},e,{parseOptions:n,errorOnInvalidContent:null!==(d=o.errorOnInvalidContent)&&void 0!==d?d:i.options.enableContentCheck})}},setMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:o,state:r,dispatch:i}=n;const{selection:s}=o,{empty:a,ranges:l}=s,c=we(e,r.schema);if(i)if(a){const e=Le(r,c);o.addStoredMark(c.create({...e,...t}))}else l.forEach(e=>{const n=e.$from.pos,i=e.$to.pos;r.doc.nodesBetween(n,i,(e,r)=>{const s=Math.max(r,n),a=Math.min(r+e.nodeSize,i);e.marks.find(e=>e.type===c)?e.marks.forEach(e=>{c===e.type&&o.addMark(s,a,c.create({...e.attrs,...t}))}):o.addMark(s,a,c.create(t))})});return function(e,t,n){var o;const{selection:r}=t;let i=null;if(Se(r)&&(i=r.$cursor),i){const t=null!==(o=e.storedMarks)&&void 0!==o?o:i.marks();return!!n.isInSet(t)||!t.some(e=>e.type.excludes(n))}const{ranges:s}=r;return s.some(t=>{let{$from:o,$to:r}=t,i=0===o.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(o.pos,r.pos,(e,t,o)=>{if(i)return!1;if(e.isInline){const t=!o||o.type.allowsMarkType(n),r=!!n.isInSet(e.marks)||!e.marks.some(e=>e.type.excludes(n));i=t&&r}return!i}),i})}(r,o,c)}},setMeta:(e,t)=>n=>{let{tr:o}=n;return o.setMeta(e,t),!0},setNode:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:o,dispatch:r,chain:i}=n;const s=U(e,o.schema);let a;return o.selection.$anchor.sameParent(o.selection.$head)&&(a=o.selection.$anchor.parent.attrs),s.isTextblock?i().command(e=>{let{commands:n}=e;return!!N(s,{...a,...t})(o)||n.clearNodes()}).command(e=>{let{state:n}=e;return N(s,{...a,...t})(n,r)}).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)}},setNodeSelection:e=>t=>{let{tr:n,dispatch:r}=t;if(r){const{doc:t}=n,r=ke(e,0,t.content.size),i=o.nh.create(t,r);n.setSelection(i)}return!0},setTextSelection:e=>t=>{let{tr:n,dispatch:r}=t;if(r){const{doc:t}=n,{from:r,to:i}="number"===typeof e?{from:e,to:e}:e,s=o.U3.atStart(t).from,a=o.U3.atEnd(t).to,l=ke(r,s,a),c=ke(i,s,a),d=o.U3.create(t,l,c);n.setSelection(d)}return!0},sinkListItem:e=>t=>{let{state:n,dispatch:o}=t;const r=U(e,n.schema);return(i=r,function(e,t){let{$from:n,$to:o}=e.selection,r=n.blockRange(o,e=>e.childCount>0&&e.firstChild.type==i);if(!r)return!1;let l=r.startIndex;if(0==l)return!1;let c=r.parent,d=c.child(l-1);if(d.type!=i)return!1;if(t){let n=d.lastChild&&d.lastChild.type==c.type,o=s.FK.from(n?i.create():null),l=new s.Ji(s.FK.from(i.create(null,s.FK.from(c.type.create(null,o)))),n?3:1,0),u=r.start,h=r.end;t(e.tr.step(new a.Wg(u-(n?3:1),h,u,h,l,1,!0)).scrollIntoView())}return!0})(n,o);var i},splitBlock:function(){let{keepMarks:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>{let{tr:n,state:r,dispatch:i,editor:s}=t;const{selection:l,doc:c}=n,{$from:d,$to:u}=l,h=ze(s.extensionManager.attributes,d.node().type.name,d.node().attrs);if(l instanceof o.nh&&l.node.isBlock)return!(!d.parentOffset||!(0,a.zy)(c,d.pos))&&(i&&(e&&Ke(r,s.extensionManager.splittableMarks),n.split(d.pos).scrollIntoView()),!0);if(!d.parent.isBlock)return!1;const p=u.parentOffset===u.parent.content.size,f=0===d.depth?void 0:function(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(d.node(-1).contentMatchAt(d.indexAfter(-1)));let m=p&&f?[{type:f,attrs:h}]:void 0,g=(0,a.zy)(n.doc,n.mapping.map(d.pos),1,m);if(m||g||!(0,a.zy)(n.doc,n.mapping.map(d.pos),1,f?[{type:f}]:void 0)||(g=!0,m=f?[{type:f,attrs:h}]:void 0),i){if(g&&(l instanceof o.U3&&n.deleteSelection(),n.split(n.mapping.map(d.pos),1,m),f&&!p&&!d.parentOffset&&d.parent.type!==f)){const e=n.mapping.map(d.before()),t=n.doc.resolve(e);d.node(-1).canReplaceWith(t.index(),t.index()+1,f)&&n.setNodeMarkup(n.mapping.map(d.before()),f)}e&&Ke(r,s.extensionManager.splittableMarks),n.scrollIntoView()}return g}},splitListItem:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:i,dispatch:l,editor:c}=n;var d;const u=U(e,i.schema),{$from:h,$to:p}=i.selection,f=i.selection.node;if(f&&f.isBlock||h.depth<2||!h.sameParent(p))return!1;const m=h.node(-1);if(m.type!==u)return!1;const g=c.extensionManager.attributes;if(0===h.parent.content.size&&h.node(-1).childCount===h.indexAfter(-1)){if(2===h.depth||h.node(-3).type!==u||h.index(-2)!==h.node(-2).childCount-1)return!1;if(l){let e=s.FK.empty;const n=h.index(-1)?1:h.index(-2)?2:3;for(let t=h.depth-n;t>=h.depth-3;t-=1)e=s.FK.from(h.node(t).copy(e));const i=h.indexAfter(-1)<h.node(-2).childCount?1:h.indexAfter(-2)<h.node(-3).childCount?2:3,a={...ze(g,h.node().type.name,h.node().attrs),...t},l=(null===(d=u.contentMatch.defaultType)||void 0===d?void 0:d.createAndFill(a))||void 0;e=e.append(s.FK.from(u.createAndFill(null,l)||void 0));const c=h.before(h.depth-(n-1));r.replace(c,h.after(-i),new s.Ji(e,4-n,0));let p=-1;r.doc.nodesBetween(c,r.doc.content.size,(e,t)=>{if(p>-1)return!1;e.isTextblock&&0===e.content.size&&(p=t+1)}),p>-1&&r.setSelection(o.U3.near(r.doc.resolve(p))),r.scrollIntoView()}return!0}const y=p.pos===h.end()?m.contentMatchAt(0).defaultType:null,v={...ze(g,m.type.name,m.attrs),...t},x={...ze(g,h.node().type.name,h.node().attrs),...t};r.delete(h.pos,p.pos);const b=y?[{type:u,attrs:v},{type:y,attrs:x}]:[{type:u,attrs:v}];if(!(0,a.zy)(r.doc,h.pos,2))return!1;if(l){const{selection:e,storedMarks:t}=i,{splittableMarks:n}=c.extensionManager,o=t||e.$to.parentOffset&&e.$from.marks();if(r.split(h.pos,2,b).scrollIntoView(),!o||!l)return!0;const s=o.filter(e=>n.includes(e.type.name));r.ensureMarks(s)}return!0}},toggleList:function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return r=>{let{editor:i,tr:s,state:a,dispatch:l,chain:c,commands:d,can:u}=r;const{extensions:h,splittableMarks:p}=i.extensionManager,f=U(e,a.schema),m=U(t,a.schema),{selection:g,storedMarks:y}=a,{$from:v,$to:x}=g,b=v.blockRange(x),w=y||g.$to.parentOffset&&g.$from.marks();if(!b)return!1;const S=je(e=>$e(e.type.name,h))(g);if(b.depth>=1&&S&&b.depth-S.depth<=1){if(S.node.type===f)return d.liftListItem(m);if($e(S.node.type.name,h)&&f.validContent(S.node.content)&&l)return c().command(()=>(s.setNodeMarkup(S.pos,f),!0)).command(()=>We(s,f)).command(()=>qe(s,f)).run()}return n&&w&&l?c().command(()=>{const e=u().wrapInList(f,o),t=w.filter(e=>p.includes(e.type.name));return s.ensureMarks(t),!!e||d.clearNodes()}).wrapInList(f,o).command(()=>We(s,f)).command(()=>qe(s,f)).run():c().command(()=>!!u().wrapInList(f,o)||d.clearNodes()).wrapInList(f,o).command(()=>We(s,f)).command(()=>qe(s,f)).run()}},toggleMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o=>{let{state:r,commands:i}=o;const{extendEmptyMarkRange:s=!1}=n,a=we(e,r.schema);return Fe(r,a,t)?i.unsetMark(a,{extendEmptyMarkRange:s}):i.setMark(a,t)}},toggleNode:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o=>{let{state:r,commands:i}=o;const s=U(e,r.schema),a=U(t,r.schema),l=Pe(r,s,n);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),l?i.setNode(a,c):i.setNode(s,{...c,...n})}},toggleWrap:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:o,commands:r}=n;const i=U(e,o.schema);return Pe(o,i,t)?r.lift(i):r.wrapIn(i,t)}},undoInputRule:()=>e=>{let{state:t,dispatch:n}=e;const o=t.plugins;for(let r=0;r<o.length;r+=1){const e=o[r];let i;if(e.spec.isInputRules&&(i=e.getState(t))){if(n){const e=t.tr,n=i.transform;for(let t=n.steps.length-1;t>=0;t-=1)e.step(n.steps[t].invert(n.docs[t]));if(i.text){const n=e.doc.resolve(i.from).marks();e.replaceWith(i.from,i.to,t.schema.text(i.text,n))}else e.delete(i.from,i.to)}return!0}}return!1},unsetAllMarks:()=>e=>{let{tr:t,dispatch:n}=e;const{selection:o}=t,{empty:r,ranges:i}=o;return r||n&&i.forEach(e=>{t.removeMark(e.$from.pos,e.$to.pos)}),!0},unsetMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:o,state:r,dispatch:i}=n;var s;const{extendEmptyMarkRange:a=!1}=t,{selection:l}=o,c=we(e,r.schema),{$from:d,empty:u,ranges:h}=l;if(!i)return!0;if(u&&a){let{from:e,to:t}=l;const n=null===(s=d.marks().find(e=>e.type===c))||void 0===s?void 0:s.attrs,r=be(d,c,n);r&&(e=r.from,t=r.to),o.removeMark(e,t,c)}else h.forEach(e=>{o.removeMark(e.$from.pos,e.$to.pos,c)});return o.removeStoredMark(c),!0}},updateAttributes:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:o,state:r,dispatch:i}=n,s=null,a=null;const l=De("string"===typeof e?e:e.name,r.schema);return!!l&&("node"===l&&(s=U(e,r.schema)),"mark"===l&&(a=we(e,r.schema)),i&&o.selection.ranges.forEach(e=>{const n=e.$from.pos,i=e.$to.pos;let l,c,d,u;o.selection.empty?r.doc.nodesBetween(n,i,(e,t)=>{s&&s===e.type&&(d=Math.max(t,n),u=Math.min(t+e.nodeSize,i),l=t,c=e)}):r.doc.nodesBetween(n,i,(e,r)=>{r<n&&s&&s===e.type&&(d=Math.max(r,n),u=Math.min(r+e.nodeSize,i),l=r,c=e),r>=n&&r<=i&&(s&&s===e.type&&o.setNodeMarkup(r,void 0,{...e.attrs,...t}),a&&e.marks.length&&e.marks.forEach(s=>{if(a===s.type){const l=Math.max(r,n),c=Math.min(r+e.nodeSize,i);o.addMark(l,c,a.create({...s.attrs,...t}))}}))}),c&&(void 0!==l&&o.setNodeMarkup(l,void 0,{...c.attrs,...t}),a&&c.marks.length&&c.marks.forEach(e=>{a===e.type&&o.addMark(d,u,a.create({...e.attrs,...t}))}))}),!0)}},wrapIn:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:o,dispatch:r}=n;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,o){let{$from:r,$to:i}=n.selection,s=r.blockRange(i),l=s&&(0,a.oM)(s,e,t);return!!l&&(o&&o(n.tr.wrap(s,l).scrollIntoView()),!0)}}(U(e,o.schema),t)(o,r)}},wrapInList:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:o,dispatch:r}=n;return j(U(e,o.schema),t)(o,r)}}});const Xe=pe.create({name:"commands",addCommands:()=>({...Je})}),Ze=pe.create({name:"drop",addProseMirrorPlugins(){return[new o.k_({key:new o.hs("tiptapDrop"),props:{handleDrop:(e,t,n,o)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:o})}}})]}}),Ye=pe.create({name:"editable",addProseMirrorPlugins(){return[new o.k_({key:new o.hs("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Ge=new o.hs("focusEvents"),Qe=pe.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new o.k_({key:Ge,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const o=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(o),!1},blur:(t,n)=>{e.isFocused=!1;const o=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(o),!1}}}})]}}),et=pe.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.undoInputRule(),()=>t.command(e=>{let{tr:n}=e;const{selection:r,doc:i}=n,{empty:s,$anchor:a}=r,{pos:l,parent:c}=a,d=a.parent.isTextblock&&l>0?n.doc.resolve(l-1):a,u=d.parent.type.spec.isolating,h=a.pos-a.parentOffset,p=u&&1===d.parent.childCount?h===a.pos:o.LN.atStart(i).from===l;return!(!s||!c.type.isTextblock||c.textContent.length||!p||p&&"paragraph"===a.parent.type.name)&&t.clearNodes()}),()=>t.deleteSelection(),()=>t.joinBackward(),()=>t.selectNodeBackward()]}),t=()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.deleteSelection(),()=>t.deleteCurrentNode(),()=>t.joinForward(),()=>t.selectNodeForward()]}),n={Enter:()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.newlineInCode(),()=>t.createParagraphNear(),()=>t.liftEmptyBlock(),()=>t.splitBlock()]}),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},r={...n},i={...n,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Me()||Ne()?i:r},addProseMirrorPlugins(){return[new o.k_({key:new o.hs("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(e=>e.getMeta("composition")))return;const r=e.some(e=>e.docChanged)&&!t.doc.eq(n.doc),i=e.some(e=>e.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:a,to:l}=t.selection,c=o.LN.atStart(t.doc).from,d=o.LN.atEnd(t.doc).to;if(s||!(a===c&&l===d))return;if(!He(n.doc))return;const u=n.tr,h=_({state:n,transaction:u}),{commands:p}=new V({editor:this.editor,state:h});return p.clearNodes(),u.steps.length?u:void 0}})]}}),tt=pe.create({name:"paste",addProseMirrorPlugins(){return[new o.k_({key:new o.hs("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),nt=pe.create({name:"tabindex",addProseMirrorPlugins(){return[new o.k_({key:new o.hs("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class ot{get name(){return this.node.type.name}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=t,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return null!==(e=this.actualDepth)&&void 0!==e?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,n=this.to;if(this.isBlock){if(0===this.content.size)return void console.error(`You can\u2019t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);t=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:t,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(0===this.depth)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new ot(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new ot(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new ot(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,n)=>{const o=t.isBlock&&!t.isTextblock,r=t.isAtom&&!t.isText,i=this.pos+n+(r?0:1);if(i<0||i>this.resolvedPos.doc.nodeSize-2)return;const s=this.resolvedPos.doc.resolve(i);if(!o&&s.depth<=this.depth)return;const a=new ot(s,this.editor,o,o?t:null);o&&(a.actualDepth=this.depth+1),e.push(new ot(s,this.editor,o,o?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,o=this.parent;for(;o&&!n;){if(o.node.type.name===e)if(Object.keys(t).length>0){const e=o.node.attrs,n=Object.keys(t);for(let o=0;o<n.length;o+=1){const r=n[o];if(e[r]!==t[r])break}}else n=o;o=o.parent}return n}querySelector(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[];if(!this.children||0===this.children.length)return o;const r=Object.keys(t);return this.children.forEach(i=>{if(!(n&&o.length>0)){if(i.node.type.name===e){r.every(e=>t[e]===i.node.attrs[e])&&o.push(i)}n&&o.length>0||(o=o.concat(i.querySelectorAll(e,t,n)))}}),o}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}class rt extends z{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:e=>{let{error:t}=e;throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",e=>{let{event:t,slice:n,moved:o}=e;return this.options.onDrop(t,n,o)}),this.on("paste",e=>{let{event:t,slice:n}=e;return this.options.onPaste(t,n)}),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=function(e,t,n){const o=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(null!==o)return o;const r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.setAttribute("data-tiptap-style"+(n?`-${n}`:""),""),r.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(r),r}('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 0 !important;\n  height: 0 !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',this.options.injectNonce))}setOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options={...this.options,...e},this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const n=q(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:n});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(e=>{const t="string"===typeof e?`${e}$`:e.key;n=n.filter(e=>!e.key.startsWith(t))}),t.length===n.length)return;const o=this.state.reconfigure({plugins:n});return this.view.updateState(o),o}createExtensionManager(){var e,t;const n=[...this.options.enableCoreExtensions?[Ye,ge.configure({blockSeparator:null===(t=null===(e=this.options.coreExtensionOptions)||void 0===e?void 0:e.clipboardTextSerializer)||void 0===t?void 0:t.blockSeparator}),Xe,Qe,et,nt,Ze,tt].filter(e=>"object"!==typeof this.options.enableCoreExtensions||!1!==this.options.enableCoreExtensions[e.name]):[],...this.options.extensions].filter(e=>["extension","node","mark"].includes(null===e||void 0===e?void 0:e.type));this.extensionManager=new he(n,this)}createCommandManager(){this.commandManager=new V({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=Ie(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(e=>"collaboration"!==e.name),this.createExtensionManager()}}),t=Ie(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const n=Ee(t,this.options.autofocus);this.view=new r.Lz(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...null===(e=this.options.editorProps)||void 0===e?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:o.$t.create({doc:t,selection:n||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();this.view.dom.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction)return this.capturedTransaction?void e.steps.forEach(e=>{var t;return null===(t=this.capturedTransaction)||void 0===t?void 0:t.step(e)}):void(this.capturedTransaction=e);const t=this.state.apply(e),n=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),n&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),r=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),r&&this.emit("blur",{editor:this,event:r.event,transaction:e}),e.docChanged&&!e.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return _e(this.state,e)}isActive(e,t){const n="string"===typeof e?e:null,o="string"===typeof e?t:e;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return Pe(e,null,n)||Fe(e,null,n);const o=De(t,e.schema);return"node"===o?Pe(e,t,n):"mark"===o&&Fe(e,t,n)}(this.state,n,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return ee(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t="\n\n",textSerializers:n={}}=e||{};return Be(this.state.doc,{blockSeparator:t,textSerializers:{...me(this.schema),...n}})}get isEmpty(){return He(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(null===(e=this.view)||void 0===e?void 0:e.docView)}$node(e,t){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new ot(t,this)}get $doc(){return this.$pos(0)}}function it(e){return new ne({find:e.find,handler:t=>{let{state:n,range:o,match:r}=t;const i=J(e.getAttributes,void 0,r);if(!1===i||null===i)return null;const{tr:s}=n,a=r[r.length-1],l=r[0];if(a){const t=l.search(/\S/),r=o.from+l.indexOf(a),c=r+a.length;if(Ve(o.from,o.to,n.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>r).length)return null;c<o.to&&s.delete(c,o.to),r>o.from&&s.delete(o.from+t,r);const d=o.from+t+a.length;s.addMark(o.from+t,d,e.type.create(i||{})),s.removeStoredMark(e.type)}}})}function st(e){return new ne({find:e.find,handler:t=>{let{state:n,range:o,match:r}=t;const i=J(e.getAttributes,void 0,r)||{},{tr:s}=n,a=o.from;let l=o.to;const c=e.type.create(i);if(r[1]){let e=a+r[0].lastIndexOf(r[1]);e>l?e=l:l=e+r[1].length;const t=r[0][r[0].length-1];s.insertText(t,a+r[0].length-1),s.replaceWith(e,l,c)}else if(r[0]){const t=e.type.isInline?a:a-1;s.insert(t,e.type.create(i)).delete(s.mapping.map(a),s.mapping.map(l))}s.scrollIntoView()}})}function at(e){return new ne({find:e.find,handler:t=>{let{state:n,range:o,match:r}=t;const i=n.doc.resolve(o.from),s=J(e.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;n.tr.delete(o.from,o.to).setBlockType(o.from,o.from,e.type,s)}})}function lt(e){return new ne({find:e.find,handler:t=>{let{state:n,range:o,match:r,chain:i}=t;const s=J(e.getAttributes,void 0,r)||{},l=n.tr.delete(o.from,o.to),c=l.doc.resolve(o.from).blockRange(),d=c&&(0,a.oM)(c,e.type,s);if(!d)return null;if(l.wrap(c,d),e.keepMarks&&e.editor){const{selection:t,storedMarks:o}=n,{splittableMarks:r}=e.editor.extensionManager,i=o||t.$to.parentOffset&&t.$from.marks();if(i){const e=i.filter(e=>r.includes(e.type.name));l.ensureMarks(e)}}if(e.keepAttributes){const t="bulletList"===e.type.name||"orderedList"===e.type.name?"listItem":"taskList";i().updateAttributes(t,s).run()}const u=l.doc.resolve(o.from-1).nodeBefore;u&&u.type===e.type&&(0,a.n9)(l.doc,o.from-1)&&(!e.joinPredicate||e.joinPredicate(r,u))&&l.join(o.from-1)}})}class ct{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=J(F(this,"addOptions",{name:this.name}))),this.storage=J(F(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(){return new ct(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.extend({...this.config,addOptions:()=>se(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new ct(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=J(F(t,"addOptions",{name:t.name})),t.storage=J(F(t,"addStorage",{name:t.name,options:t.options})),t}}class dt{constructor(e,t,n){this.isDragging=!1,this.component=e,this.editor=t.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.innerDecorations=t.innerDecorations,this.view=t.view,this.HTMLAttributes=t.HTMLAttributes,this.getPos=t.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var t,n,r,i,s,a,l;const{view:c}=this.editor,d=e.target,u=3===d.nodeType?null===(t=d.parentElement)||void 0===t?void 0:t.closest("[data-drag-handle]"):d.closest("[data-drag-handle]");if(!this.dom||(null===(n=this.contentDOM)||void 0===n?void 0:n.contains(d))||!u)return;let h=0,p=0;if(this.dom!==u){const t=this.dom.getBoundingClientRect(),n=u.getBoundingClientRect(),o=null!==(r=e.offsetX)&&void 0!==r?r:null===(i=e.nativeEvent)||void 0===i?void 0:i.offsetX,l=null!==(s=e.offsetY)&&void 0!==s?s:null===(a=e.nativeEvent)||void 0===a?void 0:a.offsetY;h=n.x-t.x+o,p=n.y-t.y+l}const f=this.dom.cloneNode(!0);null===(l=e.dataTransfer)||void 0===l||l.setDragImage(f,h,p);const m=this.getPos();if("number"!==typeof m)return;const g=o.nh.create(c.state.doc,m),y=c.state.tr.setSelection(g);c.dispatch(y)}stopEvent(e){var t;if(!this.dom)return!1;if("function"===typeof this.options.stopEvent)return this.options.stopEvent({event:e});const n=e.target;if(!(this.dom.contains(n)&&!(null===(t=this.contentDOM)||void 0===t?void 0:t.contains(n))))return!1;const r=e.type.startsWith("drag"),i="drop"===e.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!i&&!r)return!0;const{isEditable:s}=this.editor,{isDragging:a}=this,l=!!this.node.type.spec.draggable,c=o.nh.isSelectable(this.node),d="copy"===e.type,u="paste"===e.type,h="cut"===e.type,p="mousedown"===e.type;if(!l&&c&&r&&e.target===this.dom&&e.preventDefault(),l&&r&&!a&&e.target===this.dom)return e.preventDefault(),!1;if(l&&s&&!a&&p){const e=n.closest("[data-drag-handle]");e&&(this.dom===e||this.dom.contains(e))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(a||i||d||u||h||p&&c)}ignoreMutation(e){if(!this.dom||!this.contentDOM)return!0;if("function"===typeof this.options.ignoreMutation)return this.options.ignoreMutation({mutation:e});if(this.node.isLeaf||this.node.isAtom)return!0;if("selection"===e.type)return!1;if(this.dom.contains(e.target)&&"childList"===e.type&&(Me()||Ce())&&this.editor.isFocused){if([...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(e=>e.isContentEditable))return!1}return this.contentDOM===e.target&&"attributes"===e.type||!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(t=>{let{tr:n}=t;const o=this.getPos();return"number"===typeof o&&(n.setNodeMarkup(o,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if("number"!==typeof e)return;const t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}}function ut(e){return new le({find:e.find,handler:t=>{let{state:n,range:o,match:r,pasteEvent:i}=t;const s=J(e.getAttributes,void 0,r,i);if(!1===s||null===s)return null;const{tr:a}=n,l=r[r.length-1],c=r[0];let d=o.to;if(l){const t=c.search(/\S/),r=o.from+c.indexOf(l),i=r+l.length;if(Ve(o.from,o.to,n.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>r).length)return null;i<o.to&&a.delete(i,o.to),r>o.from&&a.delete(o.from+t,r),d=o.from+t+l.length,a.addMark(o.from+t,d,e.type.create(s||{})),a.removeStoredMark(e.type)}}})}function ht(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof o.nh){const e=r.index();return r.parent.canReplaceWith(e,e+1,t)}let i=r.depth;for(;i>=0;){const e=r.index(i);if(r.node(i).contentMatchAt(e).matchType(t))return!0;i-=1}return!1}},141:e=>{e.exports=function(e){return void 0===e}},143:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},149:e=>{e.exports=function(e,t){for(var n=-1,o=null==e?0:e.length,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r}},191:(e,t,n)=>{"use strict";var o=n(5750);e.exports=i;var r="\0";function i(e){this._isDirected=!o.has(e,"directed")||e.directed,this._isMultigraph=!!o.has(e,"multigraph")&&e.multigraph,this._isCompound=!!o.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=o.constant(void 0),this._defaultEdgeLabelFn=o.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function s(e,t){e[t]?e[t]++:e[t]=1}function a(e,t){--e[t]||delete e[t]}function l(e,t,n,r){var i=""+t,s=""+n;if(!e&&i>s){var a=i;i=s,s=a}return i+"\x01"+s+"\x01"+(o.isUndefined(r)?"\0":r)}function c(e,t){return l(e,t.v,t.w,t.name)}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(e){return this._label=e,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(e){return o.isFunction(e)||(e=o.constant(e)),this._defaultNodeLabelFn=e,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return o.keys(this._nodes)},i.prototype.sources=function(){var e=this;return o.filter(this.nodes(),function(t){return o.isEmpty(e._in[t])})},i.prototype.sinks=function(){var e=this;return o.filter(this.nodes(),function(t){return o.isEmpty(e._out[t])})},i.prototype.setNodes=function(e,t){var n=arguments,r=this;return o.each(e,function(e){n.length>1?r.setNode(e,t):r.setNode(e)}),this},i.prototype.setNode=function(e,t){return o.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=r,this._children[e]={},this._children[r][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},i.prototype.node=function(e){return this._nodes[e]},i.prototype.hasNode=function(e){return o.has(this._nodes,e)},i.prototype.removeNode=function(e){var t=this;if(o.has(this._nodes,e)){var n=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],o.each(this.children(e),function(e){t.setParent(e)}),delete this._children[e]),o.each(o.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],o.each(o.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},i.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(o.isUndefined(t))t=r;else{for(var n=t+="";!o.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},i.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},i.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!==r)return t}},i.prototype.children=function(e){if(o.isUndefined(e)&&(e=r),this._isCompound){var t=this._children[e];if(t)return o.keys(t)}else{if(e===r)return this.nodes();if(this.hasNode(e))return[]}},i.prototype.predecessors=function(e){var t=this._preds[e];if(t)return o.keys(t)},i.prototype.successors=function(e){var t=this._sucs[e];if(t)return o.keys(t)},i.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return o.union(t,this.successors(e))},i.prototype.isLeaf=function(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length},i.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;o.each(this._nodes,function(n,o){e(o)&&t.setNode(o,n)}),o.each(this._edgeObjs,function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,n.edge(e))});var r={};function i(e){var o=n.parent(e);return void 0===o||t.hasNode(o)?(r[e]=o,o):o in r?r[o]:i(o)}return this._isCompound&&o.each(t.nodes(),function(e){t.setParent(e,i(e))}),t},i.prototype.setDefaultEdgeLabel=function(e){return o.isFunction(e)||(e=o.constant(e)),this._defaultEdgeLabelFn=e,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return o.values(this._edgeObjs)},i.prototype.setPath=function(e,t){var n=this,r=arguments;return o.reduce(e,function(e,o){return r.length>1?n.setEdge(e,o,t):n.setEdge(e,o),o}),this},i.prototype.setEdge=function(){var e,t,n,r,i=!1,a=arguments[0];"object"===typeof a&&null!==a&&"v"in a?(e=a.v,t=a.w,n=a.name,2===arguments.length&&(r=arguments[1],i=!0)):(e=a,t=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],i=!0)),e=""+e,t=""+t,o.isUndefined(n)||(n=""+n);var c=l(this._isDirected,e,t,n);if(o.has(this._edgeLabels,c))return i&&(this._edgeLabels[c]=r),this;if(!o.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[c]=i?r:this._defaultEdgeLabelFn(e,t,n);var d=function(e,t,n,o){var r=""+t,i=""+n;if(!e&&r>i){var s=r;r=i,i=s}var a={v:r,w:i};o&&(a.name=o);return a}(this._isDirected,e,t,n);return e=d.v,t=d.w,Object.freeze(d),this._edgeObjs[c]=d,s(this._preds[t],e),s(this._sucs[e],t),this._in[t][c]=d,this._out[e][c]=d,this._edgeCount++,this},i.prototype.edge=function(e,t,n){var o=1===arguments.length?c(this._isDirected,arguments[0]):l(this._isDirected,e,t,n);return this._edgeLabels[o]},i.prototype.hasEdge=function(e,t,n){var r=1===arguments.length?c(this._isDirected,arguments[0]):l(this._isDirected,e,t,n);return o.has(this._edgeLabels,r)},i.prototype.removeEdge=function(e,t,n){var o=1===arguments.length?c(this._isDirected,arguments[0]):l(this._isDirected,e,t,n),r=this._edgeObjs[o];return r&&(e=r.v,t=r.w,delete this._edgeLabels[o],delete this._edgeObjs[o],a(this._preds[t],e),a(this._sucs[e],t),delete this._in[t][o],delete this._out[e][o],this._edgeCount--),this},i.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var r=o.values(n);return t?o.filter(r,function(e){return e.v===t}):r}},i.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var r=o.values(n);return t?o.filter(r,function(e){return e.w===t}):r}},i.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))}},247:(e,t,n)=>{var o=n(5750),r=n(8808);e.exports=function(e){return o.filter(r(e),function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])})}},293:(e,t,n)=>{"use strict";n.d(t,{E:()=>r});var o=n(5043);const r=n(4735).B?o.useLayoutEffect:o.useEffect},310:(e,t,n)=>{var o=n(1817),r=n(5990),i=n(6140);e.exports=function(e){return"function"!=typeof e.constructor||i(e)?{}:o(r(e))}},320:e=>{e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},388:(e,t,n)=>{var o=n(8208),r=n(5641);function i(e,t,n){for(var r;t.length&&(r=o.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}e.exports=function(e,t){var n=r.partition(e,function(e){return o.has(e,"barycenter")}),s=n.lhs,a=o.sortBy(n.rhs,function(e){return-e.i}),l=[],c=0,d=0,u=0;s.sort((h=!!t,function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:h?t.i-e.i:e.i-t.i})),u=i(l,a,u),o.forEach(s,function(e){u+=e.vs.length,l.push(e.vs),c+=e.barycenter*e.weight,d+=e.weight,u=i(l,a,u)});var h;var p={vs:o.flatten(l,!0)};d&&(p.barycenter=c/d,p.weight=d);return p}},396:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},411:()=>{},438:(e,t,n)=>{var o=n(2622);e.exports=function(e){return o(this,e).get(e)}},449:(e,t,n)=>{var o=n(6924),r=n(2761);e.exports=function(e){return r(e)&&"[object Set]"==o(e)}},450:(e,t,n)=>{var o=n(755),r=n(5647),i=n(4416),s=n(6272),a=r(function(e){return i(o(e,1,s,!0))});e.exports=a},474:(e,t,n)=>{var o=n(823),r=n(8122),i=n(6571);e.exports=function(e){return i(e)?o(e,!0):r(e)}},539:(e,t,n)=>{var o=n(9742),r=n(7498),i=n(3279);e.exports=function(e){return e&&e.length?o(e,i,r):void 0}},550:(e,t,n)=>{"use strict";var o=n(8208),r=n(5819),i=n(4308),s=n(9791),a=n(1987),l=n(8381),c=n(7938).Graph,d=n(5641);function u(e,t,n){return o.map(t,function(t){return a(e,t,n)})}function h(e,t){var n=new c;o.forEach(e,function(e){var r=e.graph().root,i=s(e,r,n,t);o.forEach(i.vs,function(t,n){e.node(t).order=n}),l(e,n,i.vs)})}function p(e,t){o.forEach(t,function(t){o.forEach(t,function(t,n){e.node(t).order=n})})}e.exports=function(e){var t=d.maxRank(e),n=u(e,o.range(1,t+1),"inEdges"),s=u(e,o.range(t-1,-1,-1),"outEdges"),a=r(e);p(e,a);for(var l,c=Number.POSITIVE_INFINITY,f=0,m=0;m<4;++f,++m){h(f%2?n:s,f%4>=2),a=d.buildLayerMatrix(e);var g=i(e,a);g<c&&(m=0,l=o.cloneDeep(a),c=g)}p(e,l)}},614:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},620:(e,t,n)=>{var o=n(6913),r=n(4052),i=n(2761);e.exports=function(e){return"string"==typeof e||!r(e)&&i(e)&&"[object String]"==o(e)}},644:e=>{e.exports=function(e){return e!==e}},705:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},723:(e,t,n)=>{var o=n(7529),r=n(7171),i=n(9096),s=n(4052);e.exports=function(e,t){return(s(e)?o:r)(e,i(t,3))}},726:e=>{e.exports=function(e,t){for(var n=-1,o=null==e?0:e.length;++n<o&&!1!==t(e[n],n,e););return e}},755:(e,t,n)=>{var o=n(8895),r=n(7116);e.exports=function e(t,n,i,s,a){var l=-1,c=t.length;for(i||(i=r),a||(a=[]);++l<c;){var d=t[l];n>0&&i(d)?n>1?e(d,n-1,i,s,a):o(a,d):s||(a[a.length]=d)}return a}},764:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},793:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},801:(e,t,n)=>{var o=n(1141),r=n(6686),i=n(9841),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=o(e);var n=a.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):s.test(e)?NaN:+e}},819:(e,t,n)=>{var o=n(755);e.exports=function(e){return(null==e?0:e.length)?o(e,1):[]}},823:(e,t,n)=>{var o=n(3343),r=n(2777),i=n(4052),s=n(4543),a=n(9194),l=n(1268),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=i(e),d=!n&&r(e),u=!n&&!d&&s(e),h=!n&&!d&&!u&&l(e),p=n||d||u||h,f=p?o(e.length,String):[],m=f.length;for(var g in e)!t&&!c.call(e,g)||p&&("length"==g||u&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||a(g,m))||f.push(g);return f}},914:(e,t,n)=>{var o=n(9841);e.exports=function(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},929:(e,t,n)=>{var o=n(3211),r=n(6571),i=n(9194),s=n(6686);e.exports=function(e,t,n){if(!s(n))return!1;var a=typeof t;return!!("number"==a?r(n)&&i(t,n.length):"string"==a&&t in n)&&o(n[t],e)}},954:(e,t,n)=>{"use strict";n.d(t,{A:()=>we});var o=n(129);const r=/^\s*>\s$/,i=o.bP.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML(e){let{HTMLAttributes:t}=e;return["blockquote",(0,o.KV)(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>e=>{let{commands:t}=e;return t.wrapIn(this.name)},toggleBlockquote:()=>e=>{let{commands:t}=e;return t.toggleWrap(this.name)},unsetBlockquote:()=>e=>{let{commands:t}=e;return t.lift(this.name)}}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,o.tG)({find:r,type:this.type})]}}),s=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,a=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,l=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,c=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,d=o.CU.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML(e){let{HTMLAttributes:t}=e;return["strong",(0,o.KV)(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleBold:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetBold:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,o.OX)({find:s,type:this.type}),(0,o.OX)({find:l,type:this.type})]},addPasteRules(){return[(0,o.Zc)({find:a,type:this.type}),(0,o.Zc)({find:c,type:this.type})]}}),u="textStyle",h=/^\s*([-+*])\s$/,p=o.bP.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML(e){let{HTMLAttributes:t}=e;return["ul",(0,o.KV)(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>e=>{let{commands:t,chain:n}=e;return this.options.keepAttributes?n().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(u)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=(0,o.tG)({find:h,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=(0,o.tG)({find:h,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(u),editor:this.editor})),[e]}}),f=/(^|[^`])`([^`]+)`(?!`)/,m=/(^|[^`])`([^`]+)`(?!`)/g,g=o.CU.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML(e){let{HTMLAttributes:t}=e;return["code",(0,o.KV)(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleCode:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetCode:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,o.OX)({find:f,type:this.type})]},addPasteRules(){return[(0,o.Zc)({find:m,type:this.type})]}});var y=n(7184);const v=/^```([a-z]+)?[\s\n]$/,x=/^~~~([a-z]+)?[\s\n]$/,b=o.bP.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,o=[...(null===(t=e.firstElementChild)||void 0===t?void 0:t.classList)||[]].filter(e=>e.startsWith(n)).map(e=>e.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML(e){let{node:t,HTMLAttributes:n}=e;return["pre",(0,o.KV)(this.options.HTMLAttributes,n),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>t=>{let{commands:n}=t;return n.setNode(this.name,e)},toggleCodeBlock:e=>t=>{let{commands:n}=t;return n.toggleNode(this.name,"paragraph",e)}}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=1===t.pos;return!(!e||t.parent.type.name!==this.name)&&(!(!n&&t.parent.textContent.length)&&this.editor.commands.clearNodes())},Enter:e=>{let{editor:t}=e;if(!this.options.exitOnTripleEnter)return!1;const{state:n}=t,{selection:o}=n,{$from:r,empty:i}=o;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,a=r.parent.textContent.endsWith("\n\n");return!(!s||!a)&&t.chain().command(e=>{let{tr:t}=e;return t.delete(r.pos-2,r.pos),!0}).exitCode().run()},ArrowDown:e=>{let{editor:t}=e;if(!this.options.exitOnArrowDown)return!1;const{state:n}=t,{selection:o,doc:r}=n,{$from:i,empty:s}=o;if(!s||i.parent.type!==this.type)return!1;if(!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();if(void 0===a)return!1;return r.nodeAt(a)?t.commands.command(e=>{let{tr:t}=e;return t.setSelection(y.LN.near(r.resolve(a))),!0}):t.commands.exitCode()}}},addInputRules(){return[(0,o.JJ)({find:v,type:this.type,getAttributes:e=>({language:e[1]})}),(0,o.JJ)({find:x,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new y.k_({key:new y.hs("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData)return!1;if(this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),o=t.clipboardData.getData("vscode-editor-data"),r=o?JSON.parse(o):void 0,i=null===r||void 0===r?void 0:r.mode;if(!n||!i)return!1;const{tr:s,schema:a}=e.state,l=a.text(n.replace(/\r\n?/g,"\n"));return s.replaceSelectionWith(this.type.create({language:i},l)),s.selection.$from.parent.type!==this.type&&s.setSelection(y.U3.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),e.dispatch(s),!0}}})]}}),w=o.bP.create({name:"doc",topNode:!0,content:"block+"});var S=n(8115);function k(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new y.k_({view:t=>new E(t,e)})}class E{constructor(e,t){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(n=t.width)&&void 0!==n?n:1,this.color=!1===t.color?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(t=>{let n=e=>{this[t](e)};return e.dom.addEventListener(t,n),{name:t,handler:n}})}destroy(){this.handlers.forEach(e=>{let{name:t,handler:n}=e;return this.editorView.dom.removeEventListener(t,n)})}update(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e,t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,o=this.editorView.dom,r=o.getBoundingClientRect(),i=r.width/o.offsetWidth,s=r.height/o.offsetHeight;if(n){let n=t.nodeBefore,o=t.nodeAfter;if(n||o){let t=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0));if(t){let r=t.getBoundingClientRect(),i=n?r.bottom:r.top;n&&o&&(i=(i+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let a=this.width/2*s;e={left:r.left,right:r.right,top:i-a,bottom:i+a}}}}if(!e){let t=this.editorView.coordsAtPos(this.cursorPos),n=this.width/2*i;e={left:t.left-n,right:t.left+n,top:t.top,bottom:t.bottom}}let a,l,c=this.editorView.dom.offsetParent;if(this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),!c||c==document.body&&"static"==getComputedStyle(c).position)a=-pageXOffset,l=-pageYOffset;else{let e=c.getBoundingClientRect(),t=e.width/c.offsetWidth,n=e.height/c.offsetHeight;a=e.left-c.scrollLeft*t,l=e.top-c.scrollTop*n}this.element.style.left=(e.left-a)/i+"px",this.element.style.top=(e.top-l)/s+"px",this.element.style.width=(e.right-e.left)/i+"px",this.element.style.height=(e.bottom-e.top)/s+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),o=n&&n.type.spec.disableDropCursor,r="function"==typeof o?o(this.editorView,t,e):o;if(t&&!r){let e=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let t=(0,S.Um)(this.editorView.state.doc,e,this.editorView.dragging.slice);null!=t&&(e=t)}this.setCursor(e),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const C=o.YY.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[k(this.options)]}});var M=n(2195),O=n(4282),T=n(1140);class A extends y.LN{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return A.valid(n)?new A(n):y.LN.near(n)}content(){return O.Ji.empty}eq(e){return e instanceof A&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new A(e.resolve(t.pos))}getBookmark(){return new N(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!function(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),o=e.node(t);if(0!=n)for(let e=o.child(n-1);;e=e.lastChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(o.type.spec.isolating)return!0}return!0}(e)||!function(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),o=e.node(t);if(n!=o.childCount)for(let e=o.child(n);;e=e.firstChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(o.type.spec.isolating)return!0}return!0}(e))return!1;let n=t.type.spec.allowGapCursor;if(null!=n)return n;let o=t.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e:for(;;){if(!n&&A.valid(e))return e;let o=e.pos,r=null;for(let n=e.depth;;n--){let i=e.node(n);if(t>0?e.indexAfter(n)<i.childCount:e.index(n)>0){r=i.child(t>0?e.indexAfter(n):e.index(n)-1);break}if(0==n)return null;o+=t;let s=e.doc.resolve(o);if(A.valid(s))return s}for(;;){let i=t>0?r.firstChild:r.lastChild;if(!i){if(r.isAtom&&!r.isText&&!y.nh.isSelectable(r)){e=e.doc.resolve(o+r.nodeSize*t),n=!1;continue e}break}r=i,o+=t;let s=e.doc.resolve(o);if(A.valid(s))return s}return null}}}A.prototype.visible=!1,A.findFrom=A.findGapCursorFrom,y.LN.jsonID("gapcursor",A);class N{constructor(e){this.pos=e}map(e){return new N(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return A.valid(t)?new A(t):y.LN.near(t)}}const P=(0,M.K)({ArrowLeft:D("horiz",-1),ArrowRight:D("horiz",1),ArrowUp:D("vert",-1),ArrowDown:D("vert",1)});function D(e,t){const n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,o,r){let i=e.selection,s=t>0?i.$to:i.$from,a=i.empty;if(i instanceof y.U3){if(!r.endOfTextblock(n)||0==s.depth)return!1;a=!1,s=e.doc.resolve(t>0?s.after():s.before())}let l=A.findGapCursorFrom(s,t,a);return!!l&&(o&&o(e.tr.setSelection(new A(l))),!0)}}function R(e,t,n){if(!e||!e.editable)return!1;let o=e.state.doc.resolve(t);if(!A.valid(o))return!1;let r=e.posAtCoords({left:n.clientX,top:n.clientY});return!(r&&r.inside>-1&&y.nh.isSelectable(e.state.doc.nodeAt(r.inside)))&&(e.dispatch(e.state.tr.setSelection(new A(o))),!0)}function I(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof A))return!1;let{$from:n}=e.state.selection,o=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!o)return!1;let r=O.FK.empty;for(let s=o.length-1;s>=0;s--)r=O.FK.from(o[s].createAndFill(null,r));let i=e.state.tr.replace(n.pos,n.pos,new O.Ji(r,0,0));return i.setSelection(y.U3.near(i.doc.resolve(n.pos+1))),e.dispatch(i),!1}function L(e){if(!(e.selection instanceof A))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",T.zF.create(e.doc,[T.NZ.widget(e.selection.head,t,{key:"gapcursor"})])}const j=o.YY.create({name:"gapCursor",addProseMirrorPlugins:()=>[new y.k_({props:{decorations:L,createSelectionBetween:(e,t,n)=>t.pos==n.pos&&A.valid(n)?new A(n):null,handleClick:R,handleKeyDown:P,handleDOMEvents:{beforeinput:I}}})],extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:null!==(t=(0,o.gk)((0,o.iI)(e,"allowGapCursor",n)))&&void 0!==t?t:null}}}),B=o.bP.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML:()=>[{tag:"br"}],renderHTML(e){let{HTMLAttributes:t}=e;return["br",(0,o.KV)(this.options.HTMLAttributes,t)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>e=>{let{commands:t,chain:n,state:o,editor:r}=e;return t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:e,storedMarks:t}=o;if(e.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:s}=r.extensionManager,a=t||e.$to.parentOffset&&e.$from.marks();return n().insertContent({type:this.name}).command(e=>{let{tr:t,dispatch:n}=e;if(n&&a&&i){const e=a.filter(e=>s.includes(e.type.name));t.ensureMarks(e)}return!0}).run()})])}}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),_=o.bP.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML(e){let{node:t,HTMLAttributes:n}=e;return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,(0,o.KV)(this.options.HTMLAttributes,n),0]},addCommands(){return{setHeading:e=>t=>{let{commands:n}=t;return!!this.options.levels.includes(e.level)&&n.setNode(this.name,e)},toggleHeading:e=>t=>{let{commands:n}=t;return!!this.options.levels.includes(e.level)&&n.toggleNode(this.name,"paragraph",e)}}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>(0,o.JJ)({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}});var V=200,z=function(){};z.prototype.append=function(e){return e.length?(e=z.from(e),!this.length&&e||e.length<V&&this.leafAppend(e)||this.length<V&&e.leafPrepend(this)||this.appendInner(e)):this},z.prototype.prepend=function(e){return e.length?z.from(e).append(this):this},z.prototype.appendInner=function(e){return new $(this,e)},z.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?z.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},z.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},z.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},z.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var o=[];return this.forEach(function(t,n){return o.push(e(t,n))},t,n),o},z.from=function(e){return e instanceof z?e:e&&e.length?new F(e):z.empty};var F=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,o){for(var r=t;r<n;r++)if(!1===e(this.values[r],o+r))return!1},t.prototype.forEachInvertedInner=function(e,t,n,o){for(var r=t-1;r>=n;r--)if(!1===e(this.values[r],o+r))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=V)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=V)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(z);z.empty=new F([]);var $=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,o){var r=this.left.length;return!(t<r&&!1===this.left.forEachInner(e,t,Math.min(n,r),o))&&(!(n>r&&!1===this.right.forEachInner(e,Math.max(t-r,0),Math.min(this.length,n)-r,o+r))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,o){var r=this.left.length;return!(t>r&&!1===this.right.forEachInvertedInner(e,t-r,Math.max(n,r)-r,o+r))&&(!(n<r&&!1===this.left.forEachInvertedInner(e,Math.min(t,r),n,o))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(z);const H=z;class U{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(0==this.eventCount)return null;let n,o,r=this.items.length;for(;;r--){if(this.items.get(r-1).selection){--r;break}}t&&(n=this.remapping(r,this.items.length),o=n.maps.length);let i,s,a=e.tr,l=[],c=[];return this.items.forEach((e,t)=>{if(!e.step)return n||(n=this.remapping(r,t+1),o=n.maps.length),o--,void c.push(e);if(n){c.push(new K(e.map));let t,r=e.step.map(n.slice(o));r&&a.maybeStep(r).doc&&(t=a.mapping.maps[a.mapping.maps.length-1],l.push(new K(t,void 0,void 0,l.length+c.length))),o--,t&&n.appendMap(t,o)}else a.maybeStep(e.step);return e.selection?(i=n?e.selection.map(n.slice(o)):e.selection,s=new U(this.items.slice(0,r).append(c.reverse().concat(l)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:s,transform:a,selection:i}}addTransform(e,t,n,o){let r=[],i=this.eventCount,s=this.items,a=!o&&s.length?s.get(s.length-1):null;for(let c=0;c<e.steps.length;c++){let n,l=e.steps[c].invert(e.docs[c]),d=new K(e.mapping.maps[c],l,t);(n=a&&a.merge(d))&&(d=n,c?r.pop():s=s.slice(0,s.length-1)),r.push(d),t&&(i++,t=void 0),o||(a=d)}let l=i-n.depth;return l>q&&(s=function(e,t){let n;return e.forEach((e,o)=>{if(e.selection&&0==t--)return n=o,!1}),e.slice(n)}(s,l),i-=l),new U(s.append(r),i)}remapping(e,t){let n=new S.X9;return this.items.forEach((t,o)=>{let r=null!=t.mirrorOffset&&o-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,r)},e,t),n}addMaps(e){return 0==this.eventCount?this:new U(this.items.append(e.map(e=>new K(e))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],o=Math.max(0,this.items.length-t),r=e.mapping,i=e.steps.length,s=this.eventCount;this.items.forEach(e=>{e.selection&&s--},o);let a=t;this.items.forEach(t=>{let o=r.getMirror(--a);if(null==o)return;i=Math.min(i,o);let l=r.maps[o];if(t.step){let i=e.steps[o].invert(e.docs[o]),c=t.selection&&t.selection.map(r.slice(a+1,o));c&&s++,n.push(new K(l,i,c))}else n.push(new K(l))},o);let l=[];for(let u=t;u<i;u++)l.push(new K(r.maps[u]));let c=this.items.slice(0,o).append(l).append(n),d=new U(c,s);return d.emptyItemCount()>500&&(d=d.compress(this.items.length-n.length)),d}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items.length,t=this.remapping(0,e),n=t.maps.length,o=[],r=0;return this.items.forEach((i,s)=>{if(s>=e)o.push(i),i.selection&&r++;else if(i.step){let e=i.step.map(t.slice(n)),s=e&&e.getMap();if(n--,s&&t.appendMap(s,n),e){let a=i.selection&&i.selection.map(t.slice(n));a&&r++;let l,c=new K(s.invert(),e,a),d=o.length-1;(l=o.length&&o[d].merge(c))?o[d]=l:o.push(c)}}else i.map&&n--},this.items.length,0),new U(H.from(o.reverse()),r)}}U.empty=new U(H.empty,0);class K{constructor(e,t,n,o){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new K(t.getMap().invert(),t,this.selection)}}}class W{constructor(e,t,n,o,r){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=o,this.prevComposition=r}}const q=20;function J(e){let t=[];for(let n=e.length-1;n>=0&&0==t.length;n--)e[n].forEach((e,n,o,r)=>t.push(o,r));return t}function X(e,t){if(!e)return null;let n=[];for(let o=0;o<e.length;o+=2){let r=t.map(e[o],1),i=t.map(e[o+1],-1);r<=i&&n.push(r,i)}return n}let Z=!1,Y=null;function G(e){let t=e.plugins;if(Y!=t){Z=!1,Y=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){Z=!0;break}}return Z}const Q=new y.hs("history"),ee=new y.hs("closeHistory");function te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new y.k_({key:Q,state:{init:()=>new W(U.empty,U.empty,null,0,-1),apply:(t,n,o)=>function(e,t,n,o){let r,i=n.getMeta(Q);if(i)return i.historyState;n.getMeta(ee)&&(e=new W(e.done,e.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(Q))return s.getMeta(Q).redo?new W(e.done.addTransform(n,void 0,o,G(t)),e.undone,J(n.mapping.maps),e.prevTime,e.prevComposition):new W(e.done,e.undone.addTransform(n,void 0,o,G(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(r=n.getMeta("rebased"))?new W(e.done.rebased(n,r),e.undone.rebased(n,r),X(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new W(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),X(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);{let r=n.getMeta("composition"),i=0==e.prevTime||!s&&e.prevComposition!=r&&(e.prevTime<(n.time||0)-o.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((e,o)=>{for(let r=0;r<t.length;r+=2)e<=t[r+1]&&o>=t[r]&&(n=!0)}),n}(n,e.prevRanges)),a=s?X(e.prevRanges,n.mapping):J(n.mapping.maps);return new W(e.done.addTransform(n,i?t.selection.getBookmark():void 0,o,G(t)),U.empty,a,n.time,null==r?e.prevComposition:r)}}(n,o,t,e)},config:e,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,o="historyUndo"==n?oe:"historyRedo"==n?re:null;return!!o&&(t.preventDefault(),o(e.state,e.dispatch))}}}})}function ne(e,t){return(n,o)=>{let r=Q.getState(n);if(!r||0==(e?r.undone:r.done).eventCount)return!1;if(o){let i=function(e,t,n){let o=G(t),r=Q.get(t).spec.config,i=(n?e.undone:e.done).popEvent(t,o);if(!i)return null;let s=i.selection.resolve(i.transform.doc),a=(n?e.done:e.undone).addTransform(i.transform,t.selection.getBookmark(),r,o),l=new W(n?a:i.remaining,n?i.remaining:a,null,0,-1);return i.transform.setSelection(s).setMeta(Q,{redo:n,historyState:l})}(r,n,e);i&&o(t?i.scrollIntoView():i)}return!0}}const oe=ne(!1,!0),re=ne(!0,!0);ne(!1,!1),ne(!0,!1);const ie=o.YY.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>e=>{let{state:t,dispatch:n}=e;return oe(t,n)},redo:()=>e=>{let{state:t,dispatch:n}=e;return re(t,n)}}),addProseMirrorPlugins(){return[te(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-\u044f":()=>this.editor.commands.undo(),"Shift-Mod-\u044f":()=>this.editor.commands.redo()}}}),se=o.bP.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML(e){let{HTMLAttributes:t}=e;return["hr",(0,o.KV)(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>e=>{let{chain:t,state:n}=e;if(!(0,o.AB)(n,n.schema.nodes[this.name]))return!1;const{selection:r}=n,{$from:i,$to:s}=r,a=t();return 0===i.parentOffset?a.insertContentAt({from:Math.max(i.pos-1,0),to:s.pos},{type:this.name}):(0,o.BQ)(r)?a.insertContentAt(s.pos,{type:this.name}):a.insertContent({type:this.name}),a.command(e=>{let{tr:t,dispatch:n}=e;var o;if(n){const{$to:e}=t.selection,n=e.end();if(e.nodeAfter)e.nodeAfter.isTextblock?t.setSelection(y.U3.create(t.doc,e.pos+1)):e.nodeAfter.isBlock?t.setSelection(y.nh.create(t.doc,e.pos)):t.setSelection(y.U3.create(t.doc,e.pos));else{const r=null===(o=e.parent.type.contentMatch.defaultType)||void 0===o?void 0:o.create();r&&(t.insert(n,r),t.setSelection(y.U3.create(t.doc,n+1)))}t.scrollIntoView()}return!0}).run()}}},addInputRules(){return[(0,o.jT)({find:/^(?:---|\u2014-|___\s|\*\*\*\s)$/,type:this.type})]}}),ae=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,le=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,ce=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,de=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,ue=o.CU.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>"normal"!==e.style.fontStyle&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML(e){let{HTMLAttributes:t}=e;return["em",(0,o.KV)(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleItalic:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetItalic:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,o.OX)({find:ae,type:this.type}),(0,o.OX)({find:ce,type:this.type})]},addPasteRules(){return[(0,o.Zc)({find:le,type:this.type}),(0,o.Zc)({find:de,type:this.type})]}}),he=o.bP.create({name:"listItem",addOptions:()=>({HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML(e){let{HTMLAttributes:t}=e;return["li",(0,o.KV)(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),pe="textStyle",fe=/^(\d+)\.\s$/,me=o.bP.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}),parseHTML:()=>[{tag:"ol"}],renderHTML(e){let{HTMLAttributes:t}=e;const{start:n,...r}=t;return 1===n?["ol",(0,o.KV)(this.options.HTMLAttributes,r),0]:["ol",(0,o.KV)(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>e=>{let{commands:t,chain:n}=e;return this.options.keepAttributes?n().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(pe)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=(0,o.tG)({find:fe,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=(0,o.tG)({find:fe,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(pe)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[e]}}),ge=o.bP.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML(e){let{HTMLAttributes:t}=e;return["p",(0,o.KV)(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>e=>{let{commands:t}=e;return t.setNode(this.name)}}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),ye=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,ve=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,xe=o.CU.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("line-through")&&{}}],renderHTML(e){let{HTMLAttributes:t}=e;return["s",(0,o.KV)(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleStrike:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetStrike:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,o.OX)({find:ye,type:this.type})]},addPasteRules(){return[(0,o.Zc)({find:ve,type:this.type})]}}),be=o.bP.create({name:"text",group:"inline"}),we=o.YY.create({name:"starterKit",addExtensions(){const e=[];return!1!==this.options.bold&&e.push(d.configure(this.options.bold)),!1!==this.options.blockquote&&e.push(i.configure(this.options.blockquote)),!1!==this.options.bulletList&&e.push(p.configure(this.options.bulletList)),!1!==this.options.code&&e.push(g.configure(this.options.code)),!1!==this.options.codeBlock&&e.push(b.configure(this.options.codeBlock)),!1!==this.options.document&&e.push(w.configure(this.options.document)),!1!==this.options.dropcursor&&e.push(C.configure(this.options.dropcursor)),!1!==this.options.gapcursor&&e.push(j.configure(this.options.gapcursor)),!1!==this.options.hardBreak&&e.push(B.configure(this.options.hardBreak)),!1!==this.options.heading&&e.push(_.configure(this.options.heading)),!1!==this.options.history&&e.push(ie.configure(this.options.history)),!1!==this.options.horizontalRule&&e.push(se.configure(this.options.horizontalRule)),!1!==this.options.italic&&e.push(ue.configure(this.options.italic)),!1!==this.options.listItem&&e.push(he.configure(this.options.listItem)),!1!==this.options.orderedList&&e.push(me.configure(this.options.orderedList)),!1!==this.options.paragraph&&e.push(ge.configure(this.options.paragraph)),!1!==this.options.strike&&e.push(xe.configure(this.options.strike)),!1!==this.options.text&&e.push(be.configure(this.options.text)),e}})},1051:(e,t,n)=>{"use strict";n.d(t,{Q:()=>o});const o=(0,n(5043).createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"})},1069:(e,t,n)=>{var o=n(8541);e.exports=function(e){return null==e?"":o(e)}},1097:(e,t,n)=>{var o=n(5750),r=n(191);function i(e){return o.map(e.nodes(),function(t){var n=e.node(t),r=e.parent(t),i={v:t};return o.isUndefined(n)||(i.value=n),o.isUndefined(r)||(i.parent=r),i})}function s(e){return o.map(e.edges(),function(t){var n=e.edge(t),r={v:t.v,w:t.w};return o.isUndefined(t.name)||(r.name=t.name),o.isUndefined(n)||(r.value=n),r})}e.exports={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:i(e),edges:s(e)};o.isUndefined(e.graph())||(t.value=o.clone(e.graph()));return t},read:function(e){var t=new r(e.options).setGraph(e.value);return o.each(e.nodes,function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)}),o.each(e.edges,function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)}),t}}},1104:(e,t,n)=>{var o=n(6614),r=n(8673);e.exports=function(e,t){return e&&o(t,r(t),e)}},1140:(e,t,n)=>{"use strict";n.d(t,{Lz:()=>yn,NZ:()=>$t,zF:()=>Kt});var o=n(7184),r=n(4282),i=n(8115);const s=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},a=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t};let l=null;const c=function(e,t,n){let o=l||(l=document.createRange());return o.setEnd(e,null==n?e.nodeValue.length:n),o.setStart(e,t||0),o},d=function(e,t,n,o){return n&&(h(e,t,n,o,-1)||h(e,t,n,o,1))},u=/^(img|br|input|textarea|hr)$/i;function h(e,t,n,o,r){for(var i;;){if(e==n&&t==o)return!0;if(t==(r<0?0:p(e))){let n=e.parentNode;if(!n||1!=n.nodeType||f(e)||u.test(e.nodeName)||"false"==e.contentEditable)return!1;t=s(e)+(r<0?0:1),e=n}else{if(1!=e.nodeType)return!1;{let n=e.childNodes[t+(r<0?-1:0)];if(1==n.nodeType&&"false"==n.contentEditable){if(!(null===(i=n.pmViewDesc)||void 0===i?void 0:i.ignoreForSelection))return!1;t+=r}else e=n,t=r<0?p(e):0}}}}function p(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function f(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const m=function(e){return e.focusNode&&d(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function g(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}const y="undefined"!=typeof navigator?navigator:null,v="undefined"!=typeof document?document:null,x=y&&y.userAgent||"",b=/Edge\/(\d+)/.exec(x),w=/MSIE \d/.exec(x),S=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(x),k=!!(w||S||b),E=w?document.documentMode:S?+S[1]:b?+b[1]:0,C=!k&&/gecko\/(\d+)/i.test(x);C&&(/Firefox\/(\d+)/.exec(x)||[0,0])[1];const M=!k&&/Chrome\/(\d+)/.exec(x),O=!!M,T=M?+M[1]:0,A=!k&&!!y&&/Apple Computer/.test(y.vendor),N=A&&(/Mobile\/\w+/.test(x)||!!y&&y.maxTouchPoints>2),P=N||!!y&&/Mac/.test(y.platform),D=!!y&&/Win/.test(y.platform),R=/Android \d/.test(x),I=!!v&&"webkitFontSmoothing"in v.documentElement.style,L=I?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function j(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function B(e,t){return"number"==typeof e?e:e[t]}function _(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,o=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*o}}function V(e,t,n){let o=e.someProp("scrollThreshold")||0,r=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument;for(let s=n||e.dom;s;){if(1!=s.nodeType){s=a(s);continue}let e=s,n=e==i.body,l=n?j(i):_(e),c=0,d=0;if(t.top<l.top+B(o,"top")?d=-(l.top-t.top+B(r,"top")):t.bottom>l.bottom-B(o,"bottom")&&(d=t.bottom-t.top>l.bottom-l.top?t.top+B(r,"top")-l.top:t.bottom-l.bottom+B(r,"bottom")),t.left<l.left+B(o,"left")?c=-(l.left-t.left+B(r,"left")):t.right>l.right-B(o,"right")&&(c=t.right-l.right+B(r,"right")),c||d)if(n)i.defaultView.scrollBy(c,d);else{let n=e.scrollLeft,o=e.scrollTop;d&&(e.scrollTop+=d),c&&(e.scrollLeft+=c);let r=e.scrollLeft-n,i=e.scrollTop-o;t={left:t.left-r,top:t.top-i,right:t.right-r,bottom:t.bottom-i}}let u=n?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(u))break;s="absolute"==u?s.offsetParent:a(s)}}function z(e){let t=[],n=e.ownerDocument;for(let o=e;o&&(t.push({dom:o,top:o.scrollTop,left:o.scrollLeft}),e!=n);o=a(o));return t}function F(e,t){for(let n=0;n<e.length;n++){let{dom:o,top:r,left:i}=e[n];o.scrollTop!=r+t&&(o.scrollTop=r+t),o.scrollLeft!=i&&(o.scrollLeft=i)}}let $=null;function H(e,t){let n,o,r,i,s=2e8,a=0,l=t.top,d=t.top;for(let u=e.firstChild,h=0;u;u=u.nextSibling,h++){let e;if(1==u.nodeType)e=u.getClientRects();else{if(3!=u.nodeType)continue;e=c(u).getClientRects()}for(let c=0;c<e.length;c++){let p=e[c];if(p.top<=l&&p.bottom>=d){l=Math.max(p.bottom,l),d=Math.min(p.top,d);let e=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(e<s){n=u,s=e,o=e&&3==n.nodeType?{left:p.right<t.left?p.right:p.left,top:t.top}:t,1==u.nodeType&&e&&(a=h+(t.left>=(p.left+p.right)/2?1:0));continue}}else p.top>t.top&&!r&&p.left<=t.left&&p.right>=t.left&&(r=u,i={left:Math.max(p.left,Math.min(p.right,t.left)),top:p.top});!n&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(a=h+1)}}return!n&&r&&(n=r,o=i,s=0),n&&3==n.nodeType?function(e,t){let n=e.nodeValue.length,o=document.createRange();for(let r=0;r<n;r++){o.setEnd(e,r+1),o.setStart(e,r);let n=J(o,1);if(n.top!=n.bottom&&U(t,n))return{node:e,offset:r+(t.left>=(n.left+n.right)/2?1:0)}}return{node:e,offset:0}}(n,o):!n||s&&1==n.nodeType?{node:e,offset:a}:H(n,o)}function U(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function K(e,t,n){let o=e.childNodes.length;if(o&&n.top<n.bottom)for(let r=Math.max(0,Math.min(o-1,Math.floor(o*(t.top-n.top)/(n.bottom-n.top))-2)),i=r;;){let n=e.childNodes[i];if(1==n.nodeType){let e=n.getClientRects();for(let o=0;o<e.length;o++){let r=e[o];if(U(t,r))return K(n,t,r)}}if((i=(i+1)%o)==r)break}return e}function W(e,t){let n,o=e.dom.ownerDocument,r=0,i=function(e,t,n){if(e.caretPositionFromPoint)try{let o=e.caretPositionFromPoint(t,n);if(o)return{node:o.offsetNode,offset:Math.min(p(o.offsetNode),o.offset)}}catch(o){}if(e.caretRangeFromPoint){let o=e.caretRangeFromPoint(t,n);if(o)return{node:o.startContainer,offset:Math.min(p(o.startContainer),o.startOffset)}}}(o,t.left,t.top);i&&({node:n,offset:r}=i);let s,l=(e.root.elementFromPoint?e.root:o).elementFromPoint(t.left,t.top);if(!l||!e.dom.contains(1!=l.nodeType?l.parentNode:l)){let n=e.dom.getBoundingClientRect();if(!U(t,n))return null;if(l=K(e.dom,t,n),!l)return null}if(A)for(let d=l;n&&d;d=a(d))d.draggable&&(n=void 0);if(l=function(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(l,t),n){if(C&&1==n.nodeType&&(r=Math.min(r,n.childNodes.length),r<n.childNodes.length)){let e,o=n.childNodes[r];"IMG"==o.nodeName&&(e=o.getBoundingClientRect()).right<=t.left&&e.bottom>t.top&&r++}let o;I&&r&&1==n.nodeType&&1==(o=n.childNodes[r-1]).nodeType&&"false"==o.contentEditable&&o.getBoundingClientRect().top>=t.top&&r--,n==e.dom&&r==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?s=e.state.doc.content.size:0!=r&&1==n.nodeType&&"BR"==n.childNodes[r-1].nodeName||(s=function(e,t,n,o){let r=-1;for(let i=t,s=!1;i!=e.dom;){let t,n=e.docView.nearestDesc(i,!0);if(!n)return null;if(1==n.dom.nodeType&&(n.node.isBlock&&n.parent||!n.contentDOM)&&((t=n.dom.getBoundingClientRect()).width||t.height)&&(n.node.isBlock&&n.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(n.dom.nodeName)&&(!s&&t.left>o.left||t.top>o.top?r=n.posBefore:(!s&&t.right<o.left||t.bottom<o.top)&&(r=n.posAfter),s=!0),!n.contentDOM&&r<0&&!n.node.isText))return(n.node.isBlock?o.top<(t.top+t.bottom)/2:o.left<(t.left+t.right)/2)?n.posBefore:n.posAfter;i=n.dom.parentNode}return r>-1?r:e.docView.posFromDOM(t,n,-1)}(e,n,r,t))}null==s&&(s=function(e,t,n){let{node:o,offset:r}=H(t,n),i=-1;if(1==o.nodeType&&!o.firstChild){let e=o.getBoundingClientRect();i=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(o,r,i)}(e,l,t));let c=e.docView.nearestDesc(l,!0);return{pos:s,inside:c?c.posAtStart-c.border:-1}}function q(e){return e.top<e.bottom||e.left<e.right}function J(e,t){let n=e.getClientRects();if(n.length){let e=n[t<0?0:n.length-1];if(q(e))return e}return Array.prototype.find.call(n,q)||e.getBoundingClientRect()}const X=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Z(e,t,n){let{node:o,offset:r,atom:i}=e.docView.domFromPos(t,n<0?-1:1),s=I||C;if(3==o.nodeType){if(!s||!X.test(o.nodeValue)&&(n<0?r:r!=o.nodeValue.length)){let e=r,t=r,i=n<0?1:-1;return n<0&&!r?(t++,i=-1):n>=0&&r==o.nodeValue.length?(e--,i=1):n<0?e--:t++,Y(J(c(o,e,t),i),i<0)}{let e=J(c(o,r,r),n);if(C&&r&&/\s/.test(o.nodeValue[r-1])&&r<o.nodeValue.length){let t=J(c(o,r-1,r-1),-1);if(t.top==e.top){let n=J(c(o,r,r+1),-1);if(n.top!=e.top)return Y(n,n.left<t.left)}}return e}}if(!e.state.doc.resolve(t-(i||0)).parent.inlineContent){if(null==i&&r&&(n<0||r==p(o))){let e=o.childNodes[r-1];if(1==e.nodeType)return G(e.getBoundingClientRect(),!1)}if(null==i&&r<p(o)){let e=o.childNodes[r];if(1==e.nodeType)return G(e.getBoundingClientRect(),!0)}return G(o.getBoundingClientRect(),n>=0)}if(null==i&&r&&(n<0||r==p(o))){let e=o.childNodes[r-1],t=3==e.nodeType?c(e,p(e)-(s?0:1)):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return Y(J(t,1),!1)}if(null==i&&r<p(o)){let e=o.childNodes[r];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?c(e,0,s?0:1):1==e.nodeType?e:null:null;if(t)return Y(J(t,-1),!0)}return Y(J(3==o.nodeType?c(o):o,-n),n>=0)}function Y(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function G(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function Q(e,t,n){let o=e.state,r=e.root.activeElement;o!=t&&e.updateState(t),r!=e.dom&&e.focus();try{return n()}finally{o!=t&&e.updateState(o),r!=e.dom&&r&&r.focus()}}const ee=/[\u0590-\u08ac]/;let te=null,ne=null,oe=!1;function re(e,t,n){return te==t&&ne==n?oe:(te=t,ne=n,oe="up"==n||"down"==n?function(e,t,n){let o=t.selection,r="up"==n?o.$from:o.$to;return Q(e,t,()=>{let{node:t}=e.docView.domFromPos(r.pos,"up"==n?-1:1);for(;;){let n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.contentDOM||n.dom;break}t=n.dom.parentNode}let o=Z(e,r.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=c(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let r=t[e];if(r.bottom>r.top+1&&("up"==n?o.top-r.top>2*(r.bottom-o.top):r.bottom-o.bottom>2*(o.bottom-r.top)))return!1}}return!0})}(e,t,n):function(e,t,n){let{$head:o}=t.selection;if(!o.parent.isTextblock)return!1;let r=o.parentOffset,i=!r,s=r==o.parent.content.size,a=e.domSelection();return a?ee.test(o.parent.textContent)&&a.modify?Q(e,t,()=>{let{focusNode:t,focusOffset:r,anchorNode:i,anchorOffset:s}=e.domSelectionRange(),l=a.caretBidiLevel;a.modify("move",n,"character");let c=o.depth?e.docView.domAfterPos(o.before()):e.dom,{focusNode:d,focusOffset:u}=e.domSelectionRange(),h=d&&!c.contains(1==d.nodeType?d:d.parentNode)||t==d&&r==u;try{a.collapse(i,s),t&&(t!=i||r!=s)&&a.extend&&a.extend(t,r)}catch(p){}return null!=l&&(a.caretBidiLevel=l),h}):"left"==n||"backward"==n?i:s:o.pos==o.start()||o.pos==o.end()}(e,t,n))}class ie{constructor(e,t,n,o){this.parent=e,this.children=t,this.dom=n,this.contentDOM=o,this.dirty=0,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let o=this.children[t];if(o==e)return n;n+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){let n,o;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&(!(o=n.pmViewDesc)||o.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(o)+o.size:this.posAtStart}{let n,o;if(e==this.contentDOM)n=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.nextSibling}for(;n&&(!(o=n.pmViewDesc)||o.parent!=this);)n=n.nextSibling;return n?this.posBeforeChild(o):this.posAtEnd}}let o;if(e==this.dom&&this.contentDOM)o=t>s(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){o=!1;break}if(t.previousSibling)break}if(null==o&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){o=!0;break}if(t.nextSibling)break}}return(null==o?n>0:o)?this.posAtEnd:this.posAtStart}nearestDesc(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(let n=!0,o=e;o;o=o.parentNode){let r,i=this.getDesc(o);if(i&&(!t||i.node)){if(!n||!(r=i.nodeDOM)||(1==r.nodeType?r.contains(1==e.nodeType?e:e.parentNode):r==e))return i;n=!1}}}getDesc(e){let t=e.pmViewDesc;for(let n=t;n;n=n.parent)if(n==this)return t}posFromDOM(e,t,n){for(let o=e;o;o=o.parentNode){let r=this.getDesc(o);if(r)return r.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let o=this.children[t],r=n+o.size;if(n==e&&r!=n){for(;!o.border&&o.children.length;)for(let e=0;e<o.children.length;e++){let t=o.children[e];if(t.size){o=t;break}}return o}if(e<r)return o.descAt(e-n-o.border);n=r}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,o=0;for(let r=0;n<this.children.length;n++){let t=this.children[n],i=r+t.size;if(i>e||t instanceof he){o=e-r;break}r=i}if(o)return this.children[n].domFromPos(o-this.children[n].border,t);for(let r;n&&!(r=this.children[n-1]).size&&r instanceof se&&r.side>=0;n--);if(t<=0){let e,o=!0;for(;e=n?this.children[n-1]:null,e&&e.dom.parentNode!=this.contentDOM;n--,o=!1);return e&&t&&o&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?s(e.dom)+1:0}}{let e,o=!0;for(;e=n<this.children.length?this.children[n]:null,e&&e.dom.parentNode!=this.contentDOM;n++,o=!1);return e&&o&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?s(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,r=-1;for(let i=n,a=0;;a++){let n=this.children[a],l=i+n.size;if(-1==o&&e<=l){let r=i+n.border;if(e>=r&&t<=l-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,r);e=i;for(let t=a;t>0;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){o=s(n.dom)+1;break}e-=n.size}-1==o&&(o=0)}if(o>-1&&(l>t||a==this.children.length-1)){t=l;for(let e=a+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){r=s(n.dom);break}t+=n.size}-1==r&&(r=this.contentDOM.childNodes.length);break}i=l}return{node:this.contentDOM,from:e,to:t,fromOffset:o,toOffset:r}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=Math.min(e,t),i=Math.max(e,t);for(let s=0,d=0;s<this.children.length;s++){let a=this.children[s],l=d+a.size;if(r>d&&i<l)return a.setSelection(e-d-a.border,t-d-a.border,n,o);d=l}let a=this.domFromPos(e,e?-1:1),l=t==e?a:this.domFromPos(t,t?-1:1),c=n.root.getSelection(),u=n.domSelectionRange(),h=!1;if((C||A)&&e==t){let{node:e,offset:t}=a;if(3==e.nodeType){if(h=!(!t||"\n"!=e.nodeValue[t-1]),h&&t==e.nodeValue.length)for(let n,o=e;o;o=o.parentNode){if(n=o.nextSibling){"BR"==n.nodeName&&(a=l={node:n.parentNode,offset:s(n)+1});break}let e=o.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let n=e.childNodes[t-1];h=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(C&&u.focusNode&&u.focusNode!=l.node&&1==u.focusNode.nodeType){let e=u.focusNode.childNodes[u.focusOffset];e&&"false"==e.contentEditable&&(o=!0)}if(!(o||h&&A)&&d(a.node,a.offset,u.anchorNode,u.anchorOffset)&&d(l.node,l.offset,u.focusNode,u.focusOffset))return;let p=!1;if((c.extend||e==t)&&!h){c.collapse(a.node,a.offset);try{e!=t&&c.extend(l.node,l.offset),p=!0}catch(f){}}if(!p){if(e>t){let e=a;a=l,l=e}let n=document.createRange();n.setEnd(l.node,l.offset),n.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(n)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,o=0;o<this.children.length;o++){let r=this.children[o],i=n+r.size;if(n==i?e<=i&&t>=n:e<i&&t>n){let o=n+r.border,s=i-r.border;if(e>=o&&t<=s)return this.dirty=e==n||t==i?2:1,void(e!=o||t!=s||!r.contentLost&&r.dom.parentNode==this.contentDOM?r.markDirty(e-o,t-o):r.dirty=3);r.dirty=r.dom!=r.contentDOM||r.dom.parentNode!=this.contentDOM||r.children.length?3:2}n=i}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class se extends ie{constructor(e,t,n,o){let r,i=t.type.toDOM;if("function"==typeof i&&(i=i(n,()=>r?r.parent?r.parent.posBeforeChild(r):void 0:o)),!t.type.spec.raw){if(1!=i.nodeType){let e=document.createElement("span");e.appendChild(i),i=e}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=t,this.widget=t,r=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class ae extends ie{constructor(e,t,n,o){super(e,[],t,null),this.textDOM=n,this.text=o}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class le extends ie{constructor(e,t,n,o,r){super(e,[],n,o),this.mark=t,this.spec=r}static create(e,t,n,o){let i=o.nodeViews[t.type.name],s=i&&i(t,o,n);return s&&s.dom||(s=r.ZF.renderSpec(document,t.type.spec.toDOM(t,n),null,t.attrs)),new le(e,t,s.dom,s.contentDOM||s.dom,s)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=0}}slice(e,t,n){let o=le.create(this.parent,this.mark,!0,n),r=this.children,i=this.size;t<i&&(r=Ce(r,t,i,n)),e>0&&(r=Ce(r,0,e,n));for(let s=0;s<r.length;s++)r[s].parent=o;return o.children=r,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ce extends ie{constructor(e,t,n,o,r,i,s,a,l){super(e,[],r,i),this.node=t,this.outerDeco=n,this.innerDeco=o,this.nodeDOM=s}static create(e,t,n,o,i,s){let a,l=i.nodeViews[t.type.name],c=l&&l(t,i,()=>a?a.parent?a.parent.posBeforeChild(a):void 0:s,n,o),d=c&&c.dom,u=c&&c.contentDOM;if(t.isText)if(d){if(3!=d.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else d=document.createTextNode(t.text);else if(!d){let e=r.ZF.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs);({dom:d,contentDOM:u}=e)}u||t.isText||"BR"==d.nodeName||(d.hasAttribute("contenteditable")||(d.contentEditable="false"),t.type.spec.draggable&&(d.draggable=!0));let h=d;return d=be(d,n,t),c?a=new pe(e,t,n,o,d,u||null,h,c,i,s+1):t.isText?new ue(e,t,n,o,d,h,i):new ce(e,t,n,o,d,u||null,h,i,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>r.FK.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return 0==this.dirty&&e.eq(this.node)&&we(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,o=t,i=e.composing?this.localCompositionInfo(e,t):null,s=i&&i.pos>-1?i:null,a=i&&i.pos<0,l=new ke(this,s&&s.node,e);!function(e,t,n,o){let r=t.locals(e),i=0;if(0==r.length){for(let n=0;n<e.childCount;n++){let s=e.child(n);o(s,r,t.forChild(i,s),n),i+=s.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let d,u,h,p;for(;s<r.length&&r[s].to==i;){let e=r[s++];e.widget&&(d?(u||(u=[d])).push(e):d=e)}if(d)if(u){u.sort(Ee);for(let e=0;e<u.length;e++)n(u[e],c,!!l)}else n(d,c,!!l);if(l)p=-1,h=l,l=null;else{if(!(c<e.childCount))break;p=c,h=e.child(c++)}for(let e=0;e<a.length;e++)a[e].to<=i&&a.splice(e--,1);for(;s<r.length&&r[s].from<=i&&r[s].to>i;)a.push(r[s++]);let f=i+h.nodeSize;if(h.isText){let e=f;s<r.length&&r[s].from<e&&(e=r[s].from);for(let t=0;t<a.length;t++)a[t].to<e&&(e=a[t].to);e<f&&(l=h.cut(e-i),h=h.cut(0,e-i),f=e,p=-1)}else for(;s<r.length&&r[s].to<f;)s++;o(h,h.isInline&&!h.isLeaf?a.filter(e=>!e.inline):a.slice(),t.forChild(i,h),p),i=f}}(this.node,this.innerDeco,(t,i,s)=>{t.spec.marks?l.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!s&&l.syncToMarks(i==this.node.childCount?r.CU.none:this.node.child(i).marks,n,e),l.placeWidget(t,e,o)},(t,r,s,c)=>{let d;l.syncToMarks(t.marks,n,e),l.findNodeMatch(t,r,s,c)||a&&e.state.selection.from>o&&e.state.selection.to<o+t.nodeSize&&(d=l.findIndexWithChild(i.node))>-1&&l.updateNodeAt(t,r,s,d,e)||l.updateNextNode(t,r,s,e,c,o)||l.addNode(t,r,s,e,o),o+=t.nodeSize}),l.syncToMarks([],n,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||2==this.dirty)&&(s&&this.protectLocalComposition(e,s),fe(this.contentDOM,this.children,e),N&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}localCompositionInfo(e,t){let{from:n,to:r}=e.state.selection;if(!(e.state.selection instanceof o.U3)||n<t||r>t+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let e=i.nodeValue,o=function(e,t,n,o){for(let r=0,i=0;r<e.childCount&&i<=o;){let s=e.child(r++),a=i;if(i+=s.nodeSize,!s.isText)continue;let l=s.text;for(;r<e.childCount;){let t=e.child(r++);if(i+=t.nodeSize,!t.isText)break;l+=t.text}if(i>=n){if(i>=o&&l.slice(o-t.length-a,o-a)==t)return o-t.length;let e=a<o?l.lastIndexOf(t,o-a-1):-1;if(e>=0&&e+t.length+a>=n)return a+e;if(n==o&&l.length>=o+t.length-a&&l.slice(o-a,o-a+t.length)==t)return o}}return-1}(this.node.content,e,n-t,r-t);return o<0?null:{node:i,pos:o,text:e}}return{node:i,pos:-1,text:""}}protectLocalComposition(e,t){let{node:n,pos:o,text:r}=t;if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let s=new ae(this,i,n,r);e.input.compositionNodes.push(s),this.children=Ce(this.children,o,o+r.length,e,s)}update(e,t,n,o){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,o),!0)}updateInner(e,t,n,o){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(we(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=ve(this.dom,this.nodeDOM,ye(this.outerDeco,this.node,t),ye(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function de(e,t,n,o,r){be(o,t,e);let i=new ce(void 0,e,t,n,o,o,o,r,0);return i.contentDOM&&i.updateChildren(r,0),i}class ue extends ce{constructor(e,t,n,o,r,i,s){super(e,t,n,o,r,null,i,s,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,o){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=0,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let o=this.node.cut(e,t),r=document.createTextNode(o.text);return new ue(this.parent,o,this.outerDeco,this.innerDeco,r,r,n)}markDirty(e,t){super.markDirty(e,t),this.dom==this.nodeDOM||0!=e&&t!=this.nodeDOM.nodeValue.length||(this.dirty=3)}get domAtom(){return!1}isText(e){return this.node.text==e}}class he extends ie{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class pe extends ce{constructor(e,t,n,o,r,i,s,a,l,c){super(e,t,n,o,r,i,s,l,c),this.spec=a}update(e,t,n,o){if(3==this.dirty)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let r=this.spec.update(e,t,n);return r&&this.updateInner(e,t,n,o),r}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,t,n,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,o){this.spec.setSelection?this.spec.setSelection(e,t,n.root):super.setSelection(e,t,n,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function fe(e,t,n){let o=e.firstChild,r=!1;for(let i=0;i<t.length;i++){let s=t[i],a=s.dom;if(a.parentNode==e){for(;a!=o;)o=Se(o),r=!0;o=o.nextSibling}else r=!0,e.insertBefore(a,o);if(s instanceof le){let t=o?o.previousSibling:e.lastChild;fe(s.contentDOM,s.children,n),o=t?t.nextSibling:e.firstChild}}for(;o;)o=Se(o),r=!0;r&&n.trackWrites==e&&(n.trackWrites=null)}const me=function(e){e&&(this.nodeName=e)};me.prototype=Object.create(null);const ge=[new me];function ye(e,t,n){if(0==e.length)return ge;let o=n?ge[0]:new me,r=[o];for(let i=0;i<e.length;i++){let s=e[i].type.attrs;if(s){s.nodeName&&r.push(o=new me(s.nodeName));for(let e in s){let i=s[e];null!=i&&(n&&1==r.length&&r.push(o=new me(t.isInline?"span":"div")),"class"==e?o.class=(o.class?o.class+" ":"")+i:"style"==e?o.style=(o.style?o.style+";":"")+i:"nodeName"!=e&&(o[e]=i))}}}return r}function ve(e,t,n,o){if(n==ge&&o==ge)return t;let r=t;for(let i=0;i<o.length;i++){let t=o[i],s=n[i];if(i){let n;s&&s.nodeName==t.nodeName&&r!=e&&(n=r.parentNode)&&n.nodeName.toLowerCase()==t.nodeName||(n=document.createElement(t.nodeName),n.pmIsDeco=!0,n.appendChild(r),s=ge[0]),r=n}xe(r,s||ge[0],t)}return r}function xe(e,t,n){for(let o in t)"class"==o||"style"==o||"nodeName"==o||o in n||e.removeAttribute(o);for(let o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=t[o]&&e.setAttribute(o,n[o]);if(t.class!=n.class){let o=t.class?t.class.split(" ").filter(Boolean):[],r=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<o.length;t++)-1==r.indexOf(o[t])&&e.classList.remove(o[t]);for(let t=0;t<r.length;t++)-1==o.indexOf(r[t])&&e.classList.add(r[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n,o=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;n=o.exec(t.style);)e.style.removeProperty(n[1])}n.style&&(e.style.cssText+=n.style)}}function be(e,t,n){return ve(e,e,ge,ye(t,n,1!=e.nodeType))}function we(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function Se(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class ke{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){let n=t,o=n.children.length,r=e.childCount,i=new Map,s=[];e:for(;r>0;){let a;for(;;)if(o){let e=n.children[o-1];if(!(e instanceof le)){a=e,o--;break}n=e,o=e.children.length}else{if(n==t)break e;o=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(r-1))break;--r,i.set(a,r),s.push(a)}}return{index:r,matched:i,matches:s.reverse()}}(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let o=0,r=this.stack.length>>1,i=Math.min(r,e.length);for(;o<i&&(o==r-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&!1!==e[o].type.spec.spanning;)o++;for(;o<r;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<e.length;){this.stack.push(this.top,this.index+1);let o=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++){let n=this.top.children[t];if(n.matchesMark(e[r])&&!this.isLocked(n.dom)){o=t;break}}if(o>-1)o>this.index&&(this.changed=!0,this.destroyBetween(this.index,o)),this.top=this.top.children[this.index];else{let o=le.create(this.top,e[r],t,n);this.top.children.splice(this.index,0,o),this.top=o,this.changed=!0}this.index=0,r++}}findNodeMatch(e,t,n,o){let r,i=-1;if(o>=this.preMatch.index&&(r=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&r.matchesNode(e,t,n))i=this.top.children.indexOf(r,this.index);else for(let s=this.index,a=Math.min(this.top.children.length,s+5);s<a;s++){let o=this.top.children[s];if(o.matchesNode(e,t,n)&&!this.preMatch.matched.has(o)){i=s;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,t,n,o,r){let i=this.top.children[o];return 3==i.dirty&&i.dom==i.contentDOM&&(i.dirty=2),!!i.update(e,t,n,r)&&(this.destroyBetween(this.index,o),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e;return-1}e=t}}updateNextNode(e,t,n,o,r,i){for(let s=this.index;s<this.top.children.length;s++){let a=this.top.children[s];if(a instanceof ce){let l=this.preMatch.matched.get(a);if(null!=l&&l!=r)return!1;let c,d=a.dom,u=this.isLocked(d)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&3!=a.dirty&&we(t,a.outerDeco));if(!u&&a.update(e,t,n,o))return this.destroyBetween(this.index,s),a.dom!=d&&(this.changed=!0),this.index++,!0;if(!u&&(c=this.recreateWrapper(a,e,t,n,o,i)))return this.destroyBetween(this.index,s),this.top.children[this.index]=c,c.contentDOM&&(c.dirty=2,c.updateChildren(o,i+1),c.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,o,r,i){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!we(n,e.outerDeco)||!o.eq(e.innerDeco))return null;let s=ce.create(this.top,t,n,o,r,i);if(s.contentDOM){s.children=e.children,e.children=[];for(let e of s.children)e.parent=s}return e.destroy(),s}addNode(e,t,n,o,r){let i=ce.create(this.top,e,t,n,o,r);i.contentDOM&&i.updateChildren(o,r+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(e,t,n){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(!o||!o.matchesWidget(e)||e!=o.widget&&o.widget.type.toDOM.parentNode){let o=new se(this.top,e,t,n);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof le;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof ue)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((A||O)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let o=new he(this.top,[],n,null);t!=this.top?t.children.push(o):t.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function Ee(e,t){return e.type.side-t.type.side}function Ce(e,t,n,o,r){let i=[];for(let s=0,a=0;s<e.length;s++){let l=e[s],c=a,d=a+=l.size;c>=n||d<=t?i.push(l):(c<t&&i.push(l.slice(0,t-c,o)),r&&(i.push(r),r=void 0),d>n&&i.push(l.slice(n-c,l.size,o)))}return i}function Me(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),a=i&&0==i.size,l=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(l<0)return null;let c,d,u=r.resolve(l);if(m(n)){for(c=l;i&&!i.node;)i=i.parent;let e=i.node;if(i&&e.isAtom&&o.nh.isSelectable(e)&&i.parent&&(!e.isInline||!function(e,t,n){for(let o=0==t,r=t==p(e);o||r;){if(e==n)return!0;let t=s(e);if(!(e=e.parentNode))return!1;o=o&&0==t,r=r&&t==p(e)}}(n.focusNode,n.focusOffset,i.dom))){let e=i.posBefore;d=new o.nh(l==e?u:r.resolve(e))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let t=l,o=l;for(let r=0;r<n.rangeCount;r++){let i=n.getRangeAt(r);t=Math.min(t,e.docView.posFromDOM(i.startContainer,i.startOffset,1)),o=Math.max(o,e.docView.posFromDOM(i.endContainer,i.endOffset,-1))}if(t<0)return null;[c,l]=o==e.state.selection.anchor?[o,t]:[t,o],u=r.resolve(l)}else c=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(c<0)return null}let h=r.resolve(c);if(!d){d=Le(e,h,u,"pointer"==t||e.state.selection.head<u.pos&&!a?1:-1)}return d}function Oe(e){return e.editable?e.hasFocus():Be(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Te(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.state.selection;if(Re(e,n),Oe(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&O){let t=e.domSelectionRange(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&d(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){let t=e.domSelection(),n=document.createRange();if(!t)return;let o=e.cursorWrapper.dom,r="IMG"==o.nodeName;r?n.setStart(o.parentNode,s(o)+1):n.setStart(o,0);n.collapse(!0),t.removeAllRanges(),t.addRange(n),!r&&!e.state.selection.visible&&k&&E<=11&&(o.disabled=!0,o.disabled=!1)}(e);else{let r,i,{anchor:s,head:a}=n;!Ae||n instanceof o.U3||(n.$from.parent.inlineContent||(r=Ne(e,n.from)),n.empty||n.$from.parent.inlineContent||(i=Ne(e,n.to))),e.docView.setSelection(s,a,e,t),Ae&&(r&&De(r),i&&De(i)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),o=n.anchorNode,r=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{n.anchorNode==o&&n.anchorOffset==r||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{Oe(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")},20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const Ae=A||O&&T<63;function Ne(e,t){let{node:n,offset:o}=e.docView.domFromPos(t,0),r=o<n.childNodes.length?n.childNodes[o]:null,i=o?n.childNodes[o-1]:null;if(A&&r&&"false"==r.contentEditable)return Pe(r);if((!r||"false"==r.contentEditable)&&(!i||"false"==i.contentEditable)){if(r)return Pe(r);if(i)return Pe(i)}}function Pe(e){return e.contentEditable="true",A&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function De(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Re(e,t){if(t instanceof o.nh){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(Ie(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else Ie(e)}function Ie(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function Le(e,t,n,r){return e.someProp("createSelectionBetween",o=>o(e,t,n))||o.U3.between(t,n,r)}function je(e){return!(e.editable&&!e.hasFocus())&&Be(e)}function Be(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(n){return!1}}function _e(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&o.LN.findFrom(s,t)}function Ve(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function ze(e,t,n){let r=e.state.selection;if(!(r instanceof o.U3)){if(r instanceof o.nh&&r.node.isInline)return Ve(e,new o.U3(t>0?r.$to:r.$from));{let n=_e(e.state,t);return!!n&&Ve(e,n)}}if(n.indexOf("s")>-1){let{$head:n}=r,i=n.textOffset?null:t<0?n.nodeBefore:n.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let s=e.state.doc.resolve(n.pos+i.nodeSize*(t<0?-1:1));return Ve(e,new o.U3(r.$anchor,s))}if(!r.empty)return!1;if(e.endOfTextblock(t>0?"forward":"backward")){let n=_e(e.state,t);return!!(n&&n instanceof o.nh)&&Ve(e,n)}if(!(P&&n.indexOf("m")>-1)){let n,i=r.$head,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText)return!1;let a=t<0?i.pos-s.nodeSize:i.pos;return!!(s.isAtom||(n=e.docView.descAt(a))&&!n.contentDOM)&&(o.nh.isSelectable(s)?Ve(e,new o.nh(t<0?e.state.doc.resolve(i.pos-s.nodeSize):i)):!!I&&Ve(e,new o.U3(e.state.doc.resolve(t<0?a:a+s.nodeSize))))}}function Fe(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function $e(e,t){let n=e.pmViewDesc;return n&&0==n.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function He(e,t){return t<0?function(e){let t=e.domSelectionRange(),n=t.focusNode,o=t.focusOffset;if(!n)return;let r,i,a=!1;C&&1==n.nodeType&&o<Fe(n)&&$e(n.childNodes[o],-1)&&(a=!0);for(;;)if(o>0){if(1!=n.nodeType)break;{let e=n.childNodes[o-1];if($e(e,-1))r=n,i=--o;else{if(3!=e.nodeType)break;n=e,o=n.nodeValue.length}}}else{if(Ue(n))break;{let t=n.previousSibling;for(;t&&$e(t,-1);)r=n.parentNode,i=s(t),t=t.previousSibling;if(t)n=t,o=Fe(n);else{if(n=n.parentNode,n==e.dom)break;o=0}}}a?Ke(e,n,o):r&&Ke(e,r,i)}(e):function(e){let t=e.domSelectionRange(),n=t.focusNode,o=t.focusOffset;if(!n)return;let r,i,a=Fe(n);for(;;)if(o<a){if(1!=n.nodeType)break;if(!$e(n.childNodes[o],1))break;r=n,i=++o}else{if(Ue(n))break;{let t=n.nextSibling;for(;t&&$e(t,1);)r=t.parentNode,i=s(t)+1,t=t.nextSibling;if(t)n=t,o=0,a=Fe(n);else{if(n=n.parentNode,n==e.dom)break;o=a=0}}}r&&Ke(e,r,i)}(e)}function Ue(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Ke(e,t,n){if(3!=t.nodeType){let e,o;(o=function(e,t){for(;e&&t==e.childNodes.length&&!f(e);)t=s(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=0}}(t,n))?(t=o,n=0):(e=function(e,t){for(;e&&!t&&!f(e);)t=s(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=(e=n).childNodes.length}}(t,n))&&(t=e,n=e.nodeValue.length)}let o=e.domSelection();if(!o)return;if(m(o)){let e=document.createRange();e.setEnd(t,n),e.setStart(t,n),o.removeAllRanges(),o.addRange(e)}else o.extend&&o.extend(t,n);e.domObserver.setCurSelection();let{state:r}=e;setTimeout(()=>{e.state==r&&Te(e)},50)}function We(e,t){let n=e.state.doc.resolve(t);if(!O&&!D&&n.parent.inlineContent){let o=e.coordsAtPos(t);if(t>n.start()){let n=e.coordsAtPos(t-1),r=(n.top+n.bottom)/2;if(r>o.top&&r<o.bottom&&Math.abs(n.left-o.left)>1)return n.left<o.left?"ltr":"rtl"}if(t<n.end()){let n=e.coordsAtPos(t+1),r=(n.top+n.bottom)/2;if(r>o.top&&r<o.bottom&&Math.abs(n.left-o.left)>1)return n.left>o.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function qe(e,t,n){let r=e.state.selection;if(r instanceof o.U3&&!r.empty||n.indexOf("s")>-1)return!1;if(P&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=_e(e.state,t);if(n&&n instanceof o.nh)return Ve(e,n)}if(!i.parent.inlineContent){let n=t<0?i:s,a=r instanceof o.i5?o.LN.near(n,t):o.LN.findFrom(n,t);return!!a&&Ve(e,a)}return!1}function Je(e,t){if(!(e.state.selection instanceof o.U3))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=e.state.tr;return t<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),e.dispatch(o),!0}return!1}function Xe(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Ze(e,t){let n=t.keyCode,o=function(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);if(8==n||P&&72==n&&"c"==o)return Je(e,-1)||He(e,-1);if(46==n&&!t.shiftKey||P&&68==n&&"c"==o)return Je(e,1)||He(e,1);if(13==n||27==n)return!0;if(37==n||P&&66==n&&"c"==o){let t=37==n?"ltr"==We(e,e.state.selection.from)?-1:1:-1;return ze(e,t,o)||He(e,t)}if(39==n||P&&70==n&&"c"==o){let t=39==n?"ltr"==We(e,e.state.selection.from)?1:-1:1;return ze(e,t,o)||He(e,t)}return 38==n||P&&80==n&&"c"==o?qe(e,-1,o)||He(e,-1):40==n||P&&78==n&&"c"==o?function(e){if(!A||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;Xe(e,n,"true"),setTimeout(()=>Xe(e,n,"false"),20)}return!1}(e)||qe(e,1,o)||He(e,1):o==(P?"m":"c")&&(66==n||73==n||89==n||90==n)}function Ye(e,t){e.someProp("transformCopied",n=>{t=n(t,e)});let n=[],{content:o,openStart:i,openEnd:s}=t;for(;i>1&&s>1&&1==o.childCount&&1==o.firstChild.childCount;){i--,s--;let e=o.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),o=e.content}let a=e.someProp("clipboardSerializer")||r.ZF.fromSchema(e.state.schema),l=at(),c=l.createElement("div");c.appendChild(a.serializeFragment(o,{document:l}));let d,u=c.firstChild,h=0;for(;u&&1==u.nodeType&&(d=it[u.nodeName.toLowerCase()]);){for(let e=d.length-1;e>=0;e--){let t=l.createElement(d[e]);for(;c.firstChild;)t.appendChild(c.firstChild);c.appendChild(t),h++}u=c.firstChild}return u&&1==u.nodeType&&u.setAttribute("data-pm-slice",`${i} ${s}${h?` -${h}`:""} ${JSON.stringify(n)}`),{dom:c,text:e.someProp("clipboardTextSerializer",n=>n(t,e))||t.content.textBetween(0,t.content.size,"\n\n"),slice:t}}function Ge(e,t,n,o,i){let s,a,l=i.parent.type.spec.code;if(!n&&!t)return null;let c=t&&(o||l||!n);if(c){if(e.someProp("transformPastedText",n=>{t=n(t,l||o,e)}),l)return t?new r.Ji(r.FK.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):r.Ji.empty;let n=e.someProp("clipboardTextParser",n=>n(t,i,o,e));if(n)a=n;else{let n=i.marks(),{schema:o}=e.state,a=r.ZF.fromSchema(o);s=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(e=>{let t=s.appendChild(document.createElement("p"));e&&t.appendChild(a.serializeNode(o.text(e,n)))})}}else e.someProp("transformPastedHTML",t=>{n=t(n,e)}),s=function(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n,o=at().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e);(n=r&&it[r[1].toLowerCase()])&&(e=n.map(e=>"<"+e+">").join("")+e+n.map(e=>"</"+e+">").reverse().join(""));if(o.innerHTML=function(e){let t=window.trustedTypes;if(!t)return e;lt||(lt=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:e=>e}));return lt.createHTML(e)}(e),n)for(let i=0;i<n.length;i++)o=o.querySelector(n[i])||o;return o}(n),I&&function(e){let t=e.querySelectorAll(O?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let o=t[n];1==o.childNodes.length&&"\xa0"==o.textContent&&o.parentNode&&o.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),o)}}(s);let d=s&&s.querySelector("[data-pm-slice]"),u=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let r=+u[3];r>0;r--){let e=s.firstChild;for(;e&&1!=e.nodeType;)e=e.nextSibling;if(!e)break;s=e}if(!a){let t=e.someProp("clipboardParser")||e.someProp("domParser")||r.S4.fromSchema(e.state.schema);a=t.parseSlice(s,{preserveWhitespace:!(!c&&!u),context:i,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||Qe.test(e.parentNode.nodeName)?null:{ignore:!0}})}if(u)a=function(e,t){if(!e.size)return e;let n,o=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(l){return e}let{content:i,openStart:s,openEnd:a}=e;for(let c=n.length-2;c>=0;c-=2){let e=o.nodes[n[c]];if(!e||e.hasRequiredAttrs())break;i=r.FK.from(e.create(n[c+1],i)),s++,a++}return new r.Ji(i,s,a)}(rt(a,+u[1],+u[2]),u[4]);else if(a=r.Ji.maxOpen(function(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let o,i=t.node(n).contentMatchAt(t.index(n)),s=[];if(e.forEach(e=>{if(!s)return;let t,n=i.findWrapping(e.type);if(!n)return s=null;if(t=s.length&&o.length&&tt(n,o,e,s[s.length-1],0))s[s.length-1]=t;else{s.length&&(s[s.length-1]=nt(s[s.length-1],o.length));let t=et(e,n);s.push(t),i=i.matchType(t.type),o=n}}),s)return r.FK.from(s)}return e}(a.content,i),!0),a.openStart||a.openEnd){let e=0,t=0;for(let n=a.content.firstChild;e<a.openStart&&!n.type.spec.isolating;e++,n=n.firstChild);for(let n=a.content.lastChild;t<a.openEnd&&!n.type.spec.isolating;t++,n=n.lastChild);a=rt(a,e,t)}return e.someProp("transformPasted",t=>{a=t(a,e)}),a}const Qe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function et(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(let o=t.length-1;o>=n;o--)e=t[o].create(null,r.FK.from(e));return e}function tt(e,t,n,o,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let s=tt(e,t,n,o.lastChild,i+1);if(s)return o.copy(o.content.replaceChild(o.childCount-1,s));if(o.contentMatchAt(o.childCount).matchType(i==e.length-1?n.type:e[i+1]))return o.copy(o.content.append(r.FK.from(et(n,e,i+1))))}}function nt(e,t){if(0==t)return e;let n=e.content.replaceChild(e.childCount-1,nt(e.lastChild,t-1)),o=e.contentMatchAt(e.childCount).fillBefore(r.FK.empty,!0);return e.copy(n.append(o))}function ot(e,t,n,o,i,s){let a=t<0?e.firstChild:e.lastChild,l=a.content;return e.childCount>1&&(s=0),i<o-1&&(l=ot(l,t,n,o,i+1,s)),i>=n&&(l=t<0?a.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(a.contentMatchAt(a.childCount).fillBefore(r.FK.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(l))}function rt(e,t,n){return t<e.openStart&&(e=new r.Ji(ot(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new r.Ji(ot(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const it={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let st=null;function at(){return st||(st=document.implementation.createHTMLDocument("title"))}let lt=null;const ct={},dt={},ut={touchstart:!0,touchmove:!0};class ht{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function pt(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function ft(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>mt(e,t))})}function mt(e,t){return e.someProp("handleDOMEvents",n=>{let o=n[t.type];return!!o&&(o(e,t)||t.defaultPrevented)})}function gt(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function yt(e){return{left:e.clientX,top:e.clientY}}function vt(e,t,n,o,r){if(-1==o)return!1;let i=e.state.doc.resolve(o);for(let s=i.depth+1;s>0;s--)if(e.someProp(t,t=>s>i.depth?t(e,n,i.nodeAfter,i.before(s),r,!0):t(e,n,i.node(s),i.before(s),r,!1)))return!0;return!1}function xt(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let o=e.state.tr.setSelection(t);"pointer"==n&&o.setMeta("pointer",!0),e.dispatch(o)}function bt(e,t,n,r,i){return vt(e,"handleClickOn",t,n,r)||e.someProp("handleClick",n=>n(e,t,r))||(i?function(e,t){if(-1==t)return!1;let n,r,i=e.state.selection;i instanceof o.nh&&(n=i.node);let s=e.state.doc.resolve(t);for(let a=s.depth+1;a>0;a--){let e=a>s.depth?s.nodeAfter:s.node(a);if(o.nh.isSelectable(e)){r=n&&i.$from.depth>0&&a>=i.$from.depth&&s.before(i.$from.depth+1)==i.$from.pos?s.before(i.$from.depth):s.before(a);break}}return null!=r&&(xt(e,o.nh.create(e.state.doc,r),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&o.nh.isSelectable(r))&&(xt(e,new o.nh(n),"pointer"),!0)}(e,n))}function wt(e,t,n,o){return vt(e,"handleDoubleClickOn",t,n,o)||e.someProp("handleDoubleClick",n=>n(e,t,o))}function St(e,t,n,r){return vt(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",n=>n(e,t,r))||function(e,t,n){if(0!=n.button)return!1;let r=e.state.doc;if(-1==t)return!!r.inlineContent&&(xt(e,o.U3.create(r,0,r.content.size),"pointer"),!0);let i=r.resolve(t);for(let s=i.depth+1;s>0;s--){let t=s>i.depth?i.nodeAfter:i.node(s),n=i.before(s);if(t.inlineContent)xt(e,o.U3.create(r,n+1,n+1+t.content.size),"pointer");else{if(!o.nh.isSelectable(t))continue;xt(e,o.nh.create(r,n),"pointer")}return!0}}(e,n,r)}function kt(e){return Pt(e)}dt.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!Mt(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!R||!O||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!N||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",t=>t(e,n))||Ze(e,n)?n.preventDefault():pt(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",t=>t(e,g(13,"Enter"))),e.input.lastIOSEnter=0)},200)}},dt.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},dt.keypress=(e,t)=>{let n=t;if(Mt(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||P&&n.metaKey)return;if(e.someProp("handleKeyPress",t=>t(e,n)))return void n.preventDefault();let r=e.state.selection;if(!(r instanceof o.U3)||!r.$from.sameParent(r.$to)){let t=String.fromCharCode(n.charCode),o=()=>e.state.tr.insertText(t).scrollIntoView();/[\r\n]/.test(t)||e.someProp("handleTextInput",n=>n(e,r.$from.pos,r.$to.pos,t,o))||e.dispatch(o()),n.preventDefault()}};const Et=P?"metaKey":"ctrlKey";ct.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let o=kt(e),r=Date.now(),i="singleClick";r-e.input.lastClick.time<500&&function(e,t){let n=t.x-e.clientX,o=t.y-e.clientY;return n*n+o*o<100}(n,e.input.lastClick)&&!n[Et]&&e.input.lastClick.button==n.button&&("singleClick"==e.input.lastClick.type?i="doubleClick":"doubleClick"==e.input.lastClick.type&&(i="tripleClick")),e.input.lastClick={time:r,x:n.clientX,y:n.clientY,type:i,button:n.button};let s=e.posAtCoords(yt(n));s&&("singleClick"==i?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new Ct(e,s,n,!!o)):("doubleClick"==i?wt:St)(e,s.pos,s.inside,n)?n.preventDefault():pt(e,"pointer"))};class Ct{constructor(e,t,n,r){let i,s;if(this.view=e,this.pos=t,this.event=n,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[Et],this.allowDefault=n.shiftKey,t.inside>-1)i=e.state.doc.nodeAt(t.inside),s=t.inside;else{let n=e.state.doc.resolve(t.pos);i=n.parent,s=n.depth?n.before():0}const a=r?null:n.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&1==l.dom.nodeType?l.dom:null;let{selection:c}=e.state;(0==n.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||c instanceof o.nh&&c.from<=s&&c.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!C||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),pt(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Te(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(yt(e))),this.updateAllowDefault(e),this.allowDefault||!t?pt(this.view,"pointer"):bt(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||A&&this.mightDrag&&!this.mightDrag.node.isAtom||O&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(xt(this.view,o.LN.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):pt(this.view,"pointer")}move(e){this.updateAllowDefault(e),pt(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function Mt(e,t){return!!e.composing||!!(A&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}ct.touchstart=e=>{e.input.lastTouch=Date.now(),kt(e),pt(e,"pointer")},ct.touchmove=e=>{e.input.lastTouch=Date.now(),pt(e,"pointer")},ct.contextmenu=e=>kt(e);const Ot=R?5e3:-1;function Tt(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>Pt(e),t))}function At(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=function(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function Nt(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=function(e,t){for(;;){if(3==e.nodeType&&t)return e;if(1==e.nodeType&&t>0){if("false"==e.contentEditable)return null;t=p(e=e.childNodes[t-1])}else{if(!e.parentNode||f(e))return null;t=s(e),e=e.parentNode}}}(t.focusNode,t.focusOffset),o=function(e,t){for(;;){if(3==e.nodeType&&t<e.nodeValue.length)return e;if(1==e.nodeType&&t<e.childNodes.length){if("false"==e.contentEditable)return null;e=e.childNodes[t],t=0}else{if(!e.parentNode||f(e))return null;t=s(e)+1,e=e.parentNode}}}(t.focusNode,t.focusOffset);if(n&&o&&n!=o){let t=o.pmViewDesc,r=e.domObserver.lastChangedTextNode;if(n==r||o==r)return r;if(!t||!t.isText(o.nodeValue))return o;if(e.input.compositionNode==o){let e=n.pmViewDesc;if(e&&e.isText(n.nodeValue))return o}}return n||o}function Pt(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(R&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),At(e),t||e.docView&&e.docView.dirty){let n=Me(e),o=e.state.selection;return n&&!n.eq(o)?e.dispatch(e.state.tr.setSelection(n)):!e.markCursor&&!t||o.$from.node(o.$from.sharedDepth(o.to)).inlineContent?e.updateState(e.state):e.dispatch(e.state.tr.deleteSelection()),!0}return!1}}dt.compositionstart=dt.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof o.U3&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(e=>!1===e.type.spec.inclusive)))e.markCursor=e.state.storedMarks||n.marks(),Pt(e,!0),e.markCursor=null;else if(Pt(e,!t.selection.empty),C&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelectionRange();for(let n=t.focusNode,o=t.focusOffset;n&&1==n.nodeType&&0!=o;){let t=o<0?n.lastChild:n.childNodes[o-1];if(!t)break;if(3==t.nodeType){let n=e.domSelection();n&&n.collapse(t,t.nodeValue.length);break}n=t,o=-1}}e.input.composing=!0}Tt(e,Ot)},dt.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,Tt(e,20))};const Dt=k&&E<15||N&&L<604;function Rt(e,t,n,o,i){let s=Ge(e,t,n,o,e.state.selection.$from);if(e.someProp("handlePaste",t=>t(e,i,s||r.Ji.empty)))return!0;if(!s)return!1;let a=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(s),l=a?e.state.tr.replaceSelectionWith(a,o):e.state.tr.replaceSelection(s);return e.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function It(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}ct.copy=dt.cut=(e,t)=>{let n=t,o=e.state.selection,r="cut"==n.type;if(o.empty)return;let i=Dt?null:n.clipboardData,s=o.content(),{dom:a,text:l}=Ye(e,s);i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):function(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let o=getSelection(),r=document.createRange();r.selectNodeContents(t),e.dom.blur(),o.removeAllRanges(),o.addRange(r),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}(e,a),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},dt.paste=(e,t)=>{let n=t;if(e.composing&&!R)return;let o=Dt?null:n.clipboardData,r=e.input.shiftKey&&45!=e.input.lastKeyCode;o&&Rt(e,It(o),o.getData("text/html"),r,n)?n.preventDefault():function(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,o=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(o.contentEditable="true"),o.style.cssText="position: fixed; left: -10000px; top: 10px",o.focus();let r=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout(()=>{e.focus(),o.parentNode&&o.parentNode.removeChild(o),n?Rt(e,o.value,null,r,t):Rt(e,o.textContent,o.innerHTML,r,t)},50)}(e,n)};class Lt{constructor(e,t,n){this.slice=e,this.move=t,this.node=n}}const jt=P?"altKey":"ctrlKey";function Bt(e,t){let n=e.someProp("dragCopies",e=>!e(t));return null!=n?n:!t[jt]}ct.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i,s=e.state.selection,a=s.empty?null:e.posAtCoords(yt(n));if(a&&a.pos>=s.from&&a.pos<=(s instanceof o.nh?s.to-1:s.to));else if(r&&r.mightDrag)i=o.nh.create(e.state.doc,r.mightDrag.pos);else if(n.target&&1==n.target.nodeType){let t=e.docView.nearestDesc(n.target,!0);t&&t.node.type.spec.draggable&&t!=e.docView&&(i=o.nh.create(e.state.doc,t.posBefore))}let l=(i||e.state.selection).content(),{dom:c,text:d,slice:u}=Ye(e,l);(!n.dataTransfer.files.length||!O||T>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Dt?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",Dt||n.dataTransfer.setData("text/plain",d),e.dragging=new Lt(u,Bt(e,n),i)},ct.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)},dt.dragover=dt.dragenter=(e,t)=>t.preventDefault(),dt.drop=(e,t)=>{let n=t,s=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let a=e.posAtCoords(yt(n));if(!a)return;let l=e.state.doc.resolve(a.pos),c=s&&s.slice;c?e.someProp("transformPasted",t=>{c=t(c,e)}):c=Ge(e,It(n.dataTransfer),Dt?null:n.dataTransfer.getData("text/html"),!1,l);let d=!(!s||!Bt(e,n));if(e.someProp("handleDrop",t=>t(e,n,c||r.Ji.empty,d)))return void n.preventDefault();if(!c)return;n.preventDefault();let u=c?(0,i.Um)(e.state.doc,l.pos,c):l.pos;null==u&&(u=l.pos);let h=e.state.tr;if(d){let{node:e}=s;e?e.replace(h):h.deleteSelection()}let p=h.mapping.map(u),f=0==c.openStart&&0==c.openEnd&&1==c.content.childCount,m=h.doc;if(f?h.replaceRangeWith(p,p,c.content.firstChild):h.replaceRange(p,p,c),h.doc.eq(m))return;let g=h.doc.resolve(p);if(f&&o.nh.isSelectable(c.content.firstChild)&&g.nodeAfter&&g.nodeAfter.sameMarkup(c.content.firstChild))h.setSelection(new o.nh(g));else{let t=h.mapping.map(u);h.mapping.maps[h.mapping.maps.length-1].forEach((e,n,o,r)=>t=r),h.setSelection(Le(e,g,h.doc.resolve(t)))}e.focus(),e.dispatch(h.setMeta("uiEvent","drop"))},ct.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Te(e)},20))},ct.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},ct.beforeinput=(e,t)=>{if(O&&R&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=t)return;if(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",t=>t(e,g(8,"Backspace"))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())},50)}};for(let kn in dt)ct[kn]=dt[kn];function _t(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class Vt{constructor(e,t){this.toDOM=e,this.spec=t||Ut,this.side=this.spec.side||0}map(e,t,n,o){let{pos:r,deleted:i}=e.mapResult(t.from+o,this.side<0?-1:1);return i?null:new $t(r-n,r-n,this)}valid(){return!0}eq(e){return this==e||e instanceof Vt&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&_t(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class zt{constructor(e,t){this.attrs=e,this.spec=t||Ut}map(e,t,n,o){let r=e.map(t.from+o,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+o,this.spec.inclusiveEnd?1:-1)-n;return r>=i?null:new $t(r,i,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof zt&&_t(this.attrs,e.attrs)&&_t(this.spec,e.spec)}static is(e){return e.type instanceof zt}destroy(){}}class Ft{constructor(e,t){this.attrs=e,this.spec=t||Ut}map(e,t,n,o){let r=e.mapResult(t.from+o,1);if(r.deleted)return null;let i=e.mapResult(t.to+o,-1);return i.deleted||i.pos<=r.pos?null:new $t(r.pos-n,i.pos-n,this)}valid(e,t){let n,{index:o,offset:r}=e.content.findIndex(t.from);return r==t.from&&!(n=e.child(o)).isText&&r+n.nodeSize==t.to}eq(e){return this==e||e instanceof Ft&&_t(this.attrs,e.attrs)&&_t(this.spec,e.spec)}destroy(){}}class $t{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new $t(e,t,this.type)}eq(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new $t(e,e,new Vt(t,n))}static inline(e,t,n,o){return new $t(e,t,new zt(n,o))}static node(e,t,n,o){return new $t(e,t,new Ft(n,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof zt}get widget(){return this.type instanceof Vt}}const Ht=[],Ut={};class Kt{constructor(e,t){this.local=e.length?e:Ht,this.children=t.length?t:Ht}static create(e,t){return t.length?Yt(t,e,0,Ut):Wt}find(e,t,n){let o=[];return this.findInner(null==e?0:e,null==t?1e9:t,o,0,n),o}findInner(e,t,n,o,r){for(let i=0;i<this.local.length;i++){let s=this.local[i];s.from<=t&&s.to>=e&&(!r||r(s.spec))&&n.push(s.copy(s.from+o,s.to+o))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<t&&this.children[i+1]>e){let s=this.children[i]+1;this.children[i+2].findInner(e-s,t-s,n,o+s,r)}}map(e,t,n){return this==Wt||0==e.maps.length?this:this.mapInner(e,t,0,0,n||Ut)}mapInner(e,t,n,o,r){let i;for(let s=0;s<this.local.length;s++){let a=this.local[s].map(e,n,o);a&&a.type.valid(t,a)?(i||(i=[])).push(a):r.onRemove&&r.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,o,r,i,s){let a=e.slice();for(let c=0,d=i;c<n.maps.length;c++){let e=0;n.maps[c].forEach((t,n,o,r)=>{let i=r-o-(n-t);for(let s=0;s<a.length;s+=3){let o=a[s+1];if(o<0||t>o+d-e)continue;let r=a[s]+d-e;n>=r?a[s+1]=t<=r?-2:-1:t>=d&&i&&(a[s]+=i,a[s+1]+=i)}e+=i}),d=n.maps[c].map(d,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(-2==a[c+1]){l=!0,a[c+1]=-1;continue}let t=n.map(e[c]+i),d=t-r;if(d<0||d>=o.content.size){l=!0;continue}let u=n.map(e[c+1]+i,-1)-r,{index:h,offset:p}=o.content.findIndex(d),f=o.maybeChild(h);if(f&&p==d&&p+f.nodeSize==u){let o=a[c+2].mapInner(n,f,t+1,e[c]+i+1,s);o!=Wt?(a[c]=d,a[c+1]=u,a[c+2]=o):(a[c+1]=-2,l=!0)}else l=!0}if(l){let l=function(e,t,n,o,r,i,s){function a(e,t){for(let i=0;i<e.local.length;i++){let a=e.local[i].map(o,r,t);a?n.push(a):s.onRemove&&s.onRemove(e.local[i].spec)}for(let n=0;n<e.children.length;n+=3)a(e.children[n+2],e.children[n]+t+1)}for(let l=0;l<e.length;l+=3)-1==e[l+1]&&a(e[l+2],t[l]+i+1);return n}(a,e,t,n,r,i,s),c=Yt(l,o,0,s);t=c.local;for(let e=0;e<a.length;e+=3)a[e+1]<0&&(a.splice(e,3),e-=3);for(let e=0,t=0;e<c.children.length;e+=3){let n=c.children[e];for(;t<a.length&&a[t]<n;)t+=3;a.splice(t,0,c.children[e],c.children[e+1],c.children[e+2])}}return new Kt(t.sort(Gt),a)}(this.children,i||[],e,t,n,o,r):i?new Kt(i.sort(Gt),Ht):Wt}add(e,t){return t.length?this==Wt?Kt.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let o,r=0;e.forEach((e,i)=>{let s,a=i+n;if(s=Xt(t,e,a)){for(o||(o=this.children.slice());r<o.length&&o[r]<i;)r+=3;o[r]==i?o[r+2]=o[r+2].addInner(e,s,a+1):o.splice(r,0,i,i+e.nodeSize,Yt(s,e,a+1,Ut)),r+=3}});let i=Jt(r?Zt(t):t,-n);for(let s=0;s<i.length;s++)i[s].type.valid(e,i[s])||i.splice(s--,1);return new Kt(i.length?this.local.concat(i).sort(Gt):this.local,o||this.children)}remove(e){return 0==e.length||this==Wt?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,o=this.local;for(let r=0;r<n.length;r+=3){let o,i=n[r]+t,s=n[r+1]+t;for(let t,n=0;n<e.length;n++)(t=e[n])&&t.from>i&&t.to<s&&(e[n]=null,(o||(o=[])).push(t));if(!o)continue;n==this.children&&(n=this.children.slice());let a=n[r+2].removeInner(o,i+1);a!=Wt?n[r+2]=a:(n.splice(r,3),r-=3)}if(o.length)for(let r,i=0;i<e.length;i++)if(r=e[i])for(let e=0;e<o.length;e++)o[e].eq(r,t)&&(o==this.local&&(o=this.local.slice()),o.splice(e--,1));return n==this.children&&o==this.local?this:o.length||n.length?new Kt(o,n):Wt}forChild(e,t){if(this==Wt)return this;if(t.isLeaf)return Kt.empty;let n,o;for(let s=0;s<this.children.length;s+=3)if(this.children[s]>=e){this.children[s]==e&&(n=this.children[s+2]);break}let r=e+1,i=r+t.content.size;for(let s=0;s<this.local.length;s++){let e=this.local[s];if(e.from<i&&e.to>r&&e.type instanceof zt){let t=Math.max(r,e.from)-r,n=Math.min(i,e.to)-r;t<n&&(o||(o=[])).push(e.copy(t,n))}}if(o){let e=new Kt(o.sort(Gt),Ht);return n?new qt([e,n]):e}return n||Wt}eq(e){if(this==e)return!0;if(!(e instanceof Kt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Qt(this.localsInner(e))}localsInner(e){if(this==Wt)return Ht;if(e.inlineContent||!this.local.some(zt.is))return this.local;let t=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof zt||t.push(this.local[n]);return t}forEachSet(e){e(this)}}Kt.empty=new Kt([],[]),Kt.removeOverlap=Qt;const Wt=Kt.empty;class qt{constructor(e){this.members=e}map(e,t){const n=this.members.map(n=>n.map(e,t,Ut));return qt.from(n)}forChild(e,t){if(t.isLeaf)return Kt.empty;let n=[];for(let o=0;o<this.members.length;o++){let r=this.members[o].forChild(e,t);r!=Wt&&(r instanceof qt?n=n.concat(r.members):n.push(r))}return qt.from(n)}eq(e){if(!(e instanceof qt)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let o=0;o<this.members.length;o++){let r=this.members[o].localsInner(e);if(r.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<r.length;e++)t.push(r[e])}else t=r}return t?Qt(n?t:t.sort(Gt)):Ht}static from(e){switch(e.length){case 0:return Wt;case 1:return e[0];default:return new qt(e.every(e=>e instanceof Kt)?e:e.reduce((e,t)=>e.concat(t instanceof Kt?t:t.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function Jt(e,t){if(!t||!e.length)return e;let n=[];for(let o=0;o<e.length;o++){let r=e[o];n.push(new $t(r.from+t,r.to+t,r.type))}return n}function Xt(e,t,n){if(t.isLeaf)return null;let o=n+t.nodeSize,r=null;for(let i,s=0;s<e.length;s++)(i=e[s])&&i.from>n&&i.to<o&&((r||(r=[])).push(i),e[s]=null);return r}function Zt(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Yt(e,t,n,o){let r=[],i=!1;t.forEach((t,s)=>{let a=Xt(e,t,s+n);if(a){i=!0;let e=Yt(a,t,n+s+1,o);e!=Wt&&r.push(s,s+t.nodeSize,e)}});let s=Jt(i?Zt(e):e,-n).sort(Gt);for(let a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(o.onRemove&&o.onRemove(s[a].spec),s.splice(a--,1));return s.length||r.length?new Kt(s,r):Wt}function Gt(e,t){return e.from-t.from||e.to-t.to}function Qt(e){let t=e;for(let n=0;n<t.length-1;n++){let o=t[n];if(o.from!=o.to)for(let r=n+1;r<t.length;r++){let i=t[r];if(i.from!=o.from){i.from<o.to&&(t==e&&(t=e.slice()),t[n]=o.copy(o.from,i.from),en(t,r,o.copy(i.from,o.to)));break}i.to!=o.to&&(t==e&&(t=e.slice()),t[r]=i.copy(i.from,o.to),en(t,r+1,i.copy(o.to,i.to)))}}return t}function en(e,t,n){for(;t<e.length&&Gt(n,e[t])>0;)t++;e.splice(t,0,n)}function tn(e){let t=[];return e.someProp("decorations",n=>{let o=n(e.state);o&&o!=Wt&&t.push(o)}),e.cursorWrapper&&t.push(Kt.create(e.state.doc,[e.cursorWrapper.deco])),qt.from(t)}const nn={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},on=k&&E<=11;class rn{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class sn{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new rn,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);k&&E<=11&&e.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),on&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,nn)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(je(this.view)){if(this.suppressingSelectionUpdates)return Te(this.view);if(k&&E<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&d(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t,n=new Set;for(let r=e.focusNode;r;r=a(r))n.add(r);for(let r=e.anchorNode;r;r=a(r))if(n.has(r)){t=r;break}let o=t&&this.view.docView.nearestDesc(t);return o&&o.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let n=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&je(e)&&!this.ignoreSelectionChange(n),i=-1,s=-1,a=!1,l=[];if(e.editable)for(let o=0;o<t.length;o++){let e=this.registerMutation(t[o],l);e&&(i=i<0?e.from:Math.min(e.from,i),s=s<0?e.to:Math.max(e.to,s),e.typeOver&&(a=!0))}if(C&&l.length){let t=l.filter(e=>"BR"==e.nodeName);if(2==t.length){let[e,n]=t;e.parentNode&&e.parentNode.parentNode==n.parentNode?n.remove():e.remove()}else{let{focusNode:n}=this.currentSelection;for(let o of t){let t=o.parentNode;!t||"LI"!=t.nodeName||n&&dn(e,n)==t||o.remove()}}}let c=null;i<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&m(n)&&(c=Me(e))&&c.eq(o.LN.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Te(e),this.currentSelection.set(n),e.scrollToSelection()):(i>-1||r)&&(i>-1&&(e.docView.markDirty(i,s),function(e){if(an.has(e))return;if(an.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)){if(e.requiresGeckoHackNode=C,ln)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),ln=!0}}(e)),this.handleDOMChange(i,s,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||Te(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(let n=0;n<e.addedNodes.length;n++){let o=e.addedNodes[n];t.push(o),3==o.nodeType&&(this.lastChangedTextNode=o)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let o=e.previousSibling,r=e.nextSibling;if(k&&E<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:i}=e.addedNodes[t];(!n||Array.prototype.indexOf.call(e.addedNodes,n)<0)&&(o=n),(!i||Array.prototype.indexOf.call(e.addedNodes,i)<0)&&(r=i)}let i=o&&o.parentNode==e.target?s(o)+1:0,a=n.localPosFromDOM(e.target,i,-1),l=r&&r.parentNode==e.target?s(r):e.target.childNodes.length;return{from:a,to:n.localPosFromDOM(e.target,l,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let an=new WeakMap,ln=!1;function cn(e,t){let n=t.startContainer,o=t.startOffset,r=t.endContainer,i=t.endOffset,s=e.domAtPos(e.state.selection.anchor);return d(s.node,s.offset,r,i)&&([n,o,r,i]=[r,i,n,o]),{anchorNode:n,anchorOffset:o,focusNode:r,focusOffset:i}}function dn(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let t=e.docView.nearestDesc(n,!0);if(t&&t.node.isBlock)return n}return null}function un(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(A&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(e.parentNode.lastChild==e||A&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const hn=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function pn(e,t,n,i,s){let a=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=Me(e,t);if(n&&!e.state.selection.eq(n)){if(O&&R&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",t=>t(e,g(13,"Enter"))))return;let o=e.state.tr.setSelection(n);"pointer"==t?o.setMeta("pointer",!0):"key"==t&&o.scrollIntoView(),a&&o.setMeta("composition",a),e.dispatch(o)}return}let l=e.state.doc.resolve(t),c=l.sharedDepth(n);t=l.before(c+1),n=e.state.doc.resolve(n).after(c+1);let d,u,h=e.state.selection,p=function(e,t,n){let o,{node:i,fromOffset:s,toOffset:a,from:l,to:c}=e.docView.parseRange(t,n),d=e.domSelectionRange(),u=d.anchorNode;if(u&&e.dom.contains(1==u.nodeType?u:u.parentNode)&&(o=[{node:u,offset:d.anchorOffset}],m(d)||o.push({node:d.focusNode,offset:d.focusOffset})),O&&8===e.input.lastKeyCode)for(let r=a;r>s;r--){let e=i.childNodes[r-1],t=e.pmViewDesc;if("BR"==e.nodeName&&!t){a=r;break}if(!t||t.size)break}let h=e.state.doc,p=e.someProp("domParser")||r.S4.fromSchema(e.state.schema),f=h.resolve(l),g=null,y=p.parse(i,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:s,to:a,preserveWhitespace:"pre"!=f.parent.type.whitespace||"full",findPositions:o,ruleFromNode:un,context:f});if(o&&null!=o[0].pos){let e=o[0].pos,t=o[1]&&o[1].pos;null==t&&(t=e),g={anchor:e+l,head:t+l}}return{doc:y,sel:g,from:l,to:c}}(e,t,n),f=e.state.doc,y=f.slice(p.from,p.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(d=e.state.selection.to,u="end"):(d=e.state.selection.from,u="start"),e.input.lastKeyCode=null;let v=function(e,t,n,o,r){let i=e.findDiffStart(t,n);if(null==i)return null;let{a:s,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if("end"==r){o-=s+Math.max(0,i-Math.min(s,a))-i}if(s<i&&e.size<t.size){let e=o<=i&&o>=s?i-o:0;i-=e,i&&i<t.size&&gn(t.textBetween(i-1,i+1))&&(i+=e?1:-1),a=i+(a-s),s=i}else if(a<i){let t=o<=i&&o>=a?i-o:0;i-=t,i&&i<e.size&&gn(e.textBetween(i-1,i+1))&&(i+=t?1:-1),s=i+(s-a),a=i}return{start:i,endA:s,endB:a}}(y.content,p.doc.content,p.from,d,u);if(v&&e.input.domChangeCount++,(N&&e.input.lastIOSEnter>Date.now()-225||R)&&s.some(e=>1==e.nodeType&&!hn.test(e.nodeName))&&(!v||v.endA>=v.endB)&&e.someProp("handleKeyDown",t=>t(e,g(13,"Enter"))))return void(e.input.lastIOSEnter=0);if(!v){if(!(i&&h instanceof o.U3&&!h.empty&&h.$head.sameParent(h.$anchor))||e.composing||p.sel&&p.sel.anchor!=p.sel.head){if(p.sel){let t=fn(e,e.state.doc,p.sel);if(t&&!t.eq(e.state.selection)){let n=e.state.tr.setSelection(t);a&&n.setMeta("composition",a),e.dispatch(n)}}return}v={start:h.from,endA:h.to,endB:h.to}}e.state.selection.from<e.state.selection.to&&v.start==v.endB&&e.state.selection instanceof o.U3&&(v.start>e.state.selection.from&&v.start<=e.state.selection.from+2&&e.state.selection.from>=p.from?v.start=e.state.selection.from:v.endA<e.state.selection.to&&v.endA>=e.state.selection.to-2&&e.state.selection.to<=p.to&&(v.endB+=e.state.selection.to-v.endA,v.endA=e.state.selection.to)),k&&E<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>p.from&&" \xa0"==p.doc.textBetween(v.start-p.from-1,v.start-p.from+1)&&(v.start--,v.endA--,v.endB--);let x,b=p.doc.resolveNoCache(v.start-p.from),w=p.doc.resolveNoCache(v.endB-p.from),S=f.resolve(v.start),C=b.sameParent(w)&&b.parent.inlineContent&&S.end()>=v.endA;if((N&&e.input.lastIOSEnter>Date.now()-225&&(!C||s.some(e=>"DIV"==e.nodeName||"P"==e.nodeName))||!C&&b.pos<p.doc.content.size&&(!b.sameParent(w)||!b.parent.inlineContent)&&!/\S/.test(p.doc.textBetween(b.pos,w.pos,"",""))&&(x=o.LN.findFrom(p.doc.resolve(b.pos+1),1,!0))&&x.head>b.pos)&&e.someProp("handleKeyDown",t=>t(e,g(13,"Enter"))))return void(e.input.lastIOSEnter=0);if(e.state.selection.anchor>v.start&&function(e,t,n,o,r){if(n-t<=r.pos-o.pos||mn(o,!0,!1)<r.pos)return!1;let i=e.resolve(t);if(!o.parent.isTextblock){let e=i.nodeAfter;return null!=e&&n==t+e.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let s=e.resolve(mn(i,!0,!0));return!(!s.parent.isTextblock||s.pos>n||mn(s,!0,!1)<n)&&o.parent.content.cut(o.parentOffset).eq(s.parent.content)}(f,v.start,v.endA,b,w)&&e.someProp("handleKeyDown",t=>t(e,g(8,"Backspace"))))return void(R&&O&&e.domObserver.suppressSelectionUpdates());O&&v.endB==v.start&&(e.input.lastChromeDelete=Date.now()),R&&!C&&b.start()!=w.start()&&0==w.parentOffset&&b.depth==w.depth&&p.sel&&p.sel.anchor==p.sel.head&&p.sel.head==v.endA&&(v.endB-=2,w=p.doc.resolveNoCache(v.endB-p.from),setTimeout(()=>{e.someProp("handleKeyDown",function(t){return t(e,g(13,"Enter"))})},20));let M,T=v.start,A=v.endA,P=t=>{let n=t||e.state.tr.replace(T,A,p.doc.slice(v.start-p.from,v.endB-p.from));if(p.sel){let t=fn(e,n.doc,p.sel);t&&!(O&&e.composing&&t.empty&&(v.start!=v.endB||e.input.lastChromeDelete<Date.now()-100)&&(t.head==T||t.head==n.mapping.map(A)-1)||k&&t.empty&&t.head==T)&&n.setSelection(t)}return a&&n.setMeta("composition",a),n.scrollIntoView()};if(C){if(b.pos==w.pos){k&&E<=11&&0==b.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Te(e),20));let t=P(e.state.tr.delete(T,A)),n=f.resolve(v.start).marksAcross(f.resolve(v.endA));n&&t.ensureMarks(n),e.dispatch(t)}else if(v.endA==v.endB&&(M=function(e,t){let n,o,i,s=e.firstChild.marks,a=t.firstChild.marks,l=s,c=a;for(let r=0;r<a.length;r++)l=a[r].removeFromSet(l);for(let r=0;r<s.length;r++)c=s[r].removeFromSet(c);if(1==l.length&&0==c.length)o=l[0],n="add",i=e=>e.mark(o.addToSet(e.marks));else{if(0!=l.length||1!=c.length)return null;o=c[0],n="remove",i=e=>e.mark(o.removeFromSet(e.marks))}let d=[];for(let r=0;r<t.childCount;r++)d.push(i(t.child(r)));if(r.FK.from(d).eq(e))return{mark:o,type:n}}(b.parent.content.cut(b.parentOffset,w.parentOffset),S.parent.content.cut(S.parentOffset,v.endA-S.start())))){let t=P(e.state.tr);"add"==M.type?t.addMark(T,A,M.mark):t.removeMark(T,A,M.mark),e.dispatch(t)}else if(b.parent.child(b.index()).isText&&b.index()==w.index()-(w.textOffset?0:1)){let t=b.parent.textBetween(b.parentOffset,w.parentOffset),n=()=>P(e.state.tr.insertText(t,T,A));e.someProp("handleTextInput",o=>o(e,T,A,t,n))||e.dispatch(n())}}else e.dispatch(P())}function fn(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:Le(e,t.resolve(n.anchor),t.resolve(n.head))}function mn(e,t,n){let o=e.depth,r=t?e.end():e.pos;for(;o>0&&(t||e.indexAfter(o)==e.node(o).childCount);)o--,r++,t=!1;if(n){let t=e.node(o).maybeChild(e.indexAfter(o));for(;t&&!t.isLeaf;)t=t.firstChild,r++}return r}function gn(e){if(2!=e.length)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class yn{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new ht,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Sn),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=bn(this),xn(this),this.nodeViews=wn(this),this.docView=de(this.state.doc,vn(this),tn(this),this.dom,this),this.domObserver=new sn(this,(e,t,n,o)=>pn(this,e,t,n,o)),this.domObserver.start(),function(e){for(let t in ct){let n=ct[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!gt(e,t)||mt(e,t)||!e.editable&&t.type in dt||n(e,t)},ut[t]?{passive:!0}:void 0)}A&&e.dom.addEventListener("input",()=>null),ft(e)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ft(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Sn),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let n in this._props)t[n]=this._props[n];t.state=this.state;for(let n in e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var n;let o=this.state,r=!1,i=!1;e.storedMarks&&this.composing&&(At(this),i=!0),this.state=e;let s=o.plugins!=e.plugins||this._props.plugins!=t.plugins;if(s||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=wn(this);(function(e,t){let n=0,o=0;for(let r in e){if(e[r]!=t[r])return!0;n++}for(let r in t)o++;return n!=o})(e,this.nodeViews)&&(this.nodeViews=e,r=!0)}(s||t.handleDOMEvents!=this._props.handleDOMEvents)&&ft(this),this.editable=bn(this),xn(this);let a=tn(this),l=vn(this),c=o.plugins==e.plugins||o.doc.eq(e.doc)?e.scrollToSelection>o.scrollToSelection?"to selection":"preserve":"reset",u=r||!this.docView.matchesNode(e.doc,l,a);!u&&e.selection.eq(o.selection)||(i=!0);let h="preserve"==c&&i&&null==this.dom.style.overflowAnchor&&function(e){let t,n,o=e.dom.getBoundingClientRect(),r=Math.max(0,o.top);for(let i=(o.left+o.right)/2,s=r+1;s<Math.min(innerHeight,o.bottom);s+=5){let o=e.root.elementFromPoint(i,s);if(!o||o==e.dom||!e.dom.contains(o))continue;let a=o.getBoundingClientRect();if(a.top>=r-20){t=o,n=a.top;break}}return{refDOM:t,refTop:n,stack:z(e.dom)}}(this);if(i){this.domObserver.stop();let t=u&&(k||O)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&function(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}(o.selection,e.selection);if(u){let n=O?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Nt(this)),!r&&this.docView.update(e.doc,l,a,this)||(this.docView.updateOuterDeco(l),this.docView.destroy(),this.docView=de(e.doc,l,a,this.dom,this)),n&&!this.trackWrites&&(t=!0)}t||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return d(t.node,t.offset,n.anchorNode,n.anchorOffset)}(this))?Te(this,t):(Re(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),(null===(n=this.dragging)||void 0===n?void 0:n.node)&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),"reset"==c?this.dom.scrollTop=0:"to selection"==c?this.scrollToSelection():h&&function(e){let{refDOM:t,refTop:n,stack:o}=e,r=t?t.getBoundingClientRect().top:0;F(o,0==r?0:r-n)}(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(e&&this.dom.contains(1==e.nodeType?e:e.parentNode))if(this.someProp("handleScrollToSelection",e=>e(this)));else if(this.state.selection instanceof o.nh){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&V(this,t.getBoundingClientRect(),e)}else V(this,this.coordsAtPos(this.state.selection.head,1),e);else;}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}updateDraggedNode(e,t){let n=e.node,r=-1;if(this.state.doc.nodeAt(n.from)==n.node)r=n.from;else{let e=n.from+(this.state.doc.content.size-t.doc.content.size);(e>0&&this.state.doc.nodeAt(e))==n.node&&(r=e)}this.dragging=new Lt(e.slice,e.move,r<0?void 0:o.nh.create(this.state.doc,r))}someProp(e,t){let n,o=this._props&&this._props[e];if(null!=o&&(n=t?t(o):o))return n;for(let i=0;i<this.directPlugins.length;i++){let o=this.directPlugins[i].props[e];if(null!=o&&(n=t?t(o):o))return n}let r=this.state.plugins;if(r)for(let i=0;i<r.length;i++){let o=r[i].props[e];if(null!=o&&(n=t?t(o):o))return n}}hasFocus(){if(k){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if($)return e.focus($);let t=z(e);e.focus(null==$?{get preventScroll(){return $={preventScroll:!0},!0}}:void 0),$||($=!1,F(t,0))}(this.dom),Te(this),this.domObserver.start()}get root(){let e=this._root;if(null==e)for(let t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t;return e||document}updateRoot(){this._root=null}posAtCoords(e){return W(this,e)}coordsAtPos(e){return Z(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}domAtPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=this.docView.posFromDOM(e,t,n);if(null==o)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,t){return re(this,t||this.state,e)}pasteHTML(e,t){return Rt(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Rt(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Ye(this,e)}destroy(){this.docView&&(!function(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],tn(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,l=null)}get isDestroyed(){return null==this.docView}dispatchEvent(e){return function(e,t){mt(e,t)||!ct[t.type]||!e.editable&&t.type in dt||ct[t.type](e,t)}(this,e)}domSelectionRange(){let e=this.domSelection();return e?A&&11===this.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e,t){if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return cn(e,n)}let n;function o(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",o,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",o,!0),n?cn(e,n):null}(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function vn(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let e in n)"class"==e?t.class+=" "+n[e]:"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))}),t.translate||(t.translate="no"),[$t.node(0,e.state.doc.content.size,t)]}function xn(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:$t.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function bn(e){return!e.someProp("editable",t=>!1===t(e.state))}function wn(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function Sn(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}yn.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}},1141:(e,t,n)=>{var o=n(143),r=/^\s+/;e.exports=function(e){return e?e.slice(0,o(e)+1).replace(r,""):e}},1143:(e,t,n)=>{var o=n(3028)(Object.keys,Object);e.exports=o},1163:(e,t,n)=>{var o=n(5647),r=n(3211),i=n(929),s=n(474),a=Object.prototype,l=a.hasOwnProperty,c=o(function(e,t){e=Object(e);var n=-1,o=t.length,c=o>2?t[2]:void 0;for(c&&i(t[0],t[1],c)&&(o=1);++n<o;)for(var d=t[n],u=s(d),h=-1,p=u.length;++h<p;){var f=u[h],m=e[f];(void 0===m||r(m,a[f])&&!l.call(e,f))&&(e[f]=d[f])}return e});e.exports=c},1170:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},1268:(e,t,n)=>{var o=n(5428),r=n(7574),i=n(6832),s=i&&i.isTypedArray,a=s?r(s):o;e.exports=a},1277:(e,t,n)=>{"use strict";var o=n(8208),r=n(5641),i=n(9558).positionX;e.exports=function(e){(function(e){var t=r.buildLayerMatrix(e),n=e.graph().ranksep,i=0;o.forEach(t,function(t){var r=o.max(o.map(t,function(t){return e.node(t).height}));o.forEach(t,function(t){e.node(t).y=i+r/2}),i+=r+n})})(e=r.asNonCompoundGraph(e)),o.forEach(i(e),function(t,n){e.node(n).x=t})}},1295:(e,t,n)=>{var o=n(9812),r=o?o.prototype:void 0,i=r?r.valueOf:void 0;e.exports=function(e){return i?Object(i.call(e)):{}}},1310:e=>{e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},1340:(e,t,n)=>{var o=n(3211);e.exports=function(e,t){for(var n=e.length;n--;)if(o(e[n][0],t))return n;return-1}},1360:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1367:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]])},1482:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]])},1516:(e,t,n)=>{var o=n(2929);e.exports=function(e){var t=new e.constructor(e.byteLength);return new o(t).set(new o(e)),t}},1558:e=>{e.exports=function(e,t,n){for(var o=-1,r=null==e?0:e.length;++o<r;)if(n(t,e[o]))return!0;return!1}},1609:(e,t,n)=>{var o=n(6614),r=n(474);e.exports=function(e){return o(e,r(e))}},1629:(e,t,n)=>{var o=n(6913),r=n(6686);e.exports=function(e){if(!r(e))return!1;var t=o(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1632:(e,t,n)=>{var o=n(4724),r=n(6311),i=n(7168);e.exports=function(e){return r(e)?i(e):o(e)}},1680:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},1714:(e,t,n)=>{var o=n(1340);e.exports=function(e,t){var n=this.__data__,r=o(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}},1733:(e,t,n)=>{var o=n(1775),r=n(4664),i=n(9096);e.exports=function(e,t){var n={};return t=i(t,3),r(e,function(e,r,i){o(n,r,t(e,r,i))}),n}},1740:(e,t,n)=>{var o=n(7132);e.exports=function(e){return o(e,4)}},1775:(e,t,n)=>{var o=n(5654);e.exports=function(e,t,n){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},1817:(e,t,n)=>{var o=n(6686),r=Object.create,i=function(){function e(){}return function(t){if(!o(t))return{};if(r)return r(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=i},1827:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]])},1896:(e,t,n)=>{var o=n(2125);e.exports=function(e,t){return o(e,t,"post")}},1946:(e,t,n)=>{var o=n(1340);e.exports=function(e){return o(this.__data__,e)>-1}},1980:e=>{e.exports=function(e,t){var n=-1,o=e.length;for(t||(t=Array(o));++n<o;)t[n]=e[n];return t}},1981:(e,t,n)=>{"use strict";var o=n(8208);function r(e){o.forEach(e.nodes(),function(t){i(e.node(t))}),o.forEach(e.edges(),function(t){i(e.edge(t))})}function i(e){var t=e.width;e.width=e.height,e.height=t}function s(e){e.y=-e.y}function a(e){var t=e.x;e.x=e.y,e.y=t}e.exports={adjust:function(e){var t=e.graph().rankdir.toLowerCase();"lr"!==t&&"rl"!==t||r(e)},undo:function(e){var t=e.graph().rankdir.toLowerCase();"bt"!==t&&"rl"!==t||function(e){o.forEach(e.nodes(),function(t){s(e.node(t))}),o.forEach(e.edges(),function(t){var n=e.edge(t);o.forEach(n.points,s),o.has(n,"y")&&s(n)})}(e);"lr"!==t&&"rl"!==t||(!function(e){o.forEach(e.nodes(),function(t){a(e.node(t))}),o.forEach(e.edges(),function(t){var n=e.edge(t);o.forEach(n.points,a),o.has(n,"x")&&a(n)})}(e),r(e))}}},1987:(e,t,n)=>{var o=n(8208),r=n(7938).Graph;e.exports=function(e,t,n){var i=function(e){var t;for(;e.hasNode(t=o.uniqueId("_root")););return t}(e),s=new r({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(t){return e.node(t)});return o.forEach(e.nodes(),function(r){var a=e.node(r),l=e.parent(r);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(s.setNode(r),s.setParent(r,l||i),o.forEach(e[n](r),function(t){var n=t.v===r?t.w:t.v,i=s.edge(n,r),a=o.isUndefined(i)?0:i.weight;s.setEdge(n,r,{weight:e.edge(t).weight+a})}),o.has(a,"minRank")&&s.setNode(r,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),s}},2024:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2054:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},2070:(e,t,n)=>{var o=n(7937)(n(6552),"Set");e.exports=o},2074:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},2117:(e,t,n)=>{var o=n(6741),r=n(9057);e.exports=function(e,t){return null!=e&&r(e,t,o)}},2119:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]])},2125:(e,t,n)=>{var o=n(5750);function r(e,t,n,i,s,a){o.has(i,t)||(i[t]=!0,n||a.push(t),o.each(s(t),function(t){r(e,t,n,i,s,a)}),n&&a.push(t))}e.exports=function(e,t,n){o.isArray(t)||(t=[t]);var i=(e.isDirected()?e.successors:e.neighbors).bind(e),s=[],a={};return o.each(t,function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);r(e,t,"post"===n,a,i,s)}),s}},2154:(e,t,n)=>{var o=n(5575),r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(o){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return r.call(t,e)?t[e]:void 0}},2190:(e,t,n)=>{"use strict";n.d(t,{L:()=>o});const o=(0,n(5043).createContext)({})},2195:(e,t,n)=>{"use strict";n.d(t,{K:()=>m,w:()=>f});for(var o={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},r={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},i="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),s="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),a=0;a<10;a++)o[48+a]=o[96+a]=String(a);for(a=1;a<=24;a++)o[a+111]="F"+a;for(a=65;a<=90;a++)o[a]=String.fromCharCode(a+32),r[a]=String.fromCharCode(a);for(var l in o)r.hasOwnProperty(l)||(r[l]=o[l]);var c=n(7184);const d="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),u="undefined"!=typeof navigator&&/Win/.test(navigator.platform);function h(e){let t,n,o,r,i=e.split(/-(?!$)/),s=i[i.length-1];"Space"==s&&(s=" ");for(let a=0;a<i.length-1;a++){let e=i[a];if(/^(cmd|meta|m)$/i.test(e))r=!0;else if(/^a(lt)?$/i.test(e))t=!0;else if(/^(c|ctrl|control)$/i.test(e))n=!0;else if(/^s(hift)?$/i.test(e))o=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);d?r=!0:n=!0}}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),r&&(s="Meta-"+s),o&&(s="Shift-"+s),s}function p(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function f(e){return new c.k_({props:{handleKeyDown:m(e)}})}function m(e){let t=function(e){let t=Object.create(null);for(let n in e)t[h(n)]=e[n];return t}(e);return function(e,n){let a,l=function(e){var t=!(i&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||s&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?r:o)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),c=t[p(l,n)];if(c&&c(e.state,e.dispatch,e))return!0;if(1==l.length&&" "!=l){if(n.shiftKey){let o=t[p(l,n,!1)];if(o&&o(e.state,e.dispatch,e))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(u&&n.ctrlKey&&n.altKey)&&(a=o[n.keyCode])&&a!=l){let o=t[p(a,n)];if(o&&o(e.state,e.dispatch,e))return!0}}return!1}}},2284:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]])},2322:(e,t,n)=>{var o=n(6913),r=n(5990),i=n(2761),s=Function.prototype,a=Object.prototype,l=s.toString,c=a.hasOwnProperty,d=l.call(Object);e.exports=function(e){if(!i(e)||"[object Object]"!=o(e))return!1;var t=r(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==d}},2330:(e,t,n)=>{"use strict";var o=n(5043);var r="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=o.useState,s=o.useEffect,a=o.useLayoutEffect,l=o.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch(o){return!0}}var d="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),o=i({inst:{value:n,getSnapshot:t}}),r=o[0].inst,d=o[1];return a(function(){r.value=n,r.getSnapshot=t,c(r)&&d({inst:r})},[e,n,t]),s(function(){return c(r)&&d({inst:r}),e(function(){c(r)&&d({inst:r})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==o.useSyncExternalStore?o.useSyncExternalStore:d},2382:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},2460:(e,t,n)=>{"use strict";var o=n(5758).longestPath,r=n(3088),i=n(4501);e.exports=function(e){switch(e.graph().ranker){case"network-simplex":default:a(e);break;case"tight-tree":!function(e){o(e),r(e)}(e);break;case"longest-path":s(e)}};var s=o;function a(e){i(e)}},2520:(e,t,n)=>{var o=n(5816),r=n(9096),i=n(9140),s=Math.max;e.exports=function(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var l=null==n?0:i(n);return l<0&&(l=s(a+l,0)),o(e,r(t,3),l)}},2536:(e,t,n)=>{var o=n(149),r=n(2969),i=n(9096),s=n(8883),a=n(320),l=n(7574),c=n(5893),d=n(3279),u=n(4052);e.exports=function(e,t,n){t=t.length?o(t,function(e){return u(e)?function(t){return r(t,1===e.length?e[0]:e)}:e}):[d];var h=-1;t=o(t,l(i));var p=s(e,function(e,n,r){return{criteria:o(t,function(t){return t(e)}),index:++h,value:e}});return a(p,function(e,t){return c(e,t,n)})}},2541:e=>{e.exports=function(e){return function(){return e}}},2580:(e,t,n)=>{e.exports=n(5491)},2587:e=>{e.exports=function(e,t){for(var n=-1,o=null==e?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1}},2597:(e,t,n)=>{var o=n(4052),r=n(9841),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){if(o(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!r(e))||(s.test(e)||!i.test(e)||null!=t&&e in Object(t))}},2616:(e,t,n)=>{var o=n(4008),r=n(5857)(function(e,t){return null==e?{}:o(e,t)});e.exports=r},2622:(e,t,n)=>{var o=n(705);e.exports=function(e,t){var n=e.__data__;return o(t)?n["string"==typeof t?"string":"hash"]:n.map}},2626:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},2662:(e,t,n)=>{var o=n(5575);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=o&&void 0===t?"__lodash_hash_undefined__":t,this}},2717:(e,t,n)=>{var o=n(726),r=n(1817),i=n(4664),s=n(9096),a=n(5990),l=n(4052),c=n(4543),d=n(1629),u=n(6686),h=n(1268);e.exports=function(e,t,n){var p=l(e),f=p||c(e)||h(e);if(t=s(t,4),null==n){var m=e&&e.constructor;n=f?p?new m:[]:u(e)&&d(m)?r(a(e)):{}}return(f?o:i)(e,function(e,o,r){return t(n,e,o,r)}),n}},2759:(e,t,n)=>{var o=n(9421),r=n(5652),i=n(9096),s=n(6487),a=n(4052);e.exports=function(e,t,n){var l=a(e)?o:s,c=arguments.length<3;return l(e,i(t,4),n,c,r)}},2761:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},2777:(e,t,n)=>{var o=n(5193),r=n(2761),i=Object.prototype,s=i.hasOwnProperty,a=i.propertyIsEnumerable,l=o(function(){return arguments}())?o:function(e){return r(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=l},2786:(e,t,n)=>{"use strict";var o=n(8208),r=n(5641);e.exports={run:function(e){e.graph().dummyChains=[],o.forEach(e.edges(),function(t){!function(e,t){var n,o,i,s=t.v,a=e.node(s).rank,l=t.w,c=e.node(l).rank,d=t.name,u=e.edge(t),h=u.labelRank;if(c===a+1)return;for(e.removeEdge(t),i=0,++a;a<c;++i,++a)u.points=[],o={width:0,height:0,edgeLabel:u,edgeObj:t,rank:a},n=r.addDummyNode(e,"edge",o,"_d"),a===h&&(o.width=u.width,o.height=u.height,o.dummy="edge-label",o.labelpos=u.labelpos),e.setEdge(s,n,{weight:u.weight},d),0===i&&e.graph().dummyChains.push(n),s=n;e.setEdge(s,l,{weight:u.weight},d)}(e,t)})},undo:function(e){o.forEach(e.graph().dummyChains,function(t){var n,o=e.node(t),r=o.edgeLabel;for(e.setEdge(o.edgeObj,r);o.dummy;)n=e.successors(t)[0],e.removeNode(t),r.points.push({x:o.x,y:o.y}),"edge-label"===o.dummy&&(r.x=o.x,r.y=o.y,r.width=o.width,r.height=o.height),t=n,o=e.node(t)})}}},2866:(e,t,n)=>{var o=n(2969);e.exports=function(e){return function(t){return o(t,e)}}},2929:(e,t,n)=>{var o=n(6552).Uint8Array;e.exports=o},2969:(e,t,n)=>{var o=n(5324),r=n(914);e.exports=function(e,t){for(var n=0,i=(t=o(t,e)).length;null!=e&&n<i;)e=e[r(t[n++])];return n&&n==i?e:void 0}},3028:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},3088:(e,t,n)=>{"use strict";var o=n(8208),r=n(7938).Graph,i=n(5758).slack;function s(e,t){return o.forEach(e.nodes(),function n(r){o.forEach(t.nodeEdges(r),function(o){var s=o.v,a=r===s?o.w:s;e.hasNode(a)||i(t,o)||(e.setNode(a,{}),e.setEdge(r,a,{}),n(a))})}),e.nodeCount()}function a(e,t){return o.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return i(t,n)})}function l(e,t,n){o.forEach(e.nodes(),function(e){t.node(e).rank+=n})}e.exports=function(e){var t,n,o=new r({directed:!1}),c=e.nodes()[0],d=e.nodeCount();o.setNode(c,{});for(;s(o,e)<d;)t=a(o,e),n=o.hasNode(t.v)?i(e,t):-i(e,t),l(o,e,n);return o}},3097:(e,t,n)=>{var o=n(2969);e.exports=function(e,t,n){var r=null==e?void 0:o(e,t);return void 0===r?n:r}},3130:(e,t,n)=>{var o=n(8208),r=n(7938).Graph,i=n(6684);e.exports=function(e,t){if(e.nodeCount()<=1)return[];var n=function(e,t){var n=new r,s=0,a=0;o.forEach(e.nodes(),function(e){n.setNode(e,{v:e,in:0,out:0})}),o.forEach(e.edges(),function(e){var o=n.edge(e.v,e.w)||0,r=t(e),i=o+r;n.setEdge(e.v,e.w,i),a=Math.max(a,n.node(e.v).out+=r),s=Math.max(s,n.node(e.w).in+=r)});var c=o.range(a+s+3).map(function(){return new i}),d=s+1;return o.forEach(n.nodes(),function(e){l(c,d,n.node(e))}),{graph:n,buckets:c,zeroIdx:d}}(e,t||s),c=function(e,t,n){var o,r=[],i=t[t.length-1],s=t[0];for(;e.nodeCount();){for(;o=s.dequeue();)a(e,t,n,o);for(;o=i.dequeue();)a(e,t,n,o);if(e.nodeCount())for(var l=t.length-2;l>0;--l)if(o=t[l].dequeue()){r=r.concat(a(e,t,n,o,!0));break}}return r}(n.graph,n.buckets,n.zeroIdx);return o.flatten(o.map(c,function(t){return e.outEdges(t.v,t.w)}),!0)};var s=o.constant(1);function a(e,t,n,r,i){var s=i?[]:void 0;return o.forEach(e.inEdges(r.v),function(o){var r=e.edge(o),a=e.node(o.v);i&&s.push({v:o.v,w:o.w}),a.out-=r,l(t,n,a)}),o.forEach(e.outEdges(r.v),function(o){var r=e.edge(o),i=o.w,s=e.node(i);s.in-=r,l(t,n,s)}),e.removeNode(r.v),s}function l(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}},3165:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},3211:e=>{e.exports=function(e,t){return e===t||e!==e&&t!==t}},3223:(e,t,n)=>{var o=n(3868),r=n(4353),i=n(8710),s=n(1980),a=n(310),l=n(2777),c=n(4052),d=n(6272),u=n(4543),h=n(1629),p=n(6686),f=n(2322),m=n(1268),g=n(3737),y=n(1609);e.exports=function(e,t,n,v,x,b,w){var S=g(e,n),k=g(t,n),E=w.get(k);if(E)o(e,n,E);else{var C=b?b(S,k,n+"",e,t,w):void 0,M=void 0===C;if(M){var O=c(k),T=!O&&u(k),A=!O&&!T&&m(k);C=k,O||T||A?c(S)?C=S:d(S)?C=s(S):T?(M=!1,C=r(k,!0)):A?(M=!1,C=i(k,!0)):C=[]:f(k)||l(k)?(C=S,l(S)?C=y(S):p(S)&&!h(S)||(C=a(k))):M=!1}M&&(w.set(k,C),x(C,k,v,b,w),w.delete(k)),o(e,n,C)}}},3253:(e,t,n)=>{var o=n(5538),r=n(3868),i=n(4258),s=n(3223),a=n(6686),l=n(474),c=n(3737);e.exports=function e(t,n,d,u,h){t!==n&&i(n,function(i,l){if(h||(h=new o),a(i))s(t,n,l,d,e,u,h);else{var p=u?u(c(t,l),i,l+"",t,n,h):void 0;void 0===p&&(p=i),r(t,l,p)}},l)}},3279:e=>{e.exports=function(e){return e}},3331:(e,t,n)=>{var o=n(9676),r=n(929),i=n(7303);e.exports=function(e){return function(t,n,s){return s&&"number"!=typeof s&&r(t,n,s)&&(n=s=void 0),t=i(t),void 0===n?(n=t,t=0):n=i(n),s=void 0===s?t<n?1:-1:i(s),o(t,n,s,e)}}},3343:e=>{e.exports=function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}},3366:(e,t,n)=>{var o=n(7894),r=n(9057);e.exports=function(e,t){return null!=e&&r(e,t,o)}},3411:(e,t,n)=>{var o=n(149),r=n(9096),i=n(8883),s=n(4052);e.exports=function(e,t){return(s(e)?o:i)(e,r(t,3))}},3440:(e,t,n)=>{var o=n(6552)["__core-js_shared__"];e.exports=o},3516:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},3546:(e,t,n)=>{"use strict";n.d(t,{N:()=>v});var o=n(579),r=n(5043),i=n(2190),s=n(4930),a=n(293),l=n(9674),c=n(8676),d=n(1051);class u extends r.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=(0,c.s)(e)&&e.offsetWidth||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=n-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function h(e){let{children:t,isPresent:n,anchorX:i,root:s}=e;const a=(0,r.useId)(),l=(0,r.useRef)(null),c=(0,r.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=(0,r.useContext)(d.Q);return(0,r.useInsertionEffect)(()=>{const{width:e,height:t,top:o,left:r,right:d}=c.current;if(n||!l.current||!e||!t)return;const u="left"===i?`left: ${r}`:`right: ${d}`;l.current.dataset.motionPopId=a;const p=document.createElement("style");h&&(p.nonce=h);const f=s??document.head;return f.appendChild(p),p.sheet&&p.sheet.insertRule(`\n          [data-motion-pop-id="${a}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${t}px !important;\n            ${u}px !important;\n            top: ${o}px !important;\n          }\n        `),()=>{f.contains(p)&&f.removeChild(p)}},[n]),(0,o.jsx)(u,{isPresent:n,childRef:l,sizeRef:c,children:r.cloneElement(t,{ref:l})})}const p=e=>{let{children:t,initial:n,isPresent:i,onExitComplete:a,custom:c,presenceAffectsLayout:d,mode:u,anchorX:p,root:m}=e;const g=(0,s.M)(f),y=(0,r.useId)();let v=!0,x=(0,r.useMemo)(()=>(v=!1,{id:y,initial:n,isPresent:i,custom:c,onExitComplete:e=>{g.set(e,!0);for(const t of g.values())if(!t)return;a&&a()},register:e=>(g.set(e,!1),()=>g.delete(e))}),[i,g,a]);return d&&v&&(x={...x}),(0,r.useMemo)(()=>{g.forEach((e,t)=>g.set(t,!1))},[i]),r.useEffect(()=>{!i&&!g.size&&a&&a()},[i]),"popLayout"===u&&(t=(0,o.jsx)(h,{isPresent:i,anchorX:p,root:m,children:t})),(0,o.jsx)(l.t.Provider,{value:x,children:t})};function f(){return new Map}var m=n(8917);const g=e=>e.key||"";function y(e){const t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}const v=e=>{let{children:t,custom:n,initial:l=!0,onExitComplete:c,presenceAffectsLayout:d=!0,mode:u="sync",propagate:h=!1,anchorX:f="left",root:v}=e;const[x,b]=(0,m.xQ)(h),w=(0,r.useMemo)(()=>y(t),[t]),S=h&&!x?[]:w.map(g),k=(0,r.useRef)(!0),E=(0,r.useRef)(w),C=(0,s.M)(()=>new Map),[M,O]=(0,r.useState)(w),[T,A]=(0,r.useState)(w);(0,a.E)(()=>{k.current=!1,E.current=w;for(let e=0;e<T.length;e++){const t=g(T[e]);S.includes(t)?C.delete(t):!0!==C.get(t)&&C.set(t,!1)}},[T,S.length,S.join("-")]);const N=[];if(w!==M){let e=[...w];for(let t=0;t<T.length;t++){const n=T[t],o=g(n);S.includes(o)||(e.splice(t,0,n),N.push(n))}return"wait"===u&&N.length&&(e=N),A(y(e)),O(w),null}const{forceRender:P}=(0,r.useContext)(i.L);return(0,o.jsx)(o.Fragment,{children:T.map(e=>{const t=g(e),r=!(h&&!x)&&(w===T||S.includes(t));return(0,o.jsx)(p,{isPresent:r,initial:!(k.current&&!l)&&void 0,custom:n,presenceAffectsLayout:d,mode:u,root:v,onExitComplete:r?void 0:()=>{if(!C.has(t))return;C.set(t,!0);let e=!0;C.forEach(t=>{t||(e=!1)}),e&&(P?.(),A(E.current),h&&b?.(),c&&c())},anchorX:f,children:e},t)})})}},3577:(e,t,n)=>{e.exports={graphlib:n(7938),layout:n(6675),debug:n(3774),util:{time:n(5641).time,notime:n(5641).notime},version:n(5185)}},3668:(e,t,n)=>{var o=n(8902),r=n(2587),i=n(8114);e.exports=function(e,t,n,s,a,l){var c=1&n,d=e.length,u=t.length;if(d!=u&&!(c&&u>d))return!1;var h=l.get(e),p=l.get(t);if(h&&p)return h==t&&p==e;var f=-1,m=!0,g=2&n?new o:void 0;for(l.set(e,t),l.set(t,e);++f<d;){var y=e[f],v=t[f];if(s)var x=c?s(v,y,f,t,e,l):s(y,v,f,e,t,l);if(void 0!==x){if(x)continue;m=!1;break}if(g){if(!r(t,function(e,t){if(!i(g,t)&&(y===e||a(y,e,n,s,l)))return g.push(t)})){m=!1;break}}else if(y!==v&&!a(y,v,n,s,l)){m=!1;break}}return l.delete(e),l.delete(t),m}},3713:(e,t,n)=>{var o=n(6140),r=n(1143),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!o(e))return r(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},3728:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]])},3737:e=>{e.exports=function(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}},3774:(e,t,n)=>{var o=n(8208),r=n(5641),i=n(7938).Graph;e.exports={debugOrdering:function(e){var t=r.buildLayerMatrix(e),n=new i({compound:!0,multigraph:!0}).setGraph({});return o.forEach(e.nodes(),function(t){n.setNode(t,{label:t}),n.setParent(t,"layer"+e.node(t).rank)}),o.forEach(e.edges(),function(e){n.setEdge(e.v,e.w,{},e.name)}),o.forEach(t,function(e,t){var r="layer"+t;n.setNode(r,{rank:"same"}),o.reduce(e,function(e,t){return n.setEdge(e,t,{style:"invis"}),t})}),n}}},3781:(e,t,n)=>{var o=n(9417),r=n(8673);e.exports=function(e){for(var t=r(e),n=t.length;n--;){var i=t[n],s=e[i];t[n]=[i,s,o(s)]}return t}},3868:(e,t,n)=>{var o=n(1775),r=n(3211);e.exports=function(e,t,n){(void 0!==n&&!r(e[t],n)||void 0===n&&!(t in e))&&o(e,t,n)}},3892:e=>{e.exports=function(e){return this.__data__.has(e)}},3932:(e,t,n)=>{var o=n(396),r=n(2866),i=n(2597),s=n(914);e.exports=function(e){return i(e)?o(s(e)):r(e)}},4008:(e,t,n)=>{var o=n(7449),r=n(3366);e.exports=function(e,t){return o(e,t,function(t,n){return r(e,n)})}},4020:e=>{e.exports=function(e,t,n){for(var o=n-1,r=e.length;++o<r;)if(e[o]===t)return o;return-1}},4052:e=>{var t=Array.isArray;e.exports=t},4065:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},4079:(e,t,n)=>{var o=n(8259),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,s=o(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(r,function(e,n,o,r){t.push(o?r.replace(i,"$1"):n||e)}),t});e.exports=s},4160:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,o){n[++t]=[o,e]}),n}},4190:(e,t,n)=>{var o=n(1340);e.exports=function(e){var t=this.__data__,n=o(t,e);return n<0?void 0:t[n][1]}},4258:(e,t,n)=>{var o=n(5906)();e.exports=o},4262:(e,t,n)=>{var o=n(8895),r=n(4052);e.exports=function(e,t,n){var i=t(e);return r(e)?i:o(i,n(e))}},4282:(e,t,n)=>{"use strict";function o(e){this.content=e}n.d(t,{S4:()=>G,ZF:()=>le,FK:()=>a,CU:()=>u,sX:()=>X,bP:()=>P,u$:()=>A,vI:()=>h,Sj:()=>Z,Ji:()=>p}),o.prototype={constructor:o,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),s=r.content.slice();return-1==i?s.push(n||e,t):(s[i+1]=t,n&&(s[i]=n)),new o(s)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new o(n)},addToStart:function(e,t){return new o([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new o(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),s=r.find(e);return i.splice(-1==s?i.length:s,0,t,n),new o(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=o.from(e)).size?new o(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=o.from(e)).size?new o(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=o.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}},o.from=function(e){if(e instanceof o)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new o(t)};const r=o;function i(e,t,n){for(let o=0;;o++){if(o==e.childCount||o==t.childCount)return e.childCount==t.childCount?null:n;let r=e.child(o),s=t.child(o);if(r!=s){if(!r.sameMarkup(s))return n;if(r.isText&&r.text!=s.text){for(let e=0;r.text[e]==s.text[e];e++)n++;return n}if(r.content.size||s.content.size){let e=i(r.content,s.content,n+1);if(null!=e)return e}n+=r.nodeSize}else n+=r.nodeSize}}function s(e,t,n,o){for(let r=e.childCount,i=t.childCount;;){if(0==r||0==i)return r==i?null:{a:n,b:o};let a=e.child(--r),l=t.child(--i),c=a.nodeSize;if(a!=l){if(!a.sameMarkup(l))return{a:n,b:o};if(a.isText&&a.text!=l.text){let e=0,t=Math.min(a.text.length,l.text.length);for(;e<t&&a.text[a.text.length-e-1]==l.text[l.text.length-e-1];)e++,n--,o--;return{a:n,b:o}}if(a.content.size||l.content.size){let e=s(a.content,l.content,n-1,o-1);if(e)return e}n-=c,o-=c}else n-=c,o-=c}}class a{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0;for(let i=0,s=0;s<t;i++){let a=this.content[i],l=s+a.nodeSize;if(l>e&&!1!==n(a,o+s,r||null,i)&&a.content.size){let r=s+1;a.nodesBetween(Math.max(0,e-r),Math.min(a.content.size,t-r),n,o+r)}s=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,o){let r="",i=!0;return this.nodesBetween(e,t,(s,a)=>{let l=s.isText?s.text.slice(Math.max(e,a)-a,t-a):s.isLeaf?o?"function"===typeof o?o(s):o:s.type.spec.leafText?s.type.spec.leafText(s):"":"";s.isBlock&&(s.isLeaf&&l||s.isTextblock)&&n&&(i?i=!1:r+=n),r+=l},0),r}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,o=this.content.slice(),r=0;for(t.isText&&t.sameMarkup(n)&&(o[o.length-1]=t.withText(t.text+n.text),r=1);r<e.content.length;r++)o.push(e.content[r]);return new a(o,this.size+e.size)}cut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size;if(0==e&&t==this.size)return this;let n=[],o=0;if(t>e)for(let r=0,i=0;i<t;r++){let s=this.content[r],a=i+s.nodeSize;a>e&&((i<e||a>t)&&(s=s.isText?s.cut(Math.max(0,e-i),Math.min(s.text.length,t-i)):s.cut(Math.max(0,e-i-1),Math.min(s.content.size,t-i-1))),n.push(s),o+=s.nodeSize),i=a}return new a(n,o)}cutByIndex(e,t){return e==t?a.empty:0==e&&t==this.content.length?this:new a(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let o=this.content.slice(),r=this.size+t.nodeSize-n.nodeSize;return o[e]=t,new a(o,r)}addToStart(e){return new a([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new a(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let o=this.content[t];e(o,n,t),n+=o.nodeSize}}findDiffStart(e){return i(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}findDiffEnd(e){return s(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size,arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.size)}findIndex(e){if(0==e)return c(0,e);if(e==this.size)return c(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,n=0;;t++){let o=n+this.child(t).nodeSize;if(o>=e)return o==e?c(t+1,o):c(t,n);n=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return a.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new a(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return a.empty;let t,n=0;for(let o=0;o<e.length;o++){let r=e[o];n+=r.nodeSize,o&&r.isText&&e[o-1].sameMarkup(r)?(t||(t=e.slice(0,o)),t[t.length-1]=r.withText(t[t.length-1].text+r.text)):t&&t.push(r)}return new a(t||e,n)}static from(e){if(!e)return a.empty;if(e instanceof a)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new a([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}a.empty=new a([],0);const l={index:0,offset:0};function c(e,t){return l.index=e,l.offset=t,l}function d(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!d(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!d(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}class u{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let o=0;o<e.length;o++){let r=e[o];if(this.eq(r))return e;if(this.type.excludes(r.type))t||(t=e.slice(0,o));else{if(r.type.excludes(this.type))return e;!n&&r.type.rank>this.type.rank&&(t||(t=e.slice(0,o)),t.push(this),n=!0),t&&t.push(r)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&d(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);let o=n.create(t.attrs);return n.checkAttrs(o.attrs),o}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return u.none;if(e instanceof u)return[e];let t=e.slice();return t.sort((e,t)=>e.type.rank-t.type.rank),t}}u.none=[];class h extends Error{}class p{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=m(this.content,e+this.openStart,t);return n&&new p(n,this.openStart,this.openEnd)}removeBetween(e,t){return new p(f(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return p.empty;let n=t.openStart||0,o=t.openEnd||0;if("number"!=typeof n||"number"!=typeof o)throw new RangeError("Invalid input for Slice.fromJSON");return new p(a.fromJSON(e,t.content),n,o)}static maxOpen(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=0,o=0;for(let r=e.firstChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.firstChild)n++;for(let r=e.lastChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.lastChild)o++;return new p(e,n,o)}}function f(e,t,n){let{index:o,offset:r}=e.findIndex(t),i=e.maybeChild(o),{index:s,offset:a}=e.findIndex(n);if(r==t||i.isText){if(a!=n&&!e.child(s).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(o!=s)throw new RangeError("Removing non-flat range");return e.replaceChild(o,i.copy(f(i.content,t-r-1,n-r-1)))}function m(e,t,n,o){let{index:r,offset:i}=e.findIndex(t),s=e.maybeChild(r);if(i==t||s.isText)return o&&!o.canReplace(r,r,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=m(s.content,t-i-1,n);return a&&e.replaceChild(r,s.copy(a))}function g(e,t,n){if(n.openStart>e.depth)throw new h("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new h("Inconsistent open depths");return y(e,t,n,0)}function y(e,t,n,o){let r=e.index(o),i=e.node(o);if(r==t.index(o)&&o<e.depth-n.openStart){let s=y(e,t,n,o+1);return i.copy(i.content.replaceChild(r,s))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=o||t.depth!=o){let{start:r,end:s}=function(e,t){let n=t.depth-e.openStart,o=t.node(n).copy(e.content);for(let r=n-1;r>=0;r--)o=t.node(r).copy(a.from(o));return{start:o.resolveNoCache(e.openStart+n),end:o.resolveNoCache(o.content.size-e.openEnd-n)}}(n,e);return S(i,k(e,r,s,t,o))}{let o=e.parent,r=o.content;return S(o,r.cut(0,e.parentOffset).append(n.content).append(r.cut(t.parentOffset)))}}return S(i,E(e,t,o))}function v(e,t){if(!t.type.compatibleContent(e.type))throw new h("Cannot join "+t.type.name+" onto "+e.type.name)}function x(e,t,n){let o=e.node(n);return v(o,t.node(n)),o}function b(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function w(e,t,n,o){let r=(t||e).node(n),i=0,s=t?t.index(n):r.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(b(e.nodeAfter,o),i++));for(let a=i;a<s;a++)b(r.child(a),o);t&&t.depth==n&&t.textOffset&&b(t.nodeBefore,o)}function S(e,t){return e.type.checkContent(t),e.copy(t)}function k(e,t,n,o,r){let i=e.depth>r&&x(e,t,r+1),s=o.depth>r&&x(n,o,r+1),l=[];return w(null,e,r,l),i&&s&&t.index(r)==n.index(r)?(v(i,s),b(S(i,k(e,t,n,o,r+1)),l)):(i&&b(S(i,E(e,t,r+1)),l),w(t,n,r,l),s&&b(S(s,E(n,o,r+1)),l)),w(o,null,r,l),new a(l)}function E(e,t,n){let o=[];if(w(null,e,n,o),e.depth>n){b(S(x(e,t,n+1),E(e,t,n+1)),o)}return w(t,null,n,o),new a(o)}p.empty=new p(a.empty,0,0);class C{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],o=e.child(t);return n?e.child(t).cut(n):o}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],o=0==t?0:this.path[3*t-1]+1;for(let r=0;r<e;r++)o+=n.child(r).nodeSize;return o}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return u.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),o=e.maybeChild(t);if(!n){let e=n;n=o,o=e}let r=n.marks;for(var i=0;i<r.length;i++)!1!==r[i].type.spec.inclusive||o&&r[i].isInSet(o.marks)||(r=r[i--].removeFromSet(r));return r}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,o=e.parent.maybeChild(e.index());for(var r=0;r<n.length;r++)!1!==n[r].type.spec.inclusive||o&&n[r].isInSet(o.marks)||(n=n[r--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=arguments.length>1?arguments[1]:void 0;if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new A(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],o=0,r=t;for(let i=e;;){let{index:e,offset:t}=i.content.findIndex(r),s=r-t;if(n.push(i,e,o+t),!s)break;if(i=i.child(e),i.isText)break;r=s-1,o+=t+1}return new C(t,n,r)}static resolveCached(e,t){let n=T.get(e);if(n)for(let r=0;r<n.elts.length;r++){let e=n.elts[r];if(e.pos==t)return e}else T.set(e,n=new M);let o=n.elts[n.i]=C.resolve(e,t);return n.i=(n.i+1)%O,o}}class M{constructor(){this.elts=[],this.i=0}}const O=12,T=new WeakMap;class A{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const N=Object.create(null);class P{constructor(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.none;this.type=e,this.attrs=t,this.marks=o,this.content=n||a.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.content.nodesBetween(e,t,n,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,o){return this.content.textBetween(e,t,n,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&d(this.attrs,t||e.defaultAttrs||N)&&u.sameSet(this.marks,n||u.none)}copy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e==this.content?this:new P(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new P(this.type,this.attrs,this.content,e)}cut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size;return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e==t)return p.empty;let o=this.resolve(e),r=this.resolve(t),i=n?0:o.sharedDepth(t),s=o.start(i),a=o.node(i).content.cut(o.pos-s,r.pos-s);return new p(a,o.depth-i,r.depth-i)}replace(e,t,n){return g(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:o}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(o==e||t.isText)return t;e-=o+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let o=this.content.child(t-1);return{node:o,index:t-1,offset:n-o.nodeSize}}resolve(e){return C.resolveCached(this,e)}resolveNoCache(e){return C.resolve(this,e)}rangeHasMark(e,t,n){let o=!1;return t>e&&this.nodesBetween(e,t,e=>(n.isInSet(e.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),R(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.empty,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.childCount,i=this.contentMatchAt(e).matchFragment(n,o,r),s=i&&i.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(let a=o;a<r;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0}canReplaceWith(e,t,n,o){if(o&&!this.type.allowsMarks(o))return!1;let r=this.contentMatchAt(e).matchType(n),i=r&&r.matchFragment(this.content,t);return!!i&&i.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=u.none;for(let t=0;t<this.marks.length;t++){let n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!u.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(e=>e.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let o=a.fromJSON(e,t.content),r=e.nodeType(t.type).create(t.attrs,o,n);return r.type.checkAttrs(r.attrs),r}}P.prototype.text=void 0;class D extends P{constructor(e,t,n,o){if(super(e,t,null,o),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):R(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new D(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new D(this.type,this.attrs,e,this.marks)}cut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.text.length;return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function R(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class I{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new L(e,t);if(null==n.next)return I.empty;let o=j(n);n.next&&n.err("Unexpected trailing text");let r=function(e){let t=Object.create(null);return n($(e,0));function n(o){let r=[];o.forEach(t=>{e[t].forEach(t=>{let n,{term:o,to:i}=t;if(o){for(let e=0;e<r.length;e++)r[e][0]==o&&(n=r[e][1]);$(e,i).forEach(e=>{n||r.push([o,n=[]]),-1==n.indexOf(e)&&n.push(e)})}})});let i=t[o.join(",")]=new I(o.indexOf(e.length-1)>-1);for(let e=0;e<r.length;e++){let o=r[e][1].sort(F);i.next.push({type:r[e][0],next:t[o.join(",")]||n(o)})}return i}}(function(e){let t=[[]];return r(i(e,0),n()),t;function n(){return t.push([])-1}function o(e,n,o){let r={term:o,to:n};return t[e].push(r),r}function r(e,t){e.forEach(e=>e.to=t)}function i(e,t){if("choice"==e.type)return e.exprs.reduce((e,n)=>e.concat(i(n,t)),[]);if("seq"!=e.type){if("star"==e.type){let s=n();return o(t,s),r(i(e.expr,s),s),[o(s)]}if("plus"==e.type){let s=n();return r(i(e.expr,t),s),r(i(e.expr,s),s),[o(s)]}if("opt"==e.type)return[o(t)].concat(i(e.expr,t));if("range"==e.type){let s=t;for(let t=0;t<e.min;t++){let t=n();r(i(e.expr,s),t),s=t}if(-1==e.max)r(i(e.expr,s),s);else for(let t=e.min;t<e.max;t++){let t=n();o(s,t),r(i(e.expr,s),t),s=t}return[o(s)]}if("name"==e.type)return[o(t,void 0,e.value)];throw new Error("Unknown expr type")}for(let o=0;;o++){let s=i(e.exprs[o],t);if(o==e.exprs.length-1)return s;r(s,t=n())}}}(o));return function(e,t){for(let n=0,o=[e];n<o.length;n++){let e=o[n],r=!e.validEnd,i=[];for(let t=0;t<e.next.length;t++){let{type:n,next:s}=e.next[t];i.push(n.name),!r||n.isText||n.hasRequiredAttrs()||(r=!1),-1==o.indexOf(s)&&o.push(s)}r&&t.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(r,n),r}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.childCount,o=this;for(let r=t;o&&r<n;r++)o=o.matchType(e.child(r).type);return o}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=[this];return function r(i,s){let l=i.matchFragment(e,n);if(l&&(!t||l.validEnd))return a.from(s.map(e=>e.createAndFill()));for(let e=0;e<i.next.length;e++){let{type:t,next:n}=i.next[e];if(!t.isText&&!t.hasRequiredAttrs()&&-1==o.indexOf(n)){o.push(n);let e=r(n,s.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let o=n.shift(),r=o.match;if(r.matchType(e)){let e=[];for(let t=o;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<r.next.length;e++){let{type:i,next:s}=r.next[e];i.isLeaf||i.hasRequiredAttrs()||i.name in t||o.type&&!s.validEnd||(n.push({match:i.contentMatch,type:i,via:o}),t[i.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return function t(n){e.push(n);for(let o=0;o<n.next.length;o++)-1==e.indexOf(n.next[o].next)&&t(n.next[o].next)}(this),e.map((t,n)=>{let o=n+(t.validEnd?"*":" ")+" ";for(let r=0;r<t.next.length;r++)o+=(r?", ":"")+t.next[r].type.name+"->"+e.indexOf(t.next[r].next);return o}).join("\n")}}I.empty=new I(!0);class L{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function j(e){let t=[];do{t.push(B(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function B(e){let t=[];do{t.push(_(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function _(e){let t=function(e){if(e.eat("(")){let t=j(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){let t=function(e,t){let n=e.nodeTypes,o=n[t];if(o)return[o];let r=[];for(let i in n){let e=n[i];e.isInGroup(t)&&r.push(e)}0==r.length&&e.err("No node type or group '"+t+"' found");return r}(e,e.next).map(t=>(null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}));return e.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}e.err("Unexpected token '"+e.next+"'")}(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=z(e,t)}return t}function V(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function z(e,t){let n=V(e),o=n;return e.eat(",")&&(o="}"!=e.next?V(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:o,expr:t}}function F(e,t){return t-e}function $(e,t){let n=[];return function t(o){let r=e[o];if(1==r.length&&!r[0].term)return t(r[0].to);n.push(o);for(let e=0;e<r.length;e++){let{term:o,to:i}=r[e];o||-1!=n.indexOf(i)||t(i)}}(t),n.sort(F)}function H(e){let t=Object.create(null);for(let n in e){let o=e[n];if(!o.hasDefault)return null;t[n]=o.default}return t}function U(e,t){let n=Object.create(null);for(let o in e){let r=t&&t[o];if(void 0===r){let t=e[o];if(!t.hasDefault)throw new RangeError("No value supplied for attribute "+o);r=t.default}n[o]=r}return n}function K(e,t,n,o){for(let r in t)if(!(r in e))throw new RangeError(`Unsupported attribute ${r} for ${n} of type ${r}`);for(let r in e){let n=e[r];n.validate&&n.validate(t[r])}}function W(e,t){let n=Object.create(null);if(t)for(let o in t)n[o]=new J(e,o,t[o]);return n}class q{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=W(e,n.attrs),this.defaultAttrs=H(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==I.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:U(this.attrs,e)}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new P(this,this.computeAttrs(e),a.from(t),u.setFrom(n))}createChecked(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return t=a.from(t),this.checkContent(t),new P(this,this.computeAttrs(e),t,u.setFrom(n))}createAndFill(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(e=this.computeAttrs(e),t=a.from(t),t.size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let o=this.contentMatch.matchFragment(t),r=o&&o.fillBefore(a.empty,!0);return r?new P(this,e,t.append(r),u.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){K(this.attrs,e,"node",this.name)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(null==this.markSet)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:u.none:e}static compile(e,t){let n=Object.create(null);e.forEach((e,o)=>n[e]=new q(e,t,o));let o=t.spec.topNode||"doc";if(!n[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let r in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}}class J{constructor(e,t,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate="string"==typeof n.validate?function(e,t,n){let o=n.split("|");return n=>{let r=null===n?"null":typeof n;if(o.indexOf(r)<0)throw new RangeError(`Expected value of type ${o} for attribute ${t} on type ${e}, got ${r}`)}}(e,t,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class X{constructor(e,t,n,o){this.name=e,this.rank=t,this.schema=n,this.spec=o,this.attrs=W(e,o.attrs),this.excluded=null;let r=H(this.attrs);this.instance=r?new u(this,r):null}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!e&&this.instance?this.instance:new u(this,U(this.attrs,e))}static compile(e,t){let n=Object.create(null),o=0;return e.forEach((e,r)=>n[e]=new X(e,o++,t,r)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){K(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Z{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let o in e)t[o]=e[o];t.nodes=r.from(e.nodes),t.marks=r.from(e.marks||{}),this.nodes=q.compile(this.spec.nodes,this),this.marks=X.compile(this.spec.marks,this);let n=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let e=this.nodes[o],t=e.spec.content||"",r=e.spec.marks;if(e.contentMatch=n[t]||(n[t]=I.parse(t,this.nodes)),e.inlineContent=e.contentMatch.inlineContent,e.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!e.isInline||!e.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=e}e.markSet="_"==r?null:r?Y(this,r.split(" ")):""!=r&&e.inlineContent?null:[]}for(let o in this.marks){let e=this.marks[o],t=e.spec.excludes;e.excluded=null==t?[e]:""==t?[]:Y(this,t.split(" "))}this.nodeFromJSON=e=>P.fromJSON(this,e),this.markFromJSON=e=>u.fromJSON(this,e),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof q))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,o)}text(e,t){let n=this.nodes.text;return new D(n,n.defaultAttrs,e,u.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Y(e,t){let n=[];for(let o=0;o<t.length;o++){let r=t[o],i=e.marks[r],s=i;if(i)n.push(i);else for(let t in e.marks){let o=e.marks[t];("_"==r||o.spec.group&&o.spec.group.split(" ").indexOf(r)>-1)&&n.push(s=o)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[o]+"'")}return n}class G{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let n=this.matchedStyles=[];t.forEach(e=>{if(function(e){return null!=e.tag}(e))this.tags.push(e);else if(function(e){return null!=e.style}(e)){let t=/[^=]*/.exec(e.style)[0];n.indexOf(t)<0&&n.push(t),this.styles.push(e)}}),this.normalizeLists=!this.tags.some(t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)})}parse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new re(this,t,!1);return n.addAll(e,u.none,t.from,t.to),n.finish()}parseSlice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new re(this,t,!0);return n.addAll(e,u.none,t.from,t.to),p.maxOpen(n.finish())}matchTag(e,t,n){for(let o=n?this.tags.indexOf(n)+1:0;o<this.tags.length;o++){let n=this.tags[o];if(ie(e,n.tag)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,o){for(let r=o?this.styles.indexOf(o)+1:0;r<this.styles.length;r++){let o=this.styles[r],i=o.style;if(!(0!=i.indexOf(e)||o.context&&!n.matchesContext(o.context)||i.length>e.length&&(61!=i.charCodeAt(e.length)||i.slice(e.length+1)!=t))){if(o.getAttrs){let e=o.getAttrs(t);if(!1===e)continue;o.attrs=e||void 0}return o}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,o=0;for(;o<t.length;o++){let e=t[o];if((null==e.priority?50:e.priority)<n)break}t.splice(o,0,e)}for(let o in e.marks){let t=e.marks[o].spec.parseDOM;t&&t.forEach(e=>{n(e=se(e)),e.mark||e.ignore||e.clearMark||(e.mark=o)})}for(let o in e.nodes){let t=e.nodes[o].spec.parseDOM;t&&t.forEach(e=>{n(e=se(e)),e.node||e.ignore||e.mark||(e.node=o)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new G(e,G.schemaRules(e)))}}const Q={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ee={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},te={ol:!0,ul:!0};function ne(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}class oe{constructor(e,t,n,o,r,i){this.type=e,this.attrs=t,this.marks=n,this.solid=o,this.options=i,this.content=[],this.activeMarks=u.none,this.match=r||(4&i?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(a.from(e));if(!t){let t,n=this.type.contentMatch;return(t=n.findWrapping(e.type))?(this.match=n,t):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e,t=this.content[this.content.length-1];if(t&&t.isText&&(e=/[ \t\r\n\u000c]+$/.exec(t.text))){let n=t;t.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length))}}let t=a.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(a.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Q.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class re{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let o,r=t.topNode,i=ne(null,t.preserveWhitespace,0)|(n?4:0);o=r?new oe(r.type,r.attrs,u.none,!0,t.topMatch||r.type.contentMatch,i):new oe(n?null:e.schema.topNodeType,null,u.none,!0,null,i),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}addTextNode(e,t){let n=e.nodeValue,o=this.top,r=2&o.options?"full":this.localPreserveWS||(1&o.options)>0;if("full"===r||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r)n="full"!==r?n.replace(/\r?\n|\r/g," "):n.replace(/\r\n?/g,"\n");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let t=o.content[o.content.length-1],r=e.previousSibling;(!t||r&&"BR"==r.nodeName||t.isText&&/[ \t\r\n\u000c]$/.test(t.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),t,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,t,n){let o=this.localPreserveWS,r=this.top;("PRE"==e.tagName||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let i,s=e.nodeName.toLowerCase();te.hasOwnProperty(s)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&te.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));e:if(a?a.ignore:ee.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,t);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let n,o=this.needsBlock;if(Q.hasOwnProperty(s))r.content.length&&r.content[0].isInline&&this.open&&(this.open--,r=this.top),n=!0,r.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let i=a&&a.skip?t:this.readStyles(e,t);i&&this.addAll(e,i),n&&this.sync(r),this.needsBlock=o}else{let n=this.readStyles(e,t);n&&this.addElementByRule(e,a,n,!1===a.consuming?i:void 0)}this.localPreserveWS=o}leafFallback(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"),t)}ignoreFallback(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let n=e.style;if(n&&n.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let e=this.parser.matchedStyles[o],r=n.getPropertyValue(e);if(r)for(let n;;){let o=this.parser.matchStyle(e,r,this,n);if(!o)break;if(o.ignore)return null;if(t=o.clearMark?t.filter(e=>!o.clearMark(e)):t.concat(this.parser.schema.marks[o.mark].create(o.attrs)),!1!==o.consuming)break;n=o}}return t}addElementByRule(e,t,n,o){let r,i;if(t.node)if(i=this.parser.schema.nodes[t.node],i.isLeaf)this.insertNode(i.create(t.attrs),n,"BR"==e.nodeName)||this.leafFallback(e,n);else{let e=this.enter(i,t.attrs||null,n,t.preserveWhitespace);e&&(r=!0,n=e)}else{let e=this.parser.schema.marks[t.mark];n=n.concat(e.create(t.attrs))}let s=this.top;if(i&&i.isLeaf)this.findInside(e);else if(o)this.addElement(e,n,o);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(e=>this.insertNode(e,n,!1));else{let o=e;"string"==typeof t.contentElement?o=e.querySelector(t.contentElement):"function"==typeof t.contentElement?o=t.contentElement(e):t.contentElement&&(o=t.contentElement),this.findAround(e,o,!0),this.addAll(o,n),this.findAround(e,o,!1)}r&&this.sync(s)&&this.open--}addAll(e,t,n,o){let r=n||0;for(let i=n?e.childNodes[n]:e.firstChild,s=null==o?null:e.childNodes[o];i!=s;i=i.nextSibling,++r)this.findAtPoint(e,r),this.addDOM(i,t);this.findAtPoint(e,r)}findPlace(e,t,n){let o,r;for(let i=this.open,s=0;i>=0;i--){let t=this.nodes[i],a=t.findWrapping(e);if(a&&(!o||o.length>a.length+s)&&(o=a,r=t,!a.length))break;if(t.solid){if(n)break;s+=2}}if(!o)return null;this.sync(r);for(let i=0;i<o.length;i++)t=this.enterInner(o[i],null,t,!1);return t}insertNode(e,t,n){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&(t=this.enterInner(e,null,t))}let o=this.findPlace(e,t,n);if(o){this.closeExtra();let t=this.top;t.match&&(t.match=t.match.matchType(e.type));let n=u.none;for(let r of o.concat(e.marks))(t.type?t.type.allowsMarkType(r.type):ae(r.type,e.type))&&(n=r.addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,n,o){let r=this.findPlace(e.create(t),n,!1);return r&&(r=this.enterInner(e,t,n,!0,o)),r}enterInner(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4?arguments[4]:void 0;this.closeExtra();let i=this.top;i.match=i.match&&i.match.matchType(e);let s=ne(e,r,i.options);4&i.options&&0==i.content.length&&(s|=4);let a=u.none;return n=n.filter(t=>!(i.type?i.type.allowsMarkType(t.type):ae(t.type,e))||(a=t.addToSet(a),!1)),this.nodes.push(new oe(e,t,a,o,null,s)),this.open++,n}closeExtra(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!(!this.isOpen&&!this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=1)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let o=0;o<this.find.length;o++)if(null==this.find[o].pos&&1==e.nodeType&&e.contains(this.find[o].node)){t.compareDocumentPosition(this.find[o].node)&(n?2:4)&&(this.find[o].pos=this.currentPos)}}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,o=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),r=-(n?n.depth+1:0)+(o?0:1),i=(e,s)=>{for(;e>=0;e--){let a=t[e];if(""==a){if(e==t.length-1||0==e)continue;for(;s>=r;s--)if(i(e-1,s))return!0;return!1}{let e=s>0||0==s&&o?this.nodes[s].type:n&&s>=r?n.node(s-r).type:null;if(!e||e.name!=a&&!e.isInGroup(a))return!1;s--}}return!0};return i(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let e=this.parser.schema.nodes[t];if(e.isTextblock&&e.defaultAttrs)return e}}}function ie(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function se(e){let t={};for(let n in e)t[n]=e[n];return t}function ae(e,t){let n=t.schema.nodes;for(let o in n){let r=n[o];if(!r.allowsMarkType(e))continue;let i=[],s=e=>{i.push(e);for(let n=0;n<e.edgeCount;n++){let{type:o,next:r}=e.edge(n);if(o==t)return!0;if(i.indexOf(r)<0&&s(r))return!0}};if(s(r.contentMatch))return!0}}class le{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;n||(n=de(t).createDocumentFragment());let o=n,r=[];return e.forEach(e=>{if(r.length||e.marks.length){let n=0,i=0;for(;n<r.length&&i<e.marks.length;){let t=e.marks[i];if(this.marks[t.type.name]){if(!t.eq(r[n][0])||!1===t.type.spec.spanning)break;n++,i++}else i++}for(;n<r.length;)o=r.pop()[1];for(;i<e.marks.length;){let n=e.marks[i++],s=this.serializeMark(n,e.isInline,t);s&&(r.push([n,o]),o.appendChild(s.dom),o=s.contentDOM||s.dom)}}o.appendChild(this.serializeNodeInner(e,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:o}=pe(de(t),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,o)}return n}serializeNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.serializeNodeInner(e,t);for(let o=e.marks.length-1;o>=0;o--){let r=this.serializeMark(e.marks[o],e.isInline,t);r&&((r.contentDOM||r.dom).appendChild(n),n=r.dom)}return n}serializeMark(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.marks[e.type.name];return o&&pe(de(n),o(e,t),null,e.attrs)}static renderSpec(e,t){return pe(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new le(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=ce(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return ce(e.marks)}}function ce(e){let t={};for(let n in e){let o=e[n].spec.toDOM;o&&(t[n]=o)}return t}function de(e){return e.document||window.document}const ue=new WeakMap;function he(e){let t=ue.get(e);return void 0===t&&ue.set(e,t=function(e){let t=null;function n(e){if(e&&"object"==typeof e)if(Array.isArray(e))if("string"==typeof e[0])t||(t=[]),t.push(e);else for(let t=0;t<e.length;t++)n(e[t]);else for(let t in e)n(e[t])}return n(e),t}(e)),t}function pe(e,t,n,o){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let r,i=t[0];if("string"!=typeof i)throw new RangeError("Invalid array passed to renderSpec");if(o&&(r=he(o))&&r.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s,a=i.indexOf(" ");a>0&&(n=i.slice(0,a),i=i.slice(a+1));let l=n?e.createElementNS(n,i):e.createElement(i),c=t[1],d=1;if(c&&"object"==typeof c&&null==c.nodeType&&!Array.isArray(c)){d=2;for(let e in c)if(null!=c[e]){let t=e.indexOf(" ");t>0?l.setAttributeNS(e.slice(0,t),e.slice(t+1),c[e]):"style"==e&&l.style?l.style.cssText=c[e]:l.setAttribute(e,c[e])}}for(let u=d;u<t.length;u++){let r=t[u];if(0===r){if(u<t.length-1||u>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}{let{dom:t,contentDOM:i}=pe(e,r,n,o);if(l.appendChild(t),i){if(s)throw new RangeError("Multiple content holes");s=i}}}return{dom:l,contentDOM:s}}},4308:(e,t,n)=>{"use strict";var o=n(8208);function r(e,t,n){for(var r=o.zipObject(n,o.map(n,function(e,t){return t})),i=o.flatten(o.map(t,function(t){return o.sortBy(o.map(e.outEdges(t),function(t){return{pos:r[t.w],weight:e.edge(t).weight}}),"pos")}),!0),s=1;s<n.length;)s<<=1;var a=2*s-1;s-=1;var l=o.map(new Array(a),function(){return 0}),c=0;return o.forEach(i.forEach(function(e){var t=e.pos+s;l[t]+=e.weight;for(var n=0;t>0;)t%2&&(n+=l[t+1]),l[t=t-1>>1]+=e.weight;c+=e.weight*n})),c}e.exports=function(e,t){for(var n=0,o=1;o<t.length;++o)n+=r(e,t[o-1],t[o]);return n}},4320:(e,t,n)=>{var o=n(3713),r=n(6924),i=n(2777),s=n(4052),a=n(6571),l=n(4543),c=n(6140),d=n(1268),u=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(a(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||d(e)||i(e)))return!e.length;var t=r(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!o(e).length;for(var n in e)if(u.call(e,n))return!1;return!0}},4353:(e,t,n)=>{e=n.nmd(e);var o=n(6552),r=t&&!t.nodeType&&t,i=r&&e&&!e.nodeType&&e,s=i&&i.exports===r?o.Buffer:void 0,a=s?s.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,o=a?a(n):new e.constructor(n);return e.copy(o),o}},4416:(e,t,n)=>{var o=n(8902),r=n(5866),i=n(1558),s=n(8114),a=n(8182),l=n(2074);e.exports=function(e,t,n){var c=-1,d=r,u=e.length,h=!0,p=[],f=p;if(n)h=!1,d=i;else if(u>=200){var m=t?null:a(e);if(m)return l(m);h=!1,d=s,f=new o}else f=t?[]:p;e:for(;++c<u;){var g=e[c],y=t?t(g):g;if(g=n||0!==g?g:0,h&&y===y){for(var v=f.length;v--;)if(f[v]===y)continue e;t&&f.push(y),p.push(g)}else d(f,y,n)||(f!==p&&f.push(y),p.push(g))}return p}},4428:(e,t,n)=>{var o=n(5750);function r(){this._arr=[],this._keyIndices={}}e.exports=r,r.prototype.size=function(){return this._arr.length},r.prototype.keys=function(){return this._arr.map(function(e){return e.key})},r.prototype.has=function(e){return o.has(this._keyIndices,e)},r.prototype.priority=function(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority},r.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},r.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!o.has(n,e)){var r=this._arr,i=r.length;return n[e]=i,r.push({key:e,priority:t}),this._decrease(i),!0}return!1},r.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},r.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},r.prototype._heapify=function(e){var t=this._arr,n=2*e,o=n+1,r=e;n<t.length&&(r=t[n].priority<t[r].priority?n:r,o<t.length&&(r=t[o].priority<t[r].priority?o:r),r!==e&&(this._swap(e,r),this._heapify(r)))},r.prototype._decrease=function(e){for(var t,n=this._arr,o=n[e].priority;0!==e&&!(n[t=e>>1].priority<o);)this._swap(e,t),e=t},r.prototype._swap=function(e,t){var n=this._arr,o=this._keyIndices,r=n[e],i=n[t];n[e]=i,n[t]=r,o[i.key]=e,o[r.key]=t}},4459:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},4501:(e,t,n)=>{"use strict";var o=n(8208),r=n(3088),i=n(5758).slack,s=n(5758).longestPath,a=n(7938).alg.preorder,l=n(7938).alg.postorder,c=n(5641).simplify;function d(e){e=c(e),s(e);var t,n=r(e);for(p(n),u(n,e);t=m(n);)y(n,e,t,g(n,e,t))}function u(e,t){var n=l(e,e.nodes());n=n.slice(0,n.length-1),o.forEach(n,function(n){!function(e,t,n){var o=e.node(n),r=o.parent;e.edge(n,r).cutvalue=h(e,t,n)}(e,t,n)})}function h(e,t,n){var r=e.node(n).parent,i=!0,s=t.edge(n,r),a=0;return s||(i=!1,s=t.edge(r,n)),a=s.weight,o.forEach(t.nodeEdges(n),function(o){var s,l,c=o.v===n,d=c?o.w:o.v;if(d!==r){var u=c===i,h=t.edge(o).weight;if(a+=u?h:-h,s=n,l=d,e.hasEdge(s,l)){var p=e.edge(n,d).cutvalue;a+=u?-p:p}}}),a}function p(e,t){arguments.length<2&&(t=e.nodes()[0]),f(e,{},1,t)}function f(e,t,n,r,i){var s=n,a=e.node(r);return t[r]=!0,o.forEach(e.neighbors(r),function(i){o.has(t,i)||(n=f(e,t,n,i,r))}),a.low=s,a.lim=n++,i?a.parent=i:delete a.parent,n}function m(e){return o.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function g(e,t,n){var r=n.v,s=n.w;t.hasEdge(r,s)||(r=n.w,s=n.v);var a=e.node(r),l=e.node(s),c=a,d=!1;a.lim>l.lim&&(c=l,d=!0);var u=o.filter(t.edges(),function(t){return d===v(e,e.node(t.v),c)&&d!==v(e,e.node(t.w),c)});return o.minBy(u,function(e){return i(t,e)})}function y(e,t,n,r){var i=n.v,s=n.w;e.removeEdge(i,s),e.setEdge(r.v,r.w,{}),p(e),u(e,t),function(e,t){var n=o.find(e.nodes(),function(e){return!t.node(e).parent}),r=a(e,n);r=r.slice(1),o.forEach(r,function(n){var o=e.node(n).parent,r=t.edge(n,o),i=!1;r||(r=t.edge(o,n),i=!0),t.node(n).rank=t.node(o).rank+(i?r.minlen:-r.minlen)})}(e,t)}function v(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}e.exports=d,d.initLowLimValues=p,d.initCutValues=u,d.calcCutValue=h,d.leaveEdge=m,d.enterEdge=g,d.exchangeEdges=y},4537:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},4543:(e,t,n)=>{e=n.nmd(e);var o=n(6552),r=n(14),i=t&&!t.nodeType&&t,s=i&&e&&!e.nodeType&&e,a=s&&s.exports===i?o.Buffer:void 0,l=(a?a.isBuffer:void 0)||r;e.exports=l},4545:(e,t,n)=>{var o=n(7160);e.exports=function(){this.__data__=new o,this.size=0}},4552:(e,t,n)=>{var o=n(9812),r=Object.prototype,i=r.hasOwnProperty,s=r.toString,a=o?o.toStringTag:void 0;e.exports=function(e){var t=i.call(e,a),n=e[a];try{e[a]=void 0;var o=!0}catch(l){}var r=s.call(e);return o&&(t?e[a]=n:delete e[a]),r}},4570:(e,t,n)=>{var o=n(5647),r=n(929);e.exports=function(e){return o(function(t,n){var o=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=e.length>3&&"function"==typeof s?(i--,s):void 0,a&&r(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),t=Object(t);++o<i;){var l=n[o];l&&e(t,l,o,s)}return t})}},4596:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("pen-line",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]])},4615:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("sticky-note",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]])},4657:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},4664:(e,t,n)=>{var o=n(4258),r=n(8673);e.exports=function(e,t){return e&&o(e,t,r)}},4677:(e,t,n)=>{var o=n(3253),r=n(4570)(function(e,t,n){o(e,t,n)});e.exports=r},4724:(e,t,n)=>{var o=n(396)("length");e.exports=o},4735:(e,t,n)=>{"use strict";n.d(t,{B:()=>o});const o="undefined"!==typeof window},4757:(e,t,n)=>{var o=n(6552);e.exports=function(){return o.Date.now()}},4805:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},4816:(e,t,n)=>{var o=n(7251),r=n(7159),i=n(438),s=n(9394),a=n(6874);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}l.prototype.clear=o,l.prototype.delete=r,l.prototype.get=i,l.prototype.has=s,l.prototype.set=a,e.exports=l},4830:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},4919:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},4930:(e,t,n)=>{"use strict";n.d(t,{M:()=>r});var o=n(5043);function r(e){const t=(0,o.useRef)(null);return null===t.current&&(t.current=e()),t.current}},4935:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]])},4990:(e,t,n)=>{"use strict";n.d(t,{$Z:()=>m,hG:()=>M});var o=n(5043),r=n(7950),i=n(129);function s(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var a,l={exports:{}},c={};l.exports=function(){if(a)return c;a=1;var e=o,t="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},n=e.useState,r=e.useEffect,i=e.useLayoutEffect,s=e.useDebugValue;function l(e){var n=e.getSnapshot;e=e.value;try{var o=n();return!t(e,o)}catch(r){return!0}}var d="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var o=t(),a=n({inst:{value:o,getSnapshot:t}}),c=a[0].inst,d=a[1];return i(function(){c.value=o,c.getSnapshot=t,l(c)&&d({inst:c})},[e,o,t]),r(function(){return l(c)&&d({inst:c}),e(function(){l(c)&&d({inst:c})})},[e]),s(o),o};return c.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:d,c}();var d=l.exports;const u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):t&&(t.current=e)})}},h=e=>{let{contentComponent:t}=e;const n=d.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return o.createElement(o.Fragment,null,Object.values(n))};class p extends o.Component{constructor(e){var t;super(e),this.editorContentRef=o.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:Boolean(null===(t=e.editor)||void 0===t?void 0:t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=function(){const e=new Set;let t={};return{subscribe:t=>(e.add(t),()=>{e.delete(t)}),getSnapshot:()=>t,getServerSnapshot:()=>t,setRenderer(n,o){t={...t,[n]:r.createPortal(o.reactElement,o.element,n)},e.forEach(e=>e())},removeRenderer(n){const o={...t};delete o[n],t=o,e.forEach(e=>e())}}}(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(e=>e.hasContentComponentInitialized?e:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e)return;if(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild)return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...n}=this.props;return o.createElement(o.Fragment,null,o.createElement("div",{ref:u(t,this.editorContentRef),...n}),(null===e||void 0===e?void 0:e.contentComponent)&&o.createElement(h,{contentComponent:e.contentComponent}))}}const f=(0,o.forwardRef)((e,t)=>{const n=o.useMemo(()=>Math.floor(4294967295*Math.random()).toString(),[e.editor]);return o.createElement(p,{key:n,innerRef:t,...e})}),m=o.memo(f);var g,y=s(function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var o,r,i;if(Array.isArray(t)){if((o=t.length)!=n.length)return!1;for(r=o;0!==r--;)if(!e(t[r],n[r]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(r of t.entries())if(!n.has(r[0]))return!1;for(r of t.entries())if(!e(r[1],n.get(r[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(r of t.entries())if(!n.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if((o=t.length)!=n.length)return!1;for(r=o;0!==r--;)if(t[r]!==n[r])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((o=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(r=o;0!==r--;)if(!Object.prototype.hasOwnProperty.call(n,i[r]))return!1;for(r=o;0!==r--;){var s=i[r];if(("_owner"!==s||!t.$$typeof)&&!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n}),v={exports:{}},x={};v.exports=function(){if(g)return x;g=1;var e=o,t=d,n="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},r=t.useSyncExternalStore,i=e.useRef,s=e.useEffect,a=e.useMemo,l=e.useDebugValue;return x.useSyncExternalStoreWithSelector=function(e,t,o,c,d){var u=i(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;u=a(function(){function e(e){if(!s){if(s=!0,r=e,e=c(e),void 0!==d&&h.hasValue){var t=h.value;if(d(t,e))return i=t}return i=e}if(t=i,n(r,e))return t;var o=c(e);return void 0!==d&&d(t,o)?t:(r=e,i=o)}var r,i,s=!1,a=void 0===o?null:o;return[function(){return e(t())},null===a?void 0:function(){return e(a())}]},[t,o,c,d]);var p=r(e,u[0],u[1]);return s(function(){h.hasValue=!0,h.value=p},[p]),l(p),p},x}();var b=v.exports;const w="undefined"!==typeof window?o.useLayoutEffect:o.useEffect;class S{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber||(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber}),this.lastSnapshot}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(e=>e())},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}}const k="undefined"===typeof window,E=k||Boolean("undefined"!==typeof window&&window.next);class C{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(e=>e())}getInitialEditor(){return void 0===this.options.current.immediatelyRender?k||E?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){var e=this;const t={...this.options.current,onBeforeCreate:function(){for(var t,n,o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return null===(n=(t=e.options.current).onBeforeCreate)||void 0===n?void 0:n.call(t,...r)},onBlur:function(){for(var t,n,o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return null===(n=(t=e.options.current).onBlur)||void 0===n?void 0:n.call(t,...r)},onCreate:function(){for(var t,n,o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return null===(n=(t=e.options.current).onCreate)||void 0===n?void 0:n.call(t,...r)},onDestroy:function(){for(var t,n,o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return null===(n=(t=e.options.current).onDestroy)||void 0===n?void 0:n.call(t,...r)},onFocus:function(){for(var t,n,o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return null===(n=(t=e.options.current).onFocus)||void 0===n?void 0:n.call(t,...r)},onSelectionUpdate:function(){for(var t,n,o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return null===(n=(t=e.options.current).onSelectionUpdate)||void 0===n?void 0:n.call(t,...r)},onTransaction:function(){for(var t,n,o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return null===(n=(t=e.options.current).onTransaction)||void 0===n?void 0:n.call(t,...r)},onUpdate:function(){for(var t,n,o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return null===(n=(t=e.options.current).onUpdate)||void 0===n?void 0:n.call(t,...r)},onContentError:function(){for(var t,n,o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return null===(n=(t=e.options.current).onContentError)||void 0===n?void 0:n.call(t,...r)},onDrop:function(){for(var t,n,o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return null===(n=(t=e.options.current).onDrop)||void 0===n?void 0:n.call(t,...r)},onPaste:function(){for(var t,n,o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return null===(n=(t=e.options.current).onPaste)||void 0===n?void 0:n.call(t,...r)}};return new i.KE(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(n=>!!["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)||("extensions"===n&&e.extensions&&t.extensions?e.extensions.length===t.extensions.length&&e.extensions.every((e,n)=>{var o;return e===(null===(o=t.extensions)||void 0===o?void 0:o[n])}):e[n]===t[n]))}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&0===e.length?C.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(null===this.previousDeps)return void(this.previousDeps=e);if(this.previousDeps.length===e.length&&this.previousDeps.every((t,n)=>t===e[n]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{this.isComponentMounted&&this.instanceId===e?t&&t.setOptions(this.options.current):t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function M(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=(0,o.useRef)(e);n.current=e;const[r]=(0,o.useState)(()=>new C(n)),i=d.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return(0,o.useDebugValue)(i),(0,o.useEffect)(r.onRender(t)),function(e){var t;const[n]=(0,o.useState)(()=>new S(e.editor)),r=b.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,null!==(t=e.equalityFn)&&void 0!==t?t:y);w(()=>n.watch(e.editor),[e.editor,n]),(0,o.useDebugValue)(r)}({editor:i,selector:t=>{let{transactionNumber:n}=t;return!1===e.shouldRerenderOnTransaction?null:e.immediatelyRender&&0===n?0:n+1}}),i}const O=(0,o.createContext)({editor:null});O.Consumer;const T=(0,o.createContext)({onDragStart:void 0}),A=()=>(0,o.useContext)(T);o.forwardRef((e,t)=>{const{onDragStart:n}=A(),r=e.as||"div";return o.createElement(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});i.Yv},5029:(e,t,n)=>{var o=n(6989),r=n(3097),i=n(3366),s=n(2597),a=n(9417),l=n(1310),c=n(914);e.exports=function(e,t){return s(e)&&a(t)?l(c(e),t):function(n){var s=r(n,e);return void 0===s&&s===t?i(n,e):o(t,s,3)}}},5051:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},5087:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},5088:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},5111:(e,t,n)=>{var o=n(3279);e.exports=function(e){return"function"==typeof e?e:o}},5119:(e,t,n)=>{var o=n(6614),r=n(474);e.exports=function(e,t){return e&&o(t,r(t),e)}},5146:(e,t,n)=>{var o=n(8208),r=n(5641);function i(e,t,n,s,a,l,c){var d=e.children(c);if(d.length){var u=r.addBorderNode(e,"_bt"),h=r.addBorderNode(e,"_bb"),p=e.node(c);e.setParent(u,c),p.borderTop=u,e.setParent(h,c),p.borderBottom=h,o.forEach(d,function(o){i(e,t,n,s,a,l,o);var r=e.node(o),d=r.borderTop?r.borderTop:o,p=r.borderBottom?r.borderBottom:o,f=r.borderTop?s:2*s,m=d!==p?1:a-l[c]+1;e.setEdge(u,d,{weight:f,minlen:m,nestingEdge:!0}),e.setEdge(p,h,{weight:f,minlen:m,nestingEdge:!0})}),e.parent(c)||e.setEdge(t,u,{weight:0,minlen:a+l[c]})}else c!==t&&e.setEdge(t,c,{weight:0,minlen:n})}e.exports={run:function(e){var t=r.addDummyNode(e,"root",{},"_root"),n=function(e){var t={};function n(r,i){var s=e.children(r);s&&s.length&&o.forEach(s,function(e){n(e,i+1)}),t[r]=i}return o.forEach(e.children(),function(e){n(e,1)}),t}(e),s=o.max(o.values(n))-1,a=2*s+1;e.graph().nestingRoot=t,o.forEach(e.edges(),function(t){e.edge(t).minlen*=a});var l=function(e){return o.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}(e)+1;o.forEach(e.children(),function(o){i(e,t,a,l,s,n,o)}),e.graph().nodeRankFactor=a},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,o.forEach(e.edges(),function(t){e.edge(t).nestingEdge&&e.removeEdge(t)})}}},5185:e=>{e.exports="0.8.5"},5193:(e,t,n)=>{var o=n(6913),r=n(2761);e.exports=function(e){return r(e)&&"[object Arguments]"==o(e)}},5204:(e,t,n)=>{var o=n(7937)(n(6552),"Map");e.exports=o},5252:(e,t,n)=>{"use strict";n.d(t,{B:()=>o});class o extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,o]of e)this.set(n,o)}get(e){return super.get(r(this,e))}has(e){return super.has(r(this,e))}set(e,t){return super.set(i(this,e),t)}delete(e){return super.delete(s(this,e))}}Set;function r(e,t){let{_intern:n,_key:o}=e;const r=o(t);return n.has(r)?n.get(r):t}function i(e,t){let{_intern:n,_key:o}=e;const r=o(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function s(e,t){let{_intern:n,_key:o}=e;const r=o(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function a(e){return null!==e&&"object"===typeof e?e.valueOf():e}},5324:(e,t,n)=>{var o=n(4052),r=n(2597),i=n(4079),s=n(1069);e.exports=function(e,t){return o(e)?e:r(e,t)?[e]:i(s(e))}},5387:(e,t,n)=>{var o=n(7937)(n(6552),"Promise");e.exports=o},5428:(e,t,n)=>{var o=n(6913),r=n(6173),i=n(2761),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&r(e.length)&&!!s[o(e)]}},5491:(e,t,n)=>{var o=n(726),r=n(5652),i=n(5111),s=n(4052);e.exports=function(e,t){return(s(e)?o:r)(e,i(t))}},5538:(e,t,n)=>{var o=n(7160),r=n(4545),i=n(793),s=n(7760),a=n(3892),l=n(6788);function c(e){var t=this.__data__=new o(e);this.size=t.size}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=s,c.prototype.has=a,c.prototype.set=l,e.exports=c},5575:(e,t,n)=>{var o=n(7937)(Object,"create");e.exports=o},5636:(e,t,n)=>{var o=n(1170),r=Math.max;e.exports=function(e,t,n){return t=r(void 0===t?e.length-1:t,0),function(){for(var i=arguments,s=-1,a=r(i.length-t,0),l=Array(a);++s<a;)l[s]=i[t+s];s=-1;for(var c=Array(t+1);++s<t;)c[s]=i[s];return c[t]=n(l),o(e,this,c)}}},5640:(e,t,n)=>{var o=n(3713),r=n(6924),i=n(6571),s=n(620),a=n(1632);e.exports=function(e){if(null==e)return 0;if(i(e))return s(e)?a(e):e.length;var t=r(e);return"[object Map]"==t||"[object Set]"==t?e.size:o(e).length}},5641:(e,t,n)=>{"use strict";var o=n(8208),r=n(7938).Graph;function i(e,t,n,r){var i;do{i=o.uniqueId(r)}while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function s(e){return o.max(o.map(e.nodes(),function(t){var n=e.node(t).rank;if(!o.isUndefined(n))return n}))}e.exports={addDummyNode:i,simplify:function(e){var t=(new r).setGraph(e.graph());return o.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),o.forEach(e.edges(),function(n){var o=t.edge(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:o.weight+r.weight,minlen:Math.max(o.minlen,r.minlen)})}),t},asNonCompoundGraph:function(e){var t=new r({multigraph:e.isMultigraph()}).setGraph(e.graph());return o.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),o.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t},successorWeights:function(e){var t=o.map(e.nodes(),function(t){var n={};return o.forEach(e.outEdges(t),function(t){n[t.w]=(n[t.w]||0)+e.edge(t).weight}),n});return o.zipObject(e.nodes(),t)},predecessorWeights:function(e){var t=o.map(e.nodes(),function(t){var n={};return o.forEach(e.inEdges(t),function(t){n[t.v]=(n[t.v]||0)+e.edge(t).weight}),n});return o.zipObject(e.nodes(),t)},intersectRect:function(e,t){var n,o,r=e.x,i=e.y,s=t.x-r,a=t.y-i,l=e.width/2,c=e.height/2;if(!s&&!a)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(a)*l>Math.abs(s)*c?(a<0&&(c=-c),n=c*s/a,o=c):(s<0&&(l=-l),n=l,o=l*a/s);return{x:r+n,y:i+o}},buildLayerMatrix:function(e){var t=o.map(o.range(s(e)+1),function(){return[]});return o.forEach(e.nodes(),function(n){var r=e.node(n),i=r.rank;o.isUndefined(i)||(t[i][r.order]=n)}),t},normalizeRanks:function(e){var t=o.min(o.map(e.nodes(),function(t){return e.node(t).rank}));o.forEach(e.nodes(),function(n){var r=e.node(n);o.has(r,"rank")&&(r.rank-=t)})},removeEmptyRanks:function(e){var t=o.min(o.map(e.nodes(),function(t){return e.node(t).rank})),n=[];o.forEach(e.nodes(),function(o){var r=e.node(o).rank-t;n[r]||(n[r]=[]),n[r].push(o)});var r=0,i=e.graph().nodeRankFactor;o.forEach(n,function(t,n){o.isUndefined(t)&&n%i!==0?--r:r&&o.forEach(t,function(t){e.node(t).rank+=r})})},addBorderNode:function(e,t,n,o){var r={width:0,height:0};arguments.length>=4&&(r.rank=n,r.order=o);return i(e,"border",r,t)},maxRank:s,partition:function(e,t){var n={lhs:[],rhs:[]};return o.forEach(e,function(e){t(e)?n.lhs.push(e):n.rhs.push(e)}),n},time:function(e,t){var n=o.now();try{return t()}finally{console.log(e+" time: "+(o.now()-n)+"ms")}},notime:function(e,t){return t()}}},5647:(e,t,n)=>{var o=n(3279),r=n(5636),i=n(6350);e.exports=function(e,t){return i(r(e,t,o),e+"")}},5652:(e,t,n)=>{var o=n(4664),r=n(6516)(o);e.exports=r},5654:(e,t,n)=>{var o=n(7937),r=function(){try{var e=o(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=r},5673:(e,t,n)=>{"use strict";var o=n(8208),r=n(3130);e.exports={run:function(e){var t="greedy"===e.graph().acyclicer?r(e,function(e){return function(t){return e.edge(t).weight}}(e)):function(e){var t=[],n={},r={};function i(s){o.has(r,s)||(r[s]=!0,n[s]=!0,o.forEach(e.outEdges(s),function(e){o.has(n,e.w)?t.push(e):i(e.w)}),delete n[s])}return o.forEach(e.nodes(),i),t}(e);o.forEach(t,function(t){var n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,o.uniqueId("rev"))})},undo:function(e){o.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var o=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,o)}})}}},5713:e=>{e.exports=function(){}},5750:(e,t,n)=>{var o;try{o={clone:n(1740),constant:n(2541),each:n(2580),filter:n(723),has:n(2117),isArray:n(4052),isEmpty:n(4320),isFunction:n(1629),isUndefined:n(141),keys:n(8673),map:n(3411),reduce:n(2759),size:n(5640),transform:n(2717),union:n(450),values:n(6727)}}catch(r){}o||(o=window._),e.exports=o},5752:(e,t,n)=>{var o=n(9395),r=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,i,s,a){var l=1&n,c=o(e),d=c.length;if(d!=o(t).length&&!l)return!1;for(var u=d;u--;){var h=c[u];if(!(l?h in t:r.call(t,h)))return!1}var p=a.get(e),f=a.get(t);if(p&&f)return p==t&&f==e;var m=!0;a.set(e,t),a.set(t,e);for(var g=l;++u<d;){var y=e[h=c[u]],v=t[h];if(i)var x=l?i(v,y,h,t,e,a):i(y,v,h,e,t,a);if(!(void 0===x?y===v||s(y,v,n,i,a):x)){m=!1;break}g||(g="constructor"==h)}if(m&&!g){var b=e.constructor,w=t.constructor;b==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(m=!1)}return a.delete(e),a.delete(t),m}},5758:(e,t,n)=>{"use strict";var o=n(8208);e.exports={longestPath:function(e){var t={};o.forEach(e.sources(),function n(r){var i=e.node(r);if(o.has(t,r))return i.rank;t[r]=!0;var s=o.min(o.map(e.outEdges(r),function(t){return n(t.w)-e.edge(t).minlen}));return s!==Number.POSITIVE_INFINITY&&void 0!==s&&null!==s||(s=0),i.rank=s})},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}}},5791:(e,t,n)=>{var o=n(6924),r=n(2761);e.exports=function(e){return r(e)&&"[object Map]"==o(e)}},5797:(e,t,n)=>{var o=n(4816);function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var o=arguments,r=t?t.apply(this,o):o[0],i=n.cache;if(i.has(r))return i.get(r);var s=e.apply(this,o);return n.cache=i.set(r,s)||i,s};return n.cache=new(r.Cache||o),n}r.Cache=o,e.exports=r},5816:e=>{e.exports=function(e,t,n,o){for(var r=e.length,i=n+(o?1:-1);o?i--:++i<r;)if(t(e[i],i,e))return i;return-1}},5819:(e,t,n)=>{"use strict";var o=n(8208);e.exports=function(e){var t={},n=o.filter(e.nodes(),function(t){return!e.children(t).length}),r=o.max(o.map(n,function(t){return e.node(t).rank})),i=o.map(o.range(r+1),function(){return[]});var s=o.sortBy(n,function(t){return e.node(t).rank});return o.forEach(s,function n(r){if(o.has(t,r))return;t[r]=!0;var s=e.node(r);i[s.rank].push(r),o.forEach(e.successors(r),n)}),i}},5822:(e,t,n)=>{var o=n(5750),r=n(4428);e.exports=function(e,t,n,o){return function(e,t,n,o){var i,s,a={},l=new r,c=function(e){var t=e.v!==i?e.v:e.w,o=a[t],r=n(e),c=s.distance+r;if(r<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+r);c<o.distance&&(o.distance=c,o.predecessor=i,l.decrease(t,c))};e.nodes().forEach(function(e){var n=e===t?0:Number.POSITIVE_INFINITY;a[e]={distance:n},l.add(e,n)});for(;l.size()>0&&(i=l.removeMin(),(s=a[i]).distance!==Number.POSITIVE_INFINITY);)o(i).forEach(c);return a}(e,String(t),n||i,o||function(t){return e.outEdges(t)})};var i=o.constant(1)},5857:(e,t,n)=>{var o=n(819),r=n(5636),i=n(6350);e.exports=function(e){return i(r(e,void 0,o),e+"")}},5866:(e,t,n)=>{var o=n(8468);e.exports=function(e,t){return!!(null==e?0:e.length)&&o(e,t,0)>-1}},5893:(e,t,n)=>{var o=n(6599);e.exports=function(e,t,n){for(var r=-1,i=e.criteria,s=t.criteria,a=i.length,l=n.length;++r<a;){var c=o(i[r],s[r]);if(c)return r>=l?c:c*("desc"==n[r]?-1:1)}return e.index-t.index}},5896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var o=n-1>>>1,r=e[o];if(!(0<i(r,t)))break e;e[o]=t,e[n]=r,n=o}}function o(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var o=0,r=e.length,s=r>>>1;o<s;){var a=2*(o+1)-1,l=e[a],c=a+1,d=e[c];if(0>i(l,n))c<r&&0>i(d,l)?(e[o]=d,e[c]=n,o=c):(e[o]=l,e[a]=n,o=a);else{if(!(c<r&&0>i(d,n)))break e;e[o]=d,e[c]=n,o=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],u=1,h=null,p=3,f=!1,m=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=o(d);null!==t;){if(null===t.callback)r(d);else{if(!(t.startTime<=e))break;r(d),t.sortIndex=t.expirationTime,n(c,t)}t=o(d)}}function S(e){if(g=!1,w(e),!m)if(null!==o(c))m=!0,E||(E=!0,k());else{var t=o(d);null!==t&&D(S,t.startTime-e)}}var k,E=!1,C=-1,M=5,O=-1;function T(){return!!y||!(t.unstable_now()-O<M)}function A(){if(y=!1,E){var e=t.unstable_now();O=e;var n=!0;try{e:{m=!1,g&&(g=!1,x(C),C=-1),f=!0;var i=p;try{t:{for(w(e),h=o(c);null!==h&&!(h.expirationTime>e&&T());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var a=s(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){h.callback=a,w(e),n=!0;break t}h===o(c)&&r(c),w(e)}else r(c);h=o(c)}if(null!==h)n=!0;else{var l=o(d);null!==l&&D(S,l.startTime-e),n=!1}}break e}finally{h=null,p=i,f=!1}n=void 0}}finally{n?k():E=!1}}}if("function"===typeof b)k=function(){b(A)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,P=N.port2;N.port1.onmessage=A,k=function(){P.postMessage(null)}}else k=function(){v(A,0)};function D(e,n){C=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,i){var s=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?s+i:s:i=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:i,expirationTime:a=i+a,sortIndex:-1},i>s?(e.sortIndex=i,n(d,e),null===o(c)&&e===o(d)&&(g?(x(C),C=-1):g=!0,D(S,i-s))):(e.sortIndex=a,n(c,e),m||f||(m=!0,E||(E=!0,k()))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},5906:e=>{e.exports=function(e){return function(t,n,o){for(var r=-1,i=Object(t),s=o(t),a=s.length;a--;){var l=s[e?a:++r];if(!1===n(i[l],l,i))break}return t}}},5921:(e,t,n)=>{var o=n(449),r=n(7574),i=n(6832),s=i&&i.isSet,a=s?r(s):o;e.exports=a},5972:(e,t,n)=>{var o=n(8208),r=n(5641);function i(e,t,n,o,i,s){var a={width:0,height:0,rank:s,borderType:t},l=i[t][s-1],c=r.addDummyNode(e,"border",a,n);i[t][s]=c,e.setParent(c,o),l&&e.setEdge(l,c,{weight:1})}e.exports=function(e){o.forEach(e.children(),function t(n){var r=e.children(n),s=e.node(n);if(r.length&&o.forEach(r,t),o.has(s,"minRank")){s.borderLeft=[],s.borderRight=[];for(var a=s.minRank,l=s.maxRank+1;a<l;++a)i(e,"borderLeft","_bl",n,s,a),i(e,"borderRight","_br",n,s,a)}})}},5990:(e,t,n)=>{var o=n(3028)(Object.getPrototypeOf,Object);e.exports=o},5992:(e,t,n)=>{var o=n(5750);e.exports=function(e){var t,n={},r=[];function i(r){o.has(n,r)||(n[r]=!0,t.push(r),o.each(e.successors(r),i),o.each(e.predecessors(r),i))}return o.each(e.nodes(),function(e){t=[],i(e),t.length&&r.push(t)}),r}},6095:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},6099:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},6140:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},6173:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},6179:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},6213:(e,t,n)=>{"use strict";n.d(t,{A:()=>bt});var o={};function r(e,t){return function(){return e.apply(t,arguments)}}n.r(o),n.d(o,{hasBrowserEnv:()=>ce,hasStandardBrowserEnv:()=>ue,hasStandardBrowserWebWorkerEnv:()=>he,navigator:()=>de,origin:()=>pe});const{toString:i}=Object.prototype,{getPrototypeOf:s}=Object,{iterator:a,toStringTag:l}=Symbol,c=(d=Object.create(null),e=>{const t=i.call(e);return d[t]||(d[t]=t.slice(8,-1).toLowerCase())});var d;const u=e=>(e=e.toLowerCase(),t=>c(t)===e),h=e=>t=>typeof t===e,{isArray:p}=Array,f=h("undefined");function m(e){return null!==e&&!f(e)&&null!==e.constructor&&!f(e.constructor)&&v(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const g=u("ArrayBuffer");const y=h("string"),v=h("function"),x=h("number"),b=e=>null!==e&&"object"===typeof e,w=e=>{if("object"!==c(e))return!1;const t=s(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(l in e)&&!(a in e)},S=u("Date"),k=u("File"),E=u("Blob"),C=u("FileList"),M=u("URLSearchParams"),[O,T,A,N]=["ReadableStream","Request","Response","Headers"].map(u);function P(e,t){let n,o,{allOwnKeys:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),p(e))for(n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else{if(m(e))return;const o=r?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let s;for(n=0;n<i;n++)s=o[n],t.call(null,e[s],s,e)}}function D(e,t){if(m(e))return null;t=t.toLowerCase();const n=Object.keys(e);let o,r=n.length;for(;r-- >0;)if(o=n[r],t===o.toLowerCase())return o;return null}const R="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,I=e=>!f(e)&&e!==R;const L=(j="undefined"!==typeof Uint8Array&&s(Uint8Array),e=>j&&e instanceof j);var j;const B=u("HTMLFormElement"),_=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),V=u("RegExp"),z=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};P(n,(n,r)=>{let i;!1!==(i=t(n,r,e))&&(o[r]=i||n)}),Object.defineProperties(e,o)};const F=u("AsyncFunction"),$=((e,t)=>{return e?setImmediate:t?(n=`axios@${Math.random()}`,o=[],R.addEventListener("message",e=>{let{source:t,data:r}=e;t===R&&r===n&&o.length&&o.shift()()},!1),e=>{o.push(e),R.postMessage(n,"*")}):e=>setTimeout(e);var n,o})("function"===typeof setImmediate,v(R.postMessage)),H="undefined"!==typeof queueMicrotask?queueMicrotask.bind(R):"undefined"!==typeof process&&process.nextTick||$,U={isArray:p,isArrayBuffer:g,isBuffer:m,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||v(e.append)&&("formdata"===(t=c(e))||"object"===t&&v(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&g(e.buffer),t},isString:y,isNumber:x,isBoolean:e=>!0===e||!1===e,isObject:b,isPlainObject:w,isEmptyObject:e=>{if(!b(e)||m(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:O,isRequest:T,isResponse:A,isHeaders:N,isUndefined:f,isDate:S,isFile:k,isBlob:E,isRegExp:V,isFunction:v,isStream:e=>b(e)&&v(e.pipe),isURLSearchParams:M,isTypedArray:L,isFileList:C,forEach:P,merge:function e(){const{caseless:t}=I(this)&&this||{},n={},o=(o,r)=>{const i=t&&D(n,r)||r;w(n[i])&&w(o)?n[i]=e(n[i],o):w(o)?n[i]=e({},o):p(o)?n[i]=o.slice():n[i]=o};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&P(arguments[r],o);return n},extend:function(e,t,n){let{allOwnKeys:o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return P(t,(t,o)=>{n&&v(t)?e[o]=r(t,n):e[o]=t},{allOwnKeys:o}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,o)=>{let r,i,a;const l={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)a=r[i],o&&!o(a,e,t)||l[a]||(t[a]=e[a],l[a]=!0);e=!1!==n&&s(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:c,kindOfTest:u,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return-1!==o&&o===n},toArray:e=>{if(!e)return null;if(p(e))return e;let t=e.length;if(!x(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[a]).call(e);let o;for(;(o=n.next())&&!o.done;){const n=o.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const o=[];for(;null!==(n=e.exec(t));)o.push(n);return o},isHTMLForm:B,hasOwnProperty:_,hasOwnProp:_,reduceDescriptors:z,freezeMethods:e=>{z(e,(t,n)=>{if(v(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const o=e[n];v(o)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},o=e=>{e.forEach(e=>{n[e]=!0})};return p(e)?o(e):o(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:D,global:R,isContextDefined:I,isSpecCompliantForm:function(e){return!!(e&&v(e.append)&&"FormData"===e[l]&&e[a])},toJSONObject:e=>{const t=new Array(10),n=(e,o)=>{if(b(e)){if(t.indexOf(e)>=0)return;if(m(e))return e;if(!("toJSON"in e)){t[o]=e;const r=p(e)?[]:{};return P(e,(e,t)=>{const i=n(e,o+1);!f(i)&&(r[t]=i)}),t[o]=void 0,r}}return e};return n(e,0)},isAsyncFn:F,isThenable:e=>e&&(b(e)||v(e))&&v(e.then)&&v(e.catch),setImmediate:$,asap:H,isIterable:e=>null!=e&&v(e[a])};function K(e,t,n,o,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),r&&(this.response=r,this.status=r.status?r.status:null)}U.inherits(K,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:U.toJSONObject(this.config),code:this.code,status:this.status}}});const W=K.prototype,q={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{q[e]={value:e}}),Object.defineProperties(K,q),Object.defineProperty(W,"isAxiosError",{value:!0}),K.from=(e,t,n,o,r,i)=>{const s=Object.create(W);return U.toFlatObject(e,s,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),K.call(s,e.message,t,n,o,r),s.cause=e,s.name=e.name,i&&Object.assign(s,i),s};const J=K;function X(e){return U.isPlainObject(e)||U.isArray(e)}function Z(e){return U.endsWith(e,"[]")?e.slice(0,-2):e}function Y(e,t,n){return e?e.concat(t).map(function(e,t){return e=Z(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const G=U.toFlatObject(U,{},null,function(e){return/^is[A-Z]/.test(e)});const Q=function(e,t,n){if(!U.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const o=(n=U.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!U.isUndefined(t[e])})).metaTokens,r=n.visitor||c,i=n.dots,s=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&U.isSpecCompliantForm(t);if(!U.isFunction(r))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(U.isDate(e))return e.toISOString();if(U.isBoolean(e))return e.toString();if(!a&&U.isBlob(e))throw new J("Blob is not supported. Use a Buffer instead.");return U.isArrayBuffer(e)||U.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,r){let a=e;if(e&&!r&&"object"===typeof e)if(U.endsWith(n,"{}"))n=o?n:n.slice(0,-2),e=JSON.stringify(e);else if(U.isArray(e)&&function(e){return U.isArray(e)&&!e.some(X)}(e)||(U.isFileList(e)||U.endsWith(n,"[]"))&&(a=U.toArray(e)))return n=Z(n),a.forEach(function(e,o){!U.isUndefined(e)&&null!==e&&t.append(!0===s?Y([n],o,i):null===s?n:n+"[]",l(e))}),!1;return!!X(e)||(t.append(Y(r,n,i),l(e)),!1)}const d=[],u=Object.assign(G,{defaultVisitor:c,convertValue:l,isVisitable:X});if(!U.isObject(e))throw new TypeError("data must be an object");return function e(n,o){if(!U.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+o.join("."));d.push(n),U.forEach(n,function(n,i){!0===(!(U.isUndefined(n)||null===n)&&r.call(t,n,U.isString(i)?i.trim():i,o,u))&&e(n,o?o.concat(i):[i])}),d.pop()}}(e),t};function ee(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function te(e,t){this._pairs=[],e&&Q(e,this,t)}const ne=te.prototype;ne.append=function(e,t){this._pairs.push([e,t])},ne.toString=function(e){const t=e?function(t){return e.call(this,t,ee)}:ee;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const oe=te;function re(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ie(e,t,n){if(!t)return e;const o=n&&n.encode||re;U.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let i;if(i=r?r(t,n):U.isURLSearchParams(t)?t.toString():new oe(t,n).toString(o),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const se=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){U.forEach(this.handlers,function(t){null!==t&&e(t)})}},ae={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},le={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:oe,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},ce="undefined"!==typeof window&&"undefined"!==typeof document,de="object"===typeof navigator&&navigator||void 0,ue=ce&&(!de||["ReactNative","NativeScript","NS"].indexOf(de.product)<0),he="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,pe=ce&&window.location.href||"http://localhost",fe={...o,...le};const me=function(e){function t(e,n,o,r){let i=e[r++];if("__proto__"===i)return!0;const s=Number.isFinite(+i),a=r>=e.length;if(i=!i&&U.isArray(o)?o.length:i,a)return U.hasOwnProp(o,i)?o[i]=[o[i],n]:o[i]=n,!s;o[i]&&U.isObject(o[i])||(o[i]=[]);return t(e,n,o[i],r)&&U.isArray(o[i])&&(o[i]=function(e){const t={},n=Object.keys(e);let o;const r=n.length;let i;for(o=0;o<r;o++)i=n[o],t[i]=e[i];return t}(o[i])),!s}if(U.isFormData(e)&&U.isFunction(e.entries)){const n={};return U.forEachEntry(e,(e,o)=>{t(function(e){return U.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),o,n,0)}),n}return null};const ge={transitional:ae,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",o=n.indexOf("application/json")>-1,r=U.isObject(e);r&&U.isHTMLForm(e)&&(e=new FormData(e));if(U.isFormData(e))return o?JSON.stringify(me(e)):e;if(U.isArrayBuffer(e)||U.isBuffer(e)||U.isStream(e)||U.isFile(e)||U.isBlob(e)||U.isReadableStream(e))return e;if(U.isArrayBufferView(e))return e.buffer;if(U.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Q(e,new fe.classes.URLSearchParams,{visitor:function(e,t,n,o){return fe.isNode&&U.isBuffer(e)?(this.append(t,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((i=U.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Q(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||o?(t.setContentType("application/json",!1),function(e,t,n){if(U.isString(e))try{return(t||JSON.parse)(e),U.trim(e)}catch(o){if("SyntaxError"!==o.name)throw o}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||ge.transitional,n=t&&t.forcedJSONParsing,o="json"===this.responseType;if(U.isResponse(e)||U.isReadableStream(e))return e;if(e&&U.isString(e)&&(n&&!this.responseType||o)){const n=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(r){if(n){if("SyntaxError"===r.name)throw J.from(r,J.ERR_BAD_RESPONSE,this,null,this.response);throw r}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fe.classes.FormData,Blob:fe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};U.forEach(["delete","get","head","post","put","patch"],e=>{ge.headers[e]={}});const ye=ge,ve=U.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),xe=Symbol("internals");function be(e){return e&&String(e).trim().toLowerCase()}function we(e){return!1===e||null==e?e:U.isArray(e)?e.map(we):String(e)}function Se(e,t,n,o,r){return U.isFunction(o)?o.call(this,t,n):(r&&(t=n),U.isString(t)?U.isString(o)?-1!==t.indexOf(o):U.isRegExp(o)?o.test(t):void 0:void 0)}class ke{constructor(e){e&&this.set(e)}set(e,t,n){const o=this;function r(e,t,n){const r=be(t);if(!r)throw new Error("header name must be a non-empty string");const i=U.findKey(o,r);(!i||void 0===o[i]||!0===n||void 0===n&&!1!==o[i])&&(o[i||t]=we(e))}const i=(e,t)=>U.forEach(e,(e,n)=>r(e,n,t));if(U.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(U.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let n,o,r;return e&&e.split("\n").forEach(function(e){r=e.indexOf(":"),n=e.substring(0,r).trim().toLowerCase(),o=e.substring(r+1).trim(),!n||t[n]&&ve[n]||("set-cookie"===n?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)}),t})(e),t);else if(U.isObject(e)&&U.isIterable(e)){let n,o,r={};for(const t of e){if(!U.isArray(t))throw TypeError("Object iterator must return a key-value pair");r[o=t[0]]=(n=r[o])?U.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}i(r,t)}else null!=e&&r(t,e,n);return this}get(e,t){if(e=be(e)){const n=U.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}(e);if(U.isFunction(t))return t.call(this,e,n);if(U.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=be(e)){const n=U.findKey(this,e);return!(!n||void 0===this[n]||t&&!Se(0,this[n],n,t))}return!1}delete(e,t){const n=this;let o=!1;function r(e){if(e=be(e)){const r=U.findKey(n,e);!r||t&&!Se(0,n[r],r,t)||(delete n[r],o=!0)}}return U.isArray(e)?e.forEach(r):r(e),o}clear(e){const t=Object.keys(this);let n=t.length,o=!1;for(;n--;){const r=t[n];e&&!Se(0,this[r],r,e,!0)||(delete this[r],o=!0)}return o}normalize(e){const t=this,n={};return U.forEach(this,(o,r)=>{const i=U.findKey(n,r);if(i)return t[i]=we(o),void delete t[r];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(r):String(r).trim();s!==r&&delete t[r],t[s]=we(o),n[s]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return U.forEach(this,(n,o)=>{null!=n&&!1!==n&&(t[o]=e&&U.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return o.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[xe]=this[xe]={accessors:{}}).accessors,n=this.prototype;function o(e){const o=be(e);t[o]||(!function(e,t){const n=U.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+n,{value:function(e,n,r){return this[o].call(this,t,e,n,r)},configurable:!0})})}(n,e),t[o]=!0)}return U.isArray(e)?e.forEach(o):o(e),this}}ke.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),U.reduceDescriptors(ke.prototype,(e,t)=>{let{value:n}=e,o=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[o]=e}}}),U.freezeMethods(ke);const Ee=ke;function Ce(e,t){const n=this||ye,o=t||n,r=Ee.from(o.headers);let i=o.data;return U.forEach(e,function(e){i=e.call(n,i,r.normalize(),t?t.status:void 0)}),r.normalize(),i}function Me(e){return!(!e||!e.__CANCEL__)}function Oe(e,t,n){J.call(this,null==e?"canceled":e,J.ERR_CANCELED,t,n),this.name="CanceledError"}U.inherits(Oe,J,{__CANCEL__:!0});const Te=Oe;function Ae(e,t,n){const o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(new J("Request failed with status code "+n.status,[J.ERR_BAD_REQUEST,J.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const Ne=function(e,t){e=e||10;const n=new Array(e),o=new Array(e);let r,i=0,s=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=o[s];r||(r=l),n[i]=a,o[i]=l;let d=s,u=0;for(;d!==i;)u+=n[d++],d%=e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),l-r<t)return;const h=c&&l-c;return h?Math.round(1e3*u/h):void 0}};const Pe=function(e,t){let n,o,r=0,i=1e3/t;const s=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();r=i,n=null,o&&(clearTimeout(o),o=null),e(...t)};return[function(){const e=Date.now(),t=e-r;for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];t>=i?s(l,e):(n=l,o||(o=setTimeout(()=>{o=null,s(n)},i-t)))},()=>n&&s(n)]},De=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,o=0;const r=Ne(50,250);return Pe(n=>{const i=n.loaded,s=n.lengthComputable?n.total:void 0,a=i-o,l=r(a);o=i;e({loaded:i,total:s,progress:s?i/s:void 0,bytes:a,rate:l||void 0,estimated:l&&s&&i<=s?(s-i)/l:void 0,event:n,lengthComputable:null!=s,[t?"download":"upload"]:!0})},n)},Re=(e,t)=>{const n=null!=e;return[o=>t[0]({lengthComputable:n,total:e,loaded:o}),t[1]]},Ie=e=>function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return U.asap(()=>e(...n))},Le=fe.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,fe.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(fe.origin),fe.navigator&&/(msie|trident)/i.test(fe.navigator.userAgent)):()=>!0,je=fe.hasStandardBrowserEnv?{write(e,t,n,o,r,i){const s=[e+"="+encodeURIComponent(t)];U.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),U.isString(o)&&s.push("path="+o),U.isString(r)&&s.push("domain="+r),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Be(e,t,n){let o=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(o||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const _e=e=>e instanceof Ee?{...e}:e;function Ve(e,t){t=t||{};const n={};function o(e,t,n,o){return U.isPlainObject(e)&&U.isPlainObject(t)?U.merge.call({caseless:o},e,t):U.isPlainObject(t)?U.merge({},t):U.isArray(t)?t.slice():t}function r(e,t,n,r){return U.isUndefined(t)?U.isUndefined(e)?void 0:o(void 0,e,0,r):o(e,t,0,r)}function i(e,t){if(!U.isUndefined(t))return o(void 0,t)}function s(e,t){return U.isUndefined(t)?U.isUndefined(e)?void 0:o(void 0,e):o(void 0,t)}function a(n,r,i){return i in t?o(n,r):i in e?o(void 0,n):void 0}const l={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t,n)=>r(_e(e),_e(t),0,!0)};return U.forEach(Object.keys({...e,...t}),function(o){const i=l[o]||r,s=i(e[o],t[o],o);U.isUndefined(s)&&i!==a||(n[o]=s)}),n}const ze=e=>{const t=Ve({},e);let n,{data:o,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:l}=t;if(t.headers=a=Ee.from(a),t.url=ie(Be(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),U.isFormData(o))if(fe.hasStandardBrowserEnv||fe.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map(e=>e.trim()).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(fe.hasStandardBrowserEnv&&(r&&U.isFunction(r)&&(r=r(t)),r||!1!==r&&Le(t.url))){const e=i&&s&&je.read(s);e&&a.set(i,e)}return t},Fe="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const o=ze(e);let r=o.data;const i=Ee.from(o.headers).normalize();let s,a,l,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:p}=o;function f(){c&&c(),d&&d(),o.cancelToken&&o.cancelToken.unsubscribe(s),o.signal&&o.signal.removeEventListener("abort",s)}let m=new XMLHttpRequest;function g(){if(!m)return;const o=Ee.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Ae(function(e){t(e),f()},function(e){n(e),f()},{data:u&&"text"!==u&&"json"!==u?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:o,config:e,request:m}),m=null}m.open(o.method.toUpperCase(),o.url,!0),m.timeout=o.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new J("Request aborted",J.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new J("Network Error",J.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const r=o.transitional||ae;o.timeoutErrorMessage&&(t=o.timeoutErrorMessage),n(new J(t,r.clarifyTimeoutError?J.ETIMEDOUT:J.ECONNABORTED,e,m)),m=null},void 0===r&&i.setContentType(null),"setRequestHeader"in m&&U.forEach(i.toJSON(),function(e,t){m.setRequestHeader(t,e)}),U.isUndefined(o.withCredentials)||(m.withCredentials=!!o.withCredentials),u&&"json"!==u&&(m.responseType=o.responseType),p&&([l,d]=De(p,!0),m.addEventListener("progress",l)),h&&m.upload&&([a,c]=De(h),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",c)),(o.cancelToken||o.signal)&&(s=t=>{m&&(n(!t||t.type?new Te(null,e,m):t),m.abort(),m=null)},o.cancelToken&&o.cancelToken.subscribe(s),o.signal&&(o.signal.aborted?s():o.signal.addEventListener("abort",s)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(o.url);y&&-1===fe.protocols.indexOf(y)?n(new J("Unsupported protocol "+y+":",J.ERR_BAD_REQUEST,e)):m.send(r||null)})},$e=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,o=new AbortController;const r=function(e){if(!n){n=!0,s();const t=e instanceof Error?e:this.reason;o.abort(t instanceof J?t:new Te(t instanceof Error?t.message:t))}};let i=t&&setTimeout(()=>{i=null,r(new J(`timeout ${t} of ms exceeded`,J.ETIMEDOUT))},t);const s=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(r):e.removeEventListener("abort",r)}),e=null)};e.forEach(e=>e.addEventListener("abort",r));const{signal:a}=o;return a.unsubscribe=()=>U.asap(s),a}},He=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let o,r=0;for(;r<n;)o=r+t,yield e.slice(r,o),r=o},Ue=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Ke=(e,t,n,o)=>{const r=async function*(e,t){for await(const n of Ue(e))yield*He(n,t)}(e,t);let i,s=0,a=e=>{i||(i=!0,o&&o(e))};return new ReadableStream({async pull(e){try{const{done:t,value:o}=await r.next();if(t)return a(),void e.close();let i=o.byteLength;if(n){let e=s+=i;n(e)}e.enqueue(new Uint8Array(o))}catch(t){throw a(t),t}},cancel:e=>(a(e),r.return())},{highWaterMark:2})},We="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,qe=We&&"function"===typeof ReadableStream,Je=We&&("function"===typeof TextEncoder?(Xe=new TextEncoder,e=>Xe.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Xe;const Ze=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return!!e(...n)}catch(r){return!1}},Ye=qe&&Ze(()=>{let e=!1;const t=new Request(fe.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Ge=qe&&Ze(()=>U.isReadableStream(new Response("").body)),Qe={stream:Ge&&(e=>e.body)};var et;We&&(et=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Qe[e]&&(Qe[e]=U.isFunction(et[e])?t=>t[e]():(t,n)=>{throw new J(`Response type '${e}' is not supported`,J.ERR_NOT_SUPPORT,n)})}));const tt=async(e,t)=>{const n=U.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(U.isBlob(e))return e.size;if(U.isSpecCompliantForm(e)){const t=new Request(fe.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return U.isArrayBufferView(e)||U.isArrayBuffer(e)?e.byteLength:(U.isURLSearchParams(e)&&(e+=""),U.isString(e)?(await Je(e)).byteLength:void 0)})(t):n},nt={http:null,xhr:Fe,fetch:We&&(async e=>{let{url:t,method:n,data:o,signal:r,cancelToken:i,timeout:s,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:d,withCredentials:u="same-origin",fetchOptions:h}=ze(e);c=c?(c+"").toLowerCase():"text";let p,f=$e([r,i&&i.toAbortSignal()],s);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(l&&Ye&&"get"!==n&&"head"!==n&&0!==(g=await tt(d,o))){let e,n=new Request(t,{method:"POST",body:o,duplex:"half"});if(U.isFormData(o)&&(e=n.headers.get("content-type"))&&d.setContentType(e),n.body){const[e,t]=Re(g,De(Ie(l)));o=Ke(n.body,65536,e,t)}}U.isString(u)||(u=u?"include":"omit");const r="credentials"in Request.prototype;p=new Request(t,{...h,signal:f,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:o,duplex:"half",credentials:r?u:void 0});let i=await fetch(p,h);const s=Ge&&("stream"===c||"response"===c);if(Ge&&(a||s&&m)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=i[t]});const t=U.toFiniteNumber(i.headers.get("content-length")),[n,o]=a&&Re(t,De(Ie(a),!0))||[];i=new Response(Ke(i.body,65536,n,()=>{o&&o(),m&&m()}),e)}c=c||"text";let y=await Qe[U.findKey(Qe,c)||"text"](i,e);return!s&&m&&m(),await new Promise((t,n)=>{Ae(t,n,{data:y,headers:Ee.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:p})})}catch(y){if(m&&m(),y&&"TypeError"===y.name&&/Load failed|fetch/i.test(y.message))throw Object.assign(new J("Network Error",J.ERR_NETWORK,e,p),{cause:y.cause||y});throw J.from(y,y&&y.code,e,p)}})};U.forEach(nt,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}});const ot=e=>`- ${e}`,rt=e=>U.isFunction(e)||null===e||!1===e,it=e=>{e=U.isArray(e)?e:[e];const{length:t}=e;let n,o;const r={};for(let i=0;i<t;i++){let t;if(n=e[i],o=n,!rt(n)&&(o=nt[(t=String(n)).toLowerCase()],void 0===o))throw new J(`Unknown adapter '${t}'`);if(o)break;r[t||"#"+i]=o}if(!o){const e=Object.entries(r).map(e=>{let[t,n]=e;return`adapter ${t} `+(!1===n?"is not supported by the environment":"is not available in the build")});let n=t?e.length>1?"since :\n"+e.map(ot).join("\n"):" "+ot(e[0]):"as no adapter specified";throw new J("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return o};function st(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Te(null,e)}function at(e){st(e),e.headers=Ee.from(e.headers),e.data=Ce.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return it(e.adapter||ye.adapter)(e).then(function(t){return st(e),t.data=Ce.call(e,e.transformResponse,t),t.headers=Ee.from(t.headers),t},function(t){return Me(t)||(st(e),t&&t.response&&(t.response.data=Ce.call(e,e.transformResponse,t.response),t.response.headers=Ee.from(t.response.headers))),Promise.reject(t)})}const lt="1.11.0",ct={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ct[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const dt={};ct.transitional=function(e,t,n){function o(e,t){return"[Axios v"+lt+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,r,i)=>{if(!1===e)throw new J(o(r," has been removed"+(t?" in "+t:"")),J.ERR_DEPRECATED);return t&&!dt[r]&&(dt[r]=!0,console.warn(o(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,i)}},ct.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};const ut={assertOptions:function(e,t,n){if("object"!==typeof e)throw new J("options must be an object",J.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let r=o.length;for(;r-- >0;){const i=o[r],s=t[i];if(s){const t=e[i],n=void 0===t||s(t,i,e);if(!0!==n)throw new J("option "+i+" must be "+n,J.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new J("Unknown option "+i,J.ERR_BAD_OPTION)}},validators:ct},ht=ut.validators;class pt{constructor(e){this.defaults=e||{},this.interceptors={request:new se,response:new se}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(o){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Ve(this.defaults,t);const{transitional:n,paramsSerializer:o,headers:r}=t;void 0!==n&&ut.assertOptions(n,{silentJSONParsing:ht.transitional(ht.boolean),forcedJSONParsing:ht.transitional(ht.boolean),clarifyTimeoutError:ht.transitional(ht.boolean)},!1),null!=o&&(U.isFunction(o)?t.paramsSerializer={serialize:o}:ut.assertOptions(o,{encode:ht.function,serialize:ht.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ut.assertOptions(t,{baseUrl:ht.spelling("baseURL"),withXsrfToken:ht.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=r&&U.merge(r.common,r[t.method]);r&&U.forEach(["delete","get","head","post","put","patch","common"],e=>{delete r[e]}),t.headers=Ee.concat(i,r);const s=[];let a=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let d,u=0;if(!a){const e=[at.bind(this),void 0];for(e.unshift(...s),e.push(...l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=s.length;let h=t;for(u=0;u<d;){const e=s[u++],t=s[u++];try{h=e(h)}catch(p){t.call(this,p);break}}try{c=at.call(this,h)}catch(p){return Promise.reject(p)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return ie(Be((e=Ve(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}U.forEach(["delete","get","head","options"],function(e){pt.prototype[e]=function(t,n){return this.request(Ve(n||{},{method:e,url:t,data:(n||{}).data}))}}),U.forEach(["post","put","patch"],function(e){function t(t){return function(n,o,r){return this.request(Ve(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:o}))}}pt.prototype[e]=t(),pt.prototype[e+"Form"]=t(!0)});const ft=pt;class mt{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const o=new Promise(e=>{n.subscribe(e),t=e}).then(e);return o.cancel=function(){n.unsubscribe(t)},o},e(function(e,o,r){n.reason||(n.reason=new Te(e,o,r),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new mt(function(t){e=t}),cancel:e}}}const gt=mt;const yt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(yt).forEach(e=>{let[t,n]=e;yt[n]=t});const vt=yt;const xt=function e(t){const n=new ft(t),o=r(ft.prototype.request,n);return U.extend(o,ft.prototype,n,{allOwnKeys:!0}),U.extend(o,n,null,{allOwnKeys:!0}),o.create=function(n){return e(Ve(t,n))},o}(ye);xt.Axios=ft,xt.CanceledError=Te,xt.CancelToken=gt,xt.isCancel=Me,xt.VERSION=lt,xt.toFormData=Q,xt.AxiosError=J,xt.Cancel=xt.CanceledError,xt.all=function(e){return Promise.all(e)},xt.spread=function(e){return function(t){return e.apply(null,t)}},xt.isAxiosError=function(e){return U.isObject(e)&&!0===e.isAxiosError},xt.mergeConfig=Ve,xt.AxiosHeaders=Ee,xt.formToJSON=e=>me(U.isHTMLForm(e)?new FormData(e):e),xt.getAdapter=it,xt.HttpStatusCode=vt,xt.default=xt;const bt=xt},6272:(e,t,n)=>{var o=n(6571),r=n(2761);e.exports=function(e){return r(e)&&o(e)}},6297:(e,t,n)=>{var o=n(8208);e.exports=function(e,t){return o.map(t,function(t){var n=e.inEdges(t);if(n.length){var r=o.reduce(n,function(t,n){var o=e.edge(n),r=e.node(n.v);return{sum:t.sum+o.weight*r.order,weight:t.weight+o.weight}},{sum:0,weight:0});return{v:t,barycenter:r.sum/r.weight,weight:r.weight}}return{v:t}})}},6311:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},6326:(e,t,n)=>{var o=n(8895),r=n(5990),i=n(9621),s=n(7828),a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)o(t,i(e)),e=r(e);return t}:s;e.exports=a},6350:(e,t,n)=>{var o=n(8325),r=n(6578)(o);e.exports=r},6368:(e,t,n)=>{var o=n(5750),r=n(191),i=n(4428);e.exports=function(e,t){var n,s=new r,a={},l=new i;function c(e){var o=e.v===n?e.w:e.v,r=l.priority(o);if(void 0!==r){var i=t(e);i<r&&(a[o]=n,l.decrease(o,i))}}if(0===e.nodeCount())return s;o.each(e.nodes(),function(e){l.add(e,Number.POSITIVE_INFINITY),s.setNode(e)}),l.decrease(e.nodes()[0],0);var d=!1;for(;l.size()>0;){if(n=l.removeMin(),o.has(a,n))s.setEdge(n,a[n]);else{if(d)throw new Error("Input graph is not connected: "+e);d=!0}e.nodeEdges(n).forEach(c)}return s}},6382:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]])},6399:(e,t,n)=>{var o=n(5538),r=n(3668),i=n(9987),s=n(5752),a=n(6924),l=n(4052),c=n(4543),d=n(1268),u="[object Arguments]",h="[object Array]",p="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,g,y){var v=l(e),x=l(t),b=v?h:a(e),w=x?h:a(t),S=(b=b==u?p:b)==p,k=(w=w==u?p:w)==p,E=b==w;if(E&&c(e)){if(!c(t))return!1;v=!0,S=!1}if(E&&!S)return y||(y=new o),v||d(e)?r(e,t,n,m,g,y):i(e,t,b,n,m,g,y);if(!(1&n)){var C=S&&f.call(e,"__wrapped__"),M=k&&f.call(t,"__wrapped__");if(C||M){var O=C?e.value():e,T=M?t.value():t;return y||(y=new o),g(O,T,n,m,y)}}return!!E&&(y||(y=new o),s(e,t,n,m,g,y))}},6434:(e,t,n)=>{var o=n(7132);e.exports=function(e){return o(e,5)}},6446:(e,t,n)=>{"use strict";n.d(t,{P:()=>Xs});var o=n(5043);const r=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],i=(()=>new Set(r))(),s=e=>180*e/Math.PI,a=e=>{const t=s(Math.atan2(e[1],e[0]));return c(t)},l={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:a,rotateZ:a,skewX:e=>s(Math.atan(e[1])),skewY:e=>s(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},c=e=>((e%=360)<0&&(e+=360),e),d=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),u=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),h={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:d,scaleY:u,scale:e=>(d(e)+u(e))/2,rotateX:e=>c(s(Math.atan2(e[6],e[5]))),rotateY:e=>c(s(Math.atan2(-e[2],e[0]))),rotateZ:a,rotate:a,skewX:e=>s(Math.atan(e[4])),skewY:e=>s(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function p(e){return e.includes("scale")?1:0}function f(e,t){if(!e||"none"===e)return p(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let o,r;if(n)o=h,r=n;else{const t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);o=l,r=t}if(!r)return p(t);const i=o[t],s=r[1].split(",").map(m);return"function"===typeof i?i(s):s[i]}function m(e){return parseFloat(e.trim())}const g=e=>t=>"string"===typeof t&&t.startsWith(e),y=g("--"),v=g("var(--"),x=e=>!!v(e)&&b.test(e.split("/*")[0].trim()),b=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function w(e){let{top:t,left:n,right:o,bottom:r}=e;return{x:{min:n,max:o},y:{min:t,max:r}}}const S=(e,t,n)=>e+(t-e)*n;function k(e){return void 0===e||1===e}function E(e){let{scale:t,scaleX:n,scaleY:o}=e;return!k(t)||!k(n)||!k(o)}function C(e){return E(e)||M(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function M(e){return O(e.x)||O(e.y)}function O(e){return e&&"0%"!==e}function T(e,t,n){return n+t*(e-n)}function A(e,t,n,o,r){return void 0!==r&&(e=T(e,r,o)),T(e,n,o)+t}function N(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;e.min=A(e.min,t,n,o,r),e.max=A(e.max,t,n,o,r)}function P(e,t){let{x:n,y:o}=t;N(e.x,n.translate,n.scale,n.originPoint),N(e.y,o.translate,o.scale,o.originPoint)}const D=.999999999999,R=1.0000000000001;function I(e,t){e.min=e.min+t,e.max=e.max+t}function L(e,t,n,o){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;N(e,t,n,S(e.min,e.max,r),o)}function j(e,t){L(e.x,t.x,t.scaleX,t.scale,t.originX),L(e.y,t.y,t.scaleY,t.scale,t.originY)}function B(e,t){return w(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),o=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:o.y,right:o.x}}(e.getBoundingClientRect(),t))}const _=new Set(["width","height","top","left","right","bottom",...r]),V=(e,t,n)=>n>t?t:n<e?e:n,z={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},F={...z,transform:e=>V(0,1,e)},$={...z,default:1},H=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),U=H("deg"),K=H("%"),W=H("px"),q=H("vh"),J=H("vw"),X=(()=>({...K,parse:e=>K.parse(e)/100,transform:e=>K.transform(100*e)}))(),Z=e=>t=>t.test(e),Y=[z,W,K,U,J,q,{test:e=>"auto"===e,parse:e=>e}],G=e=>Y.find(Z(e));const Q=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),ee=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function te(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const[o,r]=function(e){const t=ee.exec(e);if(!t)return[,];const[,n,o,r]=t;return[`--${n??o}`,r]}(e);if(!o)return;const i=window.getComputedStyle(t).getPropertyValue(o);if(i){const e=i.trim();return Q(e)?parseFloat(e):e}return x(r)?te(r,t,n+1):r}const ne=e=>e===z||e===W,oe=new Set(["x","y","z"]),re=r.filter(e=>!oe.has(e));const ie={width:(e,t)=>{let{x:n}=e,{paddingLeft:o="0",paddingRight:r="0"}=t;return n.max-n.min-parseFloat(o)-parseFloat(r)},height:(e,t)=>{let{y:n}=e,{paddingTop:o="0",paddingBottom:r="0"}=t;return n.max-n.min-parseFloat(o)-parseFloat(r)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:o}=t;return parseFloat(o)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:o}=t;return parseFloat(o)+(n.max-n.min)},x:(e,t)=>{let{transform:n}=t;return f(n,"x")},y:(e,t)=>{let{transform:n}=t;return f(n,"y")}};ie.translateX=ie.x,ie.translateY=ie.y;const se=e=>e,ae={},le=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],ce={value:null,addProjectionMetrics:null};function de(e,t){let n=!1,o=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,s=le.reduce((e,n)=>(e[n]=function(e,t){let n=new Set,o=new Set,r=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(t){s.has(t)&&(d.schedule(t),e()),l++,t(a)}const d={schedule:function(e){const t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&r?n:o;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&s.add(e),t.has(e)||t.add(e),e},cancel:e=>{o.delete(e),s.delete(e)},process:e=>{a=e,r?i=!0:(r=!0,[n,o]=[o,n],n.forEach(c),t&&ce.value&&ce.value.frameloop[t].push(l),l=0,n.clear(),r=!1,i&&(i=!1,d.process(e)))}};return d}(i,t?n:void 0),e),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:d,update:u,preRender:h,render:p,postRender:f}=s,m=()=>{const i=ae.useManualTiming?r.timestamp:performance.now();n=!1,ae.useManualTiming||(r.delta=o?1e3/60:Math.max(Math.min(i-r.timestamp,40),1)),r.timestamp=i,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),d.process(r),u.process(r),h.process(r),p.process(r),f.process(r),r.isProcessing=!1,n&&t&&(o=!1,e(m))},g=le.reduce((t,i)=>{const a=s[i];return t[i]=function(t){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,o=!0,r.isProcessing||e(m)),a.schedule(t,i,s)},t},{});return{schedule:g,cancel:e=>{for(let t=0;t<le.length;t++)s[le[t]].cancel(e)},state:r,steps:s}}const{schedule:ue,cancel:he,state:pe,steps:fe}=de("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:se,!0),me=new Set;let ge=!1,ye=!1,ve=!1;function xe(){if(ye){const e=Array.from(me).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{const t=function(e){const t=[];return re.forEach(n=>{const o=e.getValue(n);void 0!==o&&(t.push([n,o.get()]),o.set(n.startsWith("scale")?1:0))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=n.get(e);t&&t.forEach(t=>{let[n,o]=t;e.getValue(n)?.set(o)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}ye=!1,ge=!1,me.forEach(e=>e.complete(ve)),me.clear()}function be(){me.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(ye=!0)})}class we{constructor(e,t,n,o,r){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=o,this.element=r,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(me.add(this),ge||(ge=!0,ue.read(be),ue.resolveKeyframes(xe))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:o}=this;if(null===e[0]){const r=o?.get(),i=e[e.length-1];if(void 0!==r)e[0]=r;else if(n&&t){const o=n.readValue(t,i);void 0!==o&&null!==o&&(e[0]=o)}void 0===e[0]&&(e[0]=i),o&&void 0===r&&o.set(e[0])}!function(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),me.delete(this)}cancel(){"scheduled"===this.state&&(me.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const Se=e=>/^0[^.\s]+$/u.test(e);function ke(e){return"number"===typeof e?0===e:null===e||("none"===e||"0"===e||Se(e))}const Ee=e=>Math.round(1e5*e)/1e5,Ce=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const Me=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Oe=(e,t)=>n=>Boolean("string"===typeof n&&Me.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),Te=(e,t,n)=>o=>{if("string"!==typeof o)return o;const[r,i,s,a]=o.match(Ce);return{[e]:parseFloat(r),[t]:parseFloat(i),[n]:parseFloat(s),alpha:void 0!==a?parseFloat(a):1}},Ae={...z,transform:e=>Math.round((e=>V(0,255,e))(e))},Ne={test:Oe("rgb","red"),parse:Te("red","green","blue"),transform:e=>{let{red:t,green:n,blue:o,alpha:r=1}=e;return"rgba("+Ae.transform(t)+", "+Ae.transform(n)+", "+Ae.transform(o)+", "+Ee(F.transform(r))+")"}};const Pe={test:Oe("#"),parse:function(e){let t="",n="",o="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),o=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),o=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,o+=o,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(o,16),alpha:r?parseInt(r,16)/255:1}},transform:Ne.transform},De={test:Oe("hsl","hue"),parse:Te("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:o,alpha:r=1}=e;return"hsla("+Math.round(t)+", "+K.transform(Ee(n))+", "+K.transform(Ee(o))+", "+Ee(F.transform(r))+")"}},Re={test:e=>Ne.test(e)||Pe.test(e)||De.test(e),parse:e=>Ne.test(e)?Ne.parse(e):De.test(e)?De.parse(e):Pe.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?Ne.transform(e):De.transform(e),getAnimatableNone:e=>{const t=Re.parse(e);return t.alpha=0,Re.transform(t)}},Ie=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const Le="number",je="color",Be=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function _e(e){const t=e.toString(),n=[],o={color:[],number:[],var:[]},r=[];let i=0;const s=t.replace(Be,e=>(Re.test(e)?(o.color.push(i),r.push(je),n.push(Re.parse(e))):e.startsWith("var(")?(o.var.push(i),r.push("var"),n.push(e)):(o.number.push(i),r.push(Le),n.push(parseFloat(e))),++i,"${}")).split("${}");return{values:n,split:s,indexes:o,types:r}}function Ve(e){return _e(e).values}function ze(e){const{split:t,types:n}=_e(e),o=t.length;return e=>{let r="";for(let i=0;i<o;i++)if(r+=t[i],void 0!==e[i]){const t=n[i];r+=t===Le?Ee(e[i]):t===je?Re.transform(e[i]):e[i]}return r}}const Fe=e=>"number"===typeof e?0:Re.test(e)?Re.getAnimatableNone(e):e;const $e={test:function(e){return isNaN(e)&&"string"===typeof e&&(e.match(Ce)?.length||0)+(e.match(Ie)?.length||0)>0},parse:Ve,createTransformer:ze,getAnimatableNone:function(e){const t=Ve(e);return ze(e)(t.map(Fe))}},He=new Set(["brightness","contrast","saturate","opacity"]);function Ue(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[o]=n.match(Ce)||[];if(!o)return e;const r=n.replace(o,"");let i=He.has(t)?1:0;return o!==n&&(i*=100),t+"("+i+r+")"}const Ke=/\b([a-z-]*)\(.*?\)/gu,We={...$e,getAnimatableNone:e=>{const t=e.match(Ke);return t?t.map(Ue).join(" "):e}},qe={...z,transform:Math.round},Je={borderWidth:W,borderTopWidth:W,borderRightWidth:W,borderBottomWidth:W,borderLeftWidth:W,borderRadius:W,radius:W,borderTopLeftRadius:W,borderTopRightRadius:W,borderBottomRightRadius:W,borderBottomLeftRadius:W,width:W,maxWidth:W,height:W,maxHeight:W,top:W,right:W,bottom:W,left:W,padding:W,paddingTop:W,paddingRight:W,paddingBottom:W,paddingLeft:W,margin:W,marginTop:W,marginRight:W,marginBottom:W,marginLeft:W,backgroundPositionX:W,backgroundPositionY:W,...{rotate:U,rotateX:U,rotateY:U,rotateZ:U,scale:$,scaleX:$,scaleY:$,scaleZ:$,skew:U,skewX:U,skewY:U,distance:W,translateX:W,translateY:W,translateZ:W,x:W,y:W,z:W,perspective:W,transformPerspective:W,opacity:F,originX:X,originY:X,originZ:W},zIndex:qe,fillOpacity:F,strokeOpacity:F,numOctaves:qe},Xe={...Je,color:Re,backgroundColor:Re,outlineColor:Re,fill:Re,stroke:Re,borderColor:Re,borderTopColor:Re,borderRightColor:Re,borderBottomColor:Re,borderLeftColor:Re,filter:We,WebkitFilter:We},Ze=e=>Xe[e];function Ye(e,t){let n=Ze(e);return n!==We&&(n=$e),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Ge=new Set(["auto","none","0"]);class Qe extends we{constructor(e,t,n,o,r){super(e,t,n,o,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let a=0;a<e.length;a++){let n=e[a];if("string"===typeof n&&(n=n.trim(),x(n))){const o=te(n,t.current);void 0!==o&&(e[a]=o),a===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!_.has(n)||2!==e.length)return;const[o,r]=e,i=G(o),s=G(r);if(i!==s)if(ne(i)&&ne(s))for(let a=0;a<e.length;a++){const t=e[a];"string"===typeof t&&(e[a]=parseFloat(t))}else ie[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let o=0;o<e.length;o++)(null===e[o]||ke(e[o]))&&n.push(o);n.length&&function(e,t,n){let o,r=0;for(;r<e.length&&!o;){const t=e[r];"string"===typeof t&&!Ge.has(t)&&_e(t).values.length&&(o=e[r]),r++}if(o&&n)for(const i of t)e[i]=Ye(n,o)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ie[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const o=t[t.length-1];void 0!==o&&e.getValue(n,o).jump(o,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const o=e.getValue(t);o&&o.jump(this.measuredOrigin,!1);const r=n.length-1,i=n[r];n[r]=ie[t](e.measureViewportBox(),window.getComputedStyle(e.current)),null!==i&&void 0===this.finalKeyframe&&(this.finalKeyframe=i),this.removedTransforms?.length&&this.removedTransforms.forEach(t=>{let[n,o]=t;e.getValue(n).set(o)}),this.resolveNoneKeyframes()}}const et=e=>Boolean(e&&e.getVelocity);let tt;function nt(){tt=void 0}const ot={now:()=>(void 0===tt&&ot.set(pe.isProcessing||ae.useManualTiming?pe.timestamp:performance.now()),tt),set:e=>{tt=e,queueMicrotask(nt)}};function rt(e,t){-1===e.indexOf(t)&&e.push(t)}function it(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class st{constructor(){this.subscriptions=[]}add(e){return rt(this.subscriptions,e),()=>it(this.subscriptions,e)}notify(e,t,n){const o=this.subscriptions.length;if(o)if(1===o)this.subscriptions[0](e,t,n);else for(let r=0;r<o;r++){const o=this.subscriptions[r];o&&o(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function at(e,t){return t?e*(1e3/t):0}const lt={current:void 0};class ct{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{const t=ot.now();if(this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const n of this.dependents)n.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=ot.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new st);const n=this.events[e].add(t);return"change"===e?()=>{n(),ue.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return lt.current&&lt.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=ot.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return at(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function dt(e,t){return new ct(e,t)}const ut=[...Y,Re,$e],{schedule:ht,cancel:pt}=de(queueMicrotask,!1),ft={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},mt={};for(const Zs in ft)mt[Zs]={isEnabled:e=>ft[Zs].some(t=>!!e[t])};const gt=()=>({x:{min:0,max:0},y:{min:0,max:0}});var yt=n(4735);const vt={current:null},xt={current:!1};const bt=new WeakMap;function wt(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}function St(e){return"string"===typeof e||Array.isArray(e)}const kt=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Et=["initial",...kt];function Ct(e){return wt(e.animate)||Et.some(t=>St(e[t]))}function Mt(e){return Boolean(Ct(e)||e.variants)}function Ot(e){const t=[{},{}];return e?.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function Tt(e,t,n,o){if("function"===typeof t){const[r,i]=Ot(o);t=t(void 0!==n?n:e.custom,r,i)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[r,i]=Ot(o);t=t(void 0!==n?n:e.custom,r,i)}return t}const At=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Nt{scrapeMotionValuesFromProps(e,t,n){return{}}constructor(e){let{parent:t,props:n,presenceContext:o,reducedMotionConfig:r,blockInitialAnimation:i,visualState:s}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=we,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=ot.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,ue.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=s;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=o,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=Boolean(i),this.isControllingVariants=Ct(n),this.isVariantNode=Mt(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:d,...u}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in u){const e=u[h];void 0!==l[h]&&et(e)&&e.set(l[h])}}mount(e){this.current=e,bt.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),xt.current||function(){if(xt.current=!0,yt.B)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>vt.current=e.matches;e.addEventListener("change",t),t()}else vt.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||vt.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),he(this.notifyUpdate),he(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=i.has(e);n&&this.onBindTransform&&this.onBindTransform();const o=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&ue.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{o(),r&&r(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in mt){const t=mt[e];if(!t)continue;const{isEnabled:n,Feature:o}=t;if(!this.features[e]&&o&&n(this.props)&&(this.features[e]=new o(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<At.length;n++){const t=At[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const o=e["on"+t];o&&(this.propEventSubscriptions[t]=this.on(t,o))}this.prevMotionValues=function(e,t,n){for(const o in t){const r=t[o],i=n[o];if(et(r))e.addValue(o,r);else if(et(i))e.addValue(o,dt(r,{owner:e}));else if(i!==r)if(e.hasValue(o)){const t=e.getValue(o);!0===t.liveStyle?t.jump(r):t.hasAnimated||t.set(r)}else{const t=e.getStaticValue(o);e.addValue(o,dt(void 0!==t?t:r,{owner:e}))}}for(const o in n)void 0===t[o]&&e.removeValue(o);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=dt(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var o;return void 0!==n&&null!==n&&("string"===typeof n&&(Q(n)||Se(n))?n=parseFloat(n):(o=n,!ut.find(Z(o))&&$e.test(t)&&(n=Ye(e,t))),this.setBaseTarget(e,et(n)?n.get():n)),et(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if("string"===typeof t||"object"===typeof t){const o=Tt(this.props,t,this.presenceContext?.custom);o&&(n=o[e])}if(t&&void 0!==n)return n;const o=this.getBaseTargetFromProps(this.props,e);return void 0===o||et(o)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:o}on(e,t){return this.events[e]||(this.events[e]=new st),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];this.events[e].notify(...n)}}scheduleRenderMicrotask(){ht.render(this.render)}}class Pt extends Nt{constructor(){super(...arguments),this.KeyframeResolver=Qe}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:o}=t;delete n[e],delete o[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;et(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}const Dt=(e,t)=>t&&"number"===typeof e?t.transform(e):e,Rt={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},It=r.length;function Lt(e,t,n){const{style:o,vars:s,transformOrigin:a}=e;let l=!1,c=!1;for(const r in t){const e=t[r];if(i.has(r))l=!0;else if(y(r))s[r]=e;else{const t=Dt(e,Je[r]);r.startsWith("origin")?(c=!0,a[r]=t):o[r]=t}}if(t.transform||(l||n?o.transform=function(e,t,n){let o="",i=!0;for(let s=0;s<It;s++){const a=r[s],l=e[a];if(void 0===l)continue;let c=!0;if(c="number"===typeof l?l===(a.startsWith("scale")?1:0):0===parseFloat(l),!c||n){const e=Dt(l,Je[a]);c||(i=!1,o+=`${Rt[a]||a}(${e}) `),n&&(t[a]=e)}}return o=o.trim(),n?o=n(t,i?"":o):i&&(o="none"),o}(t,e.transform,n):o.transform&&(o.transform="none")),c){const{originX:e="50%",originY:t="50%",originZ:n=0}=a;o.transformOrigin=`${e} ${t} ${n}`}}function jt(e,t,n,o){let{style:r,vars:i}=t;const s=e.style;let a;for(a in r)s[a]=r[a];for(a in o?.applyProjectionStyles(s,n),i)s.setProperty(a,i[a])}const Bt={};function _t(e,t){let{layout:n,layoutId:o}=t;return i.has(e)||e.startsWith("origin")||(n||void 0!==o)&&(!!Bt[e]||"opacity"===e)}function Vt(e,t,n){const{style:o}=e,r={};for(const i in o)(et(o[i])||t.style&&et(t.style[i])||_t(i,e)||void 0!==n?.getValue(i)?.liveStyle)&&(r[i]=o[i]);return r}class zt extends Pt{constructor(){super(...arguments),this.type="html",this.renderInstance=jt}readValueFromInstance(e,t){if(i.has(t))return this.projection?.isProjecting?p(t):((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return f(n,t)})(e,t);{const o=(n=e,window.getComputedStyle(n)),r=(y(t)?o.getPropertyValue(t):o[t])||0;return"string"===typeof r?r.trim():r}var n}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return B(e,n)}build(e,t,n){Lt(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return Vt(e,t,n)}}const Ft=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),$t={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ht={offset:"strokeDashoffset",array:"strokeDasharray"};function Ut(e,t,n,o,r){let{attrX:i,attrY:s,attrScale:a,pathLength:l,pathSpacing:c=1,pathOffset:d=0,...u}=t;if(Lt(e,u,o),n)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:h,style:p}=e;h.transform&&(p.transform=h.transform,delete h.transform),(p.transform||h.transformOrigin)&&(p.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),p.transform&&(p.transformBox=r?.transformBox??"fill-box",delete h.transformBox),void 0!==i&&(h.x=i),void 0!==s&&(h.y=s),void 0!==a&&(h.scale=a),void 0!==l&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const i=r?$t:Ht;e[i.offset]=W.transform(-o);const s=W.transform(t),a=W.transform(n);e[i.array]=`${s} ${a}`}(h,l,c,d,!1)}const Kt=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),Wt=e=>"string"===typeof e&&"svg"===e.toLowerCase();function qt(e,t,n){const o=Vt(e,t,n);for(const i in e)if(et(e[i])||et(t[i])){o[-1!==r.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=e[i]}return o}class Jt extends Pt{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=gt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(i.has(t)){const e=Ze(t);return e&&e.default||0}return t=Kt.has(t)?t:Ft(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return qt(e,t,n)}build(e,t,n){Ut(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,o){!function(e,t,n,o){jt(e,t,void 0,o);for(const r in t.attrs)e.setAttribute(Kt.has(r)?r:Ft(r),t.attrs[r])}(e,t,0,o)}mount(e){this.isSVGTag=Wt(e.tagName),super.mount(e)}}const Xt=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Zt(e){return"string"===typeof e&&!e.includes("-")&&!!(Xt.indexOf(e)>-1||/[A-Z]/u.test(e))}const Yt=(e,t)=>Zt(e)?new Jt(t):new zt(t,{allowProjection:e!==o.Fragment});var Gt=n(579),Qt=n(2190);const en=(0,o.createContext)({strict:!1});var tn=n(1051);const nn=(0,o.createContext)({});function on(e){const{initial:t,animate:n}=function(e,t){if(Ct(e)){const{initial:t,animate:n}=e;return{initial:!1===t||St(t)?t:void 0,animate:St(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,o.useContext)(nn));return(0,o.useMemo)(()=>({initial:t,animate:n}),[rn(t),rn(n)])}function rn(e){return Array.isArray(e)?e.join(" "):e}const sn=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function an(e,t,n){for(const o in t)et(t[o])||_t(o,n)||(e[o]=t[o])}function ln(e,t){const n={};return an(n,e.style||{},e),Object.assign(n,function(e,t){let{transformTemplate:n}=e;return(0,o.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return Lt(e,t,n),Object.assign({},e.vars,e.style)},[t])}(e,t)),n}function cn(e,t){const n={},o=ln(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=o,n}const dn=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}});function un(e,t,n,r){const i=(0,o.useMemo)(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return Ut(n,t,Wt(r),e.transformTemplate,e.style),{...n.attrs,style:{...n.style}}},[t]);if(e.style){const t={};an(t,e.style,e),i.style={...t,...i.style}}return i}const hn=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function pn(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||hn.has(e)}let fn=e=>!pn(e);try{"function"===typeof(mn=require("@emotion/is-prop-valid").default)&&(fn=e=>e.startsWith("on")?!pn(e):mn(e))}catch{}var mn;function gn(e,t,n,r,i){let{latestValues:s}=r,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const l=(Zt(e)?un:cn)(t,s,i,e),c=function(e,t,n){const o={};for(const r in e)"values"===r&&"object"===typeof e.values||(fn(r)||!0===n&&pn(r)||!t&&!pn(r)||e.draggable&&r.startsWith("onDrag"))&&(o[r]=e[r]);return o}(t,"string"===typeof e,a),d=e!==o.Fragment?{...c,...l,ref:n}:{},{children:u}=t,h=(0,o.useMemo)(()=>et(u)?u.get():u,[u]);return(0,o.createElement)(e,{...d,children:h})}var yn=n(9674),vn=n(4930);function xn(e){return et(e)?e.get():e}function bn(e,t,n,o){const r={},i=o(e,{});for(const h in i)r[h]=xn(i[h]);let{initial:s,animate:a}=e;const l=Ct(e),c=Mt(e);t&&c&&!l&&!1!==e.inherit&&(void 0===s&&(s=t.initial),void 0===a&&(a=t.animate));let d=!!n&&!1===n.initial;d=d||!1===s;const u=d?a:s;if(u&&"boolean"!==typeof u&&!wt(u)){const t=Array.isArray(u)?u:[u];for(let n=0;n<t.length;n++){const o=Tt(e,t[n]);if(o){const{transitionEnd:e,transition:t,...n}=o;for(const o in n){let e=n[o];if(Array.isArray(e)){e=e[d?e.length-1:0]}null!==e&&(r[o]=e)}for(const o in e)r[o]=e[o]}}}return r}const wn=e=>(t,n)=>{const r=(0,o.useContext)(nn),i=(0,o.useContext)(yn.t),s=()=>function(e,t,n,o){let{scrapeMotionValuesFromProps:r,createRenderState:i}=e;return{latestValues:bn(t,n,o,r),renderState:i()}}(e,t,r,i);return n?s():(0,vn.M)(s)},Sn=wn({scrapeMotionValuesFromProps:Vt,createRenderState:sn}),kn=wn({scrapeMotionValuesFromProps:qt,createRenderState:dn});const En=Symbol.for("motionComponentSymbol");function Cn(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Mn(e,t,n){return(0,o.useCallback)(o=>{o&&e.onMount&&e.onMount(o),t&&(o?t.mount(o):t.unmount()),n&&("function"===typeof n?n(o):Cn(n)&&(n.current=o))},[t])}const On="data-"+Ft("framerAppearId"),Tn=(0,o.createContext)({});var An=n(293);function Nn(e,t,n,r,i){const{visualElement:s}=(0,o.useContext)(nn),a=(0,o.useContext)(en),l=(0,o.useContext)(yn.t),c=(0,o.useContext)(tn.Q).reducedMotion,d=(0,o.useRef)(null);r=r||a.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:s,props:n,presenceContext:l,blockInitialAnimation:!!l&&!1===l.initial,reducedMotionConfig:c}));const u=d.current,h=(0,o.useContext)(Tn);!u||u.projection||!i||"html"!==u.type&&"svg"!==u.type||function(e,t,n,o){const{layoutId:r,layout:i,drag:s,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Pn(e.parent)),e.projection.setOptions({layoutId:r,layout:i,alwaysMeasureLayout:Boolean(s)||a&&Cn(a),visualElement:e,animationType:"string"===typeof i?i:"both",initialPromotionConfig:o,crossfade:d,layoutScroll:l,layoutRoot:c})}(d.current,n,i,h);const p=(0,o.useRef)(!1);(0,o.useInsertionEffect)(()=>{u&&p.current&&u.update(n,l)});const f=n[On],m=(0,o.useRef)(Boolean(f)&&!window.MotionHandoffIsComplete?.(f)&&window.MotionHasOptimisedAnimation?.(f));return(0,An.E)(()=>{u&&(p.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),m.current&&u.animationState&&u.animationState.animateChanges())}),(0,o.useEffect)(()=>{u&&(!m.current&&u.animationState&&u.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(f)}),m.current=!1),u.enteringChildren=void 0)}),u}function Pn(e){if(e)return!1!==e.options.allowProjection?e.projection:Pn(e.parent)}function Dn(e){let{forwardMotionProps:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n&&function(e){for(const t in e)mt[t]={...mt[t],...e[t]}}(n);const i=Zt(e)?kn:Sn;function s(n,s){let a;const l={...(0,o.useContext)(tn.Q),...n,layoutId:Rn(n)},{isStatic:c}=l,d=on(n),u=i(n,c);if(!c&&yt.B){!function(){(0,o.useContext)(en).strict;0}();const t=function(e){const{drag:t,layout:n}=mt;if(!t&&!n)return{};const o={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}(l);a=t.MeasureLayout,d.visualElement=Nn(e,u,l,r,t.ProjectionNode)}return(0,Gt.jsxs)(nn.Provider,{value:d,children:[a&&d.visualElement?(0,Gt.jsx)(a,{visualElement:d.visualElement,...l}):null,gn(e,n,Mn(u,d.visualElement,s),u,c,t)]})}s.displayName=`motion.${"string"===typeof e?e:`create(${e.displayName??e.name??""})`}`;const a=(0,o.forwardRef)(s);return a[En]=e,a}function Rn(e){let{layoutId:t}=e;const n=(0,o.useContext)(Qt.L).id;return n&&void 0!==t?n+"-"+t:t}function In(e,t){if("undefined"===typeof Proxy)return Dn;const n=new Map,o=(n,o)=>Dn(n,o,e,t);return new Proxy((e,t)=>o(e,t),{get:(r,i)=>"create"===i?o:(n.has(i)||n.set(i,Dn(i,void 0,e,t)),n.get(i))})}function Ln(e,t,n){const o=e.getProps();return Tt(o,t,void 0!==n?n:o.custom,e)}function jn(e,t){return e?.[t]??e?.default??e}const Bn=e=>Array.isArray(e);function _n(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,dt(n))}function Vn(e){return Bn(e)?e[e.length-1]||0:e}function zn(e,t){const n=e.getValue("willChange");if(o=n,Boolean(et(o)&&o.add))return n.add(t);if(!n&&ae.WillChange){const n=new ae.WillChange("auto");e.addValue("willChange",n),n.add(t)}var o}function Fn(e){return e.props[On]}function $n(e){e.duration=0,e.type}const Hn=(e,t)=>n=>t(e(n)),Un=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(Hn)},Kn=e=>1e3*e,Wn=e=>e/1e3,qn={layout:0,mainThread:0,waapi:0};function Jn(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Xn(e,t){return n=>n>0?t:e}const Zn=(e,t,n)=>{const o=e*e,r=n*(t*t-o)+o;return r<0?0:Math.sqrt(r)},Yn=[Pe,Ne,De];function Gn(e){const t=(n=e,Yn.find(e=>e.test(n)));var n;if(Boolean(t),!Boolean(t))return!1;let o=t.parse(e);return t===De&&(o=function(e){let{hue:t,saturation:n,lightness:o,alpha:r}=e;t/=360,n/=100,o/=100;let i=0,s=0,a=0;if(n){const e=o<.5?o*(1+n):o+n-o*n,r=2*o-e;i=Jn(r,e,t+1/3),s=Jn(r,e,t),a=Jn(r,e,t-1/3)}else i=s=a=o;return{red:Math.round(255*i),green:Math.round(255*s),blue:Math.round(255*a),alpha:r}}(o)),o}const Qn=(e,t)=>{const n=Gn(e),o=Gn(t);if(!n||!o)return Xn(e,t);const r={...n};return e=>(r.red=Zn(n.red,o.red,e),r.green=Zn(n.green,o.green,e),r.blue=Zn(n.blue,o.blue,e),r.alpha=S(n.alpha,o.alpha,e),Ne.transform(r))},eo=new Set(["none","hidden"]);function to(e,t){return n=>S(e,t,n)}function no(e){return"number"===typeof e?to:"string"===typeof e?x(e)?Xn:Re.test(e)?Qn:io:Array.isArray(e)?oo:"object"===typeof e?Re.test(e)?Qn:ro:Xn}function oo(e,t){const n=[...e],o=n.length,r=e.map((e,n)=>no(e)(e,t[n]));return e=>{for(let t=0;t<o;t++)n[t]=r[t](e);return n}}function ro(e,t){const n={...e,...t},o={};for(const r in n)void 0!==e[r]&&void 0!==t[r]&&(o[r]=no(e[r])(e[r],t[r]));return e=>{for(const t in o)n[t]=o[t](e);return n}}const io=(e,t)=>{const n=$e.createTransformer(t),o=_e(e),r=_e(t);return o.indexes.var.length===r.indexes.var.length&&o.indexes.color.length===r.indexes.color.length&&o.indexes.number.length>=r.indexes.number.length?eo.has(e)&&!r.values.length||eo.has(t)&&!o.values.length?function(e,t){return eo.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):Un(oo(function(e,t){const n=[],o={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const i=t.types[r],s=e.indexes[i][o[i]],a=e.values[s]??0;n[r]=a,o[i]++}return n}(o,r),r.values),n):Xn(e,t)};function so(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return S(e,t,n);return no(e)(e,t)}const ao=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return ue.update(t,e)},stop:()=>he(t),now:()=>pe.isProcessing?pe.timestamp:ot.now()}},lo=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o="";const r=Math.max(Math.round(t/n),2);for(let i=0;i<r;i++)o+=Math.round(1e4*e(i/(r-1)))/1e4+", ";return`linear(${o.substring(0,o.length-2)})`},co=2e4;function uo(e){let t=0;let n=e.next(t);for(;!n.done&&t<co;)t+=50,n=e.next(t);return t>=co?1/0:t}function ho(e,t,n){const o=Math.max(t-5,0);return at(n-e(o),t-o)}const po={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},fo=.001;function mo(e){let t,n,{duration:o=po.duration,bounce:r=po.bounce,velocity:i=po.velocity,mass:s=po.mass}=e;Kn(po.maxDuration);let a=1-r;a=V(po.minDamping,po.maxDamping,a),o=V(po.minDuration,po.maxDuration,Wn(o)),a<1?(t=e=>{const t=e*a,n=t*o,r=t-i,s=yo(e,a),l=Math.exp(-n);return fo-r/s*l},n=e=>{const n=e*a*o,r=n*i+i,s=Math.pow(a,2)*Math.pow(e,2)*o,l=Math.exp(-n),c=yo(Math.pow(e,2),a);return(-t(e)+fo>0?-1:1)*((r-s)*l)/c}):(t=e=>Math.exp(-e*o)*((e-i)*o+1)-.001,n=e=>Math.exp(-e*o)*(o*o*(i-e)));const l=function(e,t,n){let o=n;for(let r=1;r<go;r++)o-=e(o)/t(o);return o}(t,n,5/o);if(o=Kn(o),isNaN(l))return{stiffness:po.stiffness,damping:po.damping,duration:o};{const e=Math.pow(l,2)*s;return{stiffness:e,damping:2*a*Math.sqrt(s*e),duration:o}}}const go=12;function yo(e,t){return e*Math.sqrt(1-t*t)}const vo=["duration","bounce"],xo=["stiffness","damping","mass"];function bo(e,t){return t.some(t=>void 0!==e[t])}function wo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:po.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:po.bounce;const n="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:o,restDelta:r}=n;const i=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:p}=function(e){let t={velocity:po.velocity,stiffness:po.stiffness,damping:po.damping,mass:po.mass,isResolvedFromDuration:!1,...e};if(!bo(e,xo)&&bo(e,vo))if(e.visualDuration){const n=e.visualDuration,o=2*Math.PI/(1.2*n),r=o*o,i=2*V(.05,1,1-(e.bounce||0))*Math.sqrt(r);t={...t,mass:po.mass,stiffness:r,damping:i}}else{const n=mo(e);t={...t,...n,mass:po.mass},t.isResolvedFromDuration=!0}return t}({...n,velocity:-Wn(n.velocity||0)}),f=h||0,m=c/(2*Math.sqrt(l*d)),g=s-i,y=Wn(Math.sqrt(l/d)),v=Math.abs(g)<5;let x;if(o||(o=v?po.restSpeed.granular:po.restSpeed.default),r||(r=v?po.restDelta.granular:po.restDelta.default),m<1){const e=yo(y,m);x=t=>{const n=Math.exp(-m*y*t);return s-n*((f+m*y*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===m)x=e=>s-Math.exp(-y*e)*(g+(f+y*g)*e);else{const e=y*Math.sqrt(m*m-1);x=t=>{const n=Math.exp(-m*y*t),o=Math.min(e*t,300);return s-n*((f+m*y*g)*Math.sinh(o)+e*g*Math.cosh(o))/e}}const b={calculatedDuration:p&&u||null,next:e=>{const t=x(e);if(p)a.done=e>=u;else{let n=0===e?f:0;m<1&&(n=0===e?Kn(f):ho(x,e,t));const i=Math.abs(n)<=o,l=Math.abs(s-t)<=r;a.done=i&&l}return a.value=a.done?s:t,a},toString:()=>{const e=Math.min(uo(b),co),t=lo(t=>b.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return b}function So(e){let{keyframes:t,velocity:n=0,power:o=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:l,max:c,restDelta:d=.5,restSpeed:u}=e;const h=t[0],p={done:!1,value:h},f=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let m=o*n;const g=h+m,y=void 0===a?g:a(g);y!==g&&(m=y-h);const v=e=>-m*Math.exp(-e/r),x=e=>y+v(e),b=e=>{const t=v(e),n=x(e);p.done=Math.abs(t)<=d,p.value=p.done?y:n};let w,S;const k=e=>{var t;(t=p.value,void 0!==l&&t<l||void 0!==c&&t>c)&&(w=e,S=wo({keyframes:[p.value,f(p.value)],velocity:ho(x,e,p.value),damping:i,stiffness:s,restDelta:d,restSpeed:u}))};return k(0),{calculatedDuration:null,next:e=>{let t=!1;return S||void 0!==w||(t=!0,b(e),k(e)),void 0!==w&&e>=w?S.next(e-w):(!t&&b(e),p)}}}wo.applyToOptions=e=>{const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const n=(arguments.length>2?arguments[2]:void 0)({...e,keyframes:[0,t]}),o=Math.min(uo(n),co);return{type:"keyframes",ease:e=>n.next(o*e).value/t,duration:Wn(o)}}(e,100,wo);return e.ease=t.ease,e.duration=Kn(t.duration),e.type="keyframes",e};const ko=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function Eo(e,t,n,o){if(e===t&&n===o)return se;const r=t=>function(e,t,n,o,r){let i,s,a=0;do{s=t+(n-t)/2,i=ko(s,o,r)-e,i>0?n=s:t=s}while(Math.abs(i)>1e-7&&++a<12);return s}(t,0,1,e,n);return e=>0===e||1===e?e:ko(r(e),t,o)}const Co=Eo(.42,0,1,1),Mo=Eo(0,0,.58,1),Oo=Eo(.42,0,.58,1),To=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Ao=e=>t=>1-e(1-t),No=Eo(.33,1.53,.69,.99),Po=Ao(No),Do=To(Po),Ro=e=>(e*=2)<1?.5*Po(e):.5*(2-Math.pow(2,-10*(e-1))),Io=e=>1-Math.sin(Math.acos(e)),Lo=Ao(Io),jo=To(Io),Bo=e=>Array.isArray(e)&&"number"===typeof e[0],_o={linear:se,easeIn:Co,easeInOut:Oo,easeOut:Mo,circIn:Io,circInOut:jo,circOut:Lo,backIn:Po,backInOut:Do,backOut:No,anticipate:Ro},Vo=e=>{if(Bo(e)){e.length;const[t,n,o,r]=e;return Eo(t,n,o,r)}return"string"===typeof e?_o[e]:e},zo=(e,t,n)=>{const o=t-e;return 0===o?1:(n-e)/o};function Fo(e,t){let{clamp:n=!0,ease:o,mixer:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.length;if(t.length,1===i)return()=>t[0];if(2===i&&t[0]===t[1])return()=>t[1];const s=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=function(e,t,n){const o=[],r=n||ae.mix||so,i=e.length-1;for(let s=0;s<i;s++){let n=r(e[s],e[s+1]);if(t){const e=Array.isArray(t)?t[s]||se:t;n=Un(e,n)}o.push(n)}return o}(t,o,r),l=a.length,c=n=>{if(s&&n<e[0])return t[0];let o=0;if(l>1)for(;o<e.length-2&&!(n<e[o+1]);o++);const r=zo(e[o],e[o+1],n);return a[o](r)};return n?t=>c(V(e[0],e[i-1],t)):c}function $o(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let o=1;o<=t;o++){const r=zo(0,t,o);e.push(S(n,1,r))}}(t,e.length-1),t}function Ho(e){let{duration:t=300,keyframes:n,times:o,ease:r="easeInOut"}=e;const i=(e=>Array.isArray(e)&&"number"!==typeof e[0])(r)?r.map(Vo):Vo(r),s={done:!1,value:n[0]},a=function(e,t){return e.map(e=>e*t)}(o&&o.length===n.length?o:$o(n),t),l=Fo(a,n,{ease:Array.isArray(i)?i:(c=n,d=i,c.map(()=>d||Oo).splice(0,c.length-1))});var c,d;return{calculatedDuration:t,next:e=>(s.value=l(e),s.done=e>=t,s)}}const Uo=e=>null!==e;function Ko(e,t,n){let{repeat:o,repeatType:r="loop"}=t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const s=e.filter(Uo),a=i<0||o&&"loop"!==r&&o%2===1?0:s.length-1;return a&&void 0!==n?n:s[a]}const Wo={decay:So,inertia:So,tween:Ho,keyframes:Ho,spring:wo};function qo(e){"string"===typeof e.type&&(e.type=Wo[e.type])}class Jo{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Xo=e=>e/100;class Zo extends Jo{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==ot.now()&&this.tick(ot.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),this.options.onStop?.())},qn.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;qo(e);const{type:t=Ho,repeat:n=0,repeatDelay:o=0,repeatType:r,velocity:i=0}=e;let{keyframes:s}=e;const a=t||Ho;a!==Ho&&"number"!==typeof s[0]&&(this.mixKeyframes=Un(Xo,so(s[0],s[1])),s=[0,100]);const l=a({...e,keyframes:s});"mirror"===r&&(this.mirroredGenerator=a({...e,keyframes:[...s].reverse(),velocity:-i})),null===l.calculatedDuration&&(l.calculatedDuration=uo(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+o,this.totalDuration=this.resolvedDuration*(n+1)-o,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{generator:n,totalDuration:o,mixKeyframes:r,mirroredGenerator:i,resolvedDuration:s,calculatedDuration:a}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:c,repeat:d,repeatType:u,repeatDelay:h,type:p,onUpdate:f,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-o/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>o;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=o);let v=this.currentTime,x=n;if(d){const e=Math.min(this.currentTime,o)/s;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,d+1);Boolean(t%2)&&("reverse"===u?(n=1-n,h&&(n-=h/s)):"mirror"===u&&(x=i)),v=V(0,1,n)*s}const b=y?{done:!1,value:c[0]}:x.next(v);r&&(b.value=r(b.value));let{done:w}=b;y||null===a||(w=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const S=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return S&&p!==So&&(b.value=Ko(c,this.options,m,this.speed)),f&&f(b.value),S&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return Wn(this.calculatedDuration)}get time(){return Wn(this.currentTime)}set time(e){e=Kn(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ot.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Wn(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=ao,startTime:t}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),this.options.onPlay?.();const n=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=n):null!==this.holdTime?this.startTime=n-this.holdTime:this.startTime||(this.startTime=t??n),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ot.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,qn.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Yo(e){let t;return()=>(void 0===t&&(t=e()),t)}const Go=Yo(()=>void 0!==window.ScrollTimeline),Qo={};function er(e,t){const n=Yo(e);return()=>Qo[t]??n()}const tr=er(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0},"linearEasing"),nr=e=>{let[t,n,o,r]=e;return`cubic-bezier(${t}, ${n}, ${o}, ${r})`},or={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:nr([0,.65,.55,1]),circOut:nr([.55,0,1,.45]),backIn:nr([.31,.01,.66,-.59]),backOut:nr([.33,1.53,.69,.99])};function rr(e,t){return e?"function"===typeof e?tr()?lo(e,t):"ease-out":Bo(e)?nr(e):Array.isArray(e)?e.map(e=>rr(e,t)||or.easeOut):or[e]:void 0}function ir(e,t,n){let{delay:o=0,duration:r=300,repeat:i=0,repeatType:s="loop",ease:a="easeOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const d={[t]:n};l&&(d.offset=l);const u=rr(a,r);Array.isArray(u)&&(d.easing=u),ce.value&&qn.waapi++;const h={delay:o,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:"reverse"===s?"alternate":"normal"};c&&(h.pseudoElement=c);const p=e.animate(d,h);return ce.value&&p.finished.finally(()=>{qn.waapi--}),p}function sr(e){return"function"===typeof e&&"applyToOptions"in e}class ar extends Jo{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:o,pseudoElement:r,allowFlatten:i=!1,finalKeyframe:s,onComplete:a}=e;this.isPseudoElement=Boolean(r),this.allowFlatten=i,this.options=e,e.type;const l=function(e){let{type:t,...n}=e;return sr(t)&&tr()?t.applyToOptions(n):(n.duration??(n.duration=300),n.ease??(n.ease="easeOut"),n)}(e);this.animation=ir(t,n,o,l,r),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const e=Ko(o,this.options,s,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}a?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(e){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Wn(Number(e))}get time(){return Wn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Kn(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline(e){let{timeline:t,observe:n}=e;return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&Go()?(this.animation.timeline=t,se):n(this)}}const lr={anticipate:Ro,backInOut:Do,circInOut:jo};function cr(e){"string"===typeof e.ease&&e.ease in lr&&(e.ease=lr[e.ease])}class dr extends ar{constructor(e){cr(e),qo(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:o,element:r,...i}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);const s=new Zo({...i,autoplay:!1}),a=Kn(this.finishedTime??this.time);t.setWithVelocity(s.sample(a-10).value,s.sample(a).value,10),s.stop()}}const ur=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!$e.test(e)&&"0"!==e||e.startsWith("url(")));const hr=new Set(["opacity","clipPath","filter","transform"]),pr=Yo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class fr extends Jo{constructor(e){let{autoplay:t=!0,delay:n=0,type:o="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s="loop",keyframes:a,name:l,motionValue:c,element:d,...u}=e;super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=ot.now();const h={autoplay:t,delay:n,type:o,repeat:r,repeatDelay:i,repeatType:s,name:l,motionValue:c,element:d,...u},p=d?.KeyframeResolver||we;this.keyframeResolver=new p(a,(e,t,n)=>this.onKeyframesResolved(e,t,h,!n),l,c,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,n,o){this.keyframeResolver=void 0;const{name:r,type:i,velocity:s,delay:a,isHandoff:l,onUpdate:c}=n;this.resolvedAt=ot.now(),function(e,t,n,o){const r=e[0];if(null===r)return!1;if("display"===t||"visibility"===t)return!0;const i=e[e.length-1],s=ur(r,t),a=ur(i,t);return!(!s||!a)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||sr(n))&&o)}(e,r,i,s)||(!ae.instantAnimations&&a||c?.(Ko(e,n,t)),e[0]=e[e.length-1],$n(n),n.repeat=0);const d={startTime:o?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},u=!l&&function(e){const{motionValue:t,name:n,repeatDelay:o,repeatType:r,damping:i,type:s}=e,a=t?.owner?.current;if(!(a instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return pr()&&n&&hr.has(n)&&("transform"!==n||!c)&&!l&&!o&&"mirror"!==r&&0!==i&&"inertia"!==s}(d)?new dr({...d,element:d.motionValue.owner.current}):new Zo(d);u.finished.then(()=>this.notifyFinished()).catch(se),this.pendingTimeline&&(this.stopTimeline=u.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=u}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),ve=!0,be(),xe(),ve=!1),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const mr=e=>null!==e;const gr={type:"spring",stiffness:500,damping:25,restSpeed:10},yr={type:"keyframes",duration:.8},vr={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},xr=(e,t)=>{let{keyframes:n}=t;return n.length>2?yr:i.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:gr:vr};const br=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return s=>{const a=jn(o,e)||{},l=a.delay||o.delay||0;let{elapsed:c=0}=o;c-=Kn(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:e=>{t.set(e),a.onUpdate&&a.onUpdate(e)},onComplete:()=>{s(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:i?void 0:r};(function(e){let{when:t,delay:n,delayChildren:o,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:l,from:c,elapsed:d,...u}=e;return!!Object.keys(u).length})(a)||Object.assign(d,xr(e,d)),d.duration&&(d.duration=Kn(d.duration)),d.repeatDelay&&(d.repeatDelay=Kn(d.repeatDelay)),void 0!==d.from&&(d.keyframes[0]=d.from);let u=!1;if((!1===d.type||0===d.duration&&!d.repeatDelay)&&($n(d),0===d.delay&&(u=!0)),(ae.instantAnimations||ae.skipAnimations)&&(u=!0,$n(d),d.delay=0),d.allowFlatten=!a.type&&!a.ease,u&&!i&&void 0!==t.get()){const e=function(e,t,n){let{repeat:o,repeatType:r="loop"}=t;const i=e.filter(mr),s=o&&"loop"!==r&&o%2===1?0:i.length-1;return s&&void 0!==n?n:i[s]}(d.keyframes,a);if(void 0!==e)return void ue.update(()=>{d.onUpdate(e),d.onComplete()})}return a.isSync?new Zo(d):new fr(d)}};function wr(e,t){let{protectedKeys:n,needsAnimating:o}=e;const r=n.hasOwnProperty(t)&&!0!==o[t];return o[t]=!1,r}function Sr(e,t){let{delay:n=0,transitionOverride:o,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:i=e.getDefaultTransition(),transitionEnd:s,...a}=t;o&&(i=o);const l=[],c=r&&e.animationState&&e.animationState.getState()[r];for(const d in a){const t=e.getValue(d,e.latestValues[d]??null),o=a[d];if(void 0===o||c&&wr(c,d))continue;const r={delay:n,...jn(i||{},d)},s=t.get();if(void 0!==s&&!t.isAnimating&&!Array.isArray(o)&&o===s&&!r.velocity)continue;let u=!1;if(window.MotionHandoffAnimation){const t=Fn(e);if(t){const e=window.MotionHandoffAnimation(t,d,ue);null!==e&&(r.startTime=e,u=!0)}}zn(e,d),t.start(br(d,t,o,e.shouldReduceMotion&&_.has(d)?{type:!1}:r,e,u));const h=t.animation;h&&l.push(h)}return s&&Promise.all(l).then(()=>{ue.update(()=>{s&&function(e,t){const n=Ln(e,t);let{transitionEnd:o={},transition:r={},...i}=n||{};i={...i,...o};for(const s in i)_n(e,s,Vn(i[s]))}(e,s)})}),l}function kr(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const i=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),s=e.size,a=(s-1)*o;return"function"===typeof n?n(i,s):1===r?i*o:a-i*o}function Er(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=Ln(e,t,"exit"===n.type?e.presenceContext?.custom:void 0);let{transition:r=e.getDefaultTransition()||{}}=o||{};n.transitionOverride&&(r=n.transitionOverride);const i=o?()=>Promise.all(Sr(e,o,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?function(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:i=0,staggerChildren:s,staggerDirection:a}=r;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6?arguments[6]:void 0;const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(Er(l,t,{...s,delay:n+("function"===typeof o?0:o)+kr(e.variantChildren,l,o,r,i)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}(e,t,o,i,s,a,n)}:()=>Promise.resolve(),{when:a}=r;if(a){const[e,t]="beforeChildren"===a?[i,s]:[s,i];return e().then(()=>t())}return Promise.all([i(),s(n.delay)])}function Cr(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let o=0;o<n;o++)if(t[o]!==e[o])return!1;return!0}const Mr=Et.length;function Or(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&Or(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<Mr;n++){const o=Et[n],r=e.props[o];(St(r)||!1===r)&&(t[o]=r)}return t}const Tr=[...kt].reverse(),Ar=kt.length;function Nr(e){return t=>Promise.all(t.map(t=>{let{animation:n,options:o}=t;return function(e,t){let n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const r=t.map(t=>Er(e,t,o));n=Promise.all(r)}else if("string"===typeof t)n=Er(e,t,o);else{const r="function"===typeof t?Ln(e,t,o.custom):t;n=Promise.all(Sr(e,r,o))}return n.then(()=>{e.notify("AnimationComplete",t)})}(e,n,o)}))}function Pr(e){let t=Nr(e),n=Ir(),o=!0;const r=t=>(n,o)=>{const r=Ln(e,o,"exit"===t?e.presenceContext?.custom:void 0);if(r){const{transition:e,transitionEnd:t,...o}=r;n={...n,...o,...t}}return n};function i(i){const{props:s}=e,a=Or(e.parent)||{},l=[],c=new Set;let d={},u=1/0;for(let t=0;t<Ar;t++){const h=Tr[t],p=n[h],f=void 0!==s[h]?s[h]:a[h],m=St(f),g=h===i?p.isActive:null;!1===g&&(u=t);let y=f===a[h]&&f!==s[h]&&m;if(y&&o&&e.manuallyAnimateOnMount&&(y=!1),p.protectedKeys={...d},!p.isActive&&null===g||!f&&!p.prevProp||wt(f)||"boolean"===typeof f)continue;const v=Dr(p.prevProp,f);let x=v||h===i&&p.isActive&&!y&&m||t>u&&m,b=!1;const w=Array.isArray(f)?f:[f];let S=w.reduce(r(h),{});!1===g&&(S={});const{prevResolvedValues:k={}}=p,E={...k,...S},C=t=>{x=!0,c.has(t)&&(b=!0,c.delete(t)),p.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in E){const t=S[e],n=k[e];if(d.hasOwnProperty(e))continue;let o=!1;o=Bn(t)&&Bn(n)?!Cr(t,n):t!==n,o?void 0!==t&&null!==t?C(e):c.add(e):void 0!==t&&c.has(e)?C(e):p.protectedKeys[e]=!0}p.prevProp=f,p.prevResolvedValues=S,p.isActive&&(d={...d,...S}),o&&e.blockInitialAnimation&&(x=!1);const M=y&&v;x&&(!M||b)&&l.push(...w.map(t=>{const n={type:h};if("string"===typeof t&&o&&!M&&e.manuallyAnimateOnMount&&e.parent){const{parent:o}=e,r=Ln(o,t);if(o.enteringChildren&&r){const{delayChildren:t}=r.transition||{};n.delay=kr(o.enteringChildren,e,t)}}return{animation:t,options:n}}))}if(c.size){const t={};if("boolean"!==typeof s.initial){const n=Ln(e,Array.isArray(s.initial)?s.initial[0]:s.initial);n&&n.transition&&(t.transition=n.transition)}c.forEach(n=>{const o=e.getBaseTarget(n),r=e.getValue(n);r&&(r.liveStyle=!0),t[n]=o??null}),l.push({animation:t})}let h=Boolean(l.length);return!o||!1!==s.initial&&s.initial!==s.animate||e.manuallyAnimateOnMount||(h=!1),o=!1,h?t(l):Promise.resolve()}return{animateChanges:i,setActive:function(t,o){if(n[t].isActive===o)return Promise.resolve();e.variantChildren?.forEach(e=>e.animationState?.setActive(t,o)),n[t].isActive=o;const r=i(t);for(const e in n)n[e].protectedKeys={};return r},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=Ir(),o=!0}}}function Dr(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!Cr(t,e)}function Rr(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ir(){return{animate:Rr(!0),whileInView:Rr(),whileHover:Rr(),whileTap:Rr(),whileDrag:Rr(),whileFocus:Rr(),exit:Rr()}}class Lr{constructor(e){this.isMounted=!1,this.node=e}update(){}}let jr=0;const Br={animation:{Feature:class extends Lr{constructor(e){super(e),e.animationState||(e.animationState=Pr(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();wt(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}},exit:{Feature:class extends Lr{constructor(){super(...arguments),this.id=jr++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const o=this.node.animationState.setActive("exit",!e);t&&!e&&o.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}},_r={x:!1,y:!1};function Vr(){return _r.x||_r.y}function zr(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n)}const Fr=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function $r(e){return{point:{x:e.pageX,y:e.pageY}}}function Hr(e,t,n,o){return zr(e,t,(e=>t=>Fr(t)&&e(t,$r(t)))(n),o)}function Ur(e){return e.max-e.min}function Kr(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=o,e.originPoint=S(t.min,t.max,e.origin),e.scale=Ur(n)/Ur(t),e.translate=S(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function Wr(e,t,n,o){Kr(e.x,t.x,n.x,o?o.originX:void 0),Kr(e.y,t.y,n.y,o?o.originY:void 0)}function qr(e,t,n){e.min=n.min+t.min,e.max=e.min+Ur(t)}function Jr(e,t,n){e.min=t.min-n.min,e.max=e.min+Ur(t)}function Xr(e,t,n){Jr(e.x,t.x,n.x),Jr(e.y,t.y,n.y)}function Zr(e){return[e("x"),e("y")]}const Yr=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},Gr=(e,t)=>Math.abs(e-t);class Qr{constructor(e,t){let{transformPagePoint:n,contextWindow:o=window,dragSnapToOrigin:r=!1,distanceThreshold:i=3}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=ni(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=Gr(e.x,t.x),o=Gr(e.y,t.y);return Math.sqrt(n**2+o**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;const{point:o}=e,{timestamp:r}=pe;this.history.push({...o,timestamp:r});const{onStart:i,onMove:s}=this.handlers;t||(i&&i(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),s&&s(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=ei(t,this.transformPagePoint),ue.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:o,resumeAnimation:r}=this.handlers;if(this.dragSnapToOrigin&&r&&r(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const i=ni("pointercancel"===e.type?this.lastMoveEventInfo:ei(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,i),o&&o(e,i)},!Fr(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=i,this.contextWindow=o||window;const s=ei($r(e),this.transformPagePoint),{point:a}=s,{timestamp:l}=pe;this.history=[{...a,timestamp:l}];const{onSessionStart:c}=t;c&&c(e,ni(s,this.history)),this.removeListeners=Un(Hr(this.contextWindow,"pointermove",this.handlePointerMove),Hr(this.contextWindow,"pointerup",this.handlePointerUp),Hr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),he(this.updatePoint)}}function ei(e,t){return t?{point:t(e.point)}:e}function ti(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ni(e,t){let{point:n}=e;return{point:n,delta:ti(n,ri(t)),offset:ti(n,oi(t)),velocity:ii(t,.1)}}function oi(e){return e[0]}function ri(e){return e[e.length-1]}function ii(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,o=null;const r=ri(e);for(;n>=0&&(o=e[n],!(r.timestamp-o.timestamp>Kn(t)));)n--;if(!o)return{x:0,y:0};const i=Wn(r.timestamp-o.timestamp);if(0===i)return{x:0,y:0};const s={x:(r.x-o.x)/i,y:(r.y-o.y)/i};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function si(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function ai(e,t){let n=t.min-e.min,o=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,o]=[o,n]),{min:n,max:o}}const li=.35;function ci(e,t,n){return{min:di(e,t),max:di(e,n)}}function di(e,t){return"number"===typeof e?e:e[t]||0}const ui=new WeakMap;class hi{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e){let{snapToCursor:t=!1,distanceThreshold:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:o}=this.visualElement;if(o&&!1===o.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new Qr(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor($r(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:o,onDragStart:r}=this.getProps();if(n&&!o&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(i=n)||"y"===i?_r[i]?null:(_r[i]=!0,()=>{_r[i]=!1}):_r.x||_r.y?null:(_r.x=_r.y=!0,()=>{_r.x=_r.y=!1}),!this.openDragLock))return;var i;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Zr(e=>{let t=this.getAxisMotionValue(e).get()||0;if(K.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const o=n.layout.layoutBox[e];if(o){t=Ur(o)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),r&&ue.postRender(()=>r(e,t)),zn(this.visualElement,"transform");const{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:n,dragDirectionLock:o,onDirectionLock:r,onDrag:i}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:s}=t;if(o&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(s),void(null!==this.currentDirection&&r&&r(this.currentDirection));this.updateAxis("x",t.point,s),this.updateAxis("y",t.point,s),this.visualElement.render(),i&&i(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>Zr(e=>"paused"===this.getAnimationState(e)&&this.getAxisMotionValue(e).animation?.play())},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,distanceThreshold:n,contextWindow:Yr(this.visualElement)})}stop(e,t){const n=e||this.latestPointerEvent,o=t||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!o||!n)return;const{velocity:i}=o;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&ue.postRender(()=>s(n,o))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:o}=this.getProps();if(!n||!pi(e,o,this.currentDirection))return;const r=this.getAxisMotionValue(e);let i=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(i=function(e,t,n){let{min:o,max:r}=t;return void 0!==o&&e<o?e=n?S(o,e,n.min):Math.max(e,o):void 0!==r&&e>r&&(e=n?S(r,e,n.max):Math.min(e,r)),e}(i,this.constraints[e],this.elastic[e])),r.set(i)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,o=this.constraints;e&&Cn(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!e||!n)&&function(e,t){let{top:n,left:o,bottom:r,right:i}=t;return{x:si(e.x,o,i),y:si(e.y,n,r)}}(n.layoutBox,e),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:li;return!1===e?e=0:!0===e&&(e=li),{x:ci(e,"left","right"),y:ci(e,"top","bottom")}}(t),o!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Zr(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(n.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Cn(e))return!1;const n=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const r=function(e,t,n){const o=B(e,n),{scroll:r}=t;return r&&(I(o.x,r.offset.x),I(o.y,r.offset.y)),o}(n,o.root,this.visualElement.getTransformPagePoint());let i=function(e,t){return{x:ai(e.x,t.x),y:ai(e.y,t.y)}}(o.layout.layoutBox,r);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(i));this.hasMutatedConstraints=!!e,e&&(i=w(e))}return i}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:o,dragTransition:r,dragSnapToOrigin:i,onDragTransitionEnd:s}=this.getProps(),a=this.constraints||{},l=Zr(s=>{if(!pi(s,t,this.currentDirection))return;let l=a&&a[s]||{};i&&(l={min:0,max:0});const c=o?200:1e6,d=o?40:1e7,u={type:"inertia",velocity:n?e[s]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...r,...l};return this.startAxisValueAnimation(s,u)});return Promise.all(l).then(s)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return zn(this.visualElement,e),n.start(br(e,n,0,t,this.visualElement,!1))}stopAnimation(){Zr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Zr(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),o=n[t];return o||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Zr(t=>{const{drag:n}=this.getProps();if(!pi(t,n,this.currentDirection))return;const{projection:o}=this.visualElement,r=this.getAxisMotionValue(t);if(o&&o.layout){const{min:n,max:i}=o.layout.layoutBox[t];r.set(e[t]-S(n,i,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Cn(t)||!n||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Zr(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();o[e]=function(e,t){let n=.5;const o=Ur(e),r=Ur(t);return r>o?n=zo(t.min,t.max-o,e.min):o>r&&(n=zo(e.min,e.max-r,t.min)),V(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Zr(t=>{if(!pi(t,e,null))return;const n=this.getAxisMotionValue(t),{min:r,max:i}=this.constraints[t];n.set(S(r,i,o[t]))})}addListeners(){if(!this.visualElement.current)return;ui.set(this.visualElement,this);const e=Hr(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();Cn(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,o=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),ue.read(t);const r=zr(window,"resize",()=>this.scalePositionWithinConstraints()),i=n.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(Zr(e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{r(),e(),o(),i&&i()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:o=!1,dragConstraints:r=!1,dragElastic:i=li,dragMomentum:s=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:o,dragConstraints:r,dragElastic:i,dragMomentum:s}}}function pi(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const fi=e=>(t,n)=>{e&&ue.postRender(()=>e(t,n))};var mi=n(8917);const gi={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function yi(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const vi={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!W.test(e))return e;e=parseFloat(e)}return`${yi(e,t.target.x)}% ${yi(e,t.target.y)}%`}},xi={correct:(e,t)=>{let{treeScale:n,projectionDelta:o}=t;const r=e,i=$e.parse(e);if(i.length>5)return r;const s=$e.createTransformer(e),a="number"!==typeof i[0]?1:0,l=o.x.scale*n.x,c=o.y.scale*n.y;i[0+a]/=l,i[1+a]/=c;const d=S(l,c,.5);return"number"===typeof i[2+a]&&(i[2+a]/=d),"number"===typeof i[3+a]&&(i[3+a]/=d),s(i)}};let bi=!1;class wi extends o.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:o}=this.props,{projection:r}=e;!function(e){for(const t in e)Bt[t]=e[t],y(t)&&(Bt[t].isCSSVariable=!0)}(ki),r&&(t.group&&t.group.add(r),n&&n.register&&o&&n.register(r),bi&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),gi.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:o,isPresent:r}=this.props,{projection:i}=n;return i?(i.isPresent=r,bi=!0,o||e.layoutDependency!==t||void 0===t||e.isPresent!==r?i.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?i.promote():i.relegate()||ue.postRender(()=>{const e=i.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ht.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:o}=e;bi=!0,o&&(o.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(o),n&&n.deregister&&n.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Si(e){const[t,n]=(0,mi.xQ)(),r=(0,o.useContext)(Qt.L);return(0,Gt.jsx)(wi,{...e,layoutGroup:r,switchLayoutGroup:(0,o.useContext)(Tn),isPresent:t,safeToRemove:n})}const ki={borderRadius:{...vi,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:vi,borderTopRightRadius:vi,borderBottomLeftRadius:vi,borderBottomRightRadius:vi,boxShadow:xi};var Ei=n(8328);function Ci(e){return(0,Ei.G)(e)&&"ownerSVGElement"in e}const Mi=(e,t)=>e.depth-t.depth;class Oi{constructor(){this.children=[],this.isDirty=!1}add(e){rt(this.children,e),this.isDirty=!0}remove(e){it(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Mi),this.isDirty=!1,this.children.forEach(e)}}function Ti(e,t){const n=ot.now(),o=r=>{let{timestamp:i}=r;const s=i-n;s>=t&&(he(o),e(s-t))};return ue.setup(o,!0),()=>he(o)}const Ai=["TopLeft","TopRight","BottomLeft","BottomRight"],Ni=Ai.length,Pi=e=>"string"===typeof e?parseFloat(e):e,Di=e=>"number"===typeof e||W.test(e);function Ri(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const Ii=ji(0,.5,Lo),Li=ji(.5,.95,se);function ji(e,t,n){return o=>o<e?0:o>t?1:n(zo(e,t,o))}function Bi(e,t){e.min=t.min,e.max=t.max}function _i(e,t){Bi(e.x,t.x),Bi(e.y,t.y)}function Vi(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function zi(e,t,n,o,r){return e=T(e-=t,1/n,o),void 0!==r&&(e=T(e,1/r,o)),e}function Fi(e,t,n,o,r){let[i,s,a]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;K.test(t)&&(t=parseFloat(t),t=S(s.min,s.max,t/100)-s.min);if("number"!==typeof t)return;let a=S(i.min,i.max,o);e===i&&(a-=t),e.min=zi(e.min,t,n,a,r),e.max=zi(e.max,t,n,a,r)}(e,t[i],t[s],t[a],t.scale,o,r)}const $i=["x","scaleX","originX"],Hi=["y","scaleY","originY"];function Ui(e,t,n,o){Fi(e.x,t,$i,n?n.x:void 0,o?o.x:void 0),Fi(e.y,t,Hi,n?n.y:void 0,o?o.y:void 0)}function Ki(e){return 0===e.translate&&1===e.scale}function Wi(e){return Ki(e.x)&&Ki(e.y)}function qi(e,t){return e.min===t.min&&e.max===t.max}function Ji(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Xi(e,t){return Ji(e.x,t.x)&&Ji(e.y,t.y)}function Zi(e){return Ur(e.x)/Ur(e.y)}function Yi(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Gi{constructor(){this.members=[]}add(e){rt(this.members,e),e.scheduleRender()}remove(e){if(it(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let o=t;o>=0;o--){const e=this.members[o];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;!1===o&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Qi={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},es=["","X","Y","Z"];let ts=0;function ns(e,t,n,o){const{latestValues:r}=t;r[e]&&(n[e]=r[e],t.setStaticValue(e,0),o&&(o[e]=0))}function os(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Fn(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:o}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",ue,!(t||o))}const{parent:o}=e;o&&!o.hasCheckedOptimisedAppear&&os(o)}function rs(e){let{attachResizeListener:t,defaultParent:n,measureScroll:o,checkIsScrollRoot:r,resetTransform:i}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n?.();this.id=ts++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ce.value&&(Qi.nodes=Qi.calculatedTargetDeltas=Qi.calculatedProjections=0),this.nodes.forEach(as),this.nodes.forEach(fs),this.nodes.forEach(ms),this.nodes.forEach(ls),ce.addProjectionMetrics&&ce.addProjectionMetrics(Qi)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new Oi)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new st),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];t&&t.notify(...o)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){if(this.instance)return;var n;this.isSVG=Ci(e)&&!(Ci(n=e)&&"svg"===n.tagName),this.instance=e;const{layoutId:o,layout:r,visualElement:i}=this.options;if(i&&!i.current&&i.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(r||o)&&(this.isLayoutDirty=!0),t){let n,o=0;const r=()=>this.root.updateBlockedByResize=!1;ue.read(()=>{o=window.innerWidth}),t(e,()=>{const e=window.innerWidth;e!==o&&(o=e,this.root.updateBlockedByResize=!0,n&&n(),n=Ti(r,250),gi.hasAnimatedSinceResize&&(gi.hasAnimatedSinceResize=!1,this.nodes.forEach(ps)))})}o&&this.root.registerSharedNode(o,this),!1!==this.options.animate&&i&&(o||r)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n,hasRelativeLayoutChanged:o,layout:r}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const s=this.options.transition||i.getDefaultTransition()||ws,{onLayoutAnimationStart:a,onLayoutAnimationComplete:l}=i.getProps(),c=!this.targetLayout||!Xi(this.targetLayout,r),d=!n&&o;if(this.options.layoutRoot||this.resumeFrom||d||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const e={...jn(s,"layout"),onPlay:a,onComplete:l};(i.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e),this.setAnimationOrigin(t,d)}else n||ps(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),he(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(gs),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&os(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let r=0;r<this.path.length;r++){const e=this.path[r];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const o=this.getTransformTemplate();this.prevTransformTemplateValue=o?o(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(ds);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(us);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(hs),this.nodes.forEach(is),this.nodes.forEach(ss)):this.nodes.forEach(us),this.clearAllSnapshots();const e=ot.now();pe.delta=V(0,1e3/60,e-pe.timestamp),pe.timestamp=e,pe.isProcessing=!0,fe.update.process(pe),fe.preRender.process(pe),fe.render.process(pe),pe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ht.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(cs),this.sharedNodes.forEach(ys)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ue.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ue.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||Ur(this.snapshot.measuredBox.x)||Ur(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:o(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!i)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!Wi(this.projectionDelta),n=this.getTransformTemplate(),o=n?n(this.latestValues,""):void 0,r=o!==this.prevTransformTemplateValue;e&&this.instance&&(t||C(this.latestValues)||r)&&(i(this.instance,o),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var o;return e&&(n=this.removeTransform(n)),Es((o=n).x),Es(o.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const t=e.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Ms))){const{scroll:e}=this.root;e&&(I(t.x,e.offset.x),I(t.y,e.offset.y))}return t}removeElementScroll(e){const t={x:{min:0,max:0},y:{min:0,max:0}};if(_i(t,e),this.scroll?.wasRoot)return t;for(let n=0;n<this.path.length;n++){const o=this.path[n],{scroll:r,options:i}=o;o!==this.root&&r&&i.layoutScroll&&(r.wasRoot&&_i(t,e),I(t.x,r.offset.x),I(t.y,r.offset.y))}return t}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};_i(n,e);for(let o=0;o<this.path.length;o++){const e=this.path[o];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&j(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),C(e.latestValues)&&j(n,e.latestValues)}return C(this.latestValues)&&j(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};_i(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!C(e.latestValues))continue;E(e.latestValues)&&e.updateSnapshot();const o=gt();_i(o,e.measurePageBox()),Ui(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,o)}return C(this.latestValues)&&Ui(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==pe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=t.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=t.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=t.isSharedProjectionDirty);const n=Boolean(this.resumingFrom)||this!==t;if(!(e||n&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:o,layoutId:r}=this.options;if(this.layout&&(o||r)){if(this.resolvedRelativeTargetAt=pe.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Xr(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),_i(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var i,s,a;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i=this.target,s=this.relativeTarget,a=this.relativeParent.target,qr(i.x,s.x,a.x),qr(i.y,s.y,a.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):_i(this.target,this.layout.layoutBox),P(this.target,this.targetDelta)):_i(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Xr(this.relativeTargetOrigin,this.target,e.target),_i(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ce.value&&Qi.calculatedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!E(this.parent.latestValues)&&!M(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const e=this.getLead(),t=Boolean(this.resumingFrom)||this!==e;let n=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(n=!1),t&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===pe.timestamp&&(n=!1),n)return;const{layout:o,layoutId:r}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!o&&!r)return;_i(this.layoutCorrected,this.layout.layoutBox);const i=this.treeScale.x,s=this.treeScale.y;!function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=n.length;if(!r)return;let i,s;t.x=t.y=1;for(let a=0;a<r;a++){i=n[a],s=i.projectionDelta;const{visualElement:r}=i.options;r&&r.props.style&&"contents"===r.props.style.display||(o&&i.options.layoutScroll&&i.scroll&&i!==i.root&&j(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,P(e,s)),o&&C(i.latestValues)&&j(e,i.latestValues))}t.x<R&&t.x>D&&(t.x=1),t.y<R&&t.y>D&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,t),!e.layout||e.target||1===this.treeScale.x&&1===this.treeScale.y||(e.target=e.layout.layoutBox,e.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:a}=e;a?(this.projectionDelta&&this.prevProjectionDelta?(Vi(this.prevProjectionDelta.x,this.projectionDelta.x),Vi(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),Wr(this.projectionDelta,this.layoutCorrected,a,this.latestValues),this.treeScale.x===i&&this.treeScale.y===s&&Yi(this.projectionDelta.x,this.prevProjectionDelta.x)&&Yi(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",a)),ce.value&&Qi.calculatedProjections++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.visualElement?.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,o=n?n.latestValues:{},r={...this.latestValues},i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const s={x:{min:0,max:0},y:{min:0,max:0}},a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,d=Boolean(a&&!c&&!0===this.options.crossfade&&!this.path.some(bs));let u;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,h,p,f,m,g;vs(i.x,e.x,n),vs(i.y,e.y,n),this.setTargetDelta(i),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Xr(s,this.layout.layoutBox,this.relativeParent.layout.layoutBox),p=this.relativeTarget,f=this.relativeTargetOrigin,m=s,g=n,xs(p.x,f.x,m.x,g),xs(p.y,f.y,m.y,g),u&&(l=this.relativeTarget,h=u,qi(l.x,h.x)&&qi(l.y,h.y))&&(this.isProjectionDirty=!1),u||(u={x:{min:0,max:0},y:{min:0,max:0}}),_i(u,this.relativeTarget)),a&&(this.animationValues=r,function(e,t,n,o,r,i){r?(e.opacity=S(0,n.opacity??1,Ii(o)),e.opacityExit=S(t.opacity??1,0,Li(o))):i&&(e.opacity=S(t.opacity??1,n.opacity??1,o));for(let s=0;s<Ni;s++){const r=`border${Ai[s]}Radius`;let i=Ri(t,r),a=Ri(n,r);void 0===i&&void 0===a||(i||(i=0),a||(a=0),0===i||0===a||Di(i)===Di(a)?(e[r]=Math.max(S(Pi(i),Pi(a),o),0),(K.test(a)||K.test(i))&&(e[r]+="%")):e[r]=a)}(t.rotate||n.rotate)&&(e.rotate=S(t.rotate||0,n.rotate||0,o))}(r,o,this.latestValues,n,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(he(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ue.update(()=>{gi.hasAnimatedSinceResize=!0,qn.layout++,this.motionValue||(this.motionValue=dt(0)),this.currentAnimation=function(e,t,n){const o=et(e)?e:dt(e);return o.start(br("",o,t,n)),o.animation}(this.motionValue,[0,1e3],{...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{qn.layout--},onComplete:()=>{qn.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:o,latestValues:r}=e;if(t&&n&&o){if(this!==e&&this.layout&&o&&Cs(this.options.animationType,this.layout.layoutBox,o.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=Ur(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const o=Ur(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+o}_i(t,n),j(t,r),Wr(this.projectionDeltaWithTransform,this.layoutCorrected,t,r)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Gi);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){const{layoutId:e}=this.options;return e&&this.getStack()?.lead||this}getPrevLead(){const{layoutId:e}=this.options;return e?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=this.getStack();o&&o.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const o={};n.z&&ns("z",e,o,this.animationValues);for(let r=0;r<es.length;r++)ns(`rotate${es[r]}`,e,o,this.animationValues),ns(`skew${es[r]}`,e,o,this.animationValues);e.render();for(const r in o)e.setStaticValue(r,o[r]),this.animationValues&&(this.animationValues[r]=o[r]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=xn(t?.pointerEvents)||"",void(e.transform=n?n(this.latestValues,""):"none");const o=this.getLead();if(!this.projectionDelta||!this.layout||!o.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=xn(t?.pointerEvents)||""),void(this.hasProjected&&!C(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1));e.visibility="";const r=o.animationValues||o.latestValues;this.applyTransformsToTarget();let i=function(e,t,n){let o="";const r=e.x.translate/t.x,i=e.y.translate/t.y,s=n?.z||0;if((r||i||s)&&(o=`translate3d(${r}px, ${i}px, ${s}px) `),1===t.x&&1===t.y||(o+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:e,rotate:t,rotateX:r,rotateY:i,skewX:s,skewY:a}=n;e&&(o=`perspective(${e}px) ${o}`),t&&(o+=`rotate(${t}deg) `),r&&(o+=`rotateX(${r}deg) `),i&&(o+=`rotateY(${i}deg) `),s&&(o+=`skewX(${s}deg) `),a&&(o+=`skewY(${a}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return 1===a&&1===l||(o+=`scale(${a}, ${l})`),o||"none"}(this.projectionDeltaWithTransform,this.treeScale,r);n&&(i=n(r,i)),e.transform=i;const{x:s,y:a}=this.projectionDelta;e.transformOrigin=`${100*s.origin}% ${100*a.origin}% 0`,o.animationValues?e.opacity=o===this?r.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:r.opacityExit:e.opacity=o===this?void 0!==r.opacity?r.opacity:"":void 0!==r.opacityExit?r.opacityExit:0;for(const l in Bt){if(void 0===r[l])continue;const{correct:t,applyTo:n,isCSSVariable:s}=Bt[l],a="none"===i?r[l]:t(r[l],o);if(n){const t=n.length;for(let o=0;o<t;o++)e[n[o]]=a}else s?this.options.visualElement.renderState.vars[l]=a:e[l]=a}this.options.layoutId&&(e.pointerEvents=o===this?xn(t?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>e.currentAnimation?.stop()),this.root.nodes.forEach(ds),this.root.sharedNodes.clear()}}}function is(e){e.updateLayout()}function ss(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:o}=e.layout,{animationType:r}=e.options,i=t.source!==e.layout.source;"size"===r?Zr(e=>{const o=i?t.measuredBox[e]:t.layoutBox[e],r=Ur(o);o.min=n[e].min,o.max=o.min+r}):Cs(r,t.layoutBox,n)&&Zr(o=>{const r=i?t.measuredBox[o]:t.layoutBox[o],s=Ur(n[o]);r.max=r.min+s,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[o].max=e.relativeTarget[o].min+s)});const s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Wr(s,n,t.layoutBox);const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};i?Wr(a,e.applyTransform(o,!0),t.measuredBox):Wr(a,n,t.layoutBox);const l=!Wi(s);let c=!1;if(!e.resumeFrom){const o=e.getClosestProjectingParent();if(o&&!o.resumeFrom){const{snapshot:r,layout:i}=o;if(r&&i){const s={x:{min:0,max:0},y:{min:0,max:0}};Xr(s,t.layoutBox,r.layoutBox);const a={x:{min:0,max:0},y:{min:0,max:0}};Xr(a,n,i.layoutBox),Xi(s,a)||(c=!0),o.options.layoutRoot&&(e.relativeTarget=a,e.relativeTargetOrigin=s,e.relativeParent=o)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:a,layoutDelta:s,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function as(e){ce.value&&Qi.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function ls(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function cs(e){e.clearSnapshot()}function ds(e){e.clearMeasurements()}function us(e){e.isLayoutDirty=!1}function hs(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function ps(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function fs(e){e.resolveTargetDelta()}function ms(e){e.calcProjection()}function gs(e){e.resetSkewAndRotation()}function ys(e){e.removeLeadSnapshot()}function vs(e,t,n){e.translate=S(t.translate,0,n),e.scale=S(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function xs(e,t,n,o){e.min=S(t.min,n.min,o),e.max=S(t.max,n.max,o)}function bs(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const ws={duration:.45,ease:[.4,0,.1,1]},Ss=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),ks=Ss("applewebkit/")&&!Ss("chrome/")?Math.round:se;function Es(e){e.min=ks(e.min),e.max=ks(e.max)}function Cs(e,t,n){return"position"===e||"preserve-aspect"===e&&(o=Zi(t),r=Zi(n),i=.2,!(Math.abs(o-r)<=i));var o,r,i}function Ms(e){return e!==e.root&&e.scroll?.wasRoot}const Os=rs({attachResizeListener:(e,t)=>zr(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ts={current:void 0},As=rs({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Ts.current){const e=new Os({});e.mount(window),e.setOptions({layoutScroll:!0}),Ts.current=e}return Ts.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),Ns={pan:{Feature:class extends Lr{constructor(){super(...arguments),this.removePointerDownListener=se}onPointerDown(e){this.session=new Qr(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Yr(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:o}=this.node.getProps();return{onSessionStart:fi(e),onStart:fi(t),onMove:n,onEnd:(e,t)=>{delete this.session,o&&ue.postRender(()=>o(e,t))}}}mount(){this.removePointerDownListener=Hr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Lr{constructor(e){super(e),this.removeGroupControls=se,this.removeListeners=se,this.controls=new hi(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||se}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:As,MeasureLayout:Si}};function Ps(e,t){const n=function(e,t,n){if(e instanceof EventTarget)return[e];if("string"===typeof e){let o=document;t&&(o=t.current);const r=n?.[e]??o.querySelectorAll(e);return r?Array.from(r):[]}return Array.from(e)}(e),o=new AbortController;return[n,{passive:!0,...t,signal:o.signal},()=>o.abort()]}function Ds(e){return!("touch"===e.pointerType||Vr())}function Rs(e,t,n){const{props:o}=e;e.animationState&&o.whileHover&&e.animationState.setActive("whileHover","Start"===n);const r=o["onHover"+n];r&&ue.postRender(()=>r(t,$r(t)))}var Is=n(8676);const Ls=(e,t)=>!!t&&(e===t||Ls(e,t.parentElement)),js=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const Bs=new WeakSet;function _s(e){return t=>{"Enter"===t.key&&e(t)}}function Vs(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function zs(e){return Fr(e)&&!Vr()}function Fs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[o,r,i]=Ps(e,n),s=e=>{const o=e.currentTarget;if(!zs(e))return;Bs.add(o);const i=t(o,e),s=(e,t)=>{window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",l),Bs.has(o)&&Bs.delete(o),zs(e)&&"function"===typeof i&&i(e,{success:t})},a=e=>{s(e,o===window||o===document||n.useGlobalTarget||Ls(o,e.target))},l=e=>{s(e,!1)};window.addEventListener("pointerup",a,r),window.addEventListener("pointercancel",l,r)};return o.forEach(e=>{var t;(n.useGlobalTarget?window:e).addEventListener("pointerdown",s,r),(0,Is.s)(e)&&(e.addEventListener("focus",e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const o=_s(()=>{if(Bs.has(n))return;Vs(n,"down");const e=_s(()=>{Vs(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>Vs(n,"cancel"),t)});n.addEventListener("keydown",o,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",o),t)})(e,r)),t=e,js.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),i}function $s(e,t,n){const{props:o}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&o.whileTap&&e.animationState.setActive("whileTap","Start"===n);const r=o["onTap"+("End"===n?"":n)];r&&ue.postRender(()=>r(t,$r(t)))}const Hs=new WeakMap,Us=new WeakMap,Ks=e=>{const t=Hs.get(e.target);t&&t(e)},Ws=e=>{e.forEach(Ks)};function qs(e,t,n){const o=function(e){let{root:t,...n}=e;const o=t||document;Us.has(o)||Us.set(o,{});const r=Us.get(o),i=JSON.stringify(n);return r[i]||(r[i]=new IntersectionObserver(Ws,{root:t,...n})),r[i]}(t);return Hs.set(e,n),o.observe(e),()=>{Hs.delete(e),o.unobserve(e)}}const Js={some:0,all:1};const Xs=In({...Br,...{inView:{Feature:class extends Lr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:o="some",once:r}=e,i={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof o?o:Js[o]};return qs(this.node.current,i,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,r&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:o}=this.node.getProps(),i=t?n:o;i&&i(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Lr{mount(){const{current:e}=this.node;e&&(this.unmount=Fs(e,(e,t)=>($s(this.node,t,"Start"),(e,t)=>{let{success:n}=t;return $s(this.node,e,n?"End":"Cancel")}),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends Lr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Un(zr(this.node.current,"focus",()=>this.onFocus()),zr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends Lr{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[o,r,i]=Ps(e,n),s=e=>{if(!Ds(e))return;const{target:n}=e,o=t(n,e);if("function"!==typeof o||!n)return;const i=e=>{Ds(e)&&(o(e),n.removeEventListener("pointerleave",i))};n.addEventListener("pointerleave",i,r)};return o.forEach(e=>{e.addEventListener("pointerenter",s,r)}),i}(e,(e,t)=>(Rs(this.node,t,"Start"),e=>Rs(this.node,e,"End"))))}unmount(){}}}},...Ns,...{layout:{ProjectionNode:As,MeasureLayout:Si}}},Yt)},6467:(e,t,n)=>{var o=n(8208);e.exports=function(e){var t=function(e){var t={},n=0;function r(i){var s=n;o.forEach(e.children(i),r),t[i]={low:s,lim:n++}}return o.forEach(e.children(),r),t}(e);o.forEach(e.graph().dummyChains,function(n){for(var o=e.node(n),r=o.edgeObj,i=function(e,t,n,o){var r,i,s=[],a=[],l=Math.min(t[n].low,t[o].low),c=Math.max(t[n].lim,t[o].lim);r=n;do{r=e.parent(r),s.push(r)}while(r&&(t[r].low>l||c>t[r].lim));i=r,r=o;for(;(r=e.parent(r))!==i;)a.push(r);return{path:s.concat(a.reverse()),lca:i}}(e,t,r.v,r.w),s=i.path,a=i.lca,l=0,c=s[l],d=!0;n!==r.w;){if(o=e.node(n),d){for(;(c=s[l])!==a&&e.node(c).maxRank<o.rank;)l++;c===a&&(d=!1)}if(!d){for(;l<s.length-1&&e.node(c=s[l+1]).minRank<=o.rank;)l++;c=s[l]}e.setParent(n,c),n=e.successors(n)[0]}})}},6487:e=>{e.exports=function(e,t,n,o,r){return r(e,function(e,r,i){n=o?(o=!1,e):t(n,e,r,i)}),n}},6516:(e,t,n)=>{var o=n(6571);e.exports=function(e,t){return function(n,r){if(null==n)return n;if(!o(n))return e(n,r);for(var i=n.length,s=t?i:-1,a=Object(n);(t?s--:++s<i)&&!1!==r(a[s],s,a););return n}}},6532:(e,t,n)=>{var o=n(5538),r=n(6989);e.exports=function(e,t,n,i){var s=n.length,a=s,l=!i;if(null==e)return!a;for(e=Object(e);s--;){var c=n[s];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++s<a;){var d=(c=n[s])[0],u=e[d],h=c[1];if(l&&c[2]){if(void 0===u&&!(d in e))return!1}else{var p=new o;if(i)var f=i(u,h,d,e,t,p);if(!(void 0===f?r(h,u,3,i,p):f))return!1}}return!0}},6552:(e,t,n)=>{var o=n(7105),r="object"==typeof self&&self&&self.Object===Object&&self,i=o||r||Function("return this")();e.exports=i},6571:(e,t,n)=>{var o=n(1629),r=n(6173);e.exports=function(e){return null!=e&&r(e.length)&&!o(e)}},6578:e=>{var t=Date.now;e.exports=function(e){var n=0,o=0;return function(){var r=t(),i=16-(r-o);if(o=r,i>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},6599:(e,t,n)=>{var o=n(9841);e.exports=function(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e===e,s=o(e),a=void 0!==t,l=null===t,c=t===t,d=o(t);if(!l&&!d&&!s&&e>t||s&&a&&c&&!l&&!d||r&&a&&c||!n&&c||!i)return 1;if(!r&&!s&&!d&&e<t||d&&n&&i&&!r&&!s||l&&n&&i||!a&&i||!c)return-1}return 0}},6600:(e,t,n)=>{var o=n(7937)(n(6552),"WeakMap");e.exports=o},6604:(e,t,n)=>{var o=n(3331)();e.exports=o},6614:(e,t,n)=>{var o=n(8420),r=n(1775);e.exports=function(e,t,n,i){var s=!n;n||(n={});for(var a=-1,l=t.length;++a<l;){var c=t[a],d=i?i(n[c],e[c],c,n,e):void 0;void 0===d&&(d=e[c]),s?r(n,c,d):o(n,c,d)}return n}},6675:(e,t,n)=>{"use strict";var o=n(8208),r=n(5673),i=n(2786),s=n(2460),a=n(5641).normalizeRanks,l=n(6467),c=n(5641).removeEmptyRanks,d=n(5146),u=n(5972),h=n(1981),p=n(550),f=n(1277),m=n(5641),g=n(7938).Graph;e.exports=function(e,t){var n=t&&t.debugTiming?m.time:m.notime;n("layout",function(){var t=n("  buildLayoutGraph",function(){return function(e){var t=new g({multigraph:!0,compound:!0}),n=M(e.graph());return t.setGraph(o.merge({},v,C(n,y),o.pick(n,x))),o.forEach(e.nodes(),function(n){var r=M(e.node(n));t.setNode(n,o.defaults(C(r,b),w)),t.setParent(n,e.parent(n))}),o.forEach(e.edges(),function(n){var r=M(e.edge(n));t.setEdge(n,o.merge({},k,C(r,S),o.pick(r,E)))}),t}(e)});n("  runLayout",function(){!function(e,t){t("    makeSpaceForEdgeLabels",function(){!function(e){var t=e.graph();t.ranksep/=2,o.forEach(e.edges(),function(n){var o=e.edge(n);o.minlen*=2,"c"!==o.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?o.width+=o.labeloffset:o.height+=o.labeloffset)})}(e)}),t("    removeSelfEdges",function(){!function(e){o.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}(e)}),t("    acyclic",function(){r.run(e)}),t("    nestingGraph.run",function(){d.run(e)}),t("    rank",function(){s(m.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){!function(e){o.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var o=e.node(t.v),r={rank:(e.node(t.w).rank-o.rank)/2+o.rank,e:t};m.addDummyNode(e,"edge-proxy",r,"_ep")}})}(e)}),t("    removeEmptyRanks",function(){c(e)}),t("    nestingGraph.cleanup",function(){d.cleanup(e)}),t("    normalizeRanks",function(){a(e)}),t("    assignRankMinMax",function(){!function(e){var t=0;o.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=o.max(t,r.maxRank))}),e.graph().maxRank=t}(e)}),t("    removeEdgeLabelProxies",function(){!function(e){o.forEach(e.nodes(),function(t){var n=e.node(t);"edge-proxy"===n.dummy&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}(e)}),t("    normalize.run",function(){i.run(e)}),t("    parentDummyChains",function(){l(e)}),t("    addBorderSegments",function(){u(e)}),t("    order",function(){p(e)}),t("    insertSelfEdges",function(){!function(e){var t=m.buildLayerMatrix(e);o.forEach(t,function(t){var n=0;o.forEach(t,function(t,r){var i=e.node(t);i.order=r+n,o.forEach(i.selfEdges,function(t){m.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:i.rank,order:r+ ++n,e:t.e,label:t.label},"_se")}),delete i.selfEdges})})}(e)}),t("    adjustCoordinateSystem",function(){h.adjust(e)}),t("    position",function(){f(e)}),t("    positionSelfEdges",function(){!function(e){o.forEach(e.nodes(),function(t){var n=e.node(t);if("selfedge"===n.dummy){var o=e.node(n.e.v),r=o.x+o.width/2,i=o.y,s=n.x-r,a=o.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*s/3,y:i-a},{x:r+5*s/6,y:i-a},{x:r+s,y:i},{x:r+5*s/6,y:i+a},{x:r+2*s/3,y:i+a}],n.label.x=n.x,n.label.y=n.y}})}(e)}),t("    removeBorderNodes",function(){!function(e){o.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),i=e.node(n.borderBottom),s=e.node(o.last(n.borderLeft)),a=e.node(o.last(n.borderRight));n.width=Math.abs(a.x-s.x),n.height=Math.abs(i.y-r.y),n.x=s.x+n.width/2,n.y=r.y+n.height/2}}),o.forEach(e.nodes(),function(t){"border"===e.node(t).dummy&&e.removeNode(t)})}(e)}),t("    normalize.undo",function(){i.undo(e)}),t("    fixupEdgeLabelCoords",function(){!function(e){o.forEach(e.edges(),function(t){var n=e.edge(t);if(o.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}(e)}),t("    undoCoordinateSystem",function(){h.undo(e)}),t("    translateGraph",function(){!function(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,s=e.graph(),a=s.marginx||0,l=s.marginy||0;function c(e){var o=e.x,s=e.y,a=e.width,l=e.height;t=Math.min(t,o-a/2),n=Math.max(n,o+a/2),r=Math.min(r,s-l/2),i=Math.max(i,s+l/2)}o.forEach(e.nodes(),function(t){c(e.node(t))}),o.forEach(e.edges(),function(t){var n=e.edge(t);o.has(n,"x")&&c(n)}),t-=a,r-=l,o.forEach(e.nodes(),function(n){var o=e.node(n);o.x-=t,o.y-=r}),o.forEach(e.edges(),function(n){var i=e.edge(n);o.forEach(i.points,function(e){e.x-=t,e.y-=r}),o.has(i,"x")&&(i.x-=t),o.has(i,"y")&&(i.y-=r)}),s.width=n-t+a,s.height=i-r+l}(e)}),t("    assignNodeIntersects",function(){!function(e){o.forEach(e.edges(),function(t){var n,o,r=e.edge(t),i=e.node(t.v),s=e.node(t.w);r.points?(n=r.points[0],o=r.points[r.points.length-1]):(r.points=[],n=s,o=i),r.points.unshift(m.intersectRect(i,n)),r.points.push(m.intersectRect(s,o))})}(e)}),t("    reversePoints",function(){!function(e){o.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}(e)}),t("    acyclic.undo",function(){r.undo(e)})}(t,n)}),n("  updateInputGraph",function(){!function(e,t){o.forEach(e.nodes(),function(n){var o=e.node(n),r=t.node(n);o&&(o.x=r.x,o.y=r.y,t.children(n).length&&(o.width=r.width,o.height=r.height))}),o.forEach(e.edges(),function(n){var r=e.edge(n),i=t.edge(n);r.points=i.points,o.has(i,"x")&&(r.x=i.x,r.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}(e,t)})})};var y=["nodesep","edgesep","ranksep","marginx","marginy"],v={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},x=["acyclicer","ranker","rankdir","align"],b=["width","height"],w={width:0,height:0},S=["minlen","weight","width","height","labeloffset"],k={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},E=["labelpos"];function C(e,t){return o.mapValues(o.pick(e,t),Number)}function M(e){var t={};return o.forEach(e,function(e,n){t[n.toLowerCase()]=e}),t}},6684:e=>{function t(){var e={};e._next=e._prev=e,this._sentinel=e}function n(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function o(e,t){if("_next"!==e&&"_prev"!==e)return t}e.exports=t,t.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return n(t),t},t.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&n(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},t.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,o)),n=n._prev;return"["+e.join(", ")+"]"}},6686:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},6704:e=>{e.exports=function(e){return this.__data__.has(e)}},6727:(e,t,n)=>{var o=n(6983),r=n(8673);e.exports=function(e){return null==e?[]:o(e,r(e))}},6741:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e,n){return null!=e&&t.call(e,n)}},6745:(e,t,n)=>{var o=n(9742),r=n(61),i=n(3279);e.exports=function(e){return e&&e.length?o(e,i,r):void 0}},6788:(e,t,n)=>{var o=n(7160),r=n(5204),i=n(4816);e.exports=function(e,t){var n=this.__data__;if(n instanceof o){var s=n.__data__;if(!r||s.length<199)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(s)}return n.set(e,t),this.size=n.size,this}},6806:(e,t,n)=>{var o=n(1516);e.exports=function(e,t){var n=t?o(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},6832:(e,t,n)=>{e=n.nmd(e);var o=n(7105),r=t&&!t.nodeType&&t,i=r&&e&&!e.nodeType&&e,s=i&&i.exports===r&&o.process,a=function(){try{var e=i&&i.require&&i.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(t){}}();e.exports=a},6833:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},6835:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]])},6874:(e,t,n)=>{var o=n(2622);e.exports=function(e,t){var n=o(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}},6913:(e,t,n)=>{var o=n(9812),r=n(4552),i=n(6095),s=o?o.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?r(e):i(e)}},6924:(e,t,n)=>{var o=n(7685),r=n(5204),i=n(5387),s=n(2070),a=n(6600),l=n(6913),c=n(6996),d="[object Map]",u="[object Promise]",h="[object Set]",p="[object WeakMap]",f="[object DataView]",m=c(o),g=c(r),y=c(i),v=c(s),x=c(a),b=l;(o&&b(new o(new ArrayBuffer(1)))!=f||r&&b(new r)!=d||i&&b(i.resolve())!=u||s&&b(new s)!=h||a&&b(new a)!=p)&&(b=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,o=n?c(n):"";if(o)switch(o){case m:return f;case g:return d;case y:return u;case v:return h;case x:return p}return t}),e.exports=b},6945:(e,t,n)=>{var o=n(5750);e.exports=function(e,t,n){return function(e,t,n){var o={},r=e.nodes();return r.forEach(function(e){o[e]={},o[e][e]={distance:0},r.forEach(function(t){e!==t&&(o[e][t]={distance:Number.POSITIVE_INFINITY})}),n(e).forEach(function(n){var r=n.v===e?n.w:n.v,i=t(n);o[e][r]={distance:i,predecessor:e}})}),r.forEach(function(e){var t=o[e];r.forEach(function(n){var i=o[n];r.forEach(function(n){var o=i[e],r=t[n],s=i[n],a=o.distance+r.distance;a<s.distance&&(s.distance=a,s.predecessor=r.predecessor)})})}),o}(e,t||r,n||function(t){return e.outEdges(t)})};var r=o.constant(1)},6954:(e,t,n)=>{var o=n(1629),r=n(7857),i=n(6686),s=n(6996),a=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,d=l.toString,u=c.hasOwnProperty,h=RegExp("^"+d.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||r(e))&&(o(e)?h:a).test(s(e))}},6983:(e,t,n)=>{var o=n(149);e.exports=function(e,t){return o(t,function(t){return e[t]})}},6989:(e,t,n)=>{var o=n(6399),r=n(2761);e.exports=function e(t,n,i,s,a){return t===n||(null==t||null==n||!r(t)&&!r(n)?t!==t&&n!==n:o(t,n,i,s,e,a))}},6996:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},7105:(e,t,n)=>{var o="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=o},7116:(e,t,n)=>{var o=n(9812),r=n(2777),i=n(4052),s=o?o.isConcatSpreadable:void 0;e.exports=function(e){return i(e)||r(e)||!!(s&&e&&e[s])}},7118:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},7132:(e,t,n)=>{var o=n(5538),r=n(726),i=n(8420),s=n(1104),a=n(5119),l=n(4353),c=n(1980),d=n(8124),u=n(9075),h=n(9395),p=n(8592),f=n(6924),m=n(8268),g=n(8630),y=n(310),v=n(4052),x=n(4543),b=n(7887),w=n(6686),S=n(5921),k=n(8673),E=n(474),C="[object Arguments]",M="[object Function]",O="[object Object]",T={};T[C]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T[O]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T[M]=T["[object WeakMap]"]=!1,e.exports=function e(t,n,A,N,P,D){var R,I=1&n,L=2&n,j=4&n;if(A&&(R=P?A(t,N,P,D):A(t)),void 0!==R)return R;if(!w(t))return t;var B=v(t);if(B){if(R=m(t),!I)return c(t,R)}else{var _=f(t),V=_==M||"[object GeneratorFunction]"==_;if(x(t))return l(t,I);if(_==O||_==C||V&&!P){if(R=L||V?{}:y(t),!I)return L?u(t,a(R,t)):d(t,s(R,t))}else{if(!T[_])return P?t:{};R=g(t,_,I)}}D||(D=new o);var z=D.get(t);if(z)return z;D.set(t,R),S(t)?t.forEach(function(o){R.add(e(o,n,A,o,t,D))}):b(t)&&t.forEach(function(o,r){R.set(r,e(o,n,A,r,t,D))});var F=B?void 0:(j?L?p:h:L?E:k)(t);return r(F||t,function(o,r){F&&(o=t[r=o]),i(R,r,e(o,n,A,r,t,D))}),R}},7159:(e,t,n)=>{var o=n(2622);e.exports=function(e){var t=o(this,e).delete(e);return this.size-=t?1:0,t}},7160:(e,t,n)=>{var o=n(7563),r=n(9935),i=n(4190),s=n(1946),a=n(1714);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}l.prototype.clear=o,l.prototype.delete=r,l.prototype.get=i,l.prototype.has=s,l.prototype.set=a,e.exports=l},7168:e=>{var t="\\ud800-\\udfff",n="["+t+"]",o="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",i="[^"+t+"]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+o+"|"+r+")"+"?",c="[\\ufe0e\\ufe0f]?",d=c+l+("(?:\\u200d(?:"+[i,s,a].join("|")+")"+c+l+")*"),u="(?:"+[i+o+"?",o,s,a,n].join("|")+")",h=RegExp(r+"(?="+r+")|"+u+d,"g");e.exports=function(e){for(var t=h.lastIndex=0;h.test(e);)++t;return t}},7171:(e,t,n)=>{var o=n(5652);e.exports=function(e,t){var n=[];return o(e,function(e,o,r){t(e,o,r)&&n.push(e)}),n}},7184:(e,t,n)=>{"use strict";n.d(t,{$t:()=>k,LN:()=>s,U3:()=>d,hs:()=>T,i5:()=>f,k_:()=>C,nh:()=>h});var o=n(4282),r=n(8115);const i=Object.create(null);class s{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new a(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Ji.empty,n=t.content.lastChild,r=null;for(let o=0;o<t.openEnd;o++)r=n,n=n.lastChild;let i=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],d=e.mapping.slice(i);e.replaceRange(d.map(l.pos),d.map(c.pos),a?o.Ji.empty:t),0==a&&y(e,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,o=this.ranges;for(let r=0;r<o.length;r++){let{$from:i,$to:s}=o[r],a=e.mapping.slice(n),l=a.map(i.pos),c=a.map(s.pos);r?e.deleteRange(l,c):(e.replaceRangeWith(l,c,t),y(e,n,t.isInline?-1:1))}}static findFrom(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.parent.inlineContent?new d(e):g(e.node(0),e.parent,e.pos,e.index(),t,n);if(o)return o;for(let r=e.depth-1;r>=0;r--){let o=t<0?g(e.node(0),e.node(r),e.before(r+1),e.index(r),t,n):g(e.node(0),e.node(r),e.after(r+1),e.index(r)+1,t,n);if(o)return o}return null}static near(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.findFrom(e,t)||this.findFrom(e,-t)||new f(e.node(0))}static atStart(e){return g(e,e,0,0,1)||new f(e)}static atEnd(e){return g(e,e,e.content.size,e.childCount,-1)||new f(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=i[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in i)throw new RangeError("Duplicate use of selection JSON ID "+e);return i[e]=t,t.prototype.jsonID=e,t}getBookmark(){return d.between(this.$anchor,this.$head).getBookmark()}}s.prototype.visible=!0;class a{constructor(e,t){this.$from=e,this.$to=t}}let l=!1;function c(e){l||e.parent.inlineContent||(l=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class d extends s{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;c(e),c(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return s.near(n);let o=e.resolve(t.map(this.anchor));return new d(o.parent.inlineContent?o:n,n)}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Ji.empty;if(super.replace(e,t),t==o.Ji.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof d&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new u(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new d(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,o=e.resolve(t);return new this(o,n==t?o:e.resolve(n))}static between(e,t,n){let o=e.pos-t.pos;if(n&&!o||(n=o>=0?1:-1),!t.parent.inlineContent){let e=s.findFrom(t,n,!0)||s.findFrom(t,-n,!0);if(!e)return s.near(t,n);t=e.$head}return e.parent.inlineContent||(0==o||(e=(s.findFrom(e,-n,!0)||s.findFrom(e,n,!0)).$anchor).pos<t.pos!=o<0)&&(e=t),new d(e,t)}}s.jsonID("text",d);class u{constructor(e,t){this.anchor=e,this.head=t}map(e){return new u(e.map(this.anchor),e.map(this.head))}resolve(e){return d.between(e.resolve(this.anchor),e.resolve(this.head))}}class h extends s{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:o}=t.mapResult(this.anchor),r=e.resolve(o);return n?s.near(r):new h(r)}content(){return new o.Ji(o.FK.from(this.node),0,0)}eq(e){return e instanceof h&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new p(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new h(e.resolve(t.anchor))}static create(e,t){return new h(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}h.prototype.visible=!1,s.jsonID("node",h);class p{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new u(n,n):new p(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&h.isSelectable(n)?new h(t):s.near(t)}}class f extends s{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Ji.empty;if(t==o.Ji.empty){e.delete(0,e.doc.content.size);let t=s.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new f(e)}map(e){return new f(e)}eq(e){return e instanceof f}getBookmark(){return m}}s.jsonID("all",f);const m={map(){return this},resolve:e=>new f(e)};function g(e,t,n,o,r){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(t.inlineContent)return d.create(e,n);for(let s=o-(r>0?0:1);r>0?s<t.childCount:s>=0;s+=r){let o=t.child(s);if(o.isAtom){if(!i&&h.isSelectable(o))return h.create(e,n-(r<0?o.nodeSize:0))}else{let t=g(e,o,n+r,r<0?o.childCount:0,r,i);if(t)return t}n+=o.nodeSize*r}return null}function y(e,t,n){let o=e.steps.length-1;if(o<t)return;let i,a=e.steps[o];(a instanceof r.Ln||a instanceof r.Wg)&&(e.mapping.maps[o].forEach((e,t,n,o)=>{null==i&&(i=o)}),e.setSelection(s.near(e.doc.resolve(i),n)))}class v extends r.dL{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&this.updated|1,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return o.CU.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||o.CU.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let o=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);let r=this.storedMarks;if(!r){let e=this.doc.resolve(t);r=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,o.text(e,r)),this.selection.empty||this.setSelection(s.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function x(e,t){return t&&e?e.bind(t):e}class b{constructor(e,t,n){this.name=e,this.init=x(t.init,n),this.apply=x(t.apply,n)}}const w=[new b("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new b("selection",{init:(e,t)=>e.selection||s.atStart(t.doc),apply:e=>e.selection}),new b("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,o)=>o.selection.$cursor?e.storedMarks:null}),new b("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class S{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=w.slice(),t&&t.forEach(e=>{if(this.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new b(e.key,e.spec.state,e))})}}class k{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),o=null;for(;;){let r=!1;for(let i=0;i<this.config.plugins.length;i++){let s=this.config.plugins[i];if(s.spec.appendTransaction){let a=o?o[i].n:0,l=o?o[i].state:this,c=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,l,n);if(c&&n.filterTransaction(c,i)){if(c.setMeta("appendedTransaction",e),!o){o=[];for(let e=0;e<this.config.plugins.length;e++)o.push(e<i?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),r=!0}o&&(o[i]={state:n,n:t.length})}}if(!r)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new k(this.config),n=this.config.fields;for(let o=0;o<n.length;o++){let r=n[o];t[r.name]=r.apply(e,this[r.name],this,t)}return t}get tr(){return new v(this)}static create(e){let t=new S(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new k(t);for(let o=0;o<t.fields.length;o++)n[t.fields[o].name]=t.fields[o].init(e,n);return n}reconfigure(e){let t=new S(this.schema,e.plugins),n=t.fields,o=new k(t);for(let r=0;r<n.length;r++){let t=n[r].name;o[t]=this.hasOwnProperty(t)?this[t]:n[r].init(e,o)}return o}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(e=>e.toJSON())),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[n],r=o.spec.state;r&&r.toJSON&&(t[n]=r.toJSON.call(o,this[o.key]))}return t}static fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let r=new S(e.schema,e.plugins),i=new k(r);return r.fields.forEach(r=>{if("doc"==r.name)i.doc=o.bP.fromJSON(e.schema,t.doc);else if("selection"==r.name)i.selection=s.fromJSON(i.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let o in n){let s=n[o],a=s.spec.state;if(s.key==r.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,o))return void(i[r.name]=a.fromJSON.call(s,e,t[o],i))}i[r.name]=r.init(e,i)}}),i}}function E(e,t,n){for(let o in e){let r=e[o];r instanceof Function?r=r.bind(t):"handleDOMEvents"==o&&(r=E(r,t,{})),n[o]=r}return n}class C{constructor(e){this.spec=e,this.props={},e.props&&E(e.props,this,this.props),this.key=e.key?e.key.key:O("plugin")}getState(e){return e[this.key]}}const M=Object.create(null);function O(e){return e in M?e+"$"+ ++M[e]:(M[e]=0,e+"$")}class T{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"key";this.key=O(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}},7251:(e,t,n)=>{var o=n(8724),r=n(7160),i=n(5204);e.exports=function(){this.size=0,this.__data__={hash:new o,map:new(i||r),string:new o}}},7303:(e,t,n)=>{var o=n(801),r=1/0;e.exports=function(e){return e?(e=o(e))===r||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},7424:(e,t,n)=>{var o=n(755),r=n(2536),i=n(5647),s=n(929),a=i(function(e,t){if(null==e)return[];var n=t.length;return n>1&&s(e,t[0],t[1])?t=[]:n>2&&s(t[0],t[1],t[2])&&(t=[t[0]]),r(e,o(t,1),[])});e.exports=a},7449:(e,t,n)=>{var o=n(2969),r=n(9261),i=n(5324);e.exports=function(e,t,n){for(var s=-1,a=t.length,l={};++s<a;){var c=t[s],d=o(e,c);n(d,c)&&r(l,i(c,e),d)}return l}},7498:e=>{e.exports=function(e,t){return e>t}},7529:e=>{e.exports=function(e,t){for(var n=-1,o=null==e?0:e.length,r=0,i=[];++n<o;){var s=e[n];t(s,n,e)&&(i[r++]=s)}return i}},7563:e=>{e.exports=function(){this.__data__=[],this.size=0}},7574:e=>{e.exports=function(e){return function(t){return e(t)}}},7615:(e,t,n)=>{var o=n(5575);e.exports=function(){this.__data__=o?o(null):{},this.size=0}},7685:(e,t,n)=>{var o=n(7937)(n(6552),"DataView");e.exports=o},7717:(e,t,n)=>{var o=n(4258),r=n(5111),i=n(474);e.exports=function(e,t){return null==e?e:o(e,r(t),i)}},7719:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},7760:e=>{e.exports=function(e){return this.__data__.get(e)}},7782:(e,t,n)=>{"use strict";n.d(t,{Do:()=>y,ET:()=>St,Eo:()=>le,Er:()=>he,Ff:()=>X,Fp:()=>ve,HF:()=>w,Hm:()=>Le,I$:()=>Ye,IO:()=>N,Jo:()=>M,KE:()=>q,Mi:()=>H,No:()=>Ke,Q6:()=>se,QE:()=>ne,Qc:()=>m,R4:()=>G,TG:()=>v,Tq:()=>D,U$:()=>T,Ue:()=>Q,WZ:()=>p,X6:()=>U,YN:()=>ie,ZO:()=>d,_s:()=>re,aE:()=>P,aQ:()=>ot,aW:()=>Ie,aZ:()=>O,ah:()=>Ee,b$:()=>S,b5:()=>Ne,bK:()=>g,bi:()=>ze,di:()=>rt,e_:()=>me,kM:()=>F,kO:()=>pt,kf:()=>W,mW:()=>K,ny:()=>f,oB:()=>k,oN:()=>Te,oj:()=>ce,q1:()=>pe,qX:()=>be,qn:()=>qe,r8:()=>He,rN:()=>ke,s_:()=>J,tM:()=>h,tn:()=>u,uD:()=>te,uL:()=>Ue,uj:()=>we,us:()=>oe,v5:()=>ue,vS:()=>Ve,xN:()=>ft,xc:()=>c,yX:()=>x,zj:()=>Z});var o=n(6690),r=n(8697),i=n(7352),s=n(8800),a=n(8086),l=n(6248);const c={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>{let{id:n,sourceHandle:o,targetHandle:r}=t;return`Couldn't create edge for ${e} handle id: "${"source"===e?o:r}", edge id: ${n}.`},error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:function(){return`It seems that you haven't loaded the styles. Please import '@xyflow/${arguments.length>0&&void 0!==arguments[0]?arguments[0]:"react"}/dist/style.css' or base.css to make sure everything is working properly.`},error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},d=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],u=["Enter"," ","Escape"],h={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":e=>{let{direction:t,x:n,y:o}=e;return`Moved selected node ${t}. New position, x: ${n}, y: ${o}`},"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var p,f,m;!function(e){e.Strict="strict",e.Loose="loose"}(p||(p={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(f||(f={})),function(e){e.Partial="partial",e.Full="full"}(m||(m={}));const g={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var y,v,x;!function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(y||(y={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(v||(v={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(x||(x={}));const b={[x.Left]:x.Right,[x.Right]:x.Left,[x.Top]:x.Bottom,[x.Bottom]:x.Top};function w(e){return null===e?null:e?"valid":"invalid"}const S=e=>"id"in e&&"source"in e&&"target"in e,k=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),E=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),C=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];const{width:n,height:o}=te(e),r=e.origin??t,i=n*r[0],s=o*r[1];return{x:e.position.x-i,y:e.position.y-s}},M=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{nodeOrigin:[0,0]};if(0===e.length)return{x:0,y:0,width:0,height:0};const n=e.reduce((e,n)=>{const o="string"===typeof n;let r=t.nodeLookup||o?void 0:n;t.nodeLookup&&(r=o?t.nodeLookup.get(n):E(n)?n:t.nodeLookup.get(n.id));const i=r?$(r,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return _(e,i)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return z(n)},O=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===e.size)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(e=>{if(void 0===t.filter||t.filter(e)){const t=$(e);n=_(n,t)}}),z(n)},T=function(e,t){let[n,o,r]=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,1],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a={...X(t,[n,o,r]),width:t.width/r,height:t.height/r},l=[];for(const c of e.values()){const{measured:e,selectable:t=!0,hidden:n=!1}=c;if(s&&!t||n)continue;const o=e.width??c.width??c.initialWidth??null,r=e.height??c.height??c.initialHeight??null,d=U(a,F(c)),u=(o??0)*(r??0),h=i&&d>0;(!c.internals.handleBounds||h||d>=u||c.dragging)&&l.push(c)}return l},A=(e,t)=>{const n=new Set;return e.forEach(e=>{n.add(e.id)}),t.filter(e=>n.has(e.source)||n.has(e.target))};async function N(e,t){let{nodes:n,width:o,height:r,panZoom:i,minZoom:s,maxZoom:a}=e;if(0===n.size)return Promise.resolve(!0);const l=function(e,t){const n=new Map,o=t?.nodes?new Set(t.nodes.map(e=>e.id)):null;return e.forEach(e=>{!e.measured.width||!e.measured.height||!t?.includeHiddenNodes&&e.hidden||o&&!o.has(e.id)||n.set(e.id,e)}),n}(n,t),c=O(l),d=G(c,o,r,t?.minZoom??s,t?.maxZoom??a,t?.padding??.1);return await i.setViewport(d,{duration:t?.duration,ease:t?.ease,interpolate:t?.interpolate}),Promise.resolve(!0)}function P(e){let{nodeId:t,nextPosition:n,nodeLookup:o,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}=e;const a=o.get(t),l=a.parentId?o.get(a.parentId):void 0,{x:d,y:u}=l?l.internals.positionAbsolute:{x:0,y:0},h=a.origin??r;let p=a.extent||i;if("parent"!==a.extent||a.expandParent)l&&ee(a.extent)&&(p=[[a.extent[0][0]+d,a.extent[0][1]+u],[a.extent[1][0]+d,a.extent[1][1]+u]]);else if(l){const e=l.measured.width,t=l.measured.height;e&&t&&(p=[[d,u],[d+e,u+t]])}else s?.("005",c.error005());const f=ee(p)?I(n,p,a.measured):n;return void 0!==a.measured.width&&void 0!==a.measured.height||s?.("015",c.error015()),{position:{x:f.x-d+(a.measured.width??0)*h[0],y:f.y-u+(a.measured.height??0)*h[1]},positionAbsolute:f}}async function D(e){let{nodesToRemove:t=[],edgesToRemove:n=[],nodes:o,edges:r,onBeforeDelete:i}=e;const s=new Set(t.map(e=>e.id)),a=[];for(const h of o){if(!1===h.deletable)continue;const e=s.has(h.id),t=!e&&h.parentId&&a.find(e=>e.id===h.parentId);(e||t)&&a.push(h)}const l=new Set(n.map(e=>e.id)),c=r.filter(e=>!1!==e.deletable),d=A(a,c);for(const h of c){l.has(h.id)&&!d.find(e=>e.id===h.id)&&d.push(h)}if(!i)return{edges:d,nodes:a};const u=await i({nodes:a,edges:d});return"boolean"===typeof u?u?{edges:d,nodes:a}:{edges:[],nodes:[]}:u}const R=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)},I=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return{x:R(e.x,t[0][0],t[1][0]-(n?.width??0)),y:R(e.y,t[0][1],t[1][1]-(n?.height??0))}};function L(e,t,n){const{width:o,height:r}=te(n),{x:i,y:s}=n.internals.positionAbsolute;return I(e,[[i,s],[i+o,s+r]],t)}const j=(e,t,n)=>e<t?R(Math.abs(e-t),1,t)/t:e>n?-R(Math.abs(e-n),1,t)/t:0,B=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40;return[j(e.x,o,t.width-o)*n,j(e.y,o,t.height-o)*n]},_=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),V=e=>{let{x:t,y:n,width:o,height:r}=e;return{x:t,y:n,x2:t+o,y2:n+r}},z=e=>{let{x:t,y:n,x2:o,y2:r}=e;return{x:t,y:n,width:o-t,height:r-n}},F=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];const{x:n,y:o}=E(e)?e.internals.positionAbsolute:C(e,t);return{x:n,y:o,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},$=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];const{x:n,y:o}=E(e)?e.internals.positionAbsolute:C(e,t);return{x:n,y:o,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:o+(e.measured?.height??e.height??e.initialHeight??0)}},H=(e,t)=>z(_(V(e),V(t))),U=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},K=e=>W(e.width)&&W(e.height)&&W(e.x)&&W(e.y),W=e=>!isNaN(e)&&isFinite(e),q=(e,t)=>{0},J=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1];return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}},X=function(e,t){let{x:n,y:o}=e,[r,i,s]=t;const a={x:(n-r)/s,y:(o-i)/s};return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?J(a,arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1]):a},Z=(e,t)=>{let{x:n,y:o}=e,[r,i,s]=t;return{x:n*s+r,y:o*s+i}};function Y(e,t){if("number"===typeof e)return Math.floor(.5*(t-t/(1+e)));if("string"===typeof e&&e.endsWith("px")){const t=parseFloat(e);if(!Number.isNaN(t))return Math.floor(t)}if("string"===typeof e&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}const G=(e,t,n,o,r,i)=>{const s=function(e,t,n){if("string"===typeof e||"number"===typeof e){const o=Y(e,n),r=Y(e,t);return{top:o,right:r,bottom:o,left:r,x:2*r,y:2*o}}if("object"===typeof e){const o=Y(e.top??e.y??0,n),r=Y(e.bottom??e.y??0,n),i=Y(e.left??e.x??0,t),s=Y(e.right??e.x??0,t);return{top:o,right:s,bottom:r,left:i,x:i+s,y:o+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}(i,t,n),a=(t-s.x)/e.width,l=(n-s.y)/e.height,c=Math.min(a,l),d=R(c,o,r),u=t/2-(e.x+e.width/2)*d,h=n/2-(e.y+e.height/2)*d,p=function(e,t,n,o,r,i){const{x:s,y:a}=Z(e,[t,n,o]),{x:l,y:c}=Z({x:e.x+e.width,y:e.y+e.height},[t,n,o]),d=r-l,u=i-c;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(d),bottom:Math.floor(u)}}(e,u,h,d,t,n),f=Math.min(p.left-s.left,0),m=Math.min(p.top-s.top,0);return{x:u-f+Math.min(p.right-s.right,0),y:h-m+Math.min(p.bottom-s.bottom,0),zoom:d}},Q=()=>"undefined"!==typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0;function ee(e){return void 0!==e&&"parent"!==e}function te(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function ne(e){return void 0!==(e.measured?.width??e.width??e.initialWidth)&&void 0!==(e.measured?.height??e.height??e.initialHeight)}function oe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:0,height:0},n=arguments.length>2?arguments[2]:void 0,o=arguments.length>4?arguments[4]:void 0;const r={...e},i=(arguments.length>3?arguments[3]:void 0).get(n);if(i){const e=i.origin||o;r.x+=i.internals.positionAbsolute.x-(t.width??0)*e[0],r.y+=i.internals.positionAbsolute.y-(t.height??0)*e[1]}return r}function re(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function ie(){let e,t;return{promise:new Promise((n,o)=>{e=n,t=o}),resolve:e,reject:t}}function se(e){return{...h,...e||{}}}function ae(e,t){let{snapGrid:n=[0,0],snapToGrid:o=!1,transform:r,containerBounds:i}=t;const{x:s,y:a}=pe(e),l=X({x:s-(i?.left??0),y:a-(i?.top??0)},r),{x:c,y:d}=o?J(l,n):l;return{xSnapped:c,ySnapped:d,...l}}const le=e=>({width:e.offsetWidth,height:e.offsetHeight}),ce=e=>e?.getRootNode?.()||window?.document,de=["INPUT","SELECT","TEXTAREA"];function ue(e){const t=e.composedPath?.()?.[0]||e.target;if(1!==t?.nodeType)return!1;return de.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const he=e=>"clientX"in e,pe=(e,t)=>{const n=he(e),o=n?e.clientX:e.touches?.[0].clientX,r=n?e.clientY:e.touches?.[0].clientY;return{x:o-(t?.left??0),y:r-(t?.top??0)}},fe=(e,t,n,o,r)=>{const i=t.querySelectorAll(`.${e}`);return i&&i.length?Array.from(i).map(t=>{const i=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),type:e,nodeId:r,position:t.getAttribute("data-handlepos"),x:(i.left-n.left)/o,y:(i.top-n.top)/o,...le(t)}}):null};function me(e){let{sourceX:t,sourceY:n,targetX:o,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:a,targetControlY:l}=e;const c=.125*t+.375*i+.375*a+.125*o,d=.125*n+.375*s+.375*l+.125*r;return[c,d,Math.abs(c-t),Math.abs(d-n)]}function ge(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function ye(e){let{pos:t,x1:n,y1:o,x2:r,y2:i,c:s}=e;switch(t){case x.Left:return[n-ge(n-r,s),o];case x.Right:return[n+ge(r-n,s),o];case x.Top:return[n,o-ge(o-i,s)];case x.Bottom:return[n,o+ge(i-o,s)]}}function ve(e){let{sourceX:t,sourceY:n,sourcePosition:o=x.Bottom,targetX:r,targetY:i,targetPosition:s=x.Top,curvature:a=.25}=e;const[l,c]=ye({pos:o,x1:t,y1:n,x2:r,y2:i,c:a}),[d,u]=ye({pos:s,x1:r,y1:i,x2:t,y2:n,c:a}),[h,p,f,m]=me({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:l,sourceControlY:c,targetControlX:d,targetControlY:u});return[`M${t},${n} C${l},${c} ${d},${u} ${r},${i}`,h,p,f,m]}function xe(e){let{sourceX:t,sourceY:n,targetX:o,targetY:r}=e;const i=Math.abs(o-t)/2,s=o<t?o+i:o-i,a=Math.abs(r-n)/2;return[s,r<n?r+a:r-a,i,a]}function be(e){let{sourceNode:t,targetNode:n,selected:o=!1,zIndex:r,elevateOnSelect:i=!1}=e;if(void 0!==r)return r;return(i&&o?1e3:0)+Math.max(t.parentId?t.internals.z:0,n.parentId?n.internals.z:0)}function we(e){let{sourceNode:t,targetNode:n,width:o,height:r,transform:i}=e;const s=_($(t),$(n));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const a={x:-i[0]/i[2],y:-i[1]/i[2],width:o/i[2],height:r/i[2]};return U(a,z(s))>0}const Se=e=>{let{source:t,sourceHandle:n,target:o,targetHandle:r}=e;return`xy-edge__${t}${n||""}-${o}${r||""}`},ke=(e,t)=>{if(!e.source||!e.target)return q("006",c.error006()),t;let n;return n=S(e)?{...e}:{...e,id:Se(e)},((e,t)=>t.some(t=>t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)))(n,t)?t:(null===n.sourceHandle&&delete n.sourceHandle,null===n.targetHandle&&delete n.targetHandle,t.concat(n))};function Ee(e){let{sourceX:t,sourceY:n,targetX:o,targetY:r}=e;const[i,s,a,l]=xe({sourceX:t,sourceY:n,targetX:o,targetY:r});return[`M ${t},${n}L ${o},${r}`,i,s,a,l]}const Ce={[x.Left]:{x:-1,y:0},[x.Right]:{x:1,y:0},[x.Top]:{x:0,y:-1},[x.Bottom]:{x:0,y:1}},Me=e=>{let{source:t,sourcePosition:n=x.Bottom,target:o}=e;return n===x.Left||n===x.Right?t.x<o.x?{x:1,y:0}:{x:-1,y:0}:t.y<o.y?{x:0,y:1}:{x:0,y:-1}},Oe=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Te(e){let{sourceX:t,sourceY:n,sourcePosition:o=x.Bottom,targetX:r,targetY:i,targetPosition:s=x.Top,borderRadius:a=5,centerX:l,centerY:c,offset:d=20,stepPosition:u=.5}=e;const[h,p,f,m,g]=function(e){let{source:t,sourcePosition:n=x.Bottom,target:o,targetPosition:r=x.Top,center:i,offset:s,stepPosition:a}=e;const l=Ce[n],c=Ce[r],d={x:t.x+l.x*s,y:t.y+l.y*s},u={x:o.x+c.x*s,y:o.y+c.y*s},h=Me({source:d,sourcePosition:n,target:u}),p=0!==h.x?"x":"y",f=h[p];let m,g,y=[];const v={x:0,y:0},b={x:0,y:0},[,,w,S]=xe({sourceX:t.x,sourceY:t.y,targetX:o.x,targetY:o.y});if(l[p]*c[p]===-1){"x"===p?(m=i.x??d.x+(u.x-d.x)*a,g=i.y??(d.y+u.y)/2):(m=i.x??(d.x+u.x)/2,g=i.y??d.y+(u.y-d.y)*a);const e=[{x:m,y:d.y},{x:m,y:u.y}],t=[{x:d.x,y:g},{x:u.x,y:g}];y=l[p]===f?"x"===p?e:t:"x"===p?t:e}else{const e=[{x:d.x,y:u.y}],i=[{x:u.x,y:d.y}];if(y="x"===p?l.x===f?i:e:l.y===f?e:i,n===r){const e=Math.abs(t[p]-o[p]);if(e<=s){const n=Math.min(s-1,s-e);l[p]===f?v[p]=(d[p]>t[p]?-1:1)*n:b[p]=(u[p]>o[p]?-1:1)*n}}if(n!==r){const t="x"===p?"y":"x",n=l[p]===c[t],o=d[t]>u[t],r=d[t]<u[t];(1===l[p]&&(!n&&o||n&&r)||1!==l[p]&&(!n&&r||n&&o))&&(y="x"===p?e:i)}const a={x:d.x+v.x,y:d.y+v.y},h={x:u.x+b.x,y:u.y+b.y};Math.max(Math.abs(a.x-y[0].x),Math.abs(h.x-y[0].x))>=Math.max(Math.abs(a.y-y[0].y),Math.abs(h.y-y[0].y))?(m=(a.x+h.x)/2,g=y[0].y):(m=y[0].x,g=(a.y+h.y)/2)}return[[t,{x:d.x+v.x,y:d.y+v.y},...y,{x:u.x+b.x,y:u.y+b.y},o],m,g,w,S]}({source:{x:t,y:n},sourcePosition:o,target:{x:r,y:i},targetPosition:s,center:{x:l,y:c},offset:d,stepPosition:u});return[h.reduce((e,t,n)=>{let o="";return o=n>0&&n<h.length-1?function(e,t,n,o){const r=Math.min(Oe(e,t)/2,Oe(t,n)/2,o),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s)return`L ${i+r*(e.x<n.x?-1:1)},${s}Q ${i},${s} ${i},${s+r*(e.y<n.y?1:-1)}`;const a=e.x<n.x?1:-1;return`L ${i},${s+r*(e.y<n.y?-1:1)}Q ${i},${s} ${i+r*a},${s}`}(h[n-1],t,h[n+1],a):`${0===n?"M":"L"}${t.x} ${t.y}`,e+=o},""),p,f,m,g]}function Ae(e){return e&&!(!e.internals.handleBounds&&!e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Ne(e){const{sourceNode:t,targetNode:n}=e;if(!Ae(t)||!Ae(n))return null;const o=t.internals.handleBounds||Pe(t.handles),r=n.internals.handleBounds||Pe(n.handles),i=Re(o?.source??[],e.sourceHandle),s=Re(e.connectionMode===p.Strict?r?.target??[]:(r?.target??[]).concat(r?.source??[]),e.targetHandle);if(!i||!s)return e.onError?.("008",c.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=i?.position||x.Bottom,l=s?.position||x.Top,d=De(t,i,a),u=De(n,s,l);return{sourceX:d.x,sourceY:d.y,targetX:u.x,targetY:u.y,sourcePosition:a,targetPosition:l}}function Pe(e){if(!e)return null;const t=[],n=[];for(const o of e)o.width=o.width??1,o.height=o.height??1,"source"===o.type?t.push(o):"target"===o.type&&n.push(o);return{source:t,target:n}}function De(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.Left,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=(t?.x??0)+e.internals.positionAbsolute.x,i=(t?.y??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??te(e);if(o)return{x:r+s/2,y:i+a/2};switch(t?.position??n){case x.Top:return{x:r+s/2,y:i};case x.Right:return{x:r+s,y:i+a/2};case x.Bottom:return{x:r+s/2,y:i+a};case x.Left:return{x:r,y:i+a/2}}}function Re(e,t){return e&&(t?e.find(e=>e.id===t):e[0])||null}function Ie(e,t){if(!e)return"";if("string"===typeof e)return e;return`${t?`${t}__`:""}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&")}`}function Le(e,t){let{id:n,defaultColor:o,defaultMarkerStart:r,defaultMarkerEnd:i}=t;const s=new Set;return e.reduce((e,t)=>([t.markerStart||r,t.markerEnd||i].forEach(t=>{if(t&&"object"===typeof t){const r=Ie(t,n);s.has(r)||(e.push({id:r,color:t.color||o,...t}),s.add(r))}}),e),[]).sort((e,t)=>e.id.localeCompare(t.id))}const je={nodeOrigin:[0,0],nodeExtent:d,elevateNodesOnSelect:!0,defaults:{}},Be={...je,checkEquality:!0};function _e(e,t){const n={...e};for(const o in t)void 0!==t[o]&&(n[o]=t[o]);return n}function Ve(e,t,n){const o=_e(je,n);for(const r of e.values())if(r.parentId)Fe(r,e,t,o);else{const e=C(r,o.nodeOrigin),t=ee(r.extent)?r.extent:o.nodeExtent,n=I(e,t,te(r));r.internals.positionAbsolute=n}}function ze(e,t,n,o){const r=_e(Be,o);let i=e.length>0;const s=new Map(t),a=r?.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const l of e){let e=s.get(l.id);if(r.checkEquality&&l===e?.internals.userNode)t.set(l.id,e);else{const n=C(l,r.nodeOrigin),o=ee(l.extent)?l.extent:r.nodeExtent,i=I(n,o,te(l));e={...r.defaults,...l,measured:{width:l.measured?.width,height:l.measured?.height},internals:{positionAbsolute:i,handleBounds:l.measured?e?.internals.handleBounds:void 0,z:$e(l,a),userNode:l}},t.set(l.id,e)}void 0!==e.measured&&void 0!==e.measured.width&&void 0!==e.measured.height||e.hidden||(i=!1),l.parentId&&Fe(e,t,n,o)}return i}function Fe(e,t,n,o){const{elevateNodesOnSelect:r,nodeOrigin:i,nodeExtent:s}=_e(je,o),a=e.parentId,l=t.get(a);if(!l)return void console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);!function(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}(e,n);const c=r?1e3:0,{x:d,y:u,z:h}=function(e,t,n,o,r){const{x:i,y:s}=t.internals.positionAbsolute,a=te(e),l=C(e,n),c=ee(e.extent)?I(l,e.extent,a):l;let d=I({x:i+c.x,y:s+c.y},o,a);"parent"===e.extent&&(d=L(d,a,t));const u=$e(e,r),h=t.internals.z??0;return{x:d.x,y:d.y,z:h>=u?h+1:u}}(e,l,i,s,c),{positionAbsolute:p}=e.internals,f=d!==p.x||u!==p.y;(f||h!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:f?{x:d,y:u}:p,z:h}})}function $e(e,t){return(W(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function He(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0];const r=[],i=new Map;for(const s of e){const e=t.get(s.parentId);if(!e)continue;const n=i.get(s.parentId)?.expandedRect??F(e),o=H(n,s.rect);i.set(s.parentId,{expandedRect:o,parent:e})}return i.size>0&&i.forEach((t,i)=>{let{expandedRect:s,parent:a}=t;const l=a.internals.positionAbsolute,c=te(a),d=a.origin??o,u=s.x<l.x?Math.round(Math.abs(l.x-s.x)):0,h=s.y<l.y?Math.round(Math.abs(l.y-s.y)):0,p=Math.max(c.width,Math.round(s.width)),f=Math.max(c.height,Math.round(s.height)),m=(p-c.width)*d[0],g=(f-c.height)*d[1];(u>0||h>0||m||g)&&(r.push({id:i,type:"position",position:{x:a.position.x-u+m,y:a.position.y-h+g}}),n.get(i)?.forEach(t=>{e.some(e=>e.id===t.id)||r.push({id:t.id,type:"position",position:{x:t.position.x+u,y:t.position.y+h}})})),(c.width<s.width||c.height<s.height||u||h)&&r.push({id:i,type:"dimensions",setAttributes:!0,dimensions:{width:p+(u?d[0]*u-m:0),height:f+(h?d[1]*h-g:0)}})}),r}function Ue(e,t,n,o,r,i){const s=o?.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const l=[],c=window.getComputedStyle(s),{m22:d}=new window.DOMMatrixReadOnly(c.transform),u=[];for(const h of e.values()){const e=t.get(h.id);if(!e)continue;if(e.hidden){t.set(e.id,{...e,internals:{...e.internals,handleBounds:void 0}}),a=!0;continue}const o=le(h.nodeElement),s=e.measured.width!==o.width||e.measured.height!==o.height;if(!(!o.width||!o.height||!s&&e.internals.handleBounds&&!h.force)){const c=h.nodeElement.getBoundingClientRect(),p=ee(e.extent)?e.extent:i;let{positionAbsolute:f}=e.internals;e.parentId&&"parent"===e.extent?f=L(f,o,t.get(e.parentId)):p&&(f=I(f,p,o));const m={...e,measured:o,internals:{...e.internals,positionAbsolute:f,handleBounds:{source:fe("source",h.nodeElement,c,d,e.id),target:fe("target",h.nodeElement,c,d,e.id)}}};t.set(e.id,m),e.parentId&&Fe(m,t,n,{nodeOrigin:r}),a=!0,s&&(l.push({id:e.id,type:"dimensions",dimensions:o}),e.expandParent&&e.parentId&&u.push({id:e.id,parentId:e.parentId,rect:F(m,r)}))}}if(u.length>0){const e=He(u,t,n,r);l.push(...e)}return{changes:l,updatedInternals:a}}async function Ke(e){let{delta:t,panZoom:n,transform:o,translateExtent:r,width:i,height:s}=e;if(!n||!t.x&&!t.y)return Promise.resolve(!1);const a=await n.setViewportConstrained({x:o[0]+t.x,y:o[1]+t.y,zoom:o[2]},[[0,0],[i,s]],r),l=!!a&&(a.x!==o[0]||a.y!==o[1]||a.k!==o[2]);return Promise.resolve(l)}function We(e,t,n,o,r,i){let s=r;const a=o.get(s)||new Map;o.set(s,a.set(n,t)),s=`${r}-${e}`;const l=o.get(s)||new Map;if(o.set(s,l.set(n,t)),i){s=`${r}-${e}-${i}`;const a=o.get(s)||new Map;o.set(s,a.set(n,t))}}function qe(e,t,n){e.clear(),t.clear();for(const o of n){const{source:n,target:r,sourceHandle:i=null,targetHandle:s=null}=o,a={edgeId:o.id,source:n,target:r,sourceHandle:i,targetHandle:s},l=`${n}-${i}--${r}-${s}`;We("source",a,`${r}-${s}--${n}-${i}`,e,n,i),We("target",a,l,e,r,s),t.set(o.id,o)}}function Je(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return!!n&&(!!n.selected||Je(n,t))}function Xe(e,t,n){let o=e;do{if(o?.matches?.(t))return!0;if(o===n)return!1;o=o?.parentElement}while(o);return!1}function Ze(e){let{nodeId:t,dragItems:n,nodeLookup:o,dragging:r=!0}=e;const i=[];for(const[a,l]of n){const e=o.get(a)?.internals.userNode;e&&i.push({...e,position:l.position,dragging:r})}if(!t)return[i[0],i];const s=o.get(t)?.internals.userNode;return[s?{...s,position:n.get(t)?.position||s.position,dragging:r}:i[0],i]}function Ye(e){let{onNodeMouseDown:t,getStoreItems:n,onDragStart:r,onDrag:s,onDragStop:a}=e,l={x:null,y:null},c=0,d=new Map,u=!1,h={x:0,y:0},p=null,f=!1,m=null,g=!1,y=!1;return{update:function(e){let{noDragClassName:v,handleSelector:x,domNode:b,isSelectable:w,nodeId:S,nodeClickDistance:k=0}=e;function E(e,t){let{x:o,y:r}=e;const{nodeLookup:i,nodeExtent:a,snapGrid:c,snapToGrid:u,nodeOrigin:h,onNodeDrag:p,onSelectionDrag:f,onError:m,updateNodePositions:g}=n();l={x:o,y:r};let v=!1,x={x:0,y:0,x2:0,y2:0};if(d.size>1&&a){const e=O(d);x=V(e)}for(const[n,s]of d){if(!i.has(n))continue;let e={x:o-s.distance.x,y:r-s.distance.y};u&&(e=J(e,c));let t=[[a[0][0],a[0][1]],[a[1][0],a[1][1]]];if(d.size>1&&a&&!s.extent){const{positionAbsolute:e}=s.internals,n=e.x-x.x+a[0][0],o=e.x+s.measured.width-x.x2+a[1][0];t=[[n,e.y-x.y+a[0][1]],[o,e.y+s.measured.height-x.y2+a[1][1]]]}const{position:l,positionAbsolute:p}=P({nodeId:n,nextPosition:e,nodeLookup:i,nodeExtent:t,nodeOrigin:h,onError:m});v=v||s.position.x!==l.x||s.position.y!==l.y,s.position=l,s.internals.positionAbsolute=p}if(y=y||v,v&&(g(d,!0),t&&(s||p||!S&&f))){const[e,n]=Ze({nodeId:S,dragItems:d,nodeLookup:i});s?.(t,d,e,n),p?.(t,e,n),S||f?.(t,n)}}async function C(){if(!p)return;const{transform:e,panBy:t,autoPanSpeed:o,autoPanOnNodeDrag:r}=n();if(!r)return u=!1,void cancelAnimationFrame(c);const[i,s]=B(h,p,o);0===i&&0===s||(l.x=(l.x??0)-i/e[2],l.y=(l.y??0)-s/e[2],await t({x:i,y:s})&&E(l,null)),c=requestAnimationFrame(C)}function M(e){const{nodeLookup:o,multiSelectionActive:i,nodesDraggable:s,transform:a,snapGrid:c,snapToGrid:u,selectNodesOnDrag:h,onNodeDragStart:m,onSelectionDragStart:g,unselectNodesAndEdges:y}=n();f=!0,h&&w||i||!S||o.get(S)?.selected||y(),w&&h&&S&&t?.(S);const v=ae(e.sourceEvent,{transform:a,snapGrid:c,snapToGrid:u,containerBounds:p});if(l=v,d=function(e,t,n,o){const r=new Map;for(const[i,s]of e)if((s.selected||s.id===o)&&(!s.parentId||!Je(s,e))&&(s.draggable||t&&"undefined"===typeof s.draggable)){const t=e.get(i);t&&r.set(i,{id:i,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:t.measured.width??0,height:t.measured.height??0}})}return r}(o,s,v,S),d.size>0&&(r||m||!S&&g)){const[t,n]=Ze({nodeId:S,dragItems:d,nodeLookup:o});r?.(e.sourceEvent,d,t,n),m?.(e.sourceEvent,t,n),S||g?.(e.sourceEvent,n)}}m=(0,i.A)(b);const T=(0,o.A)().clickDistance(k).on("start",e=>{const{domNode:t,nodeDragThreshold:o,transform:r,snapGrid:i,snapToGrid:s}=n();p=t?.getBoundingClientRect()||null,g=!1,y=!1,0===o&&M(e);const a=ae(e.sourceEvent,{transform:r,snapGrid:i,snapToGrid:s,containerBounds:p});l=a,h=pe(e.sourceEvent,p)}).on("drag",e=>{const{autoPanOnNodeDrag:t,transform:o,snapGrid:r,snapToGrid:i,nodeDragThreshold:s,nodeLookup:a}=n(),c=ae(e.sourceEvent,{transform:o,snapGrid:r,snapToGrid:i,containerBounds:p});if(("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||S&&!a.has(S))&&(g=!0),!g){if(!u&&t&&f&&(u=!0,C()),!f){const t=c.xSnapped-(l.x??0),n=c.ySnapped-(l.y??0);Math.sqrt(t*t+n*n)>s&&M(e)}(l.x!==c.xSnapped||l.y!==c.ySnapped)&&d&&f&&(h=pe(e.sourceEvent,p),E(c,e.sourceEvent))}}).on("end",e=>{if(f&&!g&&(u=!1,f=!1,cancelAnimationFrame(c),d.size>0)){const{nodeLookup:t,updateNodePositions:o,onNodeDragStop:r,onSelectionDragStop:i}=n();if(y&&(o(d,!1),y=!1),a||r||!S&&i){const[n,o]=Ze({nodeId:S,dragItems:d,nodeLookup:t,dragging:!1});a?.(e.sourceEvent,d,n,o),r?.(e.sourceEvent,n,o),S||i?.(e.sourceEvent,o)}}}).filter(e=>{const t=e.target;return!e.button&&(!v||!Xe(t,`.${v}`,b))&&(!x||Xe(t,x,b))});m.call(T)},destroy:function(){m?.on(".drag",null)}}}function Ge(e,t,n,o){let r=[],i=1/0;const s=function(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(const i of t.values())U(r,F(i))>0&&o.push(i);return o}(e,n,t+250);for(const a of s){const n=[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]];for(const s of n){if(o.nodeId===s.nodeId&&o.type===s.type&&o.id===s.id)continue;const{x:n,y:l}=De(a,s,s.position,!0),c=Math.sqrt(Math.pow(n-e.x,2)+Math.pow(l-e.y,2));c>t||(c<i?(r=[{...s,x:n,y:l}],i=c):c===i&&r.push({...s,x:n,y:l}))}}if(!r.length)return null;if(r.length>1){const e="source"===o.type?"target":"source";return r.find(t=>t.type===e)??r[0]}return r[0]}function Qe(e,t,n,o,r){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const s=o.get(e);if(!s)return null;const a="strict"===r?s.internals.handleBounds?.[t]:[...s.internals.handleBounds?.source??[],...s.internals.handleBounds?.target??[]],l=(n?a?.find(e=>e.id===n):a?.[0])??null;return l&&i?{...l,...De(s,l,l.position,!0)}:l}function et(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}const tt=()=>!0;function nt(e,t){let{handle:n,connectionMode:o,fromNodeId:r,fromHandleId:i,fromType:s,doc:a,lib:l,flowId:c,isValidConnection:d=tt,nodeLookup:u}=t;const h="target"===s,f=n?a.querySelector(`.${l}-flow__handle[data-id="${c}-${n?.nodeId}-${n?.id}-${n?.type}"]`):null,{x:m,y:g}=pe(e),y=a.elementFromPoint(m,g),v=y?.classList.contains(`${l}-flow__handle`)?y:f,x={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const e=et(void 0,v),t=v.getAttribute("data-nodeid"),n=v.getAttribute("data-handleid"),s=v.classList.contains("connectable"),a=v.classList.contains("connectableend");if(!t||!e)return x;const l={source:h?t:r,sourceHandle:h?n:i,target:h?r:t,targetHandle:h?i:n};x.connection=l;const c=s&&a&&(o===p.Strict?h&&"source"===e||!h&&"target"===e:t!==r||n!==i);x.isValid=c&&d(l),x.toHandle=Qe(t,e,n,u,o,!0)}return x}const ot={onPointerDown:function(e,t){let{connectionMode:n,connectionRadius:o,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:a,domNode:l,nodeLookup:c,lib:d,autoPanOnConnect:u,flowId:h,panBy:p,cancelConnection:f,onConnectStart:m,onConnect:g,onConnectEnd:y,isValidConnection:v=tt,onReconnectEnd:w,updateConnection:S,getTransform:k,getFromHandle:E,autoPanSpeed:C,dragThreshold:M=1}=t;const O=ce(e.target);let T,A=0;const{x:N,y:P}=pe(e),D=O?.elementFromPoint(N,P),R=et(s,D),I=l?.getBoundingClientRect();let L=!1;if(!I||!R)return;const j=Qe(i,R,r,c,n);if(!j)return;let _=pe(e,I),V=!1,z=null,F=!1,$=null;function H(){if(!u||!I)return;const[e,t]=B(_,I,C);p({x:e,y:t}),A=requestAnimationFrame(H)}const U={...j,nodeId:i,type:R,position:j.position},K=c.get(i);let W={inProgress:!0,isValid:null,from:De(K,U,x.Left,!0),fromHandle:U,fromPosition:U.position,fromNode:K,to:_,toHandle:null,toPosition:b[U.position],toNode:null};function q(){L=!0,S(W),m?.(e,{nodeId:i,handleId:r,handleType:R})}function J(e){if(!L){const{x:t,y:n}=pe(e),o=t-N,r=n-P;if(!(o*o+r*r>M*M))return;q()}if(!E()||!U)return void Y(e);const t=k();_=pe(e,I),T=Ge(X(_,t,!1,[1,1]),o,c,U),V||(H(),V=!0);const s=nt(e,{handle:T,connectionMode:n,fromNodeId:i,fromHandleId:r,fromType:a?"target":"source",isValidConnection:v,doc:O,lib:d,flowId:h,nodeLookup:c});$=s.handleDomNode,z=s.connection,F=function(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}(!!T,s.isValid);const l={...W,isValid:F,to:s.toHandle&&F?Z({x:s.toHandle.x,y:s.toHandle.y},t):_,toHandle:s.toHandle,toPosition:F&&s.toHandle?s.toHandle.position:b[U.position],toNode:s.toHandle?c.get(s.toHandle.nodeId):null};F&&T&&W.toHandle&&l.toHandle&&W.toHandle.type===l.toHandle.type&&W.toHandle.nodeId===l.toHandle.nodeId&&W.toHandle.id===l.toHandle.id&&W.to.x===l.to.x&&W.to.y===l.to.y||(S(l),W=l)}function Y(e){if(L){(T||$)&&z&&F&&g?.(z);const{inProgress:t,...n}=W,o={...n,toPosition:W.toHandle?W.toPosition:null};y?.(e,o),s&&w?.(e,o)}f(),cancelAnimationFrame(A),V=!1,F=!1,z=null,$=null,O.removeEventListener("mousemove",J),O.removeEventListener("mouseup",Y),O.removeEventListener("touchmove",J),O.removeEventListener("touchend",Y)}0===M&&q(),O.addEventListener("mousemove",J),O.addEventListener("mouseup",Y),O.addEventListener("touchmove",J),O.addEventListener("touchend",Y)},isValid:nt};function rt(e){let{domNode:t,panZoom:n,getTransform:o,getViewScale:a}=e;const l=(0,i.A)(t);return{update:function(e){let{translateExtent:t,width:r,height:i,zoomStep:c=10,pannable:d=!0,zoomable:u=!0,inversePan:h=!1}=e,p=[0,0];const f=(0,s.s_)().on("start",e=>{"mousedown"!==e.sourceEvent.type&&"touchstart"!==e.sourceEvent.type||(p=[e.sourceEvent.clientX??e.sourceEvent.touches[0].clientX,e.sourceEvent.clientY??e.sourceEvent.touches[0].clientY])}).on("zoom",d?e=>{const s=o();if("mousemove"!==e.sourceEvent.type&&"touchmove"!==e.sourceEvent.type||!n)return;const l=[e.sourceEvent.clientX??e.sourceEvent.touches[0].clientX,e.sourceEvent.clientY??e.sourceEvent.touches[0].clientY],c=[l[0]-p[0],l[1]-p[1]];p=l;const d=a()*Math.max(s[2],Math.log(s[2]))*(h?-1:1),u={x:s[0]-c[0]*d,y:s[1]-c[1]*d},f=[[0,0],[r,i]];n.setViewportConstrained({x:u.x,y:u.y,zoom:s[2]},f,t)}:null).on("zoom.wheel",u?e=>{const t=o();if("wheel"!==e.sourceEvent.type||!n)return;const r=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*c,i=t[2]*Math.pow(2,r);n.scaleTo(i)}:null);l.call(f,{})},destroy:function(){l.on("zoom",null)},pointer:r.A}}const it=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,st=e=>({x:e.x,y:e.y,zoom:e.k}),at=e=>{let{x:t,y:n,zoom:o}=e;return s.GS.translate(t,n).scale(o)},lt=(e,t)=>e.target.closest(`.${t}`),ct=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),dt=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,ut=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dt,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>{};const r="number"===typeof t&&t>0;return r||o(),r?e.transition().duration(t).ease(n).on("end",o):e},ht=e=>{const t=e.ctrlKey&&Q()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function pt(e){let{domNode:t,minZoom:n,maxZoom:o,paneClickDistance:c,translateExtent:d,viewport:u,onPanZoom:h,onPanZoomStart:p,onPanZoomEnd:m,onDraggingChange:g}=e;const y={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},v=t.getBoundingClientRect(),x=(0,s.s_)().clickDistance(!W(c)||c<0?0:c).scaleExtent([n,o]).translateExtent(d),b=(0,i.A)(t).call(x);C({x:u.x,y:u.y,zoom:R(u.zoom,n,o)},[[0,0],[v.width,v.height]],d);const w=b.on("wheel.zoom"),S=b.on("dblclick.zoom");function k(e,t){return b?new Promise(n=>{x?.interpolate("linear"===t?.interpolate?a.A:l.A).transform(ut(b,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)}function E(){x.on("zoom",null)}async function C(e,t,n){const o=at(e),r=x?.constrain()(o,t,n);return r&&await k(r),new Promise(e=>e(r))}return x.wheelDelta(ht),{update:function(e){let{noWheelClassName:t,noPanClassName:n,onPaneContextMenu:o,userSelectionActive:i,panOnScroll:s,panOnDrag:a,panOnScrollMode:l,panOnScrollSpeed:c,preventScrolling:d,zoomOnPinch:u,zoomOnScroll:v,zoomOnDoubleClick:k,zoomActivationKeyPressed:C,lib:M,onTransformChange:O}=e;i&&!y.isZoomingOrPanning&&E();const T=s&&!C&&!i?function(e){let{zoomPanValues:t,noWheelClassName:n,d3Selection:o,d3Zoom:i,panOnScrollMode:s,panOnScrollSpeed:a,zoomOnPinch:l,onPanZoomStart:c,onPanZoom:d,onPanZoomEnd:u}=e;return e=>{if(lt(e,n))return!1;e.preventDefault(),e.stopImmediatePropagation();const h=o.property("__zoom").k||1;if(e.ctrlKey&&l){const t=(0,r.A)(e),n=ht(e),s=h*Math.pow(2,n);return void i.scaleTo(o,s,t,e)}const p=1===e.deltaMode?20:1;let m=s===f.Vertical?0:e.deltaX*p,g=s===f.Horizontal?0:e.deltaY*p;!Q()&&e.shiftKey&&s!==f.Vertical&&(m=e.deltaY*p,g=0),i.translateBy(o,-m/h*a,-g/h*a,{internal:!0});const y=st(o.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,c?.(e,y)),t.isPanScrolling&&(d?.(e,y),t.panScrollTimeout=setTimeout(()=>{u?.(e,y),t.isPanScrolling=!1},150))}}({zoomPanValues:y,noWheelClassName:t,d3Selection:b,d3Zoom:x,panOnScrollMode:l,panOnScrollSpeed:c,zoomOnPinch:u,onPanZoomStart:p,onPanZoom:h,onPanZoomEnd:m}):function(e){let{noWheelClassName:t,preventScrolling:n,d3ZoomHandler:o}=e;return function(e,r){const i="wheel"===e.type,s=!n&&i&&!e.ctrlKey,a=lt(e,t);if(e.ctrlKey&&i&&a&&e.preventDefault(),s||a)return null;e.preventDefault(),o.call(this,e,r)}}({noWheelClassName:t,preventScrolling:d,d3ZoomHandler:w});if(b.on("wheel.zoom",T,{passive:!1}),!i){const e=function(e){let{zoomPanValues:t,onDraggingChange:n,onPanZoomStart:o}=e;return e=>{if(e.sourceEvent?.internal)return;const r=st(e.transform);t.mouseButton=e.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=r,"mousedown"===e.sourceEvent?.type&&n(!0),o&&o?.(e.sourceEvent,r)}}({zoomPanValues:y,onDraggingChange:g,onPanZoomStart:p});x.on("start",e);const t=function(e){let{zoomPanValues:t,panOnDrag:n,onPaneContextMenu:o,onTransformChange:r,onPanZoom:i}=e;return e=>{t.usedRightMouseButton=!(!o||!ct(n,t.mouseButton??0)),e.sourceEvent?.sync||r([e.transform.x,e.transform.y,e.transform.k]),i&&!e.sourceEvent?.internal&&i?.(e.sourceEvent,st(e.transform))}}({zoomPanValues:y,panOnDrag:a,onPaneContextMenu:!!o,onPanZoom:h,onTransformChange:O});x.on("zoom",t);const n=function(e){let{zoomPanValues:t,panOnDrag:n,panOnScroll:o,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}=e;return e=>{if(!e.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,s&&ct(n,t.mouseButton??0)&&!t.usedRightMouseButton&&e.sourceEvent&&s(e.sourceEvent),t.usedRightMouseButton=!1,r(!1),i&&it(t.prevViewport,e.transform))){const n=st(e.transform);t.prevViewport=n,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{i?.(e.sourceEvent,n)},o?150:0)}}}({zoomPanValues:y,panOnDrag:a,panOnScroll:s,onPaneContextMenu:o,onPanZoomEnd:m,onDraggingChange:g});x.on("end",n)}const A=function(e){let{zoomActivationKeyPressed:t,zoomOnScroll:n,zoomOnPinch:o,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:a,noWheelClassName:l,noPanClassName:c,lib:d}=e;return e=>{const u=t||n,h=o&&e.ctrlKey;if(1===e.button&&"mousedown"===e.type&&(lt(e,`${d}-flow__node`)||lt(e,`${d}-flow__edge`)))return!0;if(!r&&!u&&!i&&!s&&!o)return!1;if(a)return!1;if(lt(e,l)&&"wheel"===e.type)return!1;if(lt(e,c)&&("wheel"!==e.type||i&&"wheel"===e.type&&!t))return!1;if(!o&&e.ctrlKey&&"wheel"===e.type)return!1;if(!o&&"touchstart"===e.type&&e.touches?.length>1)return e.preventDefault(),!1;if(!u&&!i&&!h&&"wheel"===e.type)return!1;if(!r&&("mousedown"===e.type||"touchstart"===e.type))return!1;if(Array.isArray(r)&&!r.includes(e.button)&&"mousedown"===e.type)return!1;const p=Array.isArray(r)&&r.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||"wheel"===e.type)&&p}}({zoomActivationKeyPressed:C,panOnDrag:a,zoomOnScroll:v,panOnScroll:s,zoomOnDoubleClick:k,zoomOnPinch:u,userSelectionActive:i,noPanClassName:n,noWheelClassName:t,lib:M});x.filter(A),k?b.on("dblclick.zoom",S):b.on("dblclick.zoom",null)},destroy:E,setViewport:async function(e,t){const n=at(e);return await k(n,t),new Promise(e=>e(n))},setViewportConstrained:C,getViewport:function(){const e=b?(0,s._V)(b.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return b?new Promise(n=>{x?.interpolate("linear"===t?.interpolate?a.A:l.A).scaleTo(ut(b,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)},scaleBy:function(e,t){return b?new Promise(n=>{x?.interpolate("linear"===t?.interpolate?a.A:l.A).scaleBy(ut(b,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)},setScaleExtent:function(e){x?.scaleExtent(e)},setTranslateExtent:function(e){x?.translateExtent(e)},syncViewport:function(e){if(b){const t=at(e),n=b.property("__zoom");n.k===e.zoom&&n.x===e.x&&n.y===e.y||x?.transform(b,t,null,{sync:!0})}},setClickDistance:function(e){const t=!W(e)||e<0?0:e;x?.clickDistance(t)}}}var ft;!function(e){e.Line="line",e.Handle="handle"}(ft||(ft={}));function mt(e,t){return Math.max(0,t-e)}function gt(e,t){return Math.max(0,e-t)}function yt(e,t,n){return Math.max(0,t-e,e-n)}function vt(e,t){return e?!t:t}const xt={width:0,height:0,x:0,y:0},bt={...xt,pointerX:0,pointerY:0,aspectRatio:1};function wt(e,t,n){const o=t.position.x+e.position.x,r=t.position.y+e.position.y,i=e.measured.width??0,s=e.measured.height??0,a=n[0]*i,l=n[1]*s;return[[o-a,r-l],[o+i-a,r+s-l]]}function St(e){let{domNode:t,nodeId:n,getStoreItems:r,onChange:s,onEnd:a}=e;const l=(0,i.A)(t);return{update:function(e){let{controlPosition:t,boundaries:i,keepAspectRatio:c,resizeDirection:d,onResizeStart:u,onResize:h,onResizeEnd:p,shouldResize:f}=e,m={...xt},g={...bt};const y=function(e){return{isHorizontal:e.includes("right")||e.includes("left"),isVertical:e.includes("bottom")||e.includes("top"),affectsX:e.includes("left"),affectsY:e.includes("top")}}(t);let v,x,b,w,S=null,k=[];const E=(0,o.A)().on("start",e=>{const{nodeLookup:t,transform:o,snapGrid:i,snapToGrid:s,nodeOrigin:a,paneDomNode:l}=r();if(v=t.get(n),!v)return;S=l?.getBoundingClientRect()??null;const{xSnapped:c,ySnapped:d}=ae(e.sourceEvent,{transform:o,snapGrid:i,snapToGrid:s,containerBounds:S});m={width:v.measured.width??0,height:v.measured.height??0,x:v.position.x??0,y:v.position.y??0},g={...m,pointerX:c,pointerY:d,aspectRatio:m.width/m.height},x=void 0,v.parentId&&("parent"===v.extent||v.expandParent)&&(x=t.get(v.parentId),b=x&&"parent"===v.extent?function(e){return[[0,0],[e.measured.width,e.measured.height]]}(x):void 0),k=[],w=void 0;for(const[r,u]of t)if(u.parentId===n&&(k.push({id:r,position:{...u.position},extent:u.extent}),"parent"===u.extent||u.expandParent)){const e=wt(u,v,u.origin??a);w=w?[[Math.min(e[0][0],w[0][0]),Math.min(e[0][1],w[0][1])],[Math.max(e[1][0],w[1][0]),Math.max(e[1][1],w[1][1])]]:e}u?.(e,{...m})}).on("drag",e=>{const{transform:t,snapGrid:n,snapToGrid:o,nodeOrigin:a}=r(),l=ae(e.sourceEvent,{transform:t,snapGrid:n,snapToGrid:o,containerBounds:S}),u=[];if(!v)return;const{x:p,y:E,width:C,height:M}=m,O={},T=v.origin??a,{width:A,height:N,x:P,y:D}=function(e,t,n,o,r,i,s,a){let{affectsX:l,affectsY:c}=t;const{isHorizontal:d,isVertical:u}=t,h=d&&u,{xSnapped:p,ySnapped:f}=n,{minWidth:m,maxWidth:g,minHeight:y,maxHeight:v}=o,{x:x,y:b,width:w,height:S,aspectRatio:k}=e;let E=Math.floor(d?p-e.pointerX:0),C=Math.floor(u?f-e.pointerY:0);const M=w+(l?-E:E),O=S+(c?-C:C),T=-i[0]*w,A=-i[1]*S;let N=yt(M,m,g),P=yt(O,y,v);if(s){let e=0,t=0;l&&E<0?e=mt(x+E+T,s[0][0]):!l&&E>0&&(e=gt(x+M+T,s[1][0])),c&&C<0?t=mt(b+C+A,s[0][1]):!c&&C>0&&(t=gt(b+O+A,s[1][1])),N=Math.max(N,e),P=Math.max(P,t)}if(a){let e=0,t=0;l&&E>0?e=gt(x+E,a[0][0]):!l&&E<0&&(e=mt(x+M,a[1][0])),c&&C>0?t=gt(b+C,a[0][1]):!c&&C<0&&(t=mt(b+O,a[1][1])),N=Math.max(N,e),P=Math.max(P,t)}if(r){if(d){const e=yt(M/k,y,v)*k;if(N=Math.max(N,e),s){let e=0;e=!l&&!c||l&&!c&&h?gt(b+A+M/k,s[1][1])*k:mt(b+A+(l?E:-E)/k,s[0][1])*k,N=Math.max(N,e)}if(a){let e=0;e=!l&&!c||l&&!c&&h?mt(b+M/k,a[1][1])*k:gt(b+(l?E:-E)/k,a[0][1])*k,N=Math.max(N,e)}}if(u){const e=yt(O*k,m,g)/k;if(P=Math.max(P,e),s){let e=0;e=!l&&!c||c&&!l&&h?gt(x+O*k+T,s[1][0])/k:mt(x+(c?C:-C)*k+T,s[0][0])/k,P=Math.max(P,e)}if(a){let e=0;e=!l&&!c||c&&!l&&h?mt(x+O*k,a[1][0])/k:gt(x+(c?C:-C)*k,a[0][0])/k,P=Math.max(P,e)}}}C+=C<0?P:-P,E+=E<0?N:-N,r&&(h?M>O*k?C=(vt(l,c)?-E:E)/k:E=(vt(l,c)?-C:C)*k:d?(C=E/k,c=l):(E=C*k,l=c));const D=l?x+E:x,R=c?b+C:b;return{width:w+(l?-E:E),height:S+(c?-C:C),x:i[0]*E*(l?-1:1)+D,y:i[1]*C*(c?-1:1)+R}}(g,y,l,i,c,T,b,w),R=A!==C,I=N!==M,L=P!==p&&R,j=D!==E&&I;if(!L&&!j&&!R&&!I)return;if((L||j||1===T[0]||1===T[1])&&(O.x=L?P:m.x,O.y=j?D:m.y,m.x=O.x,m.y=O.y,k.length>0)){const e=P-p,t=D-E;for(const n of k)n.position={x:n.position.x-e+T[0]*(A-C),y:n.position.y-t+T[1]*(N-M)},u.push(n)}if((R||I)&&(O.width=!R||d&&"horizontal"!==d?m.width:A,O.height=!I||d&&"vertical"!==d?m.height:N,m.width=O.width,m.height=O.height),x&&v.expandParent){const e=T[0]*(O.width??0);O.x&&O.x<e&&(m.x=e,g.x=g.x-(O.x-e));const t=T[1]*(O.height??0);O.y&&O.y<t&&(m.y=t,g.y=g.y-(O.y-t))}const B=function(e){let{width:t,prevWidth:n,height:o,prevHeight:r,affectsX:i,affectsY:s}=e;const a=t-n,l=o-r,c=[a>0?1:a<0?-1:0,l>0?1:l<0?-1:0];return a&&i&&(c[0]=-1*c[0]),l&&s&&(c[1]=-1*c[1]),c}({width:m.width,prevWidth:C,height:m.height,prevHeight:M,affectsX:y.affectsX,affectsY:y.affectsY}),_={...m,direction:B},V=f?.(e,_);!1!==V&&(h?.(e,_),s(O,u))}).on("end",e=>{p?.(e,{...m}),a?.({...m})});l.call(E)},destroy:function(){l.on(".drag",null)}}}},7784:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var o=n(5043);const r=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()},s=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const l=(0,o.forwardRef)((e,t)=>{let{color:n="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:c,className:d="",children:u,iconNode:h,...p}=e;return(0,o.createElement)("svg",{ref:t,...a,width:r,height:r,stroke:n,strokeWidth:c?24*Number(l)/Number(r):l,className:i("lucide",d),...!u&&!s(p)&&{"aria-hidden":"true"},...p},[...h.map(e=>{let[t,n]=e;return(0,o.createElement)(t,n)}),...Array.isArray(u)?u:[u]])}),c=(e,t)=>{const n=(0,o.forwardRef)((n,s)=>{let{className:a,...c}=n;return(0,o.createElement)(l,{ref:s,iconNode:t,className:i(`lucide-${d=r(e),d.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,a),...c});var d});return n.displayName=r(e),n}},7819:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},7828:e=>{e.exports=function(){return[]}},7845:(e,t,n)=>{"use strict";n.d(t,{VS:()=>en,tE:()=>Ye,H2:()=>dn,rV:()=>Kt,h7:()=>Ne,of:()=>xn,Gc:()=>Ht,Ln:()=>zt,fM:()=>qt,ck:()=>Wt,VH:()=>he});var o=n(579),r=n(5043);function i(e){if("string"===typeof e||"number"===typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,o=0;o<e.length;o++)""!==(n=i(e[o]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var s=n(7782),a=n(8443);const l=e=>{let t;const n=new Set,o=(e,o)=>{const r="function"===typeof e?e(t):e;if(!Object.is(r,t)){const e=t;t=(null!=o?o:"object"!==typeof r||null===r)?r:Object.assign({},t,r),n.forEach(n=>n(t,e))}},r=()=>t,i={setState:o,getState:r,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},s=t=e(o,r,i);return i},c=e=>e?l(e):l;const{useDebugValue:d}=r,{useSyncExternalStoreWithSelector:u}=a,h=e=>e;function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,n=arguments.length>2?arguments[2]:void 0;const o=u(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return d(o),o}const f=(e,t)=>{const n=c(e),o=function(e){return p(n,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:t)};return Object.assign(o,n),o};function m(e,t){if(Object.is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,o]of e)if(!Object.is(o,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}var g=n(7950);const y=(0,r.createContext)(null),v=y.Provider,x=s.xc.error001();function b(e,t){const n=(0,r.useContext)(y);if(null===n)throw new Error(x);return p(n,e,t)}function w(){const e=(0,r.useContext)(y);if(null===e)throw new Error(x);return(0,r.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const S={display:"none"},k={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},E="react-flow__node-desc",C="react-flow__edge-desc",M=e=>e.ariaLiveMessage,O=e=>e.ariaLabelConfig;function T(e){let{rfId:t}=e;const n=b(M);return(0,o.jsx)("div",{id:`react-flow__aria-live-${t}`,"aria-live":"assertive","aria-atomic":"true",style:k,children:n})}function A(e){let{rfId:t,disableKeyboardA11y:n}=e;const r=b(O);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{id:`${E}-${t}`,style:S,children:n?r["node.a11yDescription.default"]:r["node.a11yDescription.keyboardDisabled"]}),(0,o.jsx)("div",{id:`${C}-${t}`,style:S,children:r["edge.a11yDescription.default"]}),!n&&(0,o.jsx)(T,{rfId:t})]})}const N=(0,r.forwardRef)((e,t)=>{let{position:n="top-left",children:r,className:s,style:a,...l}=e;const c=`${n}`.split("-");return(0,o.jsx)("div",{className:i(["react-flow__panel",s,...c]),style:a,ref:t,...l,children:r})});function P(e){let{proOptions:t,position:n="bottom-right"}=e;return t?.hideAttribution?null:(0,o.jsx)(N,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,o.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}N.displayName="Panel";const D=e=>{const t=[],n=[];for(const[,o]of e.nodeLookup)o.selected&&t.push(o.internals.userNode);for(const[,o]of e.edgeLookup)o.selected&&n.push(o);return{selectedNodes:t,selectedEdges:n}},R=e=>e.id;function I(e,t){return m(e.selectedNodes.map(R),t.selectedNodes.map(R))&&m(e.selectedEdges.map(R),t.selectedEdges.map(R))}function L(e){let{onSelectionChange:t}=e;const n=w(),{selectedNodes:o,selectedEdges:i}=b(D,I);return(0,r.useEffect)(()=>{const e={nodes:o,edges:i};t?.(e),n.getState().onSelectionChangeHandlers.forEach(t=>t(e))},[o,i,t]),null}const j=e=>!!e.onSelectionChangeHandlers;function B(e){let{onSelectionChange:t}=e;const n=b(j);return t||n?(0,o.jsx)(L,{onSelectionChange:t}):null}const _=[0,0],V={x:0,y:0,zoom:1},z=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig","rfId"],F=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),$={translateExtent:s.ZO,nodeOrigin:_,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function H(e){const{setNodes:t,setEdges:n,setMinZoom:o,setMaxZoom:i,setTranslateExtent:a,setNodeExtent:l,reset:c,setDefaultNodesAndEdges:d,setPaneClickDistance:u}=b(F,m),h=w();(0,r.useEffect)(()=>(d(e.defaultNodes,e.defaultEdges),()=>{p.current=$,c()}),[]);const p=(0,r.useRef)($);return(0,r.useEffect)(()=>{for(const r of z){const c=e[r];c!==p.current[r]&&("undefined"!==typeof e[r]&&("nodes"===r?t(c):"edges"===r?n(c):"minZoom"===r?o(c):"maxZoom"===r?i(c):"translateExtent"===r?a(c):"nodeExtent"===r?l(c):"paneClickDistance"===r?u(c):"ariaLabelConfig"===r?h.setState({ariaLabelConfig:(0,s.Q6)(c)}):"fitView"===r?h.setState({fitViewQueued:c}):"fitViewOptions"===r?h.setState({fitViewOptions:c}):h.setState({[r]:c})))}p.current=e},z.map(t=>e[t])),null}function U(){return"undefined"!==typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}const K="undefined"!==typeof document?document:null;function W(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{target:K,actInsideInputWithModifier:!0};const[n,o]=(0,r.useState)(!1),i=(0,r.useRef)(!1),a=(0,r.useRef)(new Set([])),[l,c]=(0,r.useMemo)(()=>{if(null!==e){const t=(Array.isArray(e)?e:[e]).filter(e=>"string"===typeof e).map(e=>e.replace("+","\n").replace("\n\n","\n+").split("\n")),n=t.reduce((e,t)=>e.concat(...t),[]);return[t,n]}return[[],[]]},[e]);return(0,r.useEffect)(()=>{const n=t?.target??K,r=t?.actInsideInputWithModifier??!0;if(null!==e){const e=e=>{i.current=e.ctrlKey||e.metaKey||e.shiftKey||e.altKey;if((!i.current||i.current&&!r)&&(0,s.v5)(e))return!1;const n=J(e.code,c);if(a.current.add(e[n]),q(l,a.current,!1)){const n=e.composedPath?.()?.[0]||e.target,r="BUTTON"===n?.nodeName||"A"===n?.nodeName;!1===t.preventDefault||!i.current&&r||e.preventDefault(),o(!0)}},d=e=>{const t=J(e.code,c);q(l,a.current,!0)?(o(!1),a.current.clear()):a.current.delete(e[t]),"Meta"===e.key&&a.current.clear(),i.current=!1},u=()=>{a.current.clear(),o(!1)};return n?.addEventListener("keydown",e),n?.addEventListener("keyup",d),window.addEventListener("blur",u),window.addEventListener("contextmenu",u),()=>{n?.removeEventListener("keydown",e),n?.removeEventListener("keyup",d),window.removeEventListener("blur",u),window.removeEventListener("contextmenu",u)}}},[e,o]),n}function q(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function J(e,t){return t.includes(e)?"code":"key"}const X=()=>{const e=w();return(0,r.useMemo)(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[o,r,i],panZoom:s}=e.getState();return s?(await s.setViewport({x:t.x??o,y:t.y??r,zoom:t.zoom??i},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},setCenter:async(t,n,o)=>e.getState().setCenter(t,n,o),fitBounds:async(t,n)=>{const{width:o,height:r,minZoom:i,maxZoom:a,panZoom:l}=e.getState(),c=(0,s.R4)(t,o,r,i,a,n?.padding??.1);return l?(await l.setViewport(c,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{transform:o,snapGrid:r,snapToGrid:i,domNode:a}=e.getState();if(!a)return t;const{x:l,y:c}=a.getBoundingClientRect(),d={x:t.x-l,y:t.y-c},u=n.snapGrid??r,h=n.snapToGrid??i;return(0,s.Ff)(d,o,h,u)},flowToScreenPosition:t=>{const{transform:n,domNode:o}=e.getState();if(!o)return t;const{x:r,y:i}=o.getBoundingClientRect(),a=(0,s.zj)(t,n);return{x:a.x+r,y:a.y+i}}}),[])};function Z(e,t){const n=[],o=new Map,r=[];for(const i of e)if("add"!==i.type)if("remove"===i.type||"replace"===i.type)o.set(i.id,[i]);else{const e=o.get(i.id);e?e.push(i):o.set(i.id,[i])}else r.push(i);for(const i of t){const e=o.get(i.id);if(!e){n.push(i);continue}if("remove"===e[0].type)continue;if("replace"===e[0].type){n.push({...e[0].item});continue}const t={...i};for(const n of e)Y(n,t);n.push(t)}return r.length&&r.forEach(e=>{void 0!==e.index?n.splice(e.index,0,{...e.item}):n.push({...e.item})}),n}function Y(e,t){switch(e.type){case"select":t.selected=e.selected;break;case"position":"undefined"!==typeof e.position&&(t.position=e.position),"undefined"!==typeof e.dragging&&(t.dragging=e.dragging);break;case"dimensions":"undefined"!==typeof e.dimensions&&(t.measured??={},t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(!0!==e.setAttributes&&"width"!==e.setAttributes||(t.width=e.dimensions.width),!0!==e.setAttributes&&"height"!==e.setAttributes||(t.height=e.dimensions.height))),"boolean"===typeof e.resizing&&(t.resizing=e.resizing)}}function G(e,t){return Z(e,t)}function Q(e,t){return Z(e,t)}function ee(e,t){return{id:e,type:"select",selected:t}}function te(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=[];for(const[r,i]of e){const e=t.has(r);void 0===i.selected&&!e||i.selected===e||(n&&(i.selected=e),o.push(ee(i.id,e)))}return o}function ne(e){let{items:t=[],lookup:n}=e;const o=[],r=new Map(t.map(e=>[e.id,e]));for(const[i,s]of t.entries()){const e=n.get(s.id),t=e?.internals?.userNode??e;void 0!==t&&t!==s&&o.push({id:s.id,item:s,type:"replace"}),void 0===t&&o.push({item:s,type:"add",index:i})}for(const[i]of n){void 0===r.get(i)&&o.push({id:i,type:"remove"})}return o}function oe(e){return{id:e.id,type:"remove"}}const re=e=>(0,s.oB)(e),ie=e=>(0,s.b$)(e);function se(e){return(0,r.forwardRef)(e)}const ae="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;function le(e){const[t,n]=(0,r.useState)(BigInt(0)),[o]=(0,r.useState)(()=>function(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}(()=>n(e=>e+BigInt(1))));return ae(()=>{const t=o.get();t.length&&(e(t),o.reset())},[t]),o}const ce=(0,r.createContext)(null);function de(e){let{children:t}=e;const n=w(),i=le((0,r.useCallback)(e=>{const{nodes:t=[],setNodes:o,hasDefaultNodes:r,onNodesChange:i,nodeLookup:s,fitViewQueued:a}=n.getState();let l=t;for(const n of e)l="function"===typeof n?n(l):n;const c=ne({items:l,lookup:s});r&&o(l),c.length>0?i?.(c):a&&window.requestAnimationFrame(()=>{const{fitViewQueued:e,nodes:t,setNodes:o}=n.getState();e&&o(t)})},[])),s=le((0,r.useCallback)(e=>{const{edges:t=[],setEdges:o,hasDefaultEdges:r,onEdgesChange:i,edgeLookup:s}=n.getState();let a=t;for(const n of e)a="function"===typeof n?n(a):n;r?o(a):i&&i(ne({items:a,lookup:s}))},[])),a=(0,r.useMemo)(()=>({nodeQueue:i,edgeQueue:s}),[]);return(0,o.jsx)(ce.Provider,{value:a,children:t})}const ue=e=>!!e.panZoom;function he(){const e=X(),t=w(),n=function(){const e=(0,r.useContext)(ce);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}(),o=b(ue),i=(0,r.useMemo)(()=>{const e=e=>t.getState().nodeLookup.get(e),o=e=>{n.nodeQueue.push(e)},r=e=>{n.edgeQueue.push(e)},i=e=>{const{nodeLookup:n,nodeOrigin:o}=t.getState(),r=re(e)?e:n.get(e.id),i=r.parentId?(0,s.us)(r.position,r.measured,r.parentId,n,o):r.position,a={...r,position:i,width:r.measured?.width??r.width,height:r.measured?.height??r.height};return(0,s.kM)(a)},a=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};o(o=>o.map(o=>{if(o.id===e){const e="function"===typeof t?t(o):t;return n.replace&&re(e)?e:{...o,...e}}return o}))},l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};r(o=>o.map(o=>{if(o.id===e){const e="function"===typeof t?t(o):t;return n.replace&&ie(e)?e:{...o,...e}}return o}))};return{getNodes:()=>t.getState().nodes.map(e=>({...e})),getNode:t=>e(t)?.internals.userNode,getInternalNode:e,getEdges:()=>{const{edges:e=[]}=t.getState();return e.map(e=>({...e}))},getEdge:e=>t.getState().edgeLookup.get(e),setNodes:o,setEdges:r,addNodes:e=>{const t=Array.isArray(e)?e:[e];n.nodeQueue.push(e=>[...e,...t])},addEdges:e=>{const t=Array.isArray(e)?e:[e];n.edgeQueue.push(e=>[...e,...t])},toObject:()=>{const{nodes:e=[],edges:n=[],transform:o}=t.getState(),[r,i,s]=o;return{nodes:e.map(e=>({...e})),edges:n.map(e=>({...e})),viewport:{x:r,y:i,zoom:s}}},deleteElements:async e=>{let{nodes:n=[],edges:o=[]}=e;const{nodes:r,edges:i,onNodesDelete:a,onEdgesDelete:l,triggerNodeChanges:c,triggerEdgeChanges:d,onDelete:u,onBeforeDelete:h}=t.getState(),{nodes:p,edges:f}=await(0,s.Tq)({nodesToRemove:n,edgesToRemove:o,nodes:r,edges:i,onBeforeDelete:h}),m=f.length>0,g=p.length>0;if(m){const e=f.map(oe);l?.(f),d(e)}if(g){const e=p.map(oe);a?.(p),c(e)}return(g||m)&&u?.({nodes:p,edges:f}),{deletedNodes:p,deletedEdges:f}},getIntersectingNodes:function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2?arguments[2]:void 0;const r=(0,s.mW)(e),a=r?e:i(e),l=void 0!==o;return a?(o||t.getState().nodes).filter(o=>{const i=t.getState().nodeLookup.get(o.id);if(i&&!r&&(o.id===e.id||!i.internals.positionAbsolute))return!1;const c=(0,s.kM)(l?o:i),d=(0,s.X6)(c,a);return n&&d>0||d>=c.width*c.height||d>=a.width*a.height}):[]},isNodeIntersecting:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const o=(0,s.mW)(e)?e:i(e);if(!o)return!1;const r=(0,s.X6)(o,t);return n&&r>0||r>=o.width*o.height},updateNode:a,updateNodeData:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};a(e,e=>{const o="function"===typeof t?t(e):t;return n.replace?{...e,data:o}:{...e,data:{...e.data,...o}}},n)},updateEdge:l,updateEdgeData:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};l(e,e=>{const o="function"===typeof t?t(e):t;return n.replace?{...e,data:o}:{...e,data:{...e.data,...o}}},n)},getNodesBounds:e=>{const{nodeLookup:n,nodeOrigin:o}=t.getState();return(0,s.Jo)(e,{nodeLookup:n,nodeOrigin:o})},getHandleConnections:e=>{let{type:n,id:o,nodeId:r}=e;return Array.from(t.getState().connectionLookup.get(`${r}-${n}${o?`-${o}`:""}`)?.values()??[])},getNodeConnections:e=>{let{type:n,handleId:o,nodeId:r}=e;return Array.from(t.getState().connectionLookup.get(`${r}${n?o?`-${n}-${o}`:`-${n}`:""}`)?.values()??[])},fitView:async e=>{const o=t.getState().fitViewResolver??(0,s.YN)();return t.setState({fitViewQueued:!0,fitViewOptions:e,fitViewResolver:o}),n.nodeQueue.push(e=>[...e]),o.promise}}},[]);return(0,r.useMemo)(()=>({...i,...e,viewportInitialized:o}),[o])}const pe=e=>e.selected,fe="undefined"!==typeof window?window:void 0;const me={position:"absolute",width:"100%",height:"100%",top:0,left:0},ge=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function ye(e){let{onPaneContextMenu:t,zoomOnScroll:n=!0,zoomOnPinch:i=!0,panOnScroll:a=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=s.ny.Free,zoomOnDoubleClick:d=!0,panOnDrag:u=!0,defaultViewport:h,translateExtent:p,minZoom:f,maxZoom:g,zoomActivationKeyCode:y,preventScrolling:v=!0,children:x,noWheelClassName:S,noPanClassName:k,onViewportChange:E,isControlledViewport:C,paneClickDistance:M}=e;const O=w(),T=(0,r.useRef)(null),{userSelectionActive:A,lib:N}=b(ge,m),P=W(y),D=(0,r.useRef)();!function(e){const t=w();(0,r.useEffect)(()=>{const n=()=>{if(!e.current)return!1;const n=(0,s.Eo)(e.current);0!==n.height&&0!==n.width||t.getState().onError?.("004",s.xc.error004()),t.setState({width:n.width||500,height:n.height||500})};if(e.current){n(),window.addEventListener("resize",n);const t=new ResizeObserver(()=>n());return t.observe(e.current),()=>{window.removeEventListener("resize",n),t&&e.current&&t.unobserve(e.current)}}},[])}(T);const R=(0,r.useCallback)(e=>{E?.({x:e[0],y:e[1],zoom:e[2]}),C||O.setState({transform:e})},[E,C]);return(0,r.useEffect)(()=>{if(T.current){D.current=(0,s.kO)({domNode:T.current,minZoom:f,maxZoom:g,translateExtent:p,viewport:h,paneClickDistance:M,onDraggingChange:e=>O.setState({paneDragging:e}),onPanZoomStart:(e,t)=>{const{onViewportChangeStart:n,onMoveStart:o}=O.getState();o?.(e,t),n?.(t)},onPanZoom:(e,t)=>{const{onViewportChange:n,onMove:o}=O.getState();o?.(e,t),n?.(t)},onPanZoomEnd:(e,t)=>{const{onViewportChangeEnd:n,onMoveEnd:o}=O.getState();o?.(e,t),n?.(t)}});const{x:e,y:t,zoom:n}=D.current.getViewport();return O.setState({panZoom:D.current,transform:[e,t,n],domNode:T.current.closest(".react-flow")}),()=>{D.current?.destroy()}}},[]),(0,r.useEffect)(()=>{D.current?.update({onPaneContextMenu:t,zoomOnScroll:n,zoomOnPinch:i,panOnScroll:a,panOnScrollSpeed:l,panOnScrollMode:c,zoomOnDoubleClick:d,panOnDrag:u,zoomActivationKeyPressed:P,preventScrolling:v,noPanClassName:k,userSelectionActive:A,noWheelClassName:S,lib:N,onTransformChange:R})},[t,n,i,a,l,c,d,u,P,v,k,A,S,N,R]),(0,o.jsx)("div",{className:"react-flow__renderer",ref:T,style:me,children:x})}const ve=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function xe(){const{userSelectionActive:e,userSelectionRect:t}=b(ve,m);return e&&t?(0,o.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const be=(e,t)=>n=>{n.target===t.current&&e?.(n)},we=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function Se(e){let{isSelecting:t,selectionKeyPressed:n,selectionMode:a=s.Qc.Full,panOnDrag:l,selectionOnDrag:c,onSelectionStart:d,onSelectionEnd:u,onPaneClick:h,onPaneContextMenu:p,onPaneScroll:f,onPaneMouseEnter:g,onPaneMouseMove:y,onPaneMouseLeave:v,children:x}=e;const S=w(),{userSelectionActive:k,elementsSelectable:E,dragging:C,connectionInProgress:M}=b(we,m),O=E&&(t||k),T=(0,r.useRef)(null),A=(0,r.useRef)(),N=(0,r.useRef)(new Set),P=(0,r.useRef)(new Set),D=(0,r.useRef)(!1),R=(0,r.useRef)(!1),I=e=>{D.current||M?D.current=!1:(h?.(e),S.getState().resetSelectedElements(),S.setState({nodesSelectionActive:!1}))},L=f?e=>f(e):void 0,j=!0===l||Array.isArray(l)&&l.includes(0);return(0,o.jsxs)("div",{className:i(["react-flow__pane",{draggable:j,dragging:C,selection:t}]),onClick:O?void 0:be(I,T),onContextMenu:be(e=>{Array.isArray(l)&&l?.includes(2)?e.preventDefault():p?.(e)},T),onWheel:be(L,T),onPointerEnter:O?void 0:g,onPointerDown:O?e=>{const{resetSelectedElements:n,domNode:o}=S.getState();if(A.current=o?.getBoundingClientRect(),!E||!t||0!==e.button||e.target!==T.current||!A.current)return;e.target?.setPointerCapture?.(e.pointerId),R.current=!0,D.current=!1;const{x:r,y:i}=(0,s.q1)(e.nativeEvent,A.current);n(),S.setState({userSelectionRect:{width:0,height:0,startX:r,startY:i,x:r,y:i}}),d?.(e)}:y,onPointerMove:O?e=>{const{userSelectionRect:t,transform:n,nodeLookup:o,edgeLookup:r,connectionLookup:i,triggerNodeChanges:l,triggerEdgeChanges:c,defaultEdgeOptions:d}=S.getState();if(!A.current||!t)return;D.current=!0;const{x:u,y:h}=(0,s.q1)(e.nativeEvent,A.current),{startX:p,startY:f}=t,m={startX:p,startY:f,x:u<p?u:p,y:h<f?h:f,width:Math.abs(u-p),height:Math.abs(h-f)},g=N.current,y=P.current;N.current=new Set((0,s.U$)(o,m,n,a===s.Qc.Partial,!0).map(e=>e.id)),P.current=new Set;const v=d?.selectable??!0;for(const s of N.current){const e=i.get(s);if(e)for(const{edgeId:t}of e.values()){const e=r.get(t);e&&(e.selectable??v)&&P.current.add(t)}}if(!(0,s._s)(g,N.current)){l(te(o,N.current,!0))}if(!(0,s._s)(y,P.current)){c(te(r,P.current))}S.setState({userSelectionRect:m,userSelectionActive:!0,nodesSelectionActive:!1})}:y,onPointerUp:O?e=>{if(0!==e.button||!R.current)return;e.target?.releasePointerCapture?.(e.pointerId);const{userSelectionRect:t}=S.getState();!k&&t&&e.target===T.current&&I?.(e),S.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:N.current.size>0}),u?.(e),(n||c)&&(D.current=!1),R.current=!1}:void 0,onPointerLeave:v,ref:T,style:me,children:[x,(0,o.jsx)(xe,{})]})}function ke(e){let{id:t,store:n,unselect:o=!1,nodeRef:r}=e;const{addSelectedNodes:i,unselectNodesAndEdges:a,multiSelectionActive:l,nodeLookup:c,onError:d}=n.getState(),u=c.get(t);u?(n.setState({nodesSelectionActive:!1}),u.selected?(o||u.selected&&l)&&(a({nodes:[u],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([t])):d?.("012",s.xc.error012(t))}function Ee(e){let{nodeRef:t,disabled:n=!1,noDragClassName:o,handleSelector:i,nodeId:a,isSelectable:l,nodeClickDistance:c}=e;const d=w(),[u,h]=(0,r.useState)(!1),p=(0,r.useRef)();return(0,r.useEffect)(()=>{p.current=(0,s.I$)({getStoreItems:()=>d.getState(),onNodeMouseDown:e=>{ke({id:e,store:d,nodeRef:t})},onDragStart:()=>{h(!0)},onDragStop:()=>{h(!1)}})},[]),(0,r.useEffect)(()=>{if(n)p.current?.destroy();else if(t.current)return p.current?.update({noDragClassName:o,handleSelector:i,domNode:t.current,isSelectable:l,nodeId:a,nodeClickDistance:c}),()=>{p.current?.destroy()}},[o,i,n,l,t,a]),u}function Ce(){const e=w();return(0,r.useCallback)(t=>{const{nodeExtent:n,snapToGrid:o,snapGrid:r,nodesDraggable:i,onError:a,updateNodePositions:l,nodeLookup:c,nodeOrigin:d}=e.getState(),u=new Map,h=(e=>t=>t.selected&&(t.draggable||e&&"undefined"===typeof t.draggable))(i),p=o?r[0]:5,f=o?r[1]:5,m=t.direction.x*p*t.factor,g=t.direction.y*f*t.factor;for(const[,e]of c){if(!h(e))continue;let t={x:e.internals.positionAbsolute.x+m,y:e.internals.positionAbsolute.y+g};o&&(t=(0,s.s_)(t,r));const{position:i,positionAbsolute:l}=(0,s.aE)({nodeId:e.id,nextPosition:t,nodeLookup:c,nodeExtent:n,nodeOrigin:d,onError:a});e.position=i,e.internals.positionAbsolute=l,u.set(e.id,e)}l(u)},[])}const Me=(0,r.createContext)(null),Oe=Me.Provider;Me.Consumer;const Te=()=>(0,r.useContext)(Me),Ae=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId});const Ne=(0,r.memo)(se(function(e,t){let{type:n="source",position:r=s.yX.Top,isValidConnection:a,isConnectable:l=!0,isConnectableStart:c=!0,isConnectableEnd:d=!0,id:u,onConnect:h,children:p,className:f,onMouseDown:g,onTouchStart:y,...v}=e;const x=u||null,S="target"===n,k=w(),E=Te(),{connectOnClick:C,noPanClassName:M,rfId:O}=b(Ae,m),{connectingFrom:T,connectingTo:A,clickConnecting:N,isPossibleEndHandle:P,connectionInProcess:D,clickConnectionInProcess:R,valid:I}=b(((e,t,n)=>o=>{const{connectionClickStartHandle:r,connectionMode:i,connection:a}=o,{fromHandle:l,toHandle:c,isValid:d}=a,u=c?.nodeId===e&&c?.id===t&&c?.type===n;return{connectingFrom:l?.nodeId===e&&l?.id===t&&l?.type===n,connectingTo:u,clickConnecting:r?.nodeId===e&&r?.id===t&&r?.type===n,isPossibleEndHandle:i===s.WZ.Strict?l?.type!==n:e!==l?.nodeId||t!==l?.id,connectionInProcess:!!l,clickConnectionInProcess:!!r,valid:u&&d}})(E,x,n),m);E||k.getState().onError?.("010",s.xc.error010());const L=e=>{const{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:o}=k.getState(),r={...t,...e};if(o){const{edges:e,setEdges:t}=k.getState();t((0,s.rN)(r,e))}n?.(r),h?.(r)},j=e=>{if(!E)return;const t=(0,s.Er)(e.nativeEvent);if(c&&(t&&0===e.button||!t)){const t=k.getState();s.aQ.onPointerDown(e.nativeEvent,{autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:S,handleId:x,nodeId:E,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:L,isValidConnection:a||t.isValidConnection,getTransform:()=>k.getState().transform,getFromHandle:()=>k.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed,dragThreshold:t.connectionDragThreshold})}t?g?.(e):y?.(e)};return(0,o.jsx)("div",{"data-handleid":x,"data-nodeid":E,"data-handlepos":r,"data-id":`${O}-${E}-${x}-${n}`,className:i(["react-flow__handle",`react-flow__handle-${r}`,"nodrag",M,f,{source:!S,target:S,connectable:l,connectablestart:c,connectableend:d,clickconnecting:N,connectingfrom:T,connectingto:A,valid:I,connectionindicator:l&&(!D||P)&&(D||R?d:c)}]),onMouseDown:j,onTouchStart:j,onClick:C?e=>{const{onClickConnectStart:t,onClickConnectEnd:o,connectionClickStartHandle:r,connectionMode:i,isValidConnection:l,lib:d,rfId:u,nodeLookup:h,connection:p}=k.getState();if(!E||!r&&!c)return;if(!r)return t?.(e.nativeEvent,{nodeId:E,handleId:x,handleType:n}),void k.setState({connectionClickStartHandle:{nodeId:E,type:n,id:x}});const f=(0,s.oj)(e.target),m=a||l,{connection:g,isValid:y}=s.aQ.isValid(e.nativeEvent,{handle:{nodeId:E,id:x,type:n},connectionMode:i,fromNodeId:r.nodeId,fromHandleId:r.id||null,fromType:r.type,isValidConnection:m,flowId:u,doc:f,lib:d,nodeLookup:h});y&&g&&L(g);const v=structuredClone(p);delete v.inProgress,v.toPosition=v.toHandle?v.toHandle.position:null,o?.(e,v),k.setState({connectionClickStartHandle:null})}:void 0,ref:t,...v,children:p})}));const Pe={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},De={input:function(e){let{data:t,isConnectable:n,sourcePosition:r=s.yX.Bottom}=e;return(0,o.jsxs)(o.Fragment,{children:[t?.label,(0,o.jsx)(Ne,{type:"source",position:r,isConnectable:n})]})},default:function(e){let{data:t,isConnectable:n,targetPosition:r=s.yX.Top,sourcePosition:i=s.yX.Bottom}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ne,{type:"target",position:r,isConnectable:n}),t?.label,(0,o.jsx)(Ne,{type:"source",position:i,isConnectable:n})]})},output:function(e){let{data:t,isConnectable:n,targetPosition:r=s.yX.Top}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ne,{type:"target",position:r,isConnectable:n}),t?.label]})},group:function(){return null}};const Re=e=>{const{width:t,height:n,x:o,y:r}=(0,s.aZ)(e.nodeLookup,{filter:e=>!!e.selected});return{width:(0,s.kf)(t)?t:null,height:(0,s.kf)(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${r}px)`}};function Ie(e){let{onSelectionContextMenu:t,noPanClassName:n,disableKeyboardA11y:s}=e;const a=w(),{width:l,height:c,transformString:d,userSelectionActive:u}=b(Re,m),h=Ce(),p=(0,r.useRef)(null);if((0,r.useEffect)(()=>{s||p.current?.focus({preventScroll:!0})},[s]),Ee({nodeRef:p}),u||!l||!c)return null;const f=t?e=>{const n=a.getState().nodes.filter(e=>e.selected);t(e,n)}:void 0;return(0,o.jsx)("div",{className:i(["react-flow__nodesselection","react-flow__container",n]),style:{transform:d},children:(0,o.jsx)("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:s?void 0:-1,onKeyDown:s?void 0:e=>{Object.prototype.hasOwnProperty.call(Pe,e.key)&&(e.preventDefault(),h({direction:Pe[e.key],factor:e.shiftKey?4:1}))},style:{width:l,height:c}})})}const Le="undefined"!==typeof window?window:void 0,je=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Be(e){let{children:t,onPaneClick:n,onPaneMouseEnter:i,onPaneMouseMove:s,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,paneClickDistance:d,deleteKeyCode:u,selectionKeyCode:h,selectionOnDrag:p,selectionMode:f,onSelectionStart:m,onSelectionEnd:g,multiSelectionKeyCode:y,panActivationKeyCode:v,zoomActivationKeyCode:x,elementsSelectable:S,zoomOnScroll:k,zoomOnPinch:E,panOnScroll:C,panOnScrollSpeed:M,panOnScrollMode:O,zoomOnDoubleClick:T,panOnDrag:A,defaultViewport:N,translateExtent:P,minZoom:D,maxZoom:R,preventScrolling:I,onSelectionContextMenu:L,noWheelClassName:j,noPanClassName:B,disableKeyboardA11y:_,onViewportChange:V,isControlledViewport:z}=e;const{nodesSelectionActive:F,userSelectionActive:$}=b(je),H=W(h,{target:Le}),U=W(v,{target:Le}),K=U||A,q=U||C,J=p&&!0!==K,X=H||$||J;return function(e){let{deleteKeyCode:t,multiSelectionKeyCode:n}=e;const o=w(),{deleteElements:i}=he(),s=W(t,{actInsideInputWithModifier:!1}),a=W(n,{target:fe});(0,r.useEffect)(()=>{if(s){const{edges:e,nodes:t}=o.getState();i({nodes:t.filter(pe),edges:e.filter(pe)}),o.setState({nodesSelectionActive:!1})}},[s]),(0,r.useEffect)(()=>{o.setState({multiSelectionActive:a})},[a])}({deleteKeyCode:u,multiSelectionKeyCode:y}),(0,o.jsx)(ye,{onPaneContextMenu:l,elementsSelectable:S,zoomOnScroll:k,zoomOnPinch:E,panOnScroll:q,panOnScrollSpeed:M,panOnScrollMode:O,zoomOnDoubleClick:T,panOnDrag:!H&&K,defaultViewport:N,translateExtent:P,minZoom:D,maxZoom:R,zoomActivationKeyCode:x,preventScrolling:I,noWheelClassName:j,noPanClassName:B,onViewportChange:V,isControlledViewport:z,paneClickDistance:d,children:(0,o.jsxs)(Se,{onSelectionStart:m,onSelectionEnd:g,onPaneClick:n,onPaneMouseEnter:i,onPaneMouseMove:s,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:K,isSelecting:!!X,selectionMode:f,selectionKeyPressed:H,selectionOnDrag:J,children:[t,F&&(0,o.jsx)(Ie,{onSelectionContextMenu:L,noPanClassName:B,disableKeyboardA11y:_})]})})}Be.displayName="FlowRenderer";const _e=(0,r.memo)(Be);function Ve(e){return b((0,r.useCallback)((e=>t=>e?(0,s.U$)(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(e=>e.id):Array.from(t.nodeLookup.keys()))(e),[e]),m)}const ze=e=>e.updateNodeInternals;function Fe(e){let{id:t,onClick:n,onMouseEnter:a,onMouseMove:l,onMouseLeave:c,onContextMenu:d,onDoubleClick:u,nodesDraggable:h,elementsSelectable:p,nodesConnectable:f,nodesFocusable:g,resizeObserver:y,noDragClassName:v,noPanClassName:x,disableKeyboardA11y:S,rfId:k,nodeTypes:C,nodeClickDistance:M,onError:O}=e;const{node:T,internals:A,isParent:N}=b(e=>{const n=e.nodeLookup.get(t),o=e.parentLookup.has(t);return{node:n,internals:n.internals,isParent:o}},m);let P=T.type||"default",D=C?.[P]||De[P];void 0===D&&(O?.("003",s.xc.error003(P)),P="default",D=C?.default||De.default);const R=!!(T.draggable||h&&"undefined"===typeof T.draggable),I=!!(T.selectable||p&&"undefined"===typeof T.selectable),L=!!(T.connectable||f&&"undefined"===typeof T.connectable),j=!!(T.focusable||g&&"undefined"===typeof T.focusable),B=w(),_=(0,s.QE)(T),V=function(e){let{node:t,nodeType:n,hasDimensions:o,resizeObserver:i}=e;const s=w(),a=(0,r.useRef)(null),l=(0,r.useRef)(null),c=(0,r.useRef)(t.sourcePosition),d=(0,r.useRef)(t.targetPosition),u=(0,r.useRef)(n),h=o&&!!t.internals.handleBounds;return(0,r.useEffect)(()=>{!a.current||t.hidden||h&&l.current===a.current||(l.current&&i?.unobserve(l.current),i?.observe(a.current),l.current=a.current)},[h,t.hidden]),(0,r.useEffect)(()=>()=>{l.current&&(i?.unobserve(l.current),l.current=null)},[]),(0,r.useEffect)(()=>{if(a.current){const e=u.current!==n,o=c.current!==t.sourcePosition,r=d.current!==t.targetPosition;(e||o||r)&&(u.current=n,c.current=t.sourcePosition,d.current=t.targetPosition,s.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:a.current,force:!0}]])))}},[t.id,n,t.sourcePosition,t.targetPosition]),a}({node:T,nodeType:P,hasDimensions:_,resizeObserver:y}),z=Ee({nodeRef:V,disabled:T.hidden||!R,noDragClassName:v,handleSelector:T.dragHandle,nodeId:t,isSelectable:I,nodeClickDistance:M}),F=Ce();if(T.hidden)return null;const $=(0,s.uD)(T),H=function(e){return void 0===e.internals.handleBounds?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}(T),U=I||R||n||a||l||c,K=a?e=>a(e,{...A.userNode}):void 0,W=l?e=>l(e,{...A.userNode}):void 0,q=c?e=>c(e,{...A.userNode}):void 0,J=d?e=>d(e,{...A.userNode}):void 0,X=u?e=>u(e,{...A.userNode}):void 0;return(0,o.jsx)("div",{className:i(["react-flow__node",`react-flow__node-${P}`,{[x]:R},T.className,{selected:T.selected,selectable:I,parent:N,draggable:R,dragging:z}]),ref:V,style:{zIndex:A.z,transform:`translate(${A.positionAbsolute.x}px,${A.positionAbsolute.y}px)`,pointerEvents:U?"all":"none",visibility:_?"visible":"hidden",...T.style,...H},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:K,onMouseMove:W,onMouseLeave:q,onContextMenu:J,onClick:e=>{const{selectNodesOnDrag:o,nodeDragThreshold:r}=B.getState();I&&(!o||!R||r>0)&&ke({id:t,store:B,nodeRef:V}),n&&n(e,{...A.userNode})},onDoubleClick:X,onKeyDown:j?e=>{if(!(0,s.v5)(e.nativeEvent)&&!S)if(s.tn.includes(e.key)&&I){const n="Escape"===e.key;ke({id:t,store:B,unselect:n,nodeRef:V})}else if(R&&T.selected&&Object.prototype.hasOwnProperty.call(Pe,e.key)){e.preventDefault();const{ariaLabelConfig:t}=B.getState();B.setState({ariaLiveMessage:t["node.a11yDescription.ariaLiveMessage"]({direction:e.key.replace("Arrow","").toLowerCase(),x:~~A.positionAbsolute.x,y:~~A.positionAbsolute.y})}),F({direction:Pe[e.key],factor:e.shiftKey?4:1})}}:void 0,tabIndex:j?0:void 0,onFocus:j?()=>{if(S||!V.current?.matches(":focus-visible"))return;const{transform:e,width:n,height:o,autoPanOnNodeFocus:r,setCenter:i}=B.getState();if(!r)return;(0,s.U$)(new Map([[t,T]]),{x:0,y:0,width:n,height:o},e,!0).length>0||i(T.position.x+$.width/2,T.position.y+$.height/2,{zoom:e[2]})}:void 0,role:T.ariaRole??(j?"group":void 0),"aria-roledescription":"node","aria-describedby":S?void 0:`${E}-${k}`,"aria-label":T.ariaLabel,...T.domAttributes,children:(0,o.jsx)(Oe,{value:t,children:(0,o.jsx)(D,{id:t,data:T.data,type:P,positionAbsoluteX:A.positionAbsolute.x,positionAbsoluteY:A.positionAbsolute.y,selected:T.selected??!1,selectable:I,draggable:R,deletable:T.deletable??!0,isConnectable:L,sourcePosition:T.sourcePosition,targetPosition:T.targetPosition,dragging:z,dragHandle:T.dragHandle,zIndex:A.z,parentId:T.parentId,...$})})})}const $e=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function He(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:s,onError:a}=b($e,m),l=Ve(e.onlyRenderVisibleElements),c=function(){const e=b(ze),[t]=(0,r.useState)(()=>"undefined"===typeof ResizeObserver?null:new ResizeObserver(t=>{const n=new Map;t.forEach(e=>{const t=e.target.getAttribute("data-id");n.set(t,{id:t,nodeElement:e.target,force:!0})}),e(n)}));return(0,r.useEffect)(()=>()=>{t?.disconnect()},[t]),t}();return(0,o.jsx)("div",{className:"react-flow__nodes",style:me,children:l.map(r=>(0,o.jsx)(Fe,{id:r,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:c,nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:s,nodeClickDistance:e.nodeClickDistance,onError:a},r))})}He.displayName="NodeRenderer";const Ue=(0,r.memo)(He);const Ke={[s.TG.Arrow]:e=>{let{color:t="none",strokeWidth:n=1}=e;return(0,o.jsx)("polyline",{style:{stroke:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"})},[s.TG.ArrowClosed]:e=>{let{color:t="none",strokeWidth:n=1}=e;return(0,o.jsx)("polyline",{style:{stroke:t,fill:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})}};const We=e=>{let{id:t,type:n,color:i,width:a=12.5,height:l=12.5,markerUnits:c="strokeWidth",strokeWidth:d,orient:u="auto-start-reverse"}=e;const h=function(e){const t=w();return(0,r.useMemo)(()=>Object.prototype.hasOwnProperty.call(Ke,e)?Ke[e]:(t.getState().onError?.("009",s.xc.error009(e)),null),[e])}(n);return h?(0,o.jsx)("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${a}`,markerHeight:`${l}`,viewBox:"-10 -10 20 20",markerUnits:c,orient:u,refX:"0",refY:"0",children:(0,o.jsx)(h,{color:i,strokeWidth:d})}):null},qe=e=>{let{defaultColor:t,rfId:n}=e;const i=b(e=>e.edges),a=b(e=>e.defaultEdgeOptions),l=(0,r.useMemo)(()=>(0,s.Hm)(i,{id:n,defaultColor:t,defaultMarkerStart:a?.markerStart,defaultMarkerEnd:a?.markerEnd}),[i,a,n,t]);return l.length?(0,o.jsx)("svg",{className:"react-flow__marker","aria-hidden":"true",children:(0,o.jsx)("defs",{children:l.map(e=>(0,o.jsx)(We,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id))})}):null};qe.displayName="MarkerDefinitions";var Je=(0,r.memo)(qe);function Xe(e){let{x:t,y:n,label:s,labelStyle:a,labelShowBg:l=!0,labelBgStyle:c,labelBgPadding:d=[2,4],labelBgBorderRadius:u=2,children:h,className:p,...f}=e;const[m,g]=(0,r.useState)({x:1,y:0,width:0,height:0}),y=i(["react-flow__edge-textwrapper",p]),v=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(v.current){const e=v.current.getBBox();g({x:e.x,y:e.y,width:e.width,height:e.height})}},[s]),s?(0,o.jsxs)("g",{transform:`translate(${t-m.width/2} ${n-m.height/2})`,className:y,visibility:m.width?"visible":"hidden",...f,children:[l&&(0,o.jsx)("rect",{width:m.width+2*d[0],x:-d[0],y:-d[1],height:m.height+2*d[1],className:"react-flow__edge-textbg",style:c,rx:u,ry:u}),(0,o.jsx)("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:v,style:a,children:s}),h]}):null}Xe.displayName="EdgeText";const Ze=(0,r.memo)(Xe);function Ye(e){let{path:t,labelX:n,labelY:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,interactionWidth:p=20,...f}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{...f,d:t,fill:"none",className:i(["react-flow__edge-path",f.className])}),p&&(0,o.jsx)("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),a&&(0,s.kf)(n)&&(0,s.kf)(r)?(0,o.jsx)(Ze,{x:n,y:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h}):null]})}function Ge(e){let{pos:t,x1:n,y1:o,x2:r,y2:i}=e;return t===s.yX.Left||t===s.yX.Right?[.5*(n+r),o]:[n,.5*(o+i)]}function Qe(e){let{sourceX:t,sourceY:n,sourcePosition:o=s.yX.Bottom,targetX:r,targetY:i,targetPosition:a=s.yX.Top}=e;const[l,c]=Ge({pos:o,x1:t,y1:n,x2:r,y2:i}),[d,u]=Ge({pos:a,x1:r,y1:i,x2:t,y2:n}),[h,p,f,m]=(0,s.e_)({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:l,sourceControlY:c,targetControlX:d,targetControlY:u});return[`M${t},${n} C${l},${c} ${d},${u} ${r},${i}`,h,p,f,m]}function et(e){return(0,r.memo)(t=>{let{id:n,sourceX:r,sourceY:i,targetX:s,targetY:a,sourcePosition:l,targetPosition:c,label:d,labelStyle:u,labelShowBg:h,labelBgStyle:p,labelBgPadding:f,labelBgBorderRadius:m,style:g,markerEnd:y,markerStart:v,interactionWidth:x}=t;const[b,w,S]=Qe({sourceX:r,sourceY:i,sourcePosition:l,targetX:s,targetY:a,targetPosition:c}),k=e.isInternal?void 0:n;return(0,o.jsx)(Ye,{id:k,path:b,labelX:w,labelY:S,label:d,labelStyle:u,labelShowBg:h,labelBgStyle:p,labelBgPadding:f,labelBgBorderRadius:m,style:g,markerEnd:y,markerStart:v,interactionWidth:x})})}const tt=et({isInternal:!1}),nt=et({isInternal:!0});function ot(e){return(0,r.memo)(t=>{let{id:n,sourceX:r,sourceY:i,targetX:a,targetY:l,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:f,style:m,sourcePosition:g=s.yX.Bottom,targetPosition:y=s.yX.Top,markerEnd:v,markerStart:x,pathOptions:b,interactionWidth:w}=t;const[S,k,E]=(0,s.oN)({sourceX:r,sourceY:i,sourcePosition:g,targetX:a,targetY:l,targetPosition:y,borderRadius:b?.borderRadius,offset:b?.offset,stepPosition:b?.stepPosition}),C=e.isInternal?void 0:n;return(0,o.jsx)(Ye,{id:C,path:S,labelX:k,labelY:E,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:f,style:m,markerEnd:v,markerStart:x,interactionWidth:w})})}tt.displayName="SimpleBezierEdge",nt.displayName="SimpleBezierEdgeInternal";const rt=ot({isInternal:!1}),it=ot({isInternal:!0});function st(e){return(0,r.memo)(t=>{let{id:n,...i}=t;const s=e.isInternal?void 0:n;return(0,o.jsx)(rt,{...i,id:s,pathOptions:(0,r.useMemo)(()=>({borderRadius:0,offset:i.pathOptions?.offset}),[i.pathOptions?.offset])})})}rt.displayName="SmoothStepEdge",it.displayName="SmoothStepEdgeInternal";const at=st({isInternal:!1}),lt=st({isInternal:!0});function ct(e){return(0,r.memo)(t=>{let{id:n,sourceX:r,sourceY:i,targetX:a,targetY:l,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:f,style:m,markerEnd:g,markerStart:y,interactionWidth:v}=t;const[x,b,w]=(0,s.ah)({sourceX:r,sourceY:i,targetX:a,targetY:l}),S=e.isInternal?void 0:n;return(0,o.jsx)(Ye,{id:S,path:x,labelX:b,labelY:w,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:f,style:m,markerEnd:g,markerStart:y,interactionWidth:v})})}at.displayName="StepEdge",lt.displayName="StepEdgeInternal";const dt=ct({isInternal:!1}),ut=ct({isInternal:!0});function ht(e){return(0,r.memo)(t=>{let{id:n,sourceX:r,sourceY:i,targetX:a,targetY:l,sourcePosition:c=s.yX.Bottom,targetPosition:d=s.yX.Top,label:u,labelStyle:h,labelShowBg:p,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:g,style:y,markerEnd:v,markerStart:x,pathOptions:b,interactionWidth:w}=t;const[S,k,E]=(0,s.Fp)({sourceX:r,sourceY:i,sourcePosition:c,targetX:a,targetY:l,targetPosition:d,curvature:b?.curvature}),C=e.isInternal?void 0:n;return(0,o.jsx)(Ye,{id:C,path:S,labelX:k,labelY:E,label:u,labelStyle:h,labelShowBg:p,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:g,style:y,markerEnd:v,markerStart:x,interactionWidth:w})})}dt.displayName="StraightEdge",ut.displayName="StraightEdgeInternal";const pt=ht({isInternal:!1}),ft=ht({isInternal:!0});pt.displayName="BezierEdge",ft.displayName="BezierEdgeInternal";const mt={default:ft,straight:ut,step:lt,smoothstep:it,simplebezier:nt},gt={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},yt=(e,t,n)=>n===s.yX.Left?e-t:n===s.yX.Right?e+t:e,vt=(e,t,n)=>n===s.yX.Top?e-t:n===s.yX.Bottom?e+t:e,xt="react-flow__edgeupdater";function bt(e){let{position:t,centerX:n,centerY:r,radius:s=10,onMouseDown:a,onMouseEnter:l,onMouseOut:c,type:d}=e;return(0,o.jsx)("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:c,className:i([xt,`${xt}-${d}`]),cx:yt(n,s,t),cy:vt(r,s,t),r:s,stroke:"transparent",fill:"transparent"})}function wt(e){let{isReconnectable:t,reconnectRadius:n,edge:r,sourceX:i,sourceY:a,targetX:l,targetY:c,sourcePosition:d,targetPosition:u,onReconnect:h,onReconnectStart:p,onReconnectEnd:f,setReconnecting:m,setUpdateHover:g}=e;const y=w(),v=(e,t)=>{if(0!==e.button)return;const{autoPanOnConnect:n,domNode:o,isValidConnection:i,connectionMode:a,connectionRadius:l,lib:c,onConnectStart:d,onConnectEnd:u,cancelConnection:g,nodeLookup:v,rfId:x,panBy:b,updateConnection:w}=y.getState(),S="target"===t.type;s.aQ.onPointerDown(e.nativeEvent,{autoPanOnConnect:n,connectionMode:a,connectionRadius:l,domNode:o,handleId:t.id,nodeId:t.nodeId,nodeLookup:v,isTarget:S,edgeUpdaterType:t.type,lib:c,flowId:x,cancelConnection:g,panBy:b,isValidConnection:i,onConnect:e=>h?.(r,e),onConnectStart:(n,o)=>{m(!0),p?.(e,r,t.type),d?.(n,o)},onConnectEnd:u,onReconnectEnd:(e,n)=>{m(!1),f?.(e,r,t.type,n)},updateConnection:w,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle,dragThreshold:y.getState().connectionDragThreshold})},x=()=>g(!0),b=()=>g(!1);return(0,o.jsxs)(o.Fragment,{children:[(!0===t||"source"===t)&&(0,o.jsx)(bt,{position:d,centerX:i,centerY:a,radius:n,onMouseDown:e=>v(e,{nodeId:r.target,id:r.targetHandle??null,type:"target"}),onMouseEnter:x,onMouseOut:b,type:"source"}),(!0===t||"target"===t)&&(0,o.jsx)(bt,{position:u,centerX:l,centerY:c,radius:n,onMouseDown:e=>v(e,{nodeId:r.source,id:r.sourceHandle??null,type:"source"}),onMouseEnter:x,onMouseOut:b,type:"target"})]})}function St(e){let{id:t,edgesFocusable:n,edgesReconnectable:a,elementsSelectable:l,onClick:c,onDoubleClick:d,onContextMenu:u,onMouseEnter:h,onMouseMove:p,onMouseLeave:f,reconnectRadius:g,onReconnect:y,onReconnectStart:v,onReconnectEnd:x,rfId:S,edgeTypes:k,noPanClassName:E,onError:M,disableKeyboardA11y:O}=e,T=b(e=>e.edgeLookup.get(t));const A=b(e=>e.defaultEdgeOptions);T=A?{...A,...T}:T;let N=T.type||"default",P=k?.[N]||mt[N];void 0===P&&(M?.("011",s.xc.error011(N)),N="default",P=k?.default||mt.default);const D=!!(T.focusable||n&&"undefined"===typeof T.focusable),R="undefined"!==typeof y&&(T.reconnectable||a&&"undefined"===typeof T.reconnectable),I=!!(T.selectable||l&&"undefined"===typeof T.selectable),L=(0,r.useRef)(null),[j,B]=(0,r.useState)(!1),[_,V]=(0,r.useState)(!1),z=w(),{zIndex:F,sourceX:$,sourceY:H,targetX:U,targetY:K,sourcePosition:W,targetPosition:q}=b((0,r.useCallback)(e=>{const n=e.nodeLookup.get(T.source),o=e.nodeLookup.get(T.target);if(!n||!o)return{zIndex:T.zIndex,...gt};const r=(0,s.b5)({id:t,sourceNode:n,targetNode:o,sourceHandle:T.sourceHandle||null,targetHandle:T.targetHandle||null,connectionMode:e.connectionMode,onError:M});return{zIndex:(0,s.qX)({selected:T.selected,zIndex:T.zIndex,sourceNode:n,targetNode:o,elevateOnSelect:e.elevateEdgesOnSelect}),...r||gt}},[T.source,T.target,T.sourceHandle,T.targetHandle,T.selected,T.zIndex]),m),J=(0,r.useMemo)(()=>T.markerStart?`url('#${(0,s.aW)(T.markerStart,S)}')`:void 0,[T.markerStart,S]),X=(0,r.useMemo)(()=>T.markerEnd?`url('#${(0,s.aW)(T.markerEnd,S)}')`:void 0,[T.markerEnd,S]);if(T.hidden||null===$||null===H||null===U||null===K)return null;const Z=d?e=>{d(e,{...T})}:void 0,Y=u?e=>{u(e,{...T})}:void 0,G=h?e=>{h(e,{...T})}:void 0,Q=p?e=>{p(e,{...T})}:void 0,ee=f?e=>{f(e,{...T})}:void 0;return(0,o.jsx)("svg",{style:{zIndex:F},children:(0,o.jsxs)("g",{className:i(["react-flow__edge",`react-flow__edge-${N}`,T.className,E,{selected:T.selected,animated:T.animated,inactive:!I&&!c,updating:j,selectable:I}]),onClick:e=>{const{addSelectedEdges:n,unselectNodesAndEdges:o,multiSelectionActive:r}=z.getState();I&&(z.setState({nodesSelectionActive:!1}),T.selected&&r?(o({nodes:[],edges:[T]}),L.current?.blur()):n([t])),c&&c(e,T)},onDoubleClick:Z,onContextMenu:Y,onMouseEnter:G,onMouseMove:Q,onMouseLeave:ee,onKeyDown:D?e=>{if(!O&&s.tn.includes(e.key)&&I){const{unselectNodesAndEdges:n,addSelectedEdges:o}=z.getState();"Escape"===e.key?(L.current?.blur(),n({edges:[T]})):o([t])}}:void 0,tabIndex:D?0:void 0,role:T.ariaRole??(D?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":null===T.ariaLabel?void 0:T.ariaLabel||`Edge from ${T.source} to ${T.target}`,"aria-describedby":D?`${C}-${S}`:void 0,ref:L,...T.domAttributes,children:[!_&&(0,o.jsx)(P,{id:t,source:T.source,target:T.target,type:T.type,selected:T.selected,animated:T.animated,selectable:I,deletable:T.deletable??!0,label:T.label,labelStyle:T.labelStyle,labelShowBg:T.labelShowBg,labelBgStyle:T.labelBgStyle,labelBgPadding:T.labelBgPadding,labelBgBorderRadius:T.labelBgBorderRadius,sourceX:$,sourceY:H,targetX:U,targetY:K,sourcePosition:W,targetPosition:q,data:T.data,style:T.style,sourceHandleId:T.sourceHandle,targetHandleId:T.targetHandle,markerStart:J,markerEnd:X,pathOptions:"pathOptions"in T?T.pathOptions:void 0,interactionWidth:T.interactionWidth}),R&&(0,o.jsx)(wt,{edge:T,isReconnectable:R,reconnectRadius:g,onReconnect:y,onReconnectStart:v,onReconnectEnd:x,sourceX:$,sourceY:H,targetX:U,targetY:K,sourcePosition:W,targetPosition:q,setUpdateHover:B,setReconnecting:V})]})})}const kt=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Et(e){let{defaultMarkerColor:t,onlyRenderVisibleElements:n,rfId:i,edgeTypes:a,noPanClassName:l,onReconnect:c,onEdgeContextMenu:d,onEdgeMouseEnter:u,onEdgeMouseMove:h,onEdgeMouseLeave:p,onEdgeClick:f,reconnectRadius:g,onEdgeDoubleClick:y,onReconnectStart:v,onReconnectEnd:x,disableKeyboardA11y:w}=e;const{edgesFocusable:S,edgesReconnectable:k,elementsSelectable:E,onError:C}=b(kt,m),M=(O=n,b((0,r.useCallback)(e=>{if(!O)return e.edges.map(e=>e.id);const t=[];if(e.width&&e.height)for(const n of e.edges){const o=e.nodeLookup.get(n.source),r=e.nodeLookup.get(n.target);o&&r&&(0,s.uj)({sourceNode:o,targetNode:r,width:e.width,height:e.height,transform:e.transform})&&t.push(n.id)}return t},[O]),m));var O;return(0,o.jsxs)("div",{className:"react-flow__edges",children:[(0,o.jsx)(Je,{defaultColor:t,rfId:i}),M.map(e=>(0,o.jsx)(St,{id:e,edgesFocusable:S,edgesReconnectable:k,elementsSelectable:E,noPanClassName:l,onReconnect:c,onContextMenu:d,onMouseEnter:u,onMouseMove:h,onMouseLeave:p,onClick:f,reconnectRadius:g,onDoubleClick:y,onReconnectStart:v,onReconnectEnd:x,rfId:i,onError:C,edgeTypes:a,disableKeyboardA11y:w},e))]})}Et.displayName="EdgeRenderer";const Ct=(0,r.memo)(Et),Mt=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Ot(e){let{children:t}=e;const n=b(Mt);return(0,o.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:n},children:t})}const Tt=e=>e.panZoom?.syncViewport;function At(e){return e.connection.inProgress?{...e.connection,to:(0,s.Ff)(e.connection.to,e.transform)}:{...e.connection}}function Nt(e){const t=function(e){if(e)return t=>{const n=At(t);return e(n)};return At}(e);return b(t,m)}const Pt=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Dt(e){let{containerStyle:t,style:n,type:r,component:a}=e;const{nodesConnectable:l,width:c,height:d,isValid:u,inProgress:h}=b(Pt,m);return!!(c&&l&&h)?(0,o.jsx)("svg",{style:t,width:c,height:d,className:"react-flow__connectionline react-flow__container",children:(0,o.jsx)("g",{className:i(["react-flow__connection",(0,s.HF)(u)]),children:(0,o.jsx)(Rt,{style:n,type:r,CustomComponent:a,isValid:u})})}):null}const Rt=e=>{let{style:t,type:n=s.Do.Bezier,CustomComponent:r,isValid:i}=e;const{inProgress:a,from:l,fromNode:c,fromHandle:d,fromPosition:u,to:h,toNode:p,toHandle:f,toPosition:m}=Nt();if(!a)return;if(r)return(0,o.jsx)(r,{connectionLineType:n,connectionLineStyle:t,fromNode:c,fromHandle:d,fromX:l.x,fromY:l.y,toX:h.x,toY:h.y,fromPosition:u,toPosition:m,connectionStatus:(0,s.HF)(i),toNode:p,toHandle:f});let g="";const y={sourceX:l.x,sourceY:l.y,sourcePosition:u,targetX:h.x,targetY:h.y,targetPosition:m};switch(n){case s.Do.Bezier:[g]=(0,s.Fp)(y);break;case s.Do.SimpleBezier:[g]=Qe(y);break;case s.Do.Step:[g]=(0,s.oN)({...y,borderRadius:0});break;case s.Do.SmoothStep:[g]=(0,s.oN)(y);break;default:[g]=(0,s.ah)(y)}return(0,o.jsx)("path",{d:g,fill:"none",className:"react-flow__connection-path",style:t})};Rt.displayName="ConnectionLine";const It={};function Lt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It;(0,r.useRef)(e),w();(0,r.useEffect)(()=>{0},[e])}function jt(e){let{nodeTypes:t,edgeTypes:n,onInit:i,onNodeClick:s,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:u,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:f,onSelectionStart:m,onSelectionEnd:g,connectionLineType:y,connectionLineStyle:v,connectionLineComponent:x,connectionLineContainerStyle:S,selectionKeyCode:k,selectionOnDrag:E,selectionMode:C,multiSelectionKeyCode:M,panActivationKeyCode:O,zoomActivationKeyCode:T,deleteKeyCode:A,onlyRenderVisibleElements:N,elementsSelectable:P,defaultViewport:D,translateExtent:R,minZoom:I,maxZoom:L,preventScrolling:j,defaultMarkerColor:B,zoomOnScroll:_,zoomOnPinch:V,panOnScroll:z,panOnScrollSpeed:F,panOnScrollMode:$,zoomOnDoubleClick:H,panOnDrag:U,onPaneClick:K,onPaneMouseEnter:W,onPaneMouseMove:q,onPaneMouseLeave:J,onPaneScroll:X,onPaneContextMenu:Z,paneClickDistance:Y,nodeClickDistance:G,onEdgeContextMenu:Q,onEdgeMouseEnter:ee,onEdgeMouseMove:te,onEdgeMouseLeave:ne,reconnectRadius:oe,onReconnect:re,onReconnectStart:ie,onReconnectEnd:se,noDragClassName:ae,noWheelClassName:le,noPanClassName:ce,disableKeyboardA11y:de,nodeExtent:ue,rfId:pe,viewport:fe,onViewportChange:me}=e;return Lt(t),Lt(n),w(),(0,r.useRef)(!1),(0,r.useEffect)(()=>{},[]),function(e){const t=he(),n=(0,r.useRef)(!1);(0,r.useEffect)(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}(i),function(e){const t=b(Tt),n=w();(0,r.useEffect)(()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t])}(fe),(0,o.jsx)(_e,{onPaneClick:K,onPaneMouseEnter:W,onPaneMouseMove:q,onPaneMouseLeave:J,onPaneContextMenu:Z,onPaneScroll:X,paneClickDistance:Y,deleteKeyCode:A,selectionKeyCode:k,selectionOnDrag:E,selectionMode:C,onSelectionStart:m,onSelectionEnd:g,multiSelectionKeyCode:M,panActivationKeyCode:O,zoomActivationKeyCode:T,elementsSelectable:P,zoomOnScroll:_,zoomOnPinch:V,zoomOnDoubleClick:H,panOnScroll:z,panOnScrollSpeed:F,panOnScrollMode:$,panOnDrag:U,defaultViewport:D,translateExtent:R,minZoom:I,maxZoom:L,onSelectionContextMenu:f,preventScrolling:j,noDragClassName:ae,noWheelClassName:le,noPanClassName:ce,disableKeyboardA11y:de,onViewportChange:me,isControlledViewport:!!fe,children:(0,o.jsxs)(Ot,{children:[(0,o.jsx)(Ct,{edgeTypes:n,onEdgeClick:a,onEdgeDoubleClick:c,onReconnect:re,onReconnectStart:ie,onReconnectEnd:se,onlyRenderVisibleElements:N,onEdgeContextMenu:Q,onEdgeMouseEnter:ee,onEdgeMouseMove:te,onEdgeMouseLeave:ne,reconnectRadius:oe,defaultMarkerColor:B,noPanClassName:ce,disableKeyboardA11y:de,rfId:pe}),(0,o.jsx)(Dt,{style:v,type:y,component:x,containerStyle:S}),(0,o.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,o.jsx)(Ue,{nodeTypes:t,onNodeClick:s,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:u,onNodeMouseLeave:h,onNodeContextMenu:p,nodeClickDistance:G,onlyRenderVisibleElements:N,noPanClassName:ce,noDragClassName:ae,disableKeyboardA11y:de,nodeExtent:ue,rfId:pe}),(0,o.jsx)("div",{className:"react-flow__viewport-portal"})]})})}jt.displayName="GraphView";const Bt=(0,r.memo)(jt),_t=function(){let{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:a,fitViewOptions:l,minZoom:c=.5,maxZoom:d=2,nodeOrigin:u,nodeExtent:h}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const p=new Map,f=new Map,m=new Map,g=new Map,y=o??t??[],v=n??e??[],x=u??[0,0],b=h??s.ZO;(0,s.qn)(m,g,y);const w=(0,s.bi)(v,p,f,{nodeOrigin:x,nodeExtent:b,elevateNodesOnSelect:!1});let S=[0,0,1];if(a&&r&&i){const e=(0,s.aZ)(p,{filter:e=>!(!e.width&&!e.initialWidth||!e.height&&!e.initialHeight)}),{x:t,y:n,zoom:o}=(0,s.R4)(e,r,i,c,d,l?.padding??.1);S=[t,n,o]}return{rfId:"1",width:0,height:0,transform:S,nodes:v,nodesInitialized:w,nodeLookup:p,parentLookup:f,edges:y,edgeLookup:g,connectionLookup:m,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==n,hasDefaultEdges:void 0!==o,panZoom:null,minZoom:c,maxZoom:d,translateExtent:s.ZO,nodeExtent:b,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:s.WZ.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:x,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:a??!1,fitViewOptions:l,fitViewResolver:null,connection:{...s.bK},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:s.KE,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:s.tM}},Vt=e=>{let{nodes:t,edges:n,defaultNodes:o,defaultEdges:r,width:i,height:a,fitView:l,fitViewOptions:c,minZoom:d,maxZoom:u,nodeOrigin:h,nodeExtent:p}=e;return m=(e,f)=>{async function m(){const{nodeLookup:t,panZoom:n,fitViewOptions:o,fitViewResolver:r,width:i,height:a,minZoom:l,maxZoom:c}=f();n&&(await(0,s.IO)({nodes:t,width:i,height:a,panZoom:n,minZoom:l,maxZoom:c},o),r?.resolve(!0),e({fitViewResolver:null}))}return{..._t({nodes:t,edges:n,width:i,height:a,fitView:l,fitViewOptions:c,minZoom:d,maxZoom:u,nodeOrigin:h,nodeExtent:p,defaultNodes:o,defaultEdges:r}),setNodes:t=>{const{nodeLookup:n,parentLookup:o,nodeOrigin:r,elevateNodesOnSelect:i,fitViewQueued:a}=f(),l=(0,s.bi)(t,n,o,{nodeOrigin:r,nodeExtent:p,elevateNodesOnSelect:i,checkEquality:!0});a&&l?(m(),e({nodes:t,nodesInitialized:l,fitViewQueued:!1,fitViewOptions:void 0})):e({nodes:t,nodesInitialized:l})},setEdges:t=>{const{connectionLookup:n,edgeLookup:o}=f();(0,s.qn)(n,o,t),e({edges:t})},setDefaultNodesAndEdges:(t,n)=>{if(t){const{setNodes:n}=f();n(t),e({hasDefaultNodes:!0})}if(n){const{setEdges:t}=f();t(n),e({hasDefaultEdges:!0})}},updateNodeInternals:t=>{const{triggerNodeChanges:n,nodeLookup:o,parentLookup:r,domNode:i,nodeOrigin:a,nodeExtent:l,debug:c,fitViewQueued:d}=f(),{changes:u,updatedInternals:h}=(0,s.uL)(t,o,r,i,a,l);h&&((0,s.vS)(o,r,{nodeOrigin:a,nodeExtent:l}),d?(m(),e({fitViewQueued:!1,fitViewOptions:void 0})):e({}),u?.length>0&&(c&&console.log("React Flow: trigger node changes",u),n?.(u)))},updateNodePositions:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=[],o=[],{nodeLookup:r,triggerNodeChanges:i}=f();for(const[s,a]of e){const e=r.get(s),i=!!(e?.expandParent&&e?.parentId&&a?.position),l={id:s,type:"position",position:i?{x:Math.max(0,a.position.x),y:Math.max(0,a.position.y)}:a.position,dragging:t};i&&e.parentId&&n.push({id:s,parentId:e.parentId,rect:{...a.internals.positionAbsolute,width:a.measured.width??0,height:a.measured.height??0}}),o.push(l)}if(n.length>0){const{parentLookup:e,nodeOrigin:t}=f(),i=(0,s.r8)(n,r,e,t);o.push(...i)}i(o)},triggerNodeChanges:e=>{const{onNodesChange:t,setNodes:n,nodes:o,hasDefaultNodes:r,debug:i}=f();e?.length&&(r&&n(G(e,o)),i&&console.log("React Flow: trigger node changes",e),t?.(e))},triggerEdgeChanges:e=>{const{onEdgesChange:t,setEdges:n,edges:o,hasDefaultEdges:r,debug:i}=f();e?.length&&(r&&n(Q(e,o)),i&&console.log("React Flow: trigger edge changes",e),t?.(e))},addSelectedNodes:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:o,triggerNodeChanges:r,triggerEdgeChanges:i}=f();t?r(e.map(e=>ee(e,!0))):(r(te(o,new Set([...e]),!0)),i(te(n)))},addSelectedEdges:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:o,triggerNodeChanges:r,triggerEdgeChanges:i}=f();t?i(e.map(e=>ee(e,!0))):(i(te(n,new Set([...e]))),r(te(o,new Set,!0)))},unselectNodesAndEdges:function(){let{nodes:e,edges:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{edges:n,nodes:o,nodeLookup:r,triggerNodeChanges:i,triggerEdgeChanges:s}=f(),a=t||n,l=(e||o).map(e=>{const t=r.get(e.id);return t&&(t.selected=!1),ee(e.id,!1)}),c=a.map(e=>ee(e.id,!1));i(l),s(c)},setMinZoom:t=>{const{panZoom:n,maxZoom:o}=f();n?.setScaleExtent([t,o]),e({minZoom:t})},setMaxZoom:t=>{const{panZoom:n,minZoom:o}=f();n?.setScaleExtent([o,t]),e({maxZoom:t})},setTranslateExtent:t=>{f().panZoom?.setTranslateExtent(t),e({translateExtent:t})},setPaneClickDistance:e=>{f().panZoom?.setClickDistance(e)},resetSelectedElements:()=>{const{edges:e,nodes:t,triggerNodeChanges:n,triggerEdgeChanges:o,elementsSelectable:r}=f();if(!r)return;const i=t.reduce((e,t)=>t.selected?[...e,ee(t.id,!1)]:e,[]),s=e.reduce((e,t)=>t.selected?[...e,ee(t.id,!1)]:e,[]);n(i),o(s)},setNodeExtent:t=>{const{nodes:n,nodeLookup:o,parentLookup:r,nodeOrigin:i,elevateNodesOnSelect:a,nodeExtent:l}=f();t[0][0]===l[0][0]&&t[0][1]===l[0][1]&&t[1][0]===l[1][0]&&t[1][1]===l[1][1]||((0,s.bi)(n,o,r,{nodeOrigin:i,nodeExtent:t,elevateNodesOnSelect:a,checkEquality:!1}),e({nodeExtent:t}))},panBy:e=>{const{transform:t,width:n,height:o,panZoom:r,translateExtent:i}=f();return(0,s.No)({delta:e,panZoom:r,transform:t,translateExtent:i,width:n,height:o})},setCenter:async(e,t,n)=>{const{width:o,height:r,maxZoom:i,panZoom:s}=f();if(!s)return Promise.resolve(!1);const a="undefined"!==typeof n?.zoom?n.zoom:i;return await s.setViewport({x:o/2-e*a,y:r/2-t*a,zoom:a},{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{e({connection:{...s.bK}})},updateConnection:t=>{e({connection:t})},reset:()=>e({..._t()})}},g=Object.is,m?f(m,g):f;var m,g};function zt(e){let{initialNodes:t,initialEdges:n,defaultNodes:i,defaultEdges:s,initialWidth:a,initialHeight:l,initialMinZoom:c,initialMaxZoom:d,initialFitViewOptions:u,fitView:h,nodeOrigin:p,nodeExtent:f,children:m}=e;const[g]=(0,r.useState)(()=>Vt({nodes:t,edges:n,defaultNodes:i,defaultEdges:s,width:a,height:l,fitView:h,minZoom:c,maxZoom:d,fitViewOptions:u,nodeOrigin:p,nodeExtent:f}));return(0,o.jsx)(v,{value:g,children:(0,o.jsx)(de,{children:m})})}function Ft(e){let{children:t,nodes:n,edges:i,defaultNodes:s,defaultEdges:a,width:l,height:c,fitView:d,fitViewOptions:u,minZoom:h,maxZoom:p,nodeOrigin:f,nodeExtent:m}=e;return(0,r.useContext)(y)?(0,o.jsx)(o.Fragment,{children:t}):(0,o.jsx)(zt,{initialNodes:n,initialEdges:i,defaultNodes:s,defaultEdges:a,initialWidth:l,initialHeight:c,fitView:d,initialFitViewOptions:u,initialMinZoom:h,initialMaxZoom:p,nodeOrigin:f,nodeExtent:m,children:t})}const $t={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var Ht=se(function(e,t){let{nodes:n,edges:a,defaultNodes:l,defaultEdges:c,className:d,nodeTypes:u,edgeTypes:h,onNodeClick:p,onEdgeClick:f,onInit:m,onMove:g,onMoveStart:y,onMoveEnd:v,onConnect:x,onConnectStart:b,onConnectEnd:w,onClickConnectStart:S,onClickConnectEnd:k,onNodeMouseEnter:E,onNodeMouseMove:C,onNodeMouseLeave:M,onNodeContextMenu:O,onNodeDoubleClick:T,onNodeDragStart:N,onNodeDrag:D,onNodeDragStop:R,onNodesDelete:I,onEdgesDelete:L,onDelete:j,onSelectionChange:z,onSelectionDragStart:F,onSelectionDrag:$,onSelectionDragStop:K,onSelectionContextMenu:W,onSelectionStart:q,onSelectionEnd:J,onBeforeDelete:X,connectionMode:Z,connectionLineType:Y=s.Do.Bezier,connectionLineStyle:G,connectionLineComponent:Q,connectionLineContainerStyle:ee,deleteKeyCode:te="Backspace",selectionKeyCode:ne="Shift",selectionOnDrag:oe=!1,selectionMode:re=s.Qc.Full,panActivationKeyCode:ie="Space",multiSelectionKeyCode:se=((0,s.Ue)()?"Meta":"Control"),zoomActivationKeyCode:ae=((0,s.Ue)()?"Meta":"Control"),snapToGrid:le,snapGrid:ce,onlyRenderVisibleElements:de=!1,selectNodesOnDrag:ue,nodesDraggable:he,autoPanOnNodeFocus:pe,nodesConnectable:fe,nodesFocusable:me,nodeOrigin:ge=_,edgesFocusable:ye,edgesReconnectable:ve,elementsSelectable:xe=!0,defaultViewport:be=V,minZoom:we=.5,maxZoom:Se=2,translateExtent:ke=s.ZO,preventScrolling:Ee=!0,nodeExtent:Ce,defaultMarkerColor:Me="#b1b1b7",zoomOnScroll:Oe=!0,zoomOnPinch:Te=!0,panOnScroll:Ae=!1,panOnScrollSpeed:Ne=.5,panOnScrollMode:Pe=s.ny.Free,zoomOnDoubleClick:De=!0,panOnDrag:Re=!0,onPaneClick:Ie,onPaneMouseEnter:Le,onPaneMouseMove:je,onPaneMouseLeave:Be,onPaneScroll:_e,onPaneContextMenu:Ve,paneClickDistance:ze=0,nodeClickDistance:Fe=0,children:$e,onReconnect:He,onReconnectStart:Ue,onReconnectEnd:Ke,onEdgeContextMenu:We,onEdgeDoubleClick:qe,onEdgeMouseEnter:Je,onEdgeMouseMove:Xe,onEdgeMouseLeave:Ze,reconnectRadius:Ye=10,onNodesChange:Ge,onEdgesChange:Qe,noDragClassName:et="nodrag",noWheelClassName:tt="nowheel",noPanClassName:nt="nopan",fitView:ot,fitViewOptions:rt,connectOnClick:it,attributionPosition:st,proOptions:at,defaultEdgeOptions:lt,elevateNodesOnSelect:ct,elevateEdgesOnSelect:dt,disableKeyboardA11y:ut=!1,autoPanOnConnect:ht,autoPanOnNodeDrag:pt,autoPanSpeed:ft,connectionRadius:mt,isValidConnection:gt,onError:yt,style:vt,id:xt,nodeDragThreshold:bt,connectionDragThreshold:wt,viewport:St,onViewportChange:kt,width:Et,height:Ct,colorMode:Mt="light",debug:Ot,onScroll:Tt,ariaLabelConfig:At,...Nt}=e;const Pt=xt||"1",Dt=function(e){const[t,n]=(0,r.useState)("system"===e?null:e);return(0,r.useEffect)(()=>{if("system"!==e)return void n(e);const t=U(),o=()=>n(t?.matches?"dark":"light");return o(),t?.addEventListener("change",o),()=>{t?.removeEventListener("change",o)}},[e]),null!==t?t:U()?.matches?"dark":"light"}(Mt),Rt=(0,r.useCallback)(e=>{e.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Tt?.(e)},[Tt]);return(0,o.jsx)("div",{"data-testid":"rf__wrapper",...Nt,onScroll:Rt,style:{...vt,...$t},ref:t,className:i(["react-flow",d,Dt]),id:xt,role:"application",children:(0,o.jsxs)(Ft,{nodes:n,edges:a,width:Et,height:Ct,fitView:ot,fitViewOptions:rt,minZoom:we,maxZoom:Se,nodeOrigin:ge,nodeExtent:Ce,children:[(0,o.jsx)(Bt,{onInit:m,onNodeClick:p,onEdgeClick:f,onNodeMouseEnter:E,onNodeMouseMove:C,onNodeMouseLeave:M,onNodeContextMenu:O,onNodeDoubleClick:T,nodeTypes:u,edgeTypes:h,connectionLineType:Y,connectionLineStyle:G,connectionLineComponent:Q,connectionLineContainerStyle:ee,selectionKeyCode:ne,selectionOnDrag:oe,selectionMode:re,deleteKeyCode:te,multiSelectionKeyCode:se,panActivationKeyCode:ie,zoomActivationKeyCode:ae,onlyRenderVisibleElements:de,defaultViewport:be,translateExtent:ke,minZoom:we,maxZoom:Se,preventScrolling:Ee,zoomOnScroll:Oe,zoomOnPinch:Te,zoomOnDoubleClick:De,panOnScroll:Ae,panOnScrollSpeed:Ne,panOnScrollMode:Pe,panOnDrag:Re,onPaneClick:Ie,onPaneMouseEnter:Le,onPaneMouseMove:je,onPaneMouseLeave:Be,onPaneScroll:_e,onPaneContextMenu:Ve,paneClickDistance:ze,nodeClickDistance:Fe,onSelectionContextMenu:W,onSelectionStart:q,onSelectionEnd:J,onReconnect:He,onReconnectStart:Ue,onReconnectEnd:Ke,onEdgeContextMenu:We,onEdgeDoubleClick:qe,onEdgeMouseEnter:Je,onEdgeMouseMove:Xe,onEdgeMouseLeave:Ze,reconnectRadius:Ye,defaultMarkerColor:Me,noDragClassName:et,noWheelClassName:tt,noPanClassName:nt,rfId:Pt,disableKeyboardA11y:ut,nodeExtent:Ce,viewport:St,onViewportChange:kt}),(0,o.jsx)(H,{nodes:n,edges:a,defaultNodes:l,defaultEdges:c,onConnect:x,onConnectStart:b,onConnectEnd:w,onClickConnectStart:S,onClickConnectEnd:k,nodesDraggable:he,autoPanOnNodeFocus:pe,nodesConnectable:fe,nodesFocusable:me,edgesFocusable:ye,edgesReconnectable:ve,elementsSelectable:xe,elevateNodesOnSelect:ct,elevateEdgesOnSelect:dt,minZoom:we,maxZoom:Se,nodeExtent:Ce,onNodesChange:Ge,onEdgesChange:Qe,snapToGrid:le,snapGrid:ce,connectionMode:Z,translateExtent:ke,connectOnClick:it,defaultEdgeOptions:lt,fitView:ot,fitViewOptions:rt,onNodesDelete:I,onEdgesDelete:L,onDelete:j,onNodeDragStart:N,onNodeDrag:D,onNodeDragStop:R,onSelectionDrag:$,onSelectionDragStart:F,onSelectionDragStop:K,onMove:g,onMoveStart:y,onMoveEnd:v,noPanClassName:nt,nodeOrigin:ge,rfId:Pt,autoPanOnConnect:ht,autoPanOnNodeDrag:pt,autoPanSpeed:ft,onError:yt,connectionRadius:mt,isValidConnection:gt,selectNodesOnDrag:ue,nodeDragThreshold:bt,connectionDragThreshold:wt,onBeforeDelete:X,paneClickDistance:ze,debug:Ot,ariaLabelConfig:At}),(0,o.jsx)(B,{onSelectionChange:z}),$e,(0,o.jsx)(P,{proOptions:at,position:st}),(0,o.jsx)(A,{rfId:Pt,disableKeyboardA11y:ut})]})})});const Ut=e=>e.domNode?.querySelector(".react-flow__edgelabel-renderer");function Kt(e){let{children:t}=e;const n=b(Ut);return n?(0,g.createPortal)(t,n):null}function Wt(e){const[t,n]=(0,r.useState)(e),o=(0,r.useCallback)(e=>n(t=>G(e,t)),[]);return[t,n,o]}function qt(e){const[t,n]=(0,r.useState)(e),o=(0,r.useCallback)(e=>n(t=>Q(e,t)),[]);return[t,n,o]}s.xc.error014();function Jt(e){let{dimensions:t,lineWidth:n,variant:r,className:s}=e;return(0,o.jsx)("path",{strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:i(["react-flow__background-pattern",r,s])})}function Xt(e){let{radius:t,className:n}=e;return(0,o.jsx)("circle",{cx:t,cy:t,r:t,className:i(["react-flow__background-pattern","dots",n])})}var Zt;!function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(Zt||(Zt={}));const Yt={[Zt.Dots]:1,[Zt.Lines]:1,[Zt.Cross]:6},Gt=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Qt(e){let{id:t,variant:n=Zt.Dots,gap:s=20,size:a,lineWidth:l=1,offset:c=0,color:d,bgColor:u,style:h,className:p,patternClassName:f}=e;const g=(0,r.useRef)(null),{transform:y,patternId:v}=b(Gt,m),x=a||Yt[n],w=n===Zt.Dots,S=n===Zt.Cross,k=Array.isArray(s)?s:[s,s],E=[k[0]*y[2]||1,k[1]*y[2]||1],C=x*y[2],M=Array.isArray(c)?c:[c,c],O=S?[C,C]:E,T=[M[0]*y[2]||1+O[0]/2,M[1]*y[2]||1+O[1]/2],A=`${v}${t||""}`;return(0,o.jsxs)("svg",{className:i(["react-flow__background",p]),style:{...h,...me,"--xy-background-color-props":u,"--xy-background-pattern-color-props":d},ref:g,"data-testid":"rf__background",children:[(0,o.jsx)("pattern",{id:A,x:y[0]%E[0],y:y[1]%E[1],width:E[0],height:E[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${T[0]},-${T[1]})`,children:w?(0,o.jsx)(Xt,{radius:C/2,className:f}):(0,o.jsx)(Jt,{dimensions:O,lineWidth:l,variant:n,className:f})}),(0,o.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${A})`})]})}Qt.displayName="Background";const en=(0,r.memo)(Qt);function tn(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,o.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function nn(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,o.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function on(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,o.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function rn(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,o.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function sn(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,o.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function an(e){let{children:t,className:n,...r}=e;return(0,o.jsx)("button",{type:"button",className:i(["react-flow__controls-button",n]),...r,children:t})}const ln=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function cn(e){let{style:t,showZoom:n=!0,showFitView:r=!0,showInteractive:s=!0,fitViewOptions:a,onZoomIn:l,onZoomOut:c,onFitView:d,onInteractiveChange:u,className:h,children:p,position:f="bottom-left",orientation:g="vertical","aria-label":y}=e;const v=w(),{isInteractive:x,minZoomReached:S,maxZoomReached:k,ariaLabelConfig:E}=b(ln,m),{zoomIn:C,zoomOut:M,fitView:O}=he(),T="horizontal"===g?"horizontal":"vertical";return(0,o.jsxs)(N,{className:i(["react-flow__controls",T,h]),position:f,style:t,"data-testid":"rf__controls","aria-label":y??E["controls.ariaLabel"],children:[n&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(an,{onClick:()=>{C(),l?.()},className:"react-flow__controls-zoomin",title:E["controls.zoomIn.ariaLabel"],"aria-label":E["controls.zoomIn.ariaLabel"],disabled:k,children:(0,o.jsx)(tn,{})}),(0,o.jsx)(an,{onClick:()=>{M(),c?.()},className:"react-flow__controls-zoomout",title:E["controls.zoomOut.ariaLabel"],"aria-label":E["controls.zoomOut.ariaLabel"],disabled:S,children:(0,o.jsx)(nn,{})})]}),r&&(0,o.jsx)(an,{className:"react-flow__controls-fitview",onClick:()=>{O(a),d?.()},title:E["controls.fitView.ariaLabel"],"aria-label":E["controls.fitView.ariaLabel"],children:(0,o.jsx)(on,{})}),s&&(0,o.jsx)(an,{className:"react-flow__controls-interactive",onClick:()=>{v.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),u?.(!x)},title:E["controls.interactive.ariaLabel"],"aria-label":E["controls.interactive.ariaLabel"],children:x?(0,o.jsx)(sn,{}):(0,o.jsx)(rn,{})}),p]})}cn.displayName="Controls";const dn=(0,r.memo)(cn);const un=(0,r.memo)(function(e){let{id:t,x:n,y:r,width:s,height:a,style:l,color:c,strokeColor:d,strokeWidth:u,className:h,borderRadius:p,shapeRendering:f,selected:m,onClick:g}=e;const{background:y,backgroundColor:v}=l||{},x=c||y||v;return(0,o.jsx)("rect",{className:i(["react-flow__minimap-node",{selected:m},h]),x:n,y:r,rx:p,ry:p,width:s,height:a,style:{fill:x,stroke:d,strokeWidth:u},shapeRendering:f,onClick:g?e=>g(e,t):void 0})}),hn=e=>e.nodes.map(e=>e.id),pn=e=>e instanceof Function?e:()=>e;const fn=(0,r.memo)(function(e){let{id:t,nodeColorFunc:n,nodeStrokeColorFunc:r,nodeClassNameFunc:i,nodeBorderRadius:a,nodeStrokeWidth:l,shapeRendering:c,NodeComponent:d,onClick:u}=e;const{node:h,x:p,y:f,width:g,height:y}=b(e=>{const{internals:n}=e.nodeLookup.get(t),o=n.userNode,{x:r,y:i}=n.positionAbsolute,{width:a,height:l}=(0,s.uD)(o);return{node:o,x:r,y:i,width:a,height:l}},m);return h&&!h.hidden&&(0,s.QE)(h)?(0,o.jsx)(d,{x:p,y:f,width:g,height:y,style:h.style,selected:!!h.selected,className:i(h),color:n(h),borderRadius:a,strokeColor:r(h),strokeWidth:l,shapeRendering:c,onClick:u,id:h.id}):null});var mn=(0,r.memo)(function(e){let{nodeStrokeColor:t,nodeColor:n,nodeClassName:r="",nodeBorderRadius:i=5,nodeStrokeWidth:s,nodeComponent:a=un,onClick:l}=e;const c=b(hn,m),d=pn(n),u=pn(t),h=pn(r),p="undefined"===typeof window||window.chrome?"crispEdges":"geometricPrecision";return(0,o.jsx)(o.Fragment,{children:c.map(e=>(0,o.jsx)(fn,{id:e,nodeColorFunc:d,nodeStrokeColorFunc:u,nodeClassNameFunc:h,nodeBorderRadius:i,nodeStrokeWidth:s,NodeComponent:a,onClick:l,shapeRendering:p},e))})});const gn=e=>!e.hidden,yn=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?(0,s.Mi)((0,s.aZ)(e.nodeLookup,{filter:gn}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}};function vn(e){let{style:t,className:n,nodeStrokeColor:a,nodeColor:l,nodeClassName:c="",nodeBorderRadius:d=5,nodeStrokeWidth:u,nodeComponent:h,bgColor:p,maskColor:f,maskStrokeColor:g,maskStrokeWidth:y,position:v="bottom-right",onClick:x,onNodeClick:S,pannable:k=!1,zoomable:E=!1,ariaLabel:C,inversePan:M,zoomStep:O=10,offsetScale:T=5}=e;const A=w(),P=(0,r.useRef)(null),{boundingRect:D,viewBB:R,rfId:I,panZoom:L,translateExtent:j,flowWidth:B,flowHeight:_,ariaLabelConfig:V}=b(yn,m),z=t?.width??200,F=t?.height??150,$=D.width/z,H=D.height/F,U=Math.max($,H),K=U*z,W=U*F,q=T*U,J=D.x-(K-D.width)/2-q,X=D.y-(W-D.height)/2-q,Z=K+2*q,Y=W+2*q,G=`react-flow__minimap-desc-${I}`,Q=(0,r.useRef)(0),ee=(0,r.useRef)();Q.current=U,(0,r.useEffect)(()=>{if(P.current&&L)return ee.current=(0,s.di)({domNode:P.current,panZoom:L,getTransform:()=>A.getState().transform,getViewScale:()=>Q.current}),()=>{ee.current?.destroy()}},[L]),(0,r.useEffect)(()=>{ee.current?.update({translateExtent:j,width:B,height:_,inversePan:M,pannable:k,zoomStep:O,zoomable:E})},[k,E,M,O,j,B,_]);const te=x?e=>{const[t,n]=ee.current?.pointer(e)||[0,0];x(e,{x:t,y:n})}:void 0,ne=S?(0,r.useCallback)((e,t)=>{const n=A.getState().nodeLookup.get(t).internals.userNode;S(e,n)},[]):void 0,oe=C??V["minimap.ariaLabel"];return(0,o.jsx)(N,{position:v,style:{...t,"--xy-minimap-background-color-props":"string"===typeof p?p:void 0,"--xy-minimap-mask-background-color-props":"string"===typeof f?f:void 0,"--xy-minimap-mask-stroke-color-props":"string"===typeof g?g:void 0,"--xy-minimap-mask-stroke-width-props":"number"===typeof y?y*U:void 0,"--xy-minimap-node-background-color-props":"string"===typeof l?l:void 0,"--xy-minimap-node-stroke-color-props":"string"===typeof a?a:void 0,"--xy-minimap-node-stroke-width-props":"number"===typeof u?u:void 0},className:i(["react-flow__minimap",n]),"data-testid":"rf__minimap",children:(0,o.jsxs)("svg",{width:z,height:F,viewBox:`${J} ${X} ${Z} ${Y}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":G,ref:P,onClick:te,children:[oe&&(0,o.jsx)("title",{id:G,children:oe}),(0,o.jsx)(mn,{onClick:ne,nodeColor:l,nodeStrokeColor:a,nodeBorderRadius:d,nodeClassName:c,nodeStrokeWidth:u,nodeComponent:h}),(0,o.jsx)("path",{className:"react-flow__minimap-mask",d:`M${J-q},${X-q}h${Z+2*q}v${Y+2*q}h${-Z-2*q}z\n        M${R.x},${R.y}h${R.width}v${R.height}h${-R.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}vn.displayName="MiniMap";const xn=(0,r.memo)(vn),bn={[s.xN.Line]:"right",[s.xN.Handle]:"bottom-right"};(0,r.memo)(function(e){let{nodeId:t,position:n,variant:a=s.xN.Handle,className:l,style:c,children:d,color:u,minWidth:h=10,minHeight:p=10,maxWidth:f=Number.MAX_VALUE,maxHeight:g=Number.MAX_VALUE,keepAspectRatio:y=!1,resizeDirection:v,autoScale:x=!0,shouldResize:S,onResizeStart:k,onResize:E,onResizeEnd:C}=e;const M=Te(),O="string"===typeof t?t:M,T=w(),A=(0,r.useRef)(null),N=a===s.xN.Handle,P=b((0,r.useCallback)((D=N&&x,e=>D?`${Math.max(1/e.transform[2],1)}`:void 0),[N,x]),m);var D;const R=(0,r.useRef)(null),I=n??bn[a];(0,r.useEffect)(()=>{if(A.current&&O)return R.current||(R.current=(0,s.ET)({domNode:A.current,nodeId:O,getStoreItems:()=>{const{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:o,nodeOrigin:r,domNode:i}=T.getState();return{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:o,nodeOrigin:r,paneDomNode:i}},onChange:(e,t)=>{const{triggerNodeChanges:n,nodeLookup:o,parentLookup:r,nodeOrigin:i}=T.getState(),a=[],l={x:e.x,y:e.y},c=o.get(O);if(c&&c.expandParent&&c.parentId){const t=c.origin??i,n=e.width??c.measured.width??0,d=e.height??c.measured.height??0,u={id:c.id,parentId:c.parentId,rect:{width:n,height:d,...(0,s.us)({x:e.x??c.position.x,y:e.y??c.position.y},{width:n,height:d},c.parentId,o,t)}},h=(0,s.r8)([u],o,r,i);a.push(...h),l.x=e.x?Math.max(t[0]*n,e.x):void 0,l.y=e.y?Math.max(t[1]*d,e.y):void 0}if(void 0!==l.x&&void 0!==l.y){const e={id:O,type:"position",position:{...l}};a.push(e)}if(void 0!==e.width&&void 0!==e.height){const t={id:O,type:"dimensions",resizing:!0,setAttributes:!v||("horizontal"===v?"width":"height"),dimensions:{width:e.width,height:e.height}};a.push(t)}for(const s of t){const e={...s,type:"position"};a.push(e)}n(a)},onEnd:e=>{let{width:t,height:n}=e;const o={id:O,type:"dimensions",resizing:!1,dimensions:{width:t,height:n}};T.getState().triggerNodeChanges([o])}})),R.current.update({controlPosition:I,boundaries:{minWidth:h,minHeight:p,maxWidth:f,maxHeight:g},keepAspectRatio:y,resizeDirection:v,onResizeStart:k,onResize:E,onResizeEnd:C,shouldResize:S}),()=>{R.current?.destroy()}},[I,h,p,f,g,y,k,E,C,S]);const L=I.split("-");return(0,o.jsx)("div",{className:i(["react-flow__resize-control","nodrag",...L,a,l]),ref:A,style:{...c,scale:P,...u&&{[N?"backgroundColor":"borderColor"]:u}},children:d})})},7856:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},7857:(e,t,n)=>{var o=n(3440),r=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!r&&r in e}},7887:(e,t,n)=>{var o=n(5791),r=n(7574),i=n(6832),s=i&&i.isMap,a=s?r(s):o;e.exports=a},7894:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},7937:(e,t,n)=>{var o=n(6954),r=n(4657);e.exports=function(e,t){var n=r(e,t);return o(n)?n:void 0}},7938:(e,t,n)=>{var o;try{o=n(9207)}catch(r){}o||(o=window.graphlib),e.exports=o},8114:e=>{e.exports=function(e,t){return e.has(t)}},8115:(e,t,n)=>{"use strict";n.d(t,{$L:()=>R,Ln:()=>v,N0:()=>P,Um:()=>D,Wg:()=>x,X9:()=>c,dL:()=>q,jP:()=>k,n9:()=>A,oM:()=>E,zy:()=>T});var o=n(4282);const r=Math.pow(2,16);function i(e,t){return e+t*r}function s(e){return 65535&e}class a{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class l{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.ranges=e,this.inverted=t,!e.length&&l.empty)return l.empty}recover(e){let t=0,n=s(e);if(!this.inverted)for(let o=0;o<n;o++)t+=this.ranges[3*o+2]-this.ranges[3*o+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/r}(e)}mapResult(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}map(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!0)}_map(e,t,n){let o=0,r=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?o:0);if(c>e)break;let d=this.ranges[l+r],u=this.ranges[l+s],h=c+d;if(e<=h){let r=c+o+((d?e==c?-1:e==h?1:t:t)<0?0:u);if(n)return r;let s=e==(t<0?c:h)?null:i(l/3,e-c),p=e==c?2:e==h?1:4;return(t<0?e!=c:e!=h)&&(p|=8),new a(r,p,s)}o+=u-d}return n?e+o:new a(e+o,0,null)}touches(e,t){let n=0,o=s(t),r=this.inverted?2:1,i=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let t=this.ranges[s]-(this.inverted?n:0);if(t>e)break;let a=this.ranges[s+r];if(e<=t+a&&s==3*o)return!0;n+=this.ranges[s+i]-a}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let o=0,r=0;o<this.ranges.length;o+=3){let i=this.ranges[o],s=i-(this.inverted?r:0),a=i+(this.inverted?0:r),l=this.ranges[o+t],c=this.ranges[o+n];e(s,s+l,a,a+c),r+=c-l}}invert(){return new l(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?l.empty:new l(e<0?[0,-e,0]:[0,0,e])}}l.empty=new l([]);class c{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e?e.length:0;this.mirror=t,this.from=n,this.to=o,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maps.length;return new c(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),null!=t&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,n=this._maps.length;t<e._maps.length;t++){let o=e.getMirror(t);this.appendMap(e._maps[t],null!=o&&o<t?n+o:void 0)}}getMirror(e){if(this.mirror)for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this._maps.length+e._maps.length;t>=0;t--){let o=e.getMirror(t);this.appendMap(e._maps[t].invert(),null!=o&&o>t?n-o-1:void 0)}}invert(){let e=new c;return e.appendMappingInverted(this),e}map(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,t);return e}mapResult(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}_map(e,t,n){let o=0;for(let r=this.from;r<this.to;r++){let n=this._maps[r].mapResult(e,t);if(null!=n.recover){let t=this.getMirror(r);if(null!=t&&t>r&&t<this.to){r=t,e=this._maps[t].recover(n.recover);continue}}o|=n.delInfo,e=n.pos}return n?e:new a(e,o,null)}}const d=Object.create(null);class u{getMap(){return l.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=d[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in d)throw new RangeError("Duplicate use of step JSON ID "+e);return d[e]=t,t.prototype.jsonID=e,t}}class h{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new h(e,null)}static fail(e){return new h(null,e)}static fromReplace(e,t,n,r){try{return h.ok(e.replace(t,n,r))}catch(i){if(i instanceof o.vI)return h.fail(i.message);throw i}}}function p(e,t,n){let r=[];for(let o=0;o<e.childCount;o++){let i=e.child(o);i.content.size&&(i=i.copy(p(i.content,t,i))),i.isInline&&(i=t(i,n,o)),r.push(i)}return o.FK.fromArray(r)}class f extends u{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),i=new o.Ji(p(t.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,r),t.openStart,t.openEnd);return h.fromReplace(e,this.from,this.to,i)}invert(){return new m(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new f(t.pos,n.pos,this.mark)}merge(e){return e instanceof f&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new f(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new f(t.from,t.to,e.markFromJSON(t.mark))}}u.jsonID("addMark",f);class m extends u{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new o.Ji(p(t.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),t.openStart,t.openEnd);return h.fromReplace(e,this.from,this.to,n)}invert(){return new f(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new m(t.pos,n.pos,this.mark)}merge(e){return e instanceof m&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new m(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new m(t.from,t.to,e.markFromJSON(t.mark))}}u.jsonID("removeMark",m);class g extends u{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return h.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return h.fromReplace(e,this.pos,this.pos+1,new o.Ji(o.FK.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let n=0;n<t.marks.length;n++)if(!t.marks[n].isInSet(e))return new g(this.pos,t.marks[n]);return new g(this.pos,this.mark)}}return new y(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new g(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new g(t.pos,e.markFromJSON(t.mark))}}u.jsonID("addNodeMark",g);class y extends u{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return h.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return h.fromReplace(e,this.pos,this.pos+1,new o.Ji(o.FK.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new g(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new y(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new y(t.pos,e.markFromJSON(t.mark))}}u.jsonID("removeNodeMark",y);class v extends u{constructor(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];super(),this.from=e,this.to=t,this.slice=n,this.structure=o}apply(e){return this.structure&&b(e,this.from,this.to)?h.fail("Structure replace would overwrite content"):h.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new l([this.from,this.to-this.from,this.slice.size])}invert(e){return new v(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new v(t.pos,Math.max(t.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof v)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let t=this.slice.size+e.slice.size==0?o.Ji.empty:new o.Ji(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new v(e.from,this.to,t,this.structure)}}{let t=this.slice.size+e.slice.size==0?o.Ji.empty:new o.Ji(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new v(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new v(t.from,t.to,o.Ji.fromJSON(e,t.slice),!!t.structure)}}u.jsonID("replace",v);class x extends u{constructor(e,t,n,o,r,i){let s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=o,this.slice=r,this.insert=i,this.structure=s}apply(e){if(this.structure&&(b(e,this.from,this.gapFrom)||b(e,this.gapTo,this.to)))return h.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return h.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?h.fromReplace(e,this.from,this.to,n):h.fail("Content does not fit in gap")}getMap(){return new l([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new x(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),o=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),r=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||o<t.pos||r>n.pos?null:new x(t.pos,n.pos,o,r,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new x(t.from,t.to,t.gapFrom,t.gapTo,o.Ji.fromJSON(e,t.slice),t.insert,!!t.structure)}}function b(e,t,n){let o=e.resolve(t),r=n-t,i=o.depth;for(;r>0&&i>0&&o.indexAfter(i)==o.node(i).childCount;)i--,r--;if(r>0){let e=o.node(i).maybeChild(o.indexAfter(i));for(;r>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,r--}}return!1}function w(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.contentMatch,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=e.doc.nodeAt(t),a=[],l=t+1;for(let c=0;c<s.childCount;c++){let t=s.child(c),d=l+t.nodeSize,u=r.matchType(t.type);if(u){r=u;for(let o=0;o<t.marks.length;o++)n.allowsMarkType(t.marks[o].type)||e.step(new m(l,d,t.marks[o]));if(i&&t.isText&&"pre"!=n.whitespace){let e,r,i=/\r?\n|\r/g;for(;e=i.exec(t.text);)r||(r=new o.Ji(o.FK.from(n.schema.text(" ",n.allowedMarks(t.marks))),0,0)),a.push(new v(l+e.index,l+e.index+e[0].length,r))}}else a.push(new v(l,d,o.Ji.empty));l=d}if(!r.validEnd){let t=r.fillBefore(o.FK.empty,!0);e.replace(l,l,new o.Ji(t,0,0))}for(let o=a.length-1;o>=0;o--)e.step(a[o])}function S(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function k(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){let o=e.$from.node(n),r=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&o.canReplace(r,i,t))return n;if(0==n||o.type.spec.isolating||!S(o,r,i))break}return null}function E(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,r=function(e,t){let{parent:n,startIndex:o,endIndex:r}=e,i=n.contentMatchAt(o).findWrapping(t);if(!i)return null;let s=i.length?i[0]:t;return n.canReplaceWith(o,r,s)?i:null}(e,t),i=r&&function(e,t){let{parent:n,startIndex:o,endIndex:r}=e,i=n.child(o),s=t.contentMatch.findWrapping(i.type);if(!s)return null;let a=(s.length?s[s.length-1]:t).contentMatch;for(let l=o;a&&l<r;l++)a=a.matchType(n.child(l).type);return a&&a.validEnd?s:null}(o,t);return i?r.map(C).concat({type:t,attrs:n}).concat(i.map(C)):null}function C(e){return{type:e,attrs:null}}function M(e,t,n,o){t.forEach((r,i)=>{if(r.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(r.text);){let r=e.mapping.slice(o).map(n+1+i+s.index);e.replaceWith(r,r+1,t.type.schema.linebreakReplacement.create())}}})}function O(e,t,n,o){t.forEach((r,i)=>{if(r.type==r.type.schema.linebreakReplacement){let r=e.mapping.slice(o).map(n+1+i);e.replaceWith(r,r+1,t.type.schema.text("\n"))}})}function T(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,r=e.resolve(t),i=r.depth-n,s=o&&o[o.length-1]||r.parent;if(i<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!s.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let c=r.depth-1,d=n-2;c>i;c--,d--){let e=r.node(c),t=r.index(c);if(e.type.spec.isolating)return!1;let n=e.content.cutByIndex(t,e.childCount),i=o&&o[d+1];i&&(n=n.replaceChild(0,i.type.create(i.attrs)));let s=o&&o[d]||e;if(!e.canReplace(t+1,e.childCount)||!s.type.validContent(n))return!1}let a=r.indexAfter(i),l=o&&o[0];return r.node(i).canReplaceWith(a,a,l?l.type:r.node(i+1).type)}function A(e,t){let n=e.resolve(t),o=n.index();return N(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(o,o+1)}function N(e,t){return!(!e||!t||e.isLeaf||!function(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:o}=e.type.schema;for(let r=0;r<t.childCount;r++){let i=t.child(r),s=i.type==o?e.type.schema.nodes.text:i.type;if(n=n.matchType(s),!n)return!1;if(!e.type.allowsMarks(i.marks))return!1}return n.validEnd}(e,t))}function P(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=e.resolve(t);for(let r=o.depth;;r--){let e,i,s=o.index(r);if(r==o.depth?(e=o.nodeBefore,i=o.nodeAfter):n>0?(e=o.node(r+1),s++,i=o.node(r).maybeChild(s)):(e=o.node(r).maybeChild(s-1),i=o.node(r+1)),e&&!e.isTextblock&&N(e,i)&&o.node(r).canReplace(s,s+1))return t;if(0==r)break;t=n<0?o.before(r):o.after(r)}}function D(e,t,n){let o=e.resolve(t);if(!n.content.size)return t;let r=n.content;for(let i=0;i<n.openStart;i++)r=r.firstChild.content;for(let i=1;i<=(0==n.openStart&&n.size?2:1);i++)for(let e=o.depth;e>=0;e--){let t=e==o.depth?0:o.pos<=(o.start(e+1)+o.end(e+1))/2?-1:1,n=o.index(e)+(t>0?1:0),s=o.node(e),a=!1;if(1==i)a=s.canReplace(n,n,r);else{let e=s.contentMatchAt(n).findWrapping(r.firstChild.type);a=e&&s.canReplaceWith(n,n,e[0])}if(a)return 0==t?o.pos:t<0?o.before(e+1):o.after(e+1)}return null}function R(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.Ji.empty;if(t==n&&!r.size)return null;let i=e.resolve(t),s=e.resolve(n);return I(i,s,r)?new v(t,n,r):new L(i,s,r).fit()}function I(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}u.jsonID("replaceAround",x);class L{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=o.FK.empty;for(let o=0;o<=e.depth;o++){let t=e.node(o);this.frontier.push({type:t.type,match:t.contentMatchAt(e.indexAfter(o))})}for(let r=e.depth;r>0;r--)this.placed=o.FK.from(e.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(e<0?this.$to:n.doc.resolve(e));if(!r)return null;let i=this.placed,s=n.depth,a=r.depth;for(;s&&a&&1==i.childCount;)i=i.firstChild.content,s--,a--;let l=new o.Ji(i,s,a);return e>-1?new x(n.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||n.pos!=this.$to.pos?new v(n.pos,r.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,o=this.unplaced.openEnd;n<e;n++){let r=t.firstChild;if(t.childCount>1&&(o=0),r.type.spec.isolating&&o<=n){e=n;break}t=r.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e,r=null;n?(r=_(this.unplaced.content,n-1).firstChild,e=r.content):e=this.unplaced.content;let i=e.firstChild;for(let s=this.depth;s>=0;s--){let e,{type:a,match:l}=this.frontier[s],c=null;if(1==t&&(i?l.matchType(i.type)||(c=l.fillBefore(o.FK.from(i),!1)):r&&a.compatibleContent(r.type)))return{sliceDepth:n,frontierDepth:s,parent:r,inject:c};if(2==t&&i&&(e=l.findWrapping(i.type)))return{sliceDepth:n,frontierDepth:s,parent:r,wrap:e};if(r&&l.matchType(r.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=_(e,t);return!(!r.childCount||r.firstChild.isLeaf)&&(this.unplaced=new o.Ji(e,t+1,Math.max(n,r.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=_(e,t);if(r.childCount<=1&&t>0){let i=e.size-t<=t+r.size;this.unplaced=new o.Ji(j(e,t-1,1),t-1,i?t-1:n)}else this.unplaced=new o.Ji(j(e,t,1),t,n)}placeNodes(e){let{sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:s}=e;for(;this.depth>n;)this.closeFrontierNode();if(s)for(let o=0;o<s.length;o++)this.openFrontierNode(s[o]);let a=this.unplaced,l=r?r.content:a.content,c=a.openStart-t,d=0,u=[],{match:h,type:p}=this.frontier[n];if(i){for(let e=0;e<i.childCount;e++)u.push(i.child(e));h=h.matchFragment(i)}let f=l.size+t-(a.content.size-a.openEnd);for(;d<l.childCount;){let e=l.child(d),t=h.matchType(e.type);if(!t)break;d++,(d>1||0==c||e.content.size)&&(h=t,u.push(V(e.mark(p.allowedMarks(e.marks)),1==d?c:0,d==l.childCount?f:-1)))}let m=d==l.childCount;m||(f=-1),this.placed=B(this.placed,n,o.FK.from(u)),this.frontier[n].match=h,m&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let o=0,g=l;o<f;o++){let e=g.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),g=e.content}this.unplaced=m?0==t?o.Ji.empty:new o.Ji(j(a.content,t-1,1),t-1,f<0?a.openEnd:t-1):new o.Ji(j(a.content,t,d),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!z(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:n}=this.$to,o=this.$to.after(n);for(;n>1&&o==this.$to.end(--n);)++o;return o}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:o}=this.frontier[t],r=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),i=z(e,t,o,n,r);if(i){for(let n=t-1;n>=0;n--){let{match:t,type:o}=this.frontier[n],r=z(e,n,o,t,!0);if(!r||r.childCount)continue e}return{depth:t,fit:i,move:r?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=B(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),o=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,o)}return e}openFrontierNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=B(this.placed,this.depth,o.FK.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(o.FK.empty,!0);e.childCount&&(this.placed=B(this.placed,this.frontier.length,e))}}function j(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(j(e.firstChild.content,t-1,n)))}function B(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(B(e.lastChild.content,t-1,n)))}function _(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function V(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,V(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(o.FK.empty,!0)))),e.copy(r)}function z(e,t,n,o,r){let i=e.node(t),s=r?e.indexAfter(t):e.index(t);if(s==i.childCount&&!n.compatibleContent(i.type))return null;let a=o.fillBefore(i.content,!0,s);return a&&!function(e,t,n){for(let o=n;o<t.childCount;o++)if(!e.allowsMarks(t.child(o).marks))return!0;return!1}(n,i.content,s)?a:null}function F(e){return e.spec.defining||e.spec.definingForContent}function $(e,t,n,r,i){if(t<n){let o=e.firstChild;e=e.replaceChild(0,o.copy($(o.content,t+1,n,r,o)))}if(t>r){let t=i.contentMatchAt(0),n=t.fillBefore(e).append(e);e=n.append(t.matchFragment(n).fillBefore(o.FK.empty,!0))}return e}function H(e,t){let n=[];for(let o=Math.min(e.depth,t.depth);o>=0;o--){let r=e.start(o);if(r<e.pos-(e.depth-o)||t.end(o)>t.pos+(t.depth-o)||e.node(o).type.spec.isolating||t.node(o).type.spec.isolating)break;(r==t.start(o)||o==e.depth&&o==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&o&&t.start(o-1)==r-1)&&n.push(o)}return n}class U extends u{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return h.fail("No node at attribute step's position");let n=Object.create(null);for(let o in t.attrs)n[o]=t.attrs[o];n[this.attr]=this.value;let r=t.type.create(n,null,t.marks);return h.fromReplace(e,this.pos,this.pos+1,new o.Ji(o.FK.from(r),0,t.isLeaf?0:1))}getMap(){return l.empty}invert(e){return new U(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new U(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new U(t.pos,t.attr,t.value)}}u.jsonID("attr",U);class K extends u{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let o in e.attrs)t[o]=e.attrs[o];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return h.ok(n)}getMap(){return l.empty}invert(e){return new K(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if("string"!=typeof t.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new K(t.attr,t.value)}}u.jsonID("docAttr",K);let W=class extends Error{};W=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n},(W.prototype=Object.create(Error.prototype)).constructor=W,W.prototype.name="TransformError";class q{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new c}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new W(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.Ji.empty,r=R(this.doc,e,t,n);return r&&this.step(r),this}replaceWith(e,t,n){return this.replace(e,t,new o.Ji(o.FK.from(n),0,0))}delete(e,t){return this.replace(e,t,o.Ji.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return function(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),s=e.doc.resolve(n);if(I(i,s,r))return e.step(new v(t,n,r));let a=H(i,e.doc.resolve(n));0==a[a.length-1]&&a.pop();let l=-(i.depth+1);a.unshift(l);for(let o=i.depth,p=i.pos-1;o>0;o--,p--){let e=i.node(o).type.spec;if(e.defining||e.definingAsContext||e.isolating)break;a.indexOf(o)>-1?l=o:i.before(o)==p&&a.splice(1,0,-o)}let c=a.indexOf(l),d=[],u=r.openStart;for(let o=r.content,p=0;;p++){let e=o.firstChild;if(d.push(e),p==r.openStart)break;o=e.content}for(let o=u-1;o>=0;o--){let e=d[o],t=F(e.type);if(t&&!e.sameMarkup(i.node(Math.abs(l)-1)))u=o;else if(t||!e.type.isTextblock)break}for(let p=r.openStart;p>=0;p--){let t=(p+u+1)%(r.openStart+1),l=d[t];if(l)for(let d=0;d<a.length;d++){let u=a[(d+c)%a.length],h=!0;u<0&&(h=!1,u=-u);let p=i.node(u-1),f=i.index(u-1);if(p.canReplaceWith(f,f,l.type,l.marks))return e.replace(i.before(u),h?s.after(u):n,new o.Ji($(r.content,0,r.openStart,t),t,r.openEnd))}}let h=e.steps.length;for(let o=a.length-1;o>=0&&(e.replace(t,n,r),!(e.steps.length>h));o--){let e=a[o];e<0||(t=i.before(e),n=s.after(e))}}(this,e,t,n),this}replaceRangeWith(e,t,n){return function(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let o=function(e,t,n){let o=e.resolve(t);if(o.parent.canReplaceWith(o.index(),o.index(),n))return t;if(0==o.parentOffset)for(let r=o.depth-1;r>=0;r--){let e=o.index(r);if(o.node(r).canReplaceWith(e,e,n))return o.before(r+1);if(e>0)return null}if(o.parentOffset==o.parent.content.size)for(let r=o.depth-1;r>=0;r--){let e=o.indexAfter(r);if(o.node(r).canReplaceWith(e,e,n))return o.after(r+1);if(e<o.node(r).childCount)return null}return null}(e.doc,t,r.type);null!=o&&(t=n=o)}e.replaceRange(t,n,new o.Ji(o.FK.from(r),0,0))}(this,e,t,n),this}deleteRange(e,t){return function(e,t,n){let o=e.doc.resolve(t),r=e.doc.resolve(n),i=H(o,r);for(let s=0;s<i.length;s++){let t=i[s],n=s==i.length-1;if(n&&0==t||o.node(t).type.contentMatch.validEnd)return e.delete(o.start(t),r.end(t));if(t>0&&(n||o.node(t-1).canReplace(o.index(t-1),r.indexAfter(t-1))))return e.delete(o.before(t),r.after(t))}for(let s=1;s<=o.depth&&s<=r.depth;s++)if(t-o.start(s)==o.depth-s&&n>o.end(s)&&r.end(s)-n!=r.depth-s&&o.start(s-1)==r.start(s-1)&&o.node(s-1).canReplace(o.index(s-1),r.index(s-1)))return e.delete(o.before(s),n);e.delete(t,n)}(this,e,t),this}lift(e,t){return function(e,t,n){let{$from:r,$to:i,depth:s}=t,a=r.before(s+1),l=i.after(s+1),c=a,d=l,u=o.FK.empty,h=0;for(let m=s,g=!1;m>n;m--)g||r.index(m)>0?(g=!0,u=o.FK.from(r.node(m).copy(u)),h++):c--;let p=o.FK.empty,f=0;for(let m=s,g=!1;m>n;m--)g||i.after(m+1)<i.end(m)?(g=!0,p=o.FK.from(i.node(m).copy(p)),f++):d++;e.step(new x(c,d,a,l,new o.Ji(u.append(p),h,f),u.size-h,!0))}(this,e,t),this}join(e){return function(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,s=e.doc.resolve(t-n),a=s.node().type;if(i&&a.inlineContent){let e="pre"==a.whitespace,t=!!a.contentMatch.matchType(i);e&&!t?r=!1:!e&&t&&(r=!0)}let l=e.steps.length;if(!1===r){let o=e.doc.resolve(t+n);O(e,o.node(),o.before(),l)}a.inlineContent&&w(e,t+n-1,a,s.node().contentMatchAt(s.index()),null==r);let c=e.mapping.slice(l),d=c.map(t-n);if(e.step(new v(d,c.map(t+n,-1),o.Ji.empty,!0)),!0===r){let t=e.doc.resolve(d);M(e,t.node(),t.before(),e.steps.length)}}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this}wrap(e,t){return function(e,t,n){let r=o.FK.empty;for(let a=n.length-1;a>=0;a--){if(r.size){let e=n[a].type.contentMatch.matchFragment(r);if(!e||!e.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=o.FK.from(n[a].type.create(n[a].attrs,r))}let i=t.start,s=t.end;e.step(new x(i,s,i,s,new o.Ji(r,0,0),n.length,!0))}(this,e,t),this}setBlockType(e){return function(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,(t,n)=>{let a="function"==typeof i?i(t):i;if(t.isTextblock&&!t.hasMarkup(r,a)&&function(e,t,n){let o=e.resolve(t),r=o.index();return o.parent.canReplaceWith(r,r+1,n)}(e.doc,e.mapping.slice(s).map(n),r)){let i=null;if(r.schema.linebreakReplacement){let e="pre"==r.whitespace,t=!!r.contentMatch.matchType(r.schema.linebreakReplacement);e&&!t?i=!1:!e&&t&&(i=!0)}!1===i&&O(e,t,n,s),w(e,e.mapping.slice(s).map(n,1),r,void 0,null===i);let l=e.mapping.slice(s),c=l.map(n,1),d=l.map(n+t.nodeSize,1);return e.step(new x(c,d,c+1,d-1,new o.Ji(o.FK.from(r.create(a,null,t.marks)),0,0),1,!0)),!0===i&&M(e,t,n,s),!1}})}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,arguments.length>2?arguments[2]:void 0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null),this}setNodeMarkup(e,t){return function(e,t,n,r,i){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let a=n.create(r,null,i||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,a);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new x(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new o.Ji(o.FK.from(a),0,0),1,!0))}(this,e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0),this}setNodeAttribute(e,t,n){return this.step(new U(e,t,n)),this}setDocAttribute(e,t){return this.step(new K(e,t)),this}addNodeMark(e,t){return this.step(new g(e,t)),this}removeNodeMark(e,t){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(t instanceof o.CU)t.isInSet(n.marks)&&this.step(new y(e,t));else{let o,r=n.marks,i=[];for(;o=t.isInSet(r);)i.push(new y(e,o)),r=o.removeFromSet(r);for(let e=i.length-1;e>=0;e--)this.step(i[e])}return this}split(e){return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=e.doc.resolve(t),s=o.FK.empty,a=o.FK.empty;for(let l=i.depth,c=i.depth-n,d=n-1;l>c;l--,d--){s=o.FK.from(i.node(l).copy(s));let e=r&&r[d];a=o.FK.from(e?e.type.create(e.attrs,a):i.node(l).copy(a))}e.step(new v(t,t,new o.Ji(s.append(a),n,n),!0))}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2?arguments[2]:void 0),this}addMark(e,t,n){return function(e,t,n,o){let r,i,s=[],a=[];e.doc.nodesBetween(t,n,(e,l,c)=>{if(!e.isInline)return;let d=e.marks;if(!o.isInSet(d)&&c.type.allowsMarkType(o.type)){let c=Math.max(l,t),u=Math.min(l+e.nodeSize,n),h=o.addToSet(d);for(let e=0;e<d.length;e++)d[e].isInSet(h)||(r&&r.to==c&&r.mark.eq(d[e])?r.to=u:s.push(r=new m(c,u,d[e])));i&&i.to==c?i.to=u:a.push(i=new f(c,u,o))}}),s.forEach(t=>e.step(t)),a.forEach(t=>e.step(t))}(this,e,t,n),this}removeMark(e,t,n){return function(e,t,n,r){let i=[],s=0;e.doc.nodesBetween(t,n,(e,a)=>{if(!e.isInline)return;s++;let l=null;if(r instanceof o.sX){let t,n=e.marks;for(;t=r.isInSet(n);)(l||(l=[])).push(t),n=t.removeFromSet(n)}else r?r.isInSet(e.marks)&&(l=[r]):l=e.marks;if(l&&l.length){let o=Math.min(a+e.nodeSize,n);for(let e=0;e<l.length;e++){let n,r=l[e];for(let e=0;e<i.length;e++){let t=i[e];t.step==s-1&&r.eq(i[e].style)&&(n=t)}n?(n.to=o,n.step=s):i.push({style:r,from:Math.max(a,t),to:o,step:s})}}}),i.forEach(t=>e.step(new m(t.from,t.to,t.style)))}(this,e,t,n),this}clearIncompatible(e,t,n){return w(this,e,t,n),this}}},8122:(e,t,n)=>{var o=n(6686),r=n(6140),i=n(3516),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!o(e))return i(e);var t=r(e),n=[];for(var a in e)("constructor"!=a||!t&&s.call(e,a))&&n.push(a);return n}},8124:(e,t,n)=>{var o=n(6614),r=n(9621);e.exports=function(e,t){return o(e,r(e),t)}},8129:(e,t,n)=>{var o=n(8420),r=n(9377);e.exports=function(e,t){return r(e||[],t||[],o)}},8182:(e,t,n)=>{var o=n(2070),r=n(5713),i=n(2074),s=o&&1/i(new o([,-0]))[1]==1/0?function(e){return new o(e)}:r;e.exports=s},8208:(e,t,n)=>{var o;try{o={cloneDeep:n(6434),constant:n(2541),defaults:n(1163),each:n(2580),filter:n(723),find:n(8990),flatten:n(819),forEach:n(5491),forIn:n(7717),has:n(2117),isUndefined:n(141),last:n(4065),map:n(3411),mapValues:n(1733),max:n(539),merge:n(4677),min:n(6745),minBy:n(9364),now:n(4757),pick:n(2616),range:n(6604),reduce:n(2759),sortBy:n(7424),uniqueId:n(111),values:n(6727),zipObject:n(8129)}}catch(r){}o||(o=window._),e.exports=o},8259:(e,t,n)=>{var o=n(5797);e.exports=function(e){var t=o(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}},8268:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,o=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(o.index=e.index,o.input=e.input),o}},8311:e=>{e.exports="2.1.8"},8325:(e,t,n)=>{var o=n(2541),r=n(5654),i=n(3279),s=r?function(e,t){return r(e,"toString",{configurable:!0,enumerable:!1,value:o(t),writable:!0})}:i;e.exports=s},8326:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},8328:(e,t,n)=>{"use strict";function o(e){return"object"===typeof e&&null!==e}n.d(t,{G:()=>o})},8353:(e,t,n)=>{var o=n(5750);function r(e){var t={},n={},r=[];if(o.each(e.sinks(),function s(a){if(o.has(n,a))throw new i;o.has(t,a)||(n[a]=!0,t[a]=!0,o.each(e.predecessors(a),s),delete n[a],r.push(a))}),o.size(t)!==e.nodeCount())throw new i;return r}function i(){}e.exports=r,r.CycleException=i,i.prototype=new Error},8381:(e,t,n)=>{var o=n(8208);e.exports=function(e,t,n){var r,i={};o.forEach(n,function(n){for(var o,s,a=e.parent(n);a;){if((o=e.parent(a))?(s=i[o],i[o]=a):(s=r,r=a),s&&s!==a)return void t.setEdge(s,a);a=o}})}},8396:(e,t,n)=>{"use strict";var o=n(8208);e.exports=function(e,t){var n={};return o.forEach(e,function(e,t){var r=n[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};o.isUndefined(e.barycenter)||(r.barycenter=e.barycenter,r.weight=e.weight)}),o.forEach(t.edges(),function(e){var t=n[e.v],r=n[e.w];o.isUndefined(t)||o.isUndefined(r)||(r.indegree++,t.out.push(n[e.w]))}),function(e){var t=[];function n(e){return function(t){t.merged||(o.isUndefined(t.barycenter)||o.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&function(e,t){var n=0,o=0;e.weight&&(n+=e.barycenter*e.weight,o+=e.weight);t.weight&&(n+=t.barycenter*t.weight,o+=t.weight);e.vs=t.vs.concat(e.vs),e.barycenter=n/o,e.weight=o,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}function r(t){return function(n){n.in.push(t),0===--n.indegree&&e.push(n)}}for(;e.length;){var i=e.pop();t.push(i),o.forEach(i.in.reverse(),n(i)),o.forEach(i.out,r(i))}return o.map(o.filter(t,function(e){return!e.merged}),function(e){return o.pick(e,["vs","i","barycenter","weight"])})}(o.filter(n,function(e){return!e.indegree}))}},8420:(e,t,n)=>{var o=n(1775),r=n(3211),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var s=e[t];i.call(e,t)&&r(s,n)&&(void 0!==n||t in e)||o(e,t,n)}},8443:(e,t,n)=>{"use strict";e.exports=n(9717)},8468:(e,t,n)=>{var o=n(5816),r=n(644),i=n(4020);e.exports=function(e,t,n){return t===t?i(e,t,n):o(e,r,n)}},8487:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]])},8541:(e,t,n)=>{var o=n(9812),r=n(149),i=n(4052),s=n(9841),a=o?o.prototype:void 0,l=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return r(t,e)+"";if(s(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},8582:(e,t,n)=>{e.exports={components:n(5992),dijkstra:n(5822),dijkstraAll:n(8976),findCycles:n(247),floydWarshall:n(6945),isAcyclic:n(9825),postorder:n(1896),preorder:n(127),prim:n(6368),tarjan:n(8808),topsort:n(8353)}},8592:(e,t,n)=>{var o=n(4262),r=n(6326),i=n(474);e.exports=function(e){return o(e,i,r)}},8630:(e,t,n)=>{var o=n(1516),r=n(6806),i=n(8962),s=n(1295),a=n(8710);e.exports=function(e,t,n){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return o(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return r(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(e,n);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return i(e);case"[object Symbol]":return s(e)}}},8646:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},8673:(e,t,n)=>{var o=n(823),r=n(3713),i=n(6571);e.exports=function(e){return i(e)?o(e):r(e)}},8676:(e,t,n)=>{"use strict";n.d(t,{s:()=>r});var o=n(8328);function r(e){return(0,o.G)(e)&&"offsetHeight"in e}},8693:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},8710:(e,t,n)=>{var o=n(1516);e.exports=function(e,t){var n=t?o(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},8724:(e,t,n)=>{var o=n(7615),r=n(5051),i=n(2154),s=n(8734),a=n(2662);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}l.prototype.clear=o,l.prototype.delete=r,l.prototype.get=i,l.prototype.has=s,l.prototype.set=a,e.exports=l},8734:(e,t,n)=>{var o=n(5575),r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return o?void 0!==t[e]:r.call(t,e)}},8808:(e,t,n)=>{var o=n(5750);e.exports=function(e){var t=0,n=[],r={},i=[];function s(a){var l=r[a]={onStack:!0,lowlink:t,index:t++};if(n.push(a),e.successors(a).forEach(function(e){o.has(r,e)?r[e].onStack&&(l.lowlink=Math.min(l.lowlink,r[e].index)):(s(e),l.lowlink=Math.min(l.lowlink,r[e].lowlink))}),l.lowlink===l.index){var c,d=[];do{c=n.pop(),r[c].onStack=!1,d.push(c)}while(a!==c);i.push(d)}}return e.nodes().forEach(function(e){o.has(r,e)||s(e)}),i}},8853:(e,t,n)=>{"use strict";e.exports=n(5896)},8883:(e,t,n)=>{var o=n(5652),r=n(6571);e.exports=function(e,t){var n=-1,i=r(e)?Array(e.length):[];return o(e,function(e,o,r){i[++n]=t(e,o,r)}),i}},8895:e=>{e.exports=function(e,t){for(var n=-1,o=t.length,r=e.length;++n<o;)e[r+n]=t[n];return e}},8902:(e,t,n)=>{var o=n(4816),r=n(6179),i=n(6704);function s(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new o;++t<n;)this.add(e[t])}s.prototype.add=s.prototype.push=r,s.prototype.has=i,e.exports=s},8917:(e,t,n)=>{"use strict";n.d(t,{xQ:()=>i});var o=n(5043),r=n(9674);function i(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=(0,o.useContext)(r.t);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:i,register:s}=t,a=(0,o.useId)();(0,o.useEffect)(()=>{if(e)return s(a)},[e]);const l=(0,o.useCallback)(()=>e&&i&&i(a),[a,i,e]);return!n&&i?[!1,l]:[!0]}},8962:e=>{var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},8976:(e,t,n)=>{var o=n(5822),r=n(5750);e.exports=function(e,t,n){return r.transform(e.nodes(),function(r,i){r[i]=o(e,i,t,n)},{})}},8990:(e,t,n)=>{var o=n(9995)(n(2520));e.exports=o},9057:(e,t,n)=>{var o=n(5324),r=n(2777),i=n(4052),s=n(9194),a=n(6173),l=n(914);e.exports=function(e,t,n){for(var c=-1,d=(t=o(t,e)).length,u=!1;++c<d;){var h=l(t[c]);if(!(u=null!=e&&n(e,h)))break;e=e[h]}return u||++c!=d?u:!!(d=null==e?0:e.length)&&a(d)&&s(h,d)&&(i(e)||r(e))}},9075:(e,t,n)=>{var o=n(6614),r=n(6326);e.exports=function(e,t){return o(e,r(e),t)}},9096:(e,t,n)=>{var o=n(9256),r=n(5029),i=n(3279),s=n(4052),a=n(3932);e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?s(e)?r(e[0],e[1]):o(e):a(e)}},9140:(e,t,n)=>{var o=n(7303);e.exports=function(e){var t=o(e),n=t%1;return t===t?n?t-n:t:0}},9194:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var o=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==o||"symbol"!=o&&t.test(e))&&e>-1&&e%1==0&&e<n}},9207:(e,t,n)=>{var o=n(9383);e.exports={Graph:o.Graph,json:n(1097),alg:n(8582),version:o.version}},9256:(e,t,n)=>{var o=n(6532),r=n(3781),i=n(1310);e.exports=function(e){var t=r(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(n){return n===e||o(n,e,t)}}},9261:(e,t,n)=>{var o=n(8420),r=n(5324),i=n(9194),s=n(6686),a=n(914);e.exports=function(e,t,n,l){if(!s(e))return e;for(var c=-1,d=(t=r(t,e)).length,u=d-1,h=e;null!=h&&++c<d;){var p=a(t[c]),f=n;if("__proto__"===p||"constructor"===p||"prototype"===p)return e;if(c!=u){var m=h[p];void 0===(f=l?l(m,p,h):void 0)&&(f=s(m)?m:i(t[c+1])?[]:{})}o(h,p,f),h=h[p]}return e}},9292:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},9340:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]])},9350:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]])},9364:(e,t,n)=>{var o=n(9742),r=n(9096),i=n(61);e.exports=function(e,t){return e&&e.length?o(e,r(t,2),i):void 0}},9377:e=>{e.exports=function(e,t,n){for(var o=-1,r=e.length,i=t.length,s={};++o<r;){var a=o<i?t[o]:void 0;n(s,e[o],a)}return s}},9383:(e,t,n)=>{e.exports={Graph:n(191),version:n(8311)}},9394:(e,t,n)=>{var o=n(2622);e.exports=function(e){return o(this,e).has(e)}},9395:(e,t,n)=>{var o=n(4262),r=n(9621),i=n(8673);e.exports=function(e){return o(e,i,r)}},9417:(e,t,n)=>{var o=n(6686);e.exports=function(e){return e===e&&!o(e)}},9421:e=>{e.exports=function(e,t,n,o){var r=-1,i=null==e?0:e.length;for(o&&i&&(n=e[++r]);++r<i;)n=t(n,e[r],r,e);return n}},9461:(e,t,n)=>{"use strict";e.exports=n(2330)},9558:(e,t,n)=>{"use strict";var o=n(8208),r=n(7938).Graph,i=n(5641);function s(e,t){var n={};return o.reduce(t,function(t,r){var i=0,s=0,a=t.length,c=o.last(r);return o.forEach(r,function(t,d){var u=function(e,t){if(e.node(t).dummy)return o.find(e.predecessors(t),function(t){return e.node(t).dummy})}(e,t),h=u?e.node(u).order:a;(u||t===c)&&(o.forEach(r.slice(s,d+1),function(t){o.forEach(e.predecessors(t),function(o){var r=e.node(o),s=r.order;!(s<i||h<s)||r.dummy&&e.node(t).dummy||l(n,o,t)})}),s=d+1,i=h)}),r}),n}function a(e,t){var n={};function r(t,r,i,s,a){var c;o.forEach(o.range(r,i),function(r){c=t[r],e.node(c).dummy&&o.forEach(e.predecessors(c),function(t){var o=e.node(t);o.dummy&&(o.order<s||o.order>a)&&l(n,t,c)})})}return o.reduce(t,function(t,n){var i,s=-1,a=0;return o.forEach(n,function(o,l){if("border"===e.node(o).dummy){var c=e.predecessors(o);c.length&&(i=e.node(c[0]).order,r(n,a,l,s,i),a=l,s=i)}r(n,a,n.length,i,t.length)}),n}),n}function l(e,t,n){if(t>n){var o=t;t=n,n=o}var r=e[t];r||(e[t]=r={}),r[n]=!0}function c(e,t,n){if(t>n){var r=t;t=n,n=r}return o.has(e[t],n)}function d(e,t,n,r){var i={},s={},a={};return o.forEach(t,function(e){o.forEach(e,function(e,t){i[e]=e,s[e]=e,a[e]=t})}),o.forEach(t,function(e){var t=-1;o.forEach(e,function(e){var l=r(e);if(l.length){l=o.sortBy(l,function(e){return a[e]});for(var d=(l.length-1)/2,u=Math.floor(d),h=Math.ceil(d);u<=h;++u){var p=l[u];s[e]===e&&t<a[p]&&!c(n,e,p)&&(s[p]=e,s[e]=i[e]=i[p],t=a[p])}}})}),{root:i,align:s}}function u(e,t,n,i,s){var a={},l=function(e,t,n,i){var s=new r,a=e.graph(),l=function(e,t,n){return function(r,i,s){var a,l=r.node(i),c=r.node(s),d=0;if(d+=l.width/2,o.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":a=-l.width/2;break;case"r":a=l.width/2}if(a&&(d+=n?a:-a),a=0,d+=(l.dummy?t:e)/2,d+=(c.dummy?t:e)/2,d+=c.width/2,o.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":a=c.width/2;break;case"r":a=-c.width/2}return a&&(d+=n?a:-a),a=0,d}}(a.nodesep,a.edgesep,i);return o.forEach(t,function(t){var r;o.forEach(t,function(t){var o=n[t];if(s.setNode(o),r){var i=n[r],a=s.edge(i,o);s.setEdge(i,o,Math.max(l(e,t,r),a||0))}r=t})}),s}(e,t,n,s),c=s?"borderLeft":"borderRight";function d(e,t){for(var n=l.nodes(),o=n.pop(),r={};o;)r[o]?e(o):(r[o]=!0,n.push(o),n=n.concat(t(o))),o=n.pop()}return d(function(e){a[e]=l.inEdges(e).reduce(function(e,t){return Math.max(e,a[t.v]+l.edge(t))},0)},l.predecessors.bind(l)),d(function(t){var n=l.outEdges(t).reduce(function(e,t){return Math.min(e,a[t.w]-l.edge(t))},Number.POSITIVE_INFINITY),o=e.node(t);n!==Number.POSITIVE_INFINITY&&o.borderType!==c&&(a[t]=Math.max(a[t],n))},l.successors.bind(l)),o.forEach(i,function(e){a[e]=a[n[e]]}),a}function h(e,t){return o.minBy(o.values(t),function(t){var n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return o.forIn(t,function(t,o){var i=function(e,t){return e.node(t).width}(e,o)/2;n=Math.max(t+i,n),r=Math.min(t-i,r)}),n-r})}function p(e,t){var n=o.values(t),r=o.min(n),i=o.max(n);o.forEach(["u","d"],function(n){o.forEach(["l","r"],function(s){var a,l=n+s,c=e[l];if(c!==t){var d=o.values(c);(a="l"===s?r-o.min(d):i-o.max(d))&&(e[l]=o.mapValues(c,function(e){return e+a}))}})})}function f(e,t){return o.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var i=o.sortBy(o.map(e,r));return(i[1]+i[2])/2})}e.exports={positionX:function(e){var t,n=i.buildLayerMatrix(e),r=o.merge(s(e,n),a(e,n)),l={};o.forEach(["u","d"],function(i){t="u"===i?n:o.values(n).reverse(),o.forEach(["l","r"],function(n){"r"===n&&(t=o.map(t,function(e){return o.values(e).reverse()}));var s=("u"===i?e.predecessors:e.successors).bind(e),a=d(e,t,r,s),c=u(e,t,a.root,a.align,"r"===n);"r"===n&&(c=o.mapValues(c,function(e){return-e})),l[i+n]=c})});var c=h(e,l);return p(l,c),f(l,e.graph().align)},findType1Conflicts:s,findType2Conflicts:a,addConflict:l,hasConflict:c,verticalAlignment:d,horizontalCompaction:u,alignCoordinates:p,findSmallestWidthAlignment:h,balance:f}},9621:(e,t,n)=>{var o=n(7529),r=n(7828),i=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(e){return null==e?[]:(e=Object(e),o(s(e),function(t){return i.call(e,t)}))}:r;e.exports=a},9674:(e,t,n)=>{"use strict";n.d(t,{t:()=>o});const o=(0,n(5043).createContext)(null)},9676:e=>{var t=Math.ceil,n=Math.max;e.exports=function(e,o,r,i){for(var s=-1,a=n(t((o-e)/(r||1)),0),l=Array(a);a--;)l[i?a:++s]=e,e+=r;return l}},9717:(e,t,n)=>{"use strict";var o=n(5043),r=n(9461);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=r.useSyncExternalStore,a=o.useRef,l=o.useEffect,c=o.useMemo,d=o.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,o,r){var u=a(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;u=c(function(){function e(e){if(!l){if(l=!0,s=e,e=o(e),void 0!==r&&h.hasValue){var t=h.value;if(r(t,e))return a=t}return a=e}if(t=a,i(s,e))return t;var n=o(e);return void 0!==r&&r(t,n)?(s=e,t):(s=e,a=n)}var s,a,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,o,r]);var p=s(e,u[0],u[1]);return l(function(){h.hasValue=!0,h.value=p},[p]),d(p),p}},9742:(e,t,n)=>{var o=n(9841);e.exports=function(e,t,n){for(var r=-1,i=e.length;++r<i;){var s=e[r],a=t(s);if(null!=a&&(void 0===l?a===a&&!o(a):n(a,l)))var l=a,c=s}return c}},9791:(e,t,n)=>{var o=n(8208),r=n(6297),i=n(8396),s=n(388);e.exports=function e(t,n,a,l){var c=t.children(n),d=t.node(n),u=d?d.borderLeft:void 0,h=d?d.borderRight:void 0,p={};u&&(c=o.filter(c,function(e){return e!==u&&e!==h}));var f=r(t,c);o.forEach(f,function(n){if(t.children(n.v).length){var r=e(t,n.v,a,l);p[n.v]=r,o.has(r,"barycenter")&&(i=n,s=r,o.isUndefined(i.barycenter)?(i.barycenter=s.barycenter,i.weight=s.weight):(i.barycenter=(i.barycenter*i.weight+s.barycenter*s.weight)/(i.weight+s.weight),i.weight+=s.weight))}var i,s});var m=i(f,a);!function(e,t){o.forEach(e,function(e){e.vs=o.flatten(e.vs.map(function(e){return t[e]?t[e].vs:e}),!0)})}(m,p);var g=s(m,l);if(u&&(g.vs=o.flatten([u,g.vs,h],!0),t.predecessors(u).length)){var y=t.node(t.predecessors(u)[0]),v=t.node(t.predecessors(h)[0]);o.has(g,"barycenter")||(g.barycenter=0,g.weight=0),g.barycenter=(g.barycenter*g.weight+y.order+v.order)/(g.weight+2),g.weight+=2}return g}},9812:(e,t,n)=>{var o=n(6552).Symbol;e.exports=o},9825:(e,t,n)=>{var o=n(8353);e.exports=function(e){try{o(e)}catch(t){if(t instanceof o.CycleException)return!1;throw t}return!0}},9841:(e,t,n)=>{var o=n(6913),r=n(2761);e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==o(e)}},9855:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},9917:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(7784).A)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9935:(e,t,n)=>{var o=n(1340),r=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=o(t,e);return!(n<0)&&(n==t.length-1?t.pop():r.call(t,n,1),--this.size,!0)}},9987:(e,t,n)=>{var o=n(9812),r=n(2929),i=n(3211),s=n(3668),a=n(4160),l=n(2074),c=o?o.prototype:void 0,d=c?c.valueOf:void 0;e.exports=function(e,t,n,o,c,u,h){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new r(e),new r(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=a;case"[object Set]":var f=1&o;if(p||(p=l),e.size!=t.size&&!f)return!1;var m=h.get(e);if(m)return m==t;o|=2,h.set(e,t);var g=s(p(e),p(t),o,c,u,h);return h.delete(e),g;case"[object Symbol]":if(d)return d.call(e)==d.call(t)}return!1}},9995:(e,t,n)=>{var o=n(9096),r=n(6571),i=n(8673);e.exports=function(e){return function(t,n,s){var a=Object(t);if(!r(t)){var l=o(n,3);t=i(t),n=function(e){return l(a[e],e,a)}}var c=e(t,n,s);return c>-1?a[l?t[c]:c]:void 0}}}}]);
//# sourceMappingURL=vendors.dcef69e6.js.map