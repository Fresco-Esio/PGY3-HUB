(()=>{"use strict";var e={2667:(e,t,a)=>{a.d(t,{A:()=>l});var i=a(5043),s=a(3546),r=a(6446),n=a(8270),o=a(579);const l=e=>{let{data:t,onNodeClick:a,onNodeHover:l,onDataChange:d,caseId:c,autoSaveMindMapData:u,setMindMapData:p}=e;const[m,h]=(0,i.useState)([]),[x,g]=(0,i.useState)(null),[b,v]=(0,i.useState)({}),[y,f]=(0,i.useState)({}),[w,j]=(0,i.useState)(!1),[N,k]=(0,i.useState)(!1),[C,S]=(0,i.useState)(!1),[_,A]=(0,i.useState)(null),[T,D]=(0,i.useState)(0),P=(0,i.useRef)(null),z=(0,i.useRef)({}),O=(0,i.useRef)({}),$=(0,i.useRef)({isDragging:!1,draggedNodeId:null}),E=(0,i.useRef)(null),I=(0,i.useRef)(null),M=((0,i.useRef)({}),200),L=800,H=400,R=320,X=200,F="elastic.out(1, 0.4)",B=(0,i.useCallback)(e=>{console.log("scrollToNode called with nodeId:",e);const t=m.find(t=>t.id===e);if(console.log("Found node:",t),t&&E.current){const e=E.current,a=t.y-e.clientHeight/2;console.log("Scrolling to Y position:",a),e.scrollTo({top:Math.max(0,a),behavior:"smooth"})}else console.log("Node or scroll container not found")},[m]),Y=(0,i.useCallback)(()=>{console.log("scrollToTop clicked"),console.log("scrollContainerRef.current:",E.current),E.current?(console.log("Scrolling to top"),E.current.scrollTo({top:0,behavior:"smooth"})):console.log("scrollContainerRef is null")},[]),U=(0,i.useCallback)(()=>{console.log("scrollToBottom clicked"),console.log("scrollContainerRef.current:",E.current),E.current?(console.log("Scrolling to bottom, scrollHeight:",E.current.scrollHeight),E.current.scrollTo({top:E.current.scrollHeight,behavior:"smooth"})):console.log("scrollContainerRef is null")},[]),G=(0,i.useCallback)(()=>{if(console.log("scrollToLatestNode clicked"),m.length>0){const e=m[m.length-1];console.log("Latest node:",e),setTimeout(()=>B(e.id),100)}else console.log("No nodes available")},[m,B]),V=(0,i.useCallback)(()=>{if(E.current){const e=E.current,{scrollTop:t,scrollHeight:a,clientHeight:i}=(e.scrollHeight,e),s=a-i,r=s>0?Math.round(t/s*100):0;D(Math.min(100,Math.max(0,r)))}},[]),W=(0,i.useMemo)(()=>{if(0===m.length)return 600;const e=m.map(e=>e.y||0).filter(e=>e>0),t=e.length>0?Math.max(...e):0,a=200*m.length+200,i=t+300;return Math.max(600,a,i)},[m]);(0,i.useEffect)(()=>{V()},[W]),(0,i.useEffect)(()=>{const e=E.current;if(!e)return;const t=()=>{const{scrollTop:t,scrollHeight:a,clientHeight:i}=e,s=a-i,r=s>0?Math.round(t/s*100):0;D(Math.min(100,Math.max(0,r)))};return t(),e.addEventListener("scroll",t,{passive:!0}),()=>{e.removeEventListener("scroll",t)}},[W]);const q=(0,i.useRef)({}),J=(0,i.useCallback)(async function(){if(!C||arguments.length>0&&void 0!==arguments[0]&&arguments[0]){S(!0);try{const e=m.map((e,t)=>{var a,i,s,r,n,o,l,d,u,p;return{id:e.id||`timeline-${c}-${Date.now()}-${t}`,title:e.title||`Timeline Entry ${t+1}`,type:"timeline_entry",timestamp:e.date||(new Date).toISOString(),date:e.date||(new Date).toISOString(),orderIndex:t,patient_narrative:(null===(a=y[e.id])||void 0===a?void 0:a.patient)||(null===(i=e.patientData)||void 0===i?void 0:i.notes)||e.patient_narrative||"",clinical_notes:(null===(s=y[e.id])||void 0===s?void 0:s.clinical)||(null===(r=e.clinicalData)||void 0===r?void 0:r.notes)||e.clinical_notes||"",content:(null===(n=y[e.id])||void 0===n?void 0:n.patient)||(null===(o=y[e.id])||void 0===o?void 0:o.clinical)||e.content||"",patientData:{...e.patientData,notes:(null===(l=y[e.id])||void 0===l?void 0:l.patient)||(null===(d=e.patientData)||void 0===d?void 0:d.notes)||""},clinicalData:{...e.clinicalData,notes:(null===(u=y[e.id])||void 0===u?void 0:u.clinical)||(null===(p=e.clinicalData)||void 0===p?void 0:p.notes)||""},symptoms:e.symptoms||[],x:e.x||H,y:e.y||100+t*M,created_at:e.created_at||(new Date).toISOString(),updated_at:(new Date).toISOString()}});if(console.log(`Saving timeline data for case ${c}:`,e),c&&p&&u)p(t=>{const a=t.cases.map(t=>String(t.id)===String(c)?{...t,timeline:e,last_updated:(new Date).toISOString()}:t),i={...t,cases:a};return u(i),i});else{const e={nodes:m.map(e=>{var t,a,i,s;return{...e,patientData:{...e.patientData,notes:(null===(t=y[e.id])||void 0===t?void 0:t.patient)||(null===(a=e.patientData)||void 0===a?void 0:a.notes)||""},clinicalData:{...e.clinicalData,notes:(null===(i=y[e.id])||void 0===i?void 0:i.clinical)||(null===(s=e.clinicalData)||void 0===s?void 0:s.notes)||""}}}),cardTexts:y,timestamp:(new Date).toISOString(),version:"1.0"};localStorage.setItem("timeline-data",JSON.stringify(e))}d&&await d(e),A(new Date),console.log("Timeline data saved successfully")}catch(e){console.error("Failed to save timeline data:",e)}finally{S(!1)}}},[m,y,C,d,c,p,u]),K=(0,i.useCallback)(()=>{I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{J()},800)},[J]);(0,i.useEffect)(()=>{if(!(()=>{try{if(console.log(`Loading timeline data for case ${c}:`,t),c&&t&&Array.isArray(t)){console.log(`Loading ${t.length} timeline entries from case integration for case ${c}`);const e=t.map((e,t)=>{const a=e.id||`timeline-${c}-${Date.now()}-${t}`,i=100+t*M;return f(t=>{var i,s;return{...t,[a]:{patient:e.patient_narrative||(null===(i=e.patientData)||void 0===i?void 0:i.notes)||"",clinical:e.clinical_notes||(null===(s=e.clinicalData)||void 0===s?void 0:s.notes)||""}}}),q.current[a]={x:e.x||H,y:e.y||i,index:t},{id:a,title:e.title||`Timeline Entry ${t+1}`,date:e.timestamp||e.date||(new Date).toISOString(),type:e.type||"timeline_entry",patient_narrative:e.patient_narrative||"",clinical_notes:e.clinical_notes||"",content:e.content||e.patient_narrative||e.clinical_notes||"",patientData:{notes:e.patient_narrative||"",...e.patientData},clinicalData:{notes:e.clinical_notes||"",...e.clinicalData},symptoms:e.symptoms||[],x:e.x||H,y:e.y||i,originalY:i,orderIndex:void 0!==e.orderIndex?e.orderIndex:t,created_at:e.created_at||(new Date).toISOString(),updated_at:e.updated_at||(new Date).toISOString()}});if(e.length>0)return h(e),console.log(`Successfully loaded ${e.length} timeline nodes for case ${c}`),!0}if(!c){const e=localStorage.getItem("timeline-data");if(e){const t=JSON.parse(e);if(console.log("Loading saved timeline data from localStorage:",t),t.nodes&&t.nodes.length>0&&0===m.length)return h(t.nodes),t.cardTexts&&f(t.cardTexts),t.nodes.forEach((e,t)=>{q.current[e.id]={x:e.x||H,y:e.y||100+t*M,index:t}}),A(new Date(t.timestamp)),!0}}return console.log(`No existing timeline data found for case ${c||"standalone"}, initializing empty timeline`),!1}catch(e){return console.error("Failed to load timeline data:",e),!1}})()&&t&&t.length>0&&0===m.length&&!c){const e=t.map((e,t)=>{const a=100+t*M,i=e.id;return q.current[i]={x:H,y:a,index:t},f(t=>{var a,s,r,n;return{...t,[i]:{patient:(null===(a=e.patientData)||void 0===a?void 0:a.notes)||(null===(s=e.patientData)||void 0===s?void 0:s.chiefComplaint)||"",clinical:(null===(r=e.clinicalData)||void 0===r?void 0:r.notes)||(null===(n=e.clinicalData)||void 0===n?void 0:n.chiefComplaint)||""}}}),{...e,x:H,y:a,originalY:a}});h(e)}},[t,c]);const Z=(0,i.useCallback)((e,t)=>{var a;const i=null===(a=q.current[e])||void 0===a?void 0:a.index;if(void 0===i)return;const s=[];if(i>0){const a=m[i-1];a&&s.push({id:`connection-${e}-prev`,sourceNode:a,targetNode:{...a,x:t.x,y:t.y}})}if(i<m.length-1){const a=m[i+1];a&&s.push({id:`connection-${e}-next`,sourceNode:{...a,x:t.x,y:t.y},targetNode:a})}s.forEach(e=>{const t=O.current[e.id];if(t){const a=e.sourceNode.x,i=e.sourceNode.y,s=e.targetNode.x,r=e.targetNode.y,o=`M ${a} ${i} C ${a} ${(i+r)/2}, ${s} ${(i+r)/2}, ${s} ${r}`;n.os.to(t,{attr:{d:o},duration:.3,ease:F})}})},[m]),Q=(0,i.useCallback)((e,t)=>{var a;e.preventDefault(),$.current.isDragging=!0,$.current.draggedNodeId=t,j(!0);const i=z.current[t];if(!i)return;if(!(null===(a=P.current)||void 0===a?void 0:a.getBoundingClientRect()))return;const s=q.current[t];if(!s)return;e.clientX,e.clientY,s.x,s.y;const r=e=>{var a;const s=null===(a=P.current)||void 0===a?void 0:a.getBoundingClientRect();if(!s)return;const r=e.clientX-s.left,n=e.clientY-s.top,o=Math.max(50,Math.min(750,r)),l=Math.max(50,n);i.style.left=o-30+"px",i.style.top=l-30+"px",i.style.transform="",h(e=>e.map(e=>e.id===t?{...e,x:o,y:l}:e)),Z(t,{x:o,y:l})},o=e=>{var a;$.current.isDragging=!1,$.current.draggedNodeId=null,j(!1);[`connection-${t}-prev`,`connection-${t}-next`].forEach(e=>{const t=O.current[e];t&&n.os.fromTo(t,{rotation:-1},{rotation:0,duration:.3,ease:"sine.out"})});const i=null===(a=P.current)||void 0===a?void 0:a.getBoundingClientRect();if(!i)return;const s=Math.max(50,Math.min(750,e.clientX-i.left)),l=Math.max(50,e.clientY-i.top);h(e=>e.map(e=>e.id===t?{...e,x:s,y:l}:e)),q.current[t].x=s,q.current[t].y=l,K(),setTimeout(()=>V(),50),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",o),setTimeout(()=>{$.current.isDragging=!1},10)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",o)},[W,Z,K]),ee=(0,i.useCallback)(e=>{if(!$.current.isDragging){if(E.current){const t=E.current,a=e.y-t.clientHeight/2;t.scrollTo({top:Math.max(0,a),behavior:"smooth"})}g(null),v({[e.id]:{patient:!0,clinical:!0}}),null===a||void 0===a||a(e)}},[a]),te=(0,i.useCallback)((e,t)=>{$.current.isDragging||(t?(v({}),g(e)):g(null),null===l||void 0===l||l(e,t))},[l]),ae=(0,i.useCallback)((e,t,a)=>{f(i=>({...i,[e]:{...i[e],[t]:a}})),K()},[K]),ie=(0,i.useCallback)((e,t)=>{v(t=>({...t,[e]:{patient:!1,clinical:!1}}))},[]),se=(0,i.useCallback)(e=>{var t,a;const i=(null===x||void 0===x?void 0:x.id)===e,s=(null===(t=b[e])||void 0===t?void 0:t.patient)||(null===(a=b[e])||void 0===a?void 0:a.clinical);return console.log(`Cards visibility check for ${e}:`,{isHovered:i,isEditing:s,editingState:b[e]}),i||s},[x,b]),re=(0,i.useCallback)(()=>{if(N)return;k(!0);const e=`node-${Date.now()}`,t=m.length,a=100+t*M,i={id:e,date:(new Date).toISOString(),patientData:{chiefComplaint:"",notes:""},clinicalData:{chiefComplaint:"",notes:""},x:H,y:a,originalY:a};q.current[e]={x:H,y:a,index:t},f(t=>({...t,[e]:{patient:"",clinical:""}})),h(e=>{const t=[...e,i];return t.forEach((e,t)=>{q.current[e.id]&&(q.current[e.id].index=t)}),t}),setTimeout(()=>{const t=document.querySelector(`[data-node-id="${e}"]`);t&&E.current&&t.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),k(!1),K()},800)},[m.length,N,K]),ne=(0,i.useCallback)(()=>{h(e=>e.map((e,t)=>{const a=100+t*M,i={...e,x:H,y:a,originalY:a};q.current[e.id]&&(q.current[e.id].x=H,q.current[e.id].y=a,q.current[e.id].index=t);[`connection-${e.id}-prev`,`connection-${e.id}-next`].forEach(e=>{const t=O.current[e];t&&n.os.to(t,{attr:{d:""},duration:.3,ease:F})});const s=document.querySelector(`[data-node-id="${e.id}"]`);s&&(s.style.left="370px",s.style.top=a-30+"px",s.style.transform="");const r=document.querySelector(`[data-patient-card="${e.id}"]`),o=document.querySelector(`[data-clinical-card="${e.id}"]`);return r&&(r.style.left="-120px",r.style.top=a-60+"px",r.style.transform=""),o&&(o.style.left="600px",o.style.top=a-60+"px",o.style.transform=""),i})),K()},[K]),oe=(0,i.useCallback)(()=>{J(!0)},[J]);return(0,i.useEffect)(()=>()=>{I.current&&clearTimeout(I.current)},[]),(0,o.jsxs)("div",{className:"relative w-full h-full",children:[(0,o.jsx)("style",{children:"\n  .timeline-scrollbar::-webkit-scrollbar {\n    width: 12px;\n    height: 12px;\n  }\n  \n  .timeline-scrollbar::-webkit-scrollbar-track {\n    background: rgba(30, 41, 59, 0.3);\n    border-radius: 6px;\n    margin: 4px;\n  }\n  \n  .timeline-scrollbar::-webkit-scrollbar-thumb {\n    background: linear-gradient(45deg, rgba(59, 130, 246, 0.6), rgba(99, 102, 241, 0.8));\n    border-radius: 6px;\n    border: 2px solid rgba(30, 41, 59, 0.3);\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  }\n  \n  .timeline-scrollbar::-webkit-scrollbar-thumb:hover {\n    background: linear-gradient(45deg, rgba(59, 130, 246, 0.8), rgba(99, 102, 241, 1));\n    border-color: rgba(59, 130, 246, 0.3);\n    transform: scale(1.1);\n    box-shadow: 0 0 10px rgba(59, 130, 246, 0.4);\n  }\n  \n  .timeline-scrollbar::-webkit-scrollbar-thumb:active {\n    background: linear-gradient(45deg, rgba(37, 99, 235, 0.9), rgba(79, 70, 229, 1));\n    transform: scale(1.05);\n  }\n  \n  .timeline-scrollbar::-webkit-scrollbar-corner {\n    background: rgba(30, 41, 59, 0.3);\n    border-radius: 6px;\n  }\n  \n  .timeline-scrollbar {\n    scrollbar-width: thin;\n    scrollbar-color: rgba(59, 130, 246, 0.5) rgba(30, 41, 59, 0.3);\n    scroll-behavior: smooth;\n    animation: scrollbar-glow 3s ease-in-out infinite alternate;\n  }\n  \n  @keyframes scrollbar-glow {\n    from {\n      scrollbar-color: rgba(59, 130, 246, 0.4) rgba(30, 41, 59, 0.3);\n    }\n    to {\n      scrollbar-color: rgba(59, 130, 246, 0.7) rgba(30, 41, 59, 0.4);\n    }\n  }\n  \n  /* Smooth scrolling enhancement */\n  .timeline-scrollbar {\n    scroll-padding-top: 20px;\n    scroll-padding-bottom: 20px;\n  }\n\n  /* Custom animations for the timeline components */\n  @keyframes shimmer {\n    0% { transform: translateX(-100%); }\n    100% { transform: translateX(100%); }\n  }\n  \n  @keyframes shimmerReverse {\n    0% { transform: translateX(100%); }\n    100% { transform: translateX(-100%); }\n  }\n  \n  @keyframes pulse {\n    0%, 100% { opacity: 0.6; }\n    50% { opacity: 0.2; }\n  }\n"}),(0,o.jsxs)("div",{className:"absolute top-4 right-4 flex gap-2 z-40",children:[(0,o.jsxs)(r.P.button,{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-3 py-2 rounded-lg shadow-lg flex items-center gap-2 transition-all hover:shadow-blue-300/30",onClick:Y,whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:1.8,duration:.5},title:"Scroll to Top",children:[(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})}),"Top"]}),(0,o.jsxs)(r.P.button,{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-3 py-2 rounded-lg shadow-lg flex items-center gap-2 transition-all hover:shadow-blue-300/30",onClick:U,whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:2,duration:.5},title:"Scroll to Bottom",children:[(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V4"})}),"Bottom"]}),(0,o.jsxs)(r.P.button,{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-3 py-2 rounded-lg shadow-lg flex items-center gap-2 transition-all hover:shadow-indigo-300/30",onClick:G,whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:2.2,duration:.5},title:"Go to Latest Entry",children:[(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Latest"]}),(0,o.jsxs)(r.P.button,{className:(C?"bg-gradient-to-r from-green-500 to-emerald-600 cursor-not-allowed":"bg-gradient-to-r from-green-500 to-emerald-600 hover:shadow-green-300/30")+" text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2 transition-all",onClick:oe,disabled:C,whileHover:C?{}:{scale:1.05},whileTap:C?{}:{scale:.95},initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:1.4,duration:.5},children:[C?(0,o.jsx)("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})}):(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),C?"Saving...":"Save"]}),(0,o.jsxs)(r.P.button,{className:"bg-gradient-to-r from-gray-600 to-slate-700 text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2 transition-all hover:shadow-gray-400/20",onClick:ne,whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:1.2,duration:.5},children:[(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset Layout"]}),(0,o.jsxs)(r.P.button,{className:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2 transition-all hover:shadow-blue-400/30",onClick:re,disabled:N,whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:1,duration:.5},children:[(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),N?"Adding...":"Add Node"]})]}),(0,o.jsx)("div",{ref:E,className:"timeline-scrollbar relative w-full overflow-y-auto",style:{height:"80vh",maxHeight:"600px"},onClick:e=>{const t=e.target.closest(".timeline-card"),a=e.target.closest(".timeline-node"),i=e.target.closest("button");t||a||i||v({})},children:(0,o.jsx)("div",{className:"relative w-full",style:{height:Math.max((W||600)+200,window.innerHeight||600),minHeight:"100vh"},children:(0,o.jsxs)("div",{ref:P,className:"relative mx-auto",style:{width:L,height:(W||600)+200},children:[(0,o.jsxs)("svg",{className:"absolute inset-0 pointer-events-none",style:{zIndex:1},width:L,height:W+200,viewBox:`0 0 800 ${W+200}`,children:[(0,o.jsx)("path",{d:`M 400 50 ${m.map(e=>`L ${e.x} ${e.y}`).join(" ")}`,stroke:"url(#timelineGradient)",strokeWidth:"2",fill:"none",strokeDasharray:"5,5"}),(0,o.jsxs)("defs",{children:[(0,o.jsxs)("linearGradient",{id:"timelineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,o.jsx)("stop",{offset:"0%",stopColor:"#93C5FD"}),(0,o.jsx)("stop",{offset:"100%",stopColor:"#C4B5FD"})]}),(0,o.jsxs)("linearGradient",{id:"connectionGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,o.jsx)("stop",{offset:"0%",stopColor:"#3B82F6"}),(0,o.jsx)("stop",{offset:"100%",stopColor:"#8B5CF6"})]}),(0,o.jsxs)("filter",{id:"glow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[(0,o.jsx)("feGaussianBlur",{stdDeviation:"3",result:"blur"}),(0,o.jsx)("feComposite",{in:"SourceGraphic",in2:"blur",operator:"over"})]})]}),m.map((e,t)=>{if(0===t)return null;const a=m[t-1],i=a.x,s=a.y,n=e.x,l=e.y,d=`M ${i} ${s} C ${i} ${(s+l)/2}, ${n} ${(s+l)/2}, ${n} ${l}`,c=`connection-${a.id}-next`,u=`connection-${e.id}-prev`,p=`connection-${a.id}-${e.id}`;return(0,o.jsx)(r.P.path,{ref:e=>{O.current[c]=e,O.current[u]=e},d:d,stroke:"url(#connectionGradient)",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeOpacity:"0.8",filter:"url(#glow)",style:{transformOrigin:"center"},initial:{opacity:1,pathLength:0},animate:{opacity:1,pathLength:1},transition:{duration:.8,delay:Math.min(.5,.1*t)}},p)})]}),(0,o.jsxs)(r.P.div,{className:"absolute text-center",style:{left:250,top:10,width:300},initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.6},children:[(0,o.jsx)("h2",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Patient Timeline"}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Instant 1:1 drag \u2022 Hover for cards \u2022 Click to edit"})]}),m.map((e,t)=>{var a,i,n,l,d,c,u,p,m,h,f,w,j;return(0,o.jsxs)("div",{children:[(0,o.jsxs)(r.P.div,{ref:t=>z.current[e.id]=t,"data-node-id":e.id,className:"timeline-node absolute cursor-grab active:cursor-grabbing transform-gpu "+((null===x||void 0===x?void 0:x.id)===e.id?"ring-[5px] ring-purple-200/40 shadow-xl scale-110":"shadow-md hover:shadow-lg hover:scale-105"),style:{left:e.x-30,top:e.y-30,width:60,height:60,borderRadius:"50%",background:(null===x||void 0===x?void 0:x.id)===e.id?"linear-gradient(135deg, #8B5CF6, #6366F1, #4F46E5)":"linear-gradient(135deg, #3B82F6, #6366F1, #4F46E5)",boxShadow:(null===x||void 0===x?void 0:x.id)===e.id?"0 0 20px rgba(139, 92, 246, 0.6), inset 0 0 10px rgba(255, 255, 255, 0.2)":"0 0 15px rgba(59, 130, 246, 0.5), inset 0 0 8px rgba(255, 255, 255, 0.2)",border:"3px solid rgba(255, 255, 255, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,transition:$.current.isDragging?"none":"all 0.2s cubic-bezier(0.4, 0, 0.2, 1), transform 0.15s ease-out",willChange:$.current.isDragging?"transform":"auto"},initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200,damping:20,delay:.1*t},onMouseDown:t=>{const a=t.currentTarget;a.style.transform="scale(0.95)",setTimeout(()=>{"scale(0.95)"===a.style.transform&&(a.style.transform="")},100),Q(t,e.id)},onClick:t=>{t.stopPropagation(),setTimeout(()=>{$.current.isDragging||ee(e)},20)},onMouseEnter:t=>{$.current.isDragging||te(e,!0)},onMouseLeave:t=>{$.current.isDragging||te(e,!1)},children:[(0,o.jsxs)("div",{className:"w-full h-full rounded-full bg-gradient-to-b from-white/40 to-white/10 flex items-center justify-center relative overflow-hidden backdrop-blur-[1px]",children:[(0,o.jsx)("div",{className:"absolute inset-1 rounded-full bg-white/10 backdrop-blur-[2px]"}),(0,o.jsx)("div",{className:"z-10 text-white drop-shadow-lg relative",children:e.symptoms&&e.symptoms.length>0?(0,o.jsxs)("svg",{className:"w-6 h-6 filter drop-shadow-md",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,o.jsx)("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),(0,o.jsx)("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5z",clipRule:"evenodd"})]}):null!==(a=e.patientData)&&void 0!==a&&a.notes?(0,o.jsx)("svg",{className:"w-6 h-6 filter drop-shadow-md",fill:"currentColor",viewBox:"0 0 20 20",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}):(0,o.jsx)("svg",{className:"w-6 h-6 filter drop-shadow-md",fill:"currentColor",viewBox:"0 0 20 20",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})})}),(0,o.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-white/30 to-blue-300/30",style:{animation:(null===x||void 0===x?void 0:x.id)===e.id?"pulse 1.8s cubic-bezier(0.4, 0, 0.6, 1) infinite":"pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite",opacity:(null===x||void 0===x?void 0:x.id)===e.id?.8:.4}}),(null===x||void 0===x?void 0:x.id)===e.id&&(0,o.jsx)("div",{className:"absolute inset-[-5px] rounded-full bg-purple-300/20",style:{animation:"pulse 2.2s cubic-bezier(0.4, 0, 0.6, 1) infinite 0.5s"}})]}),(0,o.jsx)("div",{className:`absolute text-xs font-medium whitespace-nowrap transition-all duration-200 ease-out ${(null===x||void 0===x?void 0:x.id)===e.id?"translate-x-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-md":"bg-white/90 text-gray-700"} px-2 py-1 rounded-md shadow-sm`,style:{left:70,top:"50%",transform:(null===x||void 0===x?void 0:x.id)===e.id?"translateY(-50%) translateX(8px) scale(1.05)":"translateY(-50%)",borderLeft:(null===x||void 0===x?void 0:x.id)===e.id?"3px solid rgba(255, 255, 255, 0.7)":"none"},children:(()=>{const t=new Date(e.date);return`${t.toLocaleDateString(void 0,{month:"short",day:"numeric"})} \xb7 ${t.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}`})()})]}),(0,o.jsx)(s.N,{children:se(e.id)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(r.P.div,{"data-patient-card":e.id,className:"timeline-card absolute bg-white rounded-lg shadow-xl z-20 backdrop-blur-sm",style:{left:e.x-X-R,top:e.y-60,width:R,borderRadius:"0.75rem",borderLeft:"4px solid transparent",borderImage:"linear-gradient(to bottom, #3B82F6, #8B5CF6) 1",boxShadow:"0 10px 25px -5px rgba(30, 58, 138, 0.3), 0 8px 10px -6px rgba(67, 56, 202, 0.25)",padding:"16px",background:"linear-gradient(to bottom right, rgba(30, 41, 59, 0.85), rgba(15, 23, 42, 0.9))"},initial:{opacity:0,scale:.8,x:20},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.8,x:20},transition:{type:"spring",stiffness:300,damping:25},children:[(0,o.jsxs)("div",{className:"flex items-center mb-3",children:[(0,o.jsx)("div",{className:"w-3 h-3 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-full mr-2 shadow-sm"}),(0,o.jsx)("h4",{className:"font-semibold bg-gradient-to-r from-blue-300 to-indigo-300 bg-clip-text text-transparent",children:"Patient Narrative"}),(null===(i=b[e.id])||void 0===i?void 0:i.patient)&&(0,o.jsx)("div",{className:"ml-auto text-xs font-medium px-2 py-0.5 rounded-full bg-blue-900/50 text-blue-200 shadow-inner border border-blue-700/30",children:"Editing"})]}),null!==(n=b[e.id])&&void 0!==n&&n.patient?(0,o.jsx)("textarea",{className:"w-full h-24 p-3 border-2 border-blue-700/50 rounded-lg resize-none text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-600 shadow-inner bg-slate-800/70 backdrop-blur-sm transition-all text-blue-100",value:(null===(l=y[e.id])||void 0===l?void 0:l.patient)||"",onChange:t=>ae(e.id,"patient",t.target.value),onBlur:t=>{ie(e.id,"patient")},placeholder:"Enter patient narrative...",style:{boxShadow:"inset 0 2px 4px 0 rgba(29, 78, 216, 0.2)"}}):(0,o.jsx)("div",{className:"text-sm text-blue-100 min-h-[60px] p-3 border-2 border-transparent hover:border-blue-700/40 rounded-lg cursor-text hover:bg-slate-800/50 transition-all",onClick:t=>{t.stopPropagation(),g(null),v({[e.id]:{patient:!0,clinical:!0}})},style:{backgroundImage:null!==(d=y[e.id])&&void 0!==d&&d.patient?"linear-gradient(to bottom right, rgba(30, 58, 138, 0.3), rgba(30, 64, 175, 0.15))":"none",boxShadow:null!==(c=y[e.id])&&void 0!==c&&c.patient?"inset 0 1px 2px 0 rgba(29, 78, 216, 0.15)":"none"},children:(null===(u=y[e.id])||void 0===u?void 0:u.patient)||(0,o.jsx)("span",{className:"text-blue-300 italic",children:"Click to add patient narrative..."})}),(0,o.jsxs)("div",{className:"absolute",style:{width:180,height:2,right:-180,top:50,zIndex:0,overflow:"hidden"},children:[(0,o.jsx)("div",{className:"h-full w-full bg-gradient-to-r from-blue-300 via-indigo-400 to-blue-500",style:{animation:(null===x||void 0===x?void 0:x.id)===e.id?"shimmer 1.5s linear infinite":"none"}}),(0,o.jsx)("style",{jsx:!0,children:"\n                        @keyframes shimmer {\n                          0% { transform: translateX(-100%); }\n                          100% { transform: translateX(100%); }\n                        }\n                      "})]})]}),(0,o.jsxs)(r.P.div,{"data-clinical-card":e.id,className:"timeline-card absolute bg-white rounded-lg shadow-xl z-20 backdrop-blur-sm",style:{left:e.x+X,top:e.y-60,width:R,borderRadius:"0.75rem",borderLeft:"4px solid transparent",borderImage:"linear-gradient(to bottom, #8B5CF6, #6366F1) 1",boxShadow:"0 10px 25px -5px rgba(91, 33, 182, 0.3), 0 8px 10px -6px rgba(76, 29, 149, 0.25)",padding:"16px",background:"linear-gradient(to bottom right, rgba(30, 41, 59, 0.85), rgba(15, 23, 42, 0.9))"},initial:{opacity:0,scale:.8,x:-20},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.8,x:-20},transition:{type:"spring",stiffness:300,damping:25,delay:.1},children:[(0,o.jsxs)("div",{className:"flex items-center mb-3",children:[(0,o.jsx)("div",{className:"w-3 h-3 bg-gradient-to-r from-purple-400 to-indigo-500 rounded-full mr-2 shadow-sm"}),(0,o.jsx)("h4",{className:"font-semibold bg-gradient-to-r from-purple-300 to-indigo-300 bg-clip-text text-transparent",children:"Clinical Impression"}),(null===(p=b[e.id])||void 0===p?void 0:p.clinical)&&(0,o.jsx)("div",{className:"ml-auto text-xs font-medium px-2 py-0.5 rounded-full bg-purple-900/50 text-purple-200 shadow-inner border border-purple-700/30",children:"Editing"})]}),null!==(m=b[e.id])&&void 0!==m&&m.clinical?(0,o.jsx)("textarea",{className:"w-full h-24 p-3 border-2 border-purple-700/50 rounded-lg resize-none text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-600 shadow-inner bg-slate-800/70 backdrop-blur-sm transition-all text-purple-100",value:(null===(h=y[e.id])||void 0===h?void 0:h.clinical)||"",onChange:t=>ae(e.id,"clinical",t.target.value),onBlur:t=>{ie(e.id,"clinical")},placeholder:"Enter clinical impression...",style:{boxShadow:"inset 0 2px 4px 0 rgba(126, 34, 206, 0.2)"}}):(0,o.jsx)("div",{className:"text-sm text-purple-100 min-h-[60px] p-3 border-2 border-transparent hover:border-purple-700/40 rounded-lg cursor-text hover:bg-slate-800/50 transition-all",onClick:t=>{t.stopPropagation(),g(null),v({[e.id]:{patient:!0,clinical:!0}})},style:{backgroundImage:null!==(f=y[e.id])&&void 0!==f&&f.clinical?"linear-gradient(to bottom right, rgba(88, 28, 135, 0.3), rgba(76, 29, 149, 0.15))":"none",boxShadow:null!==(w=y[e.id])&&void 0!==w&&w.clinical?"inset 0 1px 2px 0 rgba(126, 34, 206, 0.15)":"none"},children:(null===(j=y[e.id])||void 0===j?void 0:j.clinical)||(0,o.jsx)("span",{className:"text-purple-300 italic",children:"Click to add clinical impression..."})}),(0,o.jsxs)("div",{className:"absolute",style:{width:180,height:2,left:-180,top:50,zIndex:0,overflow:"hidden"},children:[(0,o.jsx)("div",{className:"h-full w-full bg-gradient-to-r from-purple-300 via-indigo-400 to-purple-500",style:{animation:(null===x||void 0===x?void 0:x.id)===e.id?"shimmerReverse 1.5s linear infinite":"none"}}),(0,o.jsx)("style",{jsx:!0,children:"\n                        @keyframes shimmerReverse {\n                          0% { transform: translateX(100%); }\n                          100% { transform: translateX(-100%); }\n                        }\n                      "})]})]})]})})]},e.id)}),(0,o.jsx)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-40",children:(0,o.jsxs)(r.P.div,{className:"bg-slate-800 bg-opacity-90 rounded-full px-4 py-2 flex items-center gap-3 shadow-lg border border-slate-600",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:2.5,duration:.5},children:[(0,o.jsxs)("span",{className:"text-sm text-blue-300",children:[m.length," ",1===m.length?"entry":"entries"]}),(0,o.jsx)("div",{className:"w-px h-4 bg-slate-600"}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("div",{className:"w-16 h-1 bg-slate-600 rounded-full overflow-hidden",children:(0,o.jsx)("div",{className:"h-full bg-blue-400 rounded-full transition-all duration-300 ease-out",style:{width:`${T}%`}})}),(0,o.jsxs)("span",{className:"text-xs text-slate-400 min-w-[3rem] text-center",children:[T,"%"]})]}),(0,o.jsx)("div",{className:"w-px h-4 bg-slate-600"}),(0,o.jsx)("span",{className:"text-xs text-slate-400",children:"Click nodes to center"})]})})]})})})]})}},7173:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var i=a(5043),s=a(3546),r=a(6446),n=a(2024),o=a(4596),l=a(4537),d=a(2626),c=a(6382),u=a(2382),p=a(8326),m=a(1680),h=a(8487),x=a(6835),g=a(1360),b=a(8693),v=a(4935),y=a(7118),f=a(614),w=a(579);const j={hidden:{opacity:0,scale:.3,y:50,rotate:-5},visible:{opacity:1,scale:1,y:0,rotate:0,transition:{type:"spring",damping:25,stiffness:300,duration:.6}},exit:{opacity:0,scale:.7,y:30,rotate:-3,transition:{type:"easeInOut",duration:.4}}},N={hidden:{opacity:0,backdropFilter:"blur(0px)"},visible:{opacity:1,backdropFilter:"blur(8px)",transition:{duration:.4,ease:"easeOut"}},exit:{opacity:0,backdropFilter:"blur(0px)",transition:{duration:.3,ease:"easeIn"}}},k={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"easeOut",duration:.3,delay:.1}},exit:{opacity:0,y:-10,scale:1.02,transition:{type:"easeIn",duration:.2}}},C={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{duration:.4,ease:"easeOut"}},edit:{scale:1.02,boxShadow:"0 8px 25px rgba(59, 130, 246, 0.15)",transition:{duration:.3,ease:"easeOut"}},saved:{scale:1,boxShadow:"0 4px 15px rgba(34, 197, 94, 0.15)",transition:{duration:.3,ease:"easeOut"}}},S=e=>{var t,a,S,_;let{isOpen:A,data:T,onClose:D,onAnimationStart:P,onAnimationEnd:z,setMindMapData:O,autoSaveMindMapData:$,addToast:E,syncNodeData:I,forceNodeUpdate:M}=e;const[L,H]=(0,i.useState)(!1),[R,X]=(0,i.useState)(!1),[F,B]=(0,i.useState)(!1),[Y,U]=(0,i.useState)({}),[G,V]=(0,i.useState)(!1),[W,q]=(0,i.useState)(!1),[J,K]=(0,i.useState)("overview"),[Z,Q]=(0,i.useState)(!1),[ee,te]=(0,i.useState)({}),[ae,ie]=(0,i.useState)({}),[se,re]=(0,i.useState)({}),ne=(0,i.useRef)({}),[oe,le]=(0,i.useState)(!1),[de,ce]=(0,i.useState)({}),[ue,pe]=(0,i.useState)(""),[me,he]=(0,i.useState)(!1),xe={"Mood Disorders":{primary:"#ef4444",secondary:"#fca5a5"},"Anxiety Disorders":{primary:"#f59e0b",secondary:"#fbbf24"},"Psychotic Disorders":{primary:"#8b5cf6",secondary:"#c4b5fd"},"Personality Disorders":{primary:"#10b981",secondary:"#6ee7b7"},"Neurodevelopmental Disorders":{primary:"#3b82f6",secondary:"#93c5fd"},"Trauma Related Disorders":{primary:"#dc2626",secondary:"#f87171"},"Substance Use Disorders":{primary:"#059669",secondary:"#34d399"},"Eating Disorders":{primary:"#d946ef",secondary:"#e879f9"},"Sleep Disorders":{primary:"#6366f1",secondary:"#a5b4fc"},"Cognitive Disorders":{primary:"#ea580c",secondary:"#fb923c"},Other:{primary:"#6b7280",secondary:"#9ca3af"}},ge=[{id:"overview",label:"Overview",icon:d.A},{id:"concept",label:"Concept",icon:c.A},{id:"clinical",label:"Clinical Associations",icon:v.A},{id:"treatment",label:"Treatment",icon:x.A},{id:"connections",label:"Connections",icon:h.A}];(0,i.useEffect)(()=>{if(A&&T&&!W){X(!0);const e={...T,category:T.category||"Other",definition:T.definition||"",diagnostic_criteria:T.diagnostic_criteria||[],comorbidities:T.comorbidities||[],differential_diagnoses:T.differential_diagnoses||[],medications:T.medications||[],psychotherapy_modalities:T.psychotherapy_modalities||[],flashcard_count:T.flashcard_count||0,completed_flashcards:T.completed_flashcards||0,last_updated:T.last_updated||(new Date).toISOString()};U(e),q(!0),H(!0),P&&P(),setTimeout(()=>{H(!1),z&&z()},600)}else!A&&W&&(q(!1),re({}),te({}),ie({}))},[A,T,W,P,z]),(0,i.useEffect)(()=>{A&&T&&W&&U(e=>({...e,...T,category:T.category||e.category||"Other",definition:T.definition||e.definition||"",diagnostic_criteria:T.diagnostic_criteria||e.diagnostic_criteria||[],comorbidities:T.comorbidities||e.comorbidities||[],differential_diagnoses:T.differential_diagnoses||e.differential_diagnoses||[],medications:T.medications||e.medications||[],psychotherapy_modalities:T.psychotherapy_modalities||e.psychotherapy_modalities||[],flashcard_count:T.flashcard_count||e.flashcard_count||0,completed_flashcards:T.completed_flashcards||e.completed_flashcards||0,last_updated:T.last_updated||e.last_updated||(new Date).toISOString()}))},[T,A,W]);const be=(0,i.useMemo)(()=>{const e=Y.flashcard_count||0,t=Y.completed_flashcards||0;return e>0?Math.round(t/e*100):0},[Y.flashcard_count,Y.completed_flashcards]),ve=(0,i.useCallback)(()=>{L||F||(H(!0),B(!0),P&&P(),X(!1))},[P,L,F]),ye=((0,i.useCallback)(async()=>{if(!G){V(!0);try{const e={...Y,last_updated:(new Date).toISOString()};O(t=>{const a=t.topics.map(t=>String(t.id)===String(null===T||void 0===T?void 0:T.id)?{...t,...e}:t),i={...t,topics:a};return $(i),i}),U(e),E("Topic updated successfully","success")}catch(e){console.error("Error saving topic:",e),E("Failed to save topic","error")}finally{V(!1)}}},[null===T||void 0===T?void 0:T.id,Y,O,$,E,G]),(0,i.useCallback)(e=>{const t=ne.current[e];t&&re(a=>({...a,[e]:t.scrollTop}))},[])),fe=(0,i.useCallback)(e=>{setTimeout(()=>{const t=ne.current[e],a=se[e];t&&a&&(t.scrollTop=a)},100)},[se]),we=(0,i.useCallback)(e=>{e===J||Z||(ye(J),Q(!0),K(e),setTimeout(()=>{Q(!1),fe(e)},300))},[J,Z,ye,fe]),je=(0,i.useCallback)(async e=>{var t;console.log("Category changing to:",e);const a=(null===(t=xe[e])||void 0===t?void 0:t.primary)||xe.Other.primary;console.log("New color for category:",a);const i={...Y,category:e,color:a,last_updated:(new Date).toISOString()};U(i),O(t=>{const i=t.topics.map(t=>String(t.id)===String(null===T||void 0===T?void 0:T.id)?{...t,category:e,color:a,last_updated:(new Date).toISOString()}:t),s={...t,topics:i};return console.log("Saving category change to backend:",e,a),$(s),setTimeout(()=>{console.log("Triggering force node update"),M&&M(),I&&I()},200),s}),E(`Category updated to ${e}`,"success")},[null===T||void 0===T?void 0:T.id,Y,O,xe,$,E,I,M]),Ne=((0,i.useMemo)(()=>(null!==T&&void 0!==T&&T.id,{cases:[],literature:[]}),[null===T||void 0===T?void 0:T.id]),(0,i.useCallback)(async()=>{if(!G&&window.confirm("Are you sure you want to delete this topic?")){V(!0);try{O(e=>{const t=e.topics.filter(e=>String(e.id)!==String(null===T||void 0===T?void 0:T.id)),a={...e,topics:t};return $(a),a}),E("Topic deleted successfully","success"),ve()}catch(e){console.error("Error deleting topic:",e),E("Failed to delete topic","error")}finally{V(!1)}}},[null===T||void 0===T?void 0:T.id,O,$,E,ve,G]),(0,i.useCallback)(e=>{te(t=>({...t,[e]:!0})),ie(t=>({...t,[e]:{...Y}}))},[Y])),ke=(0,i.useCallback)(e=>{te(t=>({...t,[e]:!1})),ie(t=>{const a={...t};return delete a[e],a})},[]),Ce=(0,i.useCallback)(async e=>{if(G)return;const t=ae[e];if(t){V(!0);try{const a={...Y,...t,last_updated:(new Date).toISOString()};U(a),O(e=>{const t=e.topics.map(e=>String(e.id)===String(null===T||void 0===T?void 0:T.id)?{...e,...a}:e),i={...e,topics:t};return $(i),i}),te(t=>({...t,[e]:!1})),ie(t=>{const a={...t};return delete a[e],a}),E("Section updated successfully","success")}catch(a){console.error("Error saving section:",a),E("Failed to save section","error")}finally{V(!1)}}},[ae,Y,null===T||void 0===T?void 0:T.id,O,$,E,G]),Se=(0,i.useCallback)((e,t,a)=>{ie(i=>({...i,[e]:{...i[e],[t]:a}}))},[]),_e=((0,i.useCallback)((e,t,a)=>{var i;if(!a.trim())return;const s=(null===(i=ae[e])||void 0===i?void 0:i[t])||Y[t]||[];s.includes(a.trim())||Se(e,t,[...s,a.trim()])},[ae,Y,Se]),(0,i.useCallback)((e,t,a)=>{var i;const s=(null===(i=ae[e])||void 0===i?void 0:i[t])||Y[t]||[];Se(e,t,s.filter(e=>e!==a))},[ae,Y,Se]),(0,i.useCallback)((e,t)=>{ce(a=>({...a,[e]:t}))},[])),Ae=(0,i.useCallback)(e=>de[e]||"",[de]),Te=(0,i.useCallback)(e=>{ce(t=>{const a={...t};return delete a[e],a})},[]),De=(0,i.useCallback)((e,t)=>{if(!t.trim())return;const a=Y[e]||[];if(!a.includes(t.trim())){const i=[...a,t.trim()],s={...Y,[e]:i,last_updated:(new Date).toISOString()};U(s),O(e=>{const t=e.topics.map(e=>String(e.id)===String(null===T||void 0===T?void 0:T.id)?{...e,...s}:e),a={...e,topics:t};return $(a),a}),E(`${e} updated successfully`,"success")}},[Y,null===T||void 0===T?void 0:T.id,O,$,E]),Pe=(0,i.useCallback)((e,t)=>{const a=(Y[e]||[]).filter(e=>e!==t),i={...Y,[e]:a,last_updated:(new Date).toISOString()};U(i),O(e=>{const t=e.topics.map(e=>String(e.id)===String(null===T||void 0===T?void 0:T.id)?{...e,...i}:e),a={...e,topics:t};return $(a),a}),E(`${e} updated successfully`,"success")},[Y,null===T||void 0===T?void 0:T.id,O,$,E]);return A?(0,w.jsx)(s.N,{mode:"wait",onExitComplete:()=>{H(!1),B(!1),q(!1),D(),z&&z()},children:R&&(0,w.jsx)(r.P.div,{initial:"hidden",animate:"visible",exit:"exit",variants:N,className:"fixed inset-0 bg-black flex items-center justify-center z-50",style:{willChange:"backdrop-filter, opacity",backfaceVisibility:"hidden",transform:"translate3d(0, 0, 0)"},onClick:e=>e.target===e.currentTarget&&ve(),children:(0,w.jsxs)(r.P.div,{initial:"hidden",animate:"visible",exit:"exit",variants:j,className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full mx-4 max-h-[85vh] overflow-hidden",style:{willChange:"transform, opacity, scale",backfaceVisibility:"hidden"},onClick:e=>e.stopPropagation(),onAnimationStart:()=>{H(!0),P&&P()},onAnimationComplete:()=>{H(!1),z&&z()},children:[(0,w.jsxs)(r.P.div,{initial:"hidden",animate:"visible",exit:"exit",variants:k,className:"bg-gradient-to-br from-slate-900 to-slate-800 text-white px-6 py-4 flex items-center justify-between",children:[(0,w.jsxs)("div",{className:"flex items-center gap-3",children:[(0,w.jsx)(d.A,{size:24}),(0,w.jsx)("h2",{className:"text-xl font-semibold",children:"Topic Details"})]}),(0,w.jsx)("button",{onClick:ve,className:"text-slate-400 hover:text-white transition-colors",children:(0,w.jsx)(f.A,{size:24})})]}),(0,w.jsx)("div",{className:"bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 border-b border-slate-600",children:(0,w.jsx)("nav",{className:"flex flex-wrap gap-2 px-6 py-4",children:ge.map(e=>{let{id:t,label:a,icon:i}=e;return(0,w.jsxs)(r.P.button,{onClick:()=>we(t),className:"relative flex items-center gap-2 px-4 py-3 rounded-xl font-medium text-sm transition-all duration-300 "+(J===t?"bg-gradient-to-r from-purple-500 to-indigo-600 text-white shadow-lg shadow-purple-500/25":"text-slate-300 hover:text-white hover:bg-slate-700/50 hover:shadow-md"),whileHover:{scale:J===t?1:1.02},whileTap:{scale:.98},disabled:Z,children:[(0,w.jsx)(i,{size:16,className:J===t?"drop-shadow-sm":""}),a,J===t&&(0,w.jsx)(r.P.div,{layoutId:"topicActiveTab",className:"absolute inset-0 bg-gradient-to-r from-purple-400/20 to-indigo-500/20 rounded-xl blur-sm",initial:!1,transition:{duration:.3,ease:"easeOut"}})]},t)})})}),(0,w.jsx)(r.P.div,{className:"flex-1 bg-gradient-to-br from-slate-900 to-slate-800 overflow-hidden",animate:{opacity:Z?.7:1},transition:{duration:.2},children:(0,w.jsxs)(s.N,{mode:"wait",children:["overview"===J&&(0,w.jsxs)(r.P.div,{ref:e=>ne.current.overview=e,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"h-full overflow-y-auto p-6 space-y-6",children:[(0,w.jsxs)(r.P.div,{variants:C,animate:ee.title?"edit":"visible",className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,w.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Title"}),!ee.title&&(0,w.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>Ne("title"),className:"text-slate-400 hover:text-white transition-colors p-1 rounded",title:"Edit title",children:(0,w.jsx)(o.A,{size:16})})]}),ee.title?(0,w.jsxs)(r.P.div,{className:"space-y-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[(0,w.jsx)("input",{type:"text",value:(null===(t=ae.title)||void 0===t?void 0:t.title)||Y.title||"",onChange:e=>Se("title","title",e.target.value),className:"w-full text-xl font-bold bg-slate-700 border border-slate-600 rounded-lg px-4 py-3 text-white placeholder-slate-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Topic title..."}),(0,w.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,w.jsx)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>ke("title"),className:"px-3 py-2 text-slate-300 hover:text-white border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors text-sm",children:"Cancel"}),(0,w.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>Ce("title"),disabled:G,className:"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm flex items-center gap-2",children:[G?(0,w.jsx)(n.A,{size:14,className:"animate-spin"}):(0,w.jsx)(b.A,{size:14}),"Save"]})]})]}):(0,w.jsx)(r.P.h1,{className:"text-2xl font-bold text-white",whileHover:{scale:1.01},transition:{duration:.2},children:Y.title||"Untitled Topic"})]}),(0,w.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,w.jsxs)(r.P.div,{variants:C,initial:"hidden",animate:"visible",className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700",children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-3",children:"Category"}),(0,w.jsx)(r.P.select,{value:Y.category||"Other",onChange:e=>je(e.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 hover:bg-slate-650 transition-colors cursor-pointer",whileFocus:{scale:1.02},children:Object.keys(xe).map(e=>(0,w.jsx)("option",{value:e,children:e},e))}),(0,w.jsx)("p",{className:"text-xs text-slate-400 mt-2",children:"Changes are saved automatically and will update the node color"})]}),(0,w.jsxs)(r.P.div,{variants:C,initial:"hidden",animate:"visible",className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,w.jsx)("span",{className:"text-sm font-medium text-slate-300",children:"Flashcard Progress"}),(0,w.jsxs)("span",{className:"text-sm text-slate-400",children:[Y.completed_flashcards||0," / ",Y.flashcard_count||0]})]}),(0,w.jsx)("div",{className:"w-full bg-slate-700 rounded-full h-3 mb-2",children:(0,w.jsx)(r.P.div,{className:"h-3 rounded-full bg-gradient-to-r from-purple-500 to-indigo-600",initial:{width:0},animate:{width:`${be}%`},transition:{duration:1,ease:"easeOut"}})}),(0,w.jsxs)("div",{className:"text-right",children:[(0,w.jsxs)("span",{className:"text-lg font-bold text-white",children:[be,"%"]}),(0,w.jsx)("span",{className:"text-sm text-slate-400 ml-1",children:"complete"})]})]})]}),(0,w.jsxs)("div",{className:"text-xs text-slate-500 text-right",children:["Last updated: ",Y.last_updated?new Date(Y.last_updated).toLocaleString():"Never"]})]},"overview"),"concept"===J&&(0,w.jsxs)(r.P.div,{ref:e=>ne.current.concept=e,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"h-full overflow-y-auto p-6 space-y-6",children:[(0,w.jsxs)(r.P.div,{variants:C,animate:ee.definition?"edit":"visible",className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,w.jsxs)("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[(0,w.jsx)(c.A,{size:20,className:"text-purple-400"}),"Definition"]}),!ee.definition&&(0,w.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>Ne("definition"),className:"text-slate-400 hover:text-white transition-colors p-1 rounded",title:"Edit definition",children:(0,w.jsx)(o.A,{size:16})})]}),ee.definition?(0,w.jsxs)(r.P.div,{className:"space-y-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[(0,w.jsx)("textarea",{value:(null===(a=ae.definition)||void 0===a?void 0:a.definition)||Y.definition||"",onChange:e=>Se("definition","definition",e.target.value),rows:4,className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-3 text-white placeholder-slate-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none",placeholder:"Enter the definition of this topic..."}),(0,w.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,w.jsx)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>ke("definition"),className:"px-3 py-2 text-slate-300 hover:text-white border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors text-sm",children:"Cancel"}),(0,w.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>Ce("definition"),disabled:G,className:"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm flex items-center gap-2",children:[G?(0,w.jsx)(n.A,{size:14,className:"animate-spin"}):(0,w.jsx)(b.A,{size:14}),"Save"]})]})]}):(0,w.jsx)(r.P.div,{className:"text-slate-300 leading-relaxed",whileHover:{scale:1.01},transition:{duration:.2},children:Y.definition||(0,w.jsx)("span",{className:"text-slate-500 italic",children:"No definition provided"})})]}),(0,w.jsxs)(r.P.div,{variants:C,animate:ee.diagnostic_criteria?"edit":"visible",className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,w.jsxs)("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[(0,w.jsx)(m.A,{size:20,className:"text-indigo-400"}),"Diagnostic Criteria"]}),(0,w.jsxs)("div",{className:"flex items-center gap-2",children:[!ee.diagnostic_criteria&&(0,w.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>Ne("diagnostic_criteria"),className:"text-slate-400 hover:text-white transition-colors p-1 rounded",title:"Edit diagnostic criteria",children:(0,w.jsx)(o.A,{size:16})}),(0,w.jsx)("button",{onClick:()=>le(!oe),className:"text-slate-400 hover:text-white transition-colors",children:oe?(0,w.jsx)(u.A,{size:20}):(0,w.jsx)(p.A,{size:20})})]})]}),(0,w.jsx)(s.N,{children:oe&&(0,w.jsx)(r.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:ee.diagnostic_criteria?(0,w.jsxs)("div",{className:"space-y-4",children:[(0,w.jsx)("textarea",{value:Array.isArray(null===(S=ae.diagnostic_criteria)||void 0===S?void 0:S.diagnostic_criteria)?ae.diagnostic_criteria.diagnostic_criteria.join("\n"):Array.isArray(Y.diagnostic_criteria)?Y.diagnostic_criteria.join("\n"):Y.diagnostic_criteria||"",onChange:e=>Se("diagnostic_criteria","diagnostic_criteria",e.target.value.split("\n").filter(e=>e.trim())),rows:6,className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-3 text-white placeholder-slate-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none",placeholder:"Enter diagnostic criteria (one per line)..."}),(0,w.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,w.jsx)("button",{onClick:()=>ke("diagnostic_criteria"),className:"px-3 py-2 text-slate-300 hover:text-white border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors text-sm",children:"Cancel"}),(0,w.jsxs)(r.P.button,{onClick:()=>Ce("diagnostic_criteria"),disabled:G,className:"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm flex items-center gap-2",children:[G?(0,w.jsx)(n.A,{size:14,className:"animate-spin"}):(0,w.jsx)(b.A,{size:14}),"Save"]})]})]}):(0,w.jsx)("div",{className:"space-y-2",children:(Y.diagnostic_criteria||[]).length>0?Y.diagnostic_criteria.map((e,t)=>(0,w.jsxs)("div",{className:"flex items-start gap-3",children:[(0,w.jsxs)("span",{className:"text-purple-400 font-medium",children:[t+1,"."]}),(0,w.jsx)("span",{className:"text-slate-300",children:e})]},t)):(0,w.jsx)("span",{className:"text-slate-500 italic",children:"No diagnostic criteria provided"})})})})]})]},"concept"),"clinical"===J&&(0,w.jsxs)(r.P.div,{ref:e=>ne.current.clinical=e,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"h-full overflow-y-auto p-6 space-y-6",children:[(0,w.jsxs)(r.P.div,{variants:C,initial:"hidden",animate:"visible",className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700",children:[(0,w.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,w.jsx)(y.A,{size:20,className:"text-amber-400"}),"Comorbidities"]}),(0,w.jsx)("div",{className:"space-y-2 mb-4",children:(0,w.jsx)(s.N,{children:(Y.comorbidities||[]).map((e,t)=>(0,w.jsxs)(r.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"flex items-center justify-between p-3 bg-amber-600/10 rounded-lg border border-amber-600/20 group hover:bg-amber-600/15 transition-colors",children:[(0,w.jsx)("span",{className:"text-amber-300",children:e}),(0,w.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>Pe("comorbidities",e),className:"text-amber-400 hover:text-amber-200 opacity-0 group-hover:opacity-100 transition-opacity p-1 rounded",title:"Remove comorbidity",children:(0,w.jsx)(f.A,{size:16})})]},t))})}),(0,w.jsxs)("div",{className:"flex gap-2",children:[(0,w.jsx)("input",{type:"text",value:Ae("comorbidities"),onChange:e=>_e("comorbidities",e.target.value),placeholder:"Add comorbidity...",className:"flex-1 bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white placeholder-slate-400 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-colors",onKeyPress:e=>{"Enter"===e.key&&Ae("comorbidities").trim()&&(De("comorbidities",Ae("comorbidities")),Te("comorbidities"))}}),(0,w.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{Ae("comorbidities").trim()&&(De("comorbidities",Ae("comorbidities")),Te("comorbidities"))},className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors flex items-center gap-2",children:[(0,w.jsx)(g.A,{size:16}),"Add"]})]}),0===(Y.comorbidities||[]).length&&(0,w.jsx)("p",{className:"text-slate-500 italic text-center py-4",children:"No comorbidities added yet"})]}),(0,w.jsxs)(r.P.div,{variants:C,initial:"hidden",animate:"visible",className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700",children:[(0,w.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,w.jsx)(l.A,{size:20,className:"text-cyan-400"}),"Differential Diagnoses"]}),(0,w.jsx)("div",{className:"space-y-2 mb-4",children:(0,w.jsx)(s.N,{children:(Y.differential_diagnoses||[]).map((e,t)=>(0,w.jsxs)(r.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"flex items-center justify-between p-3 bg-cyan-600/10 rounded-lg border border-cyan-600/20 group hover:bg-cyan-600/15 transition-colors",children:[(0,w.jsx)("span",{className:"text-cyan-300",children:e}),(0,w.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>Pe("differential_diagnoses",e),className:"text-cyan-400 hover:text-cyan-200 opacity-0 group-hover:opacity-100 transition-opacity p-1 rounded",title:"Remove differential diagnosis",children:(0,w.jsx)(f.A,{size:16})})]},t))})}),(0,w.jsxs)("div",{className:"flex gap-2",children:[(0,w.jsx)("input",{type:"text",value:Ae("differential_diagnoses"),onChange:e=>_e("differential_diagnoses",e.target.value),placeholder:"Add differential diagnosis...",className:"flex-1 bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white placeholder-slate-400 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-colors",onKeyPress:e=>{"Enter"===e.key&&Ae("differential_diagnoses").trim()&&(De("differential_diagnoses",Ae("differential_diagnoses")),Te("differential_diagnoses"))}}),(0,w.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{Ae("differential_diagnoses").trim()&&(De("differential_diagnoses",Ae("differential_diagnoses")),Te("differential_diagnoses"))},className:"px-4 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 transition-colors flex items-center gap-2",children:[(0,w.jsx)(g.A,{size:16}),"Add"]})]}),0===(Y.differential_diagnoses||[]).length&&(0,w.jsx)("p",{className:"text-slate-500 italic text-center py-4",children:"No differential diagnoses added yet"})]})]},"clinical"),"treatment"===J&&(0,w.jsxs)(r.P.div,{ref:e=>ne.current.treatment=e,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"h-full overflow-y-auto p-6 space-y-6",children:[(0,w.jsxs)(r.P.div,{variants:C,initial:"hidden",animate:"visible",className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700",children:[(0,w.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,w.jsx)(x.A,{size:20,className:"text-green-400"}),"Medications"]}),(0,w.jsx)("div",{className:"space-y-2 mb-4",children:(0,w.jsx)(s.N,{children:(Y.medications||[]).map((e,t)=>(0,w.jsxs)(r.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"flex items-center justify-between p-3 bg-green-600/10 rounded-lg border border-green-600/20 group hover:bg-green-600/15 transition-colors",children:[(0,w.jsx)("span",{className:"text-green-300",children:e}),(0,w.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>Pe("medications",e),className:"text-green-400 hover:text-green-200 opacity-0 group-hover:opacity-100 transition-opacity p-1 rounded",title:"Remove medication",children:(0,w.jsx)(f.A,{size:16})})]},t))})}),(0,w.jsxs)("div",{className:"flex gap-2",children:[(0,w.jsx)("input",{type:"text",value:Ae("medications"),onChange:e=>_e("medications",e.target.value),placeholder:"Add medication...",className:"flex-1 bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white placeholder-slate-400 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",onKeyPress:e=>{"Enter"===e.key&&Ae("medications").trim()&&(De("medications",Ae("medications")),Te("medications"))}}),(0,w.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{Ae("medications").trim()&&(De("medications",Ae("medications")),Te("medications"))},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[(0,w.jsx)(g.A,{size:16}),"Add"]})]}),0===(Y.medications||[]).length&&(0,w.jsx)("p",{className:"text-slate-500 italic text-center py-4",children:"No medications added yet"})]}),(0,w.jsxs)(r.P.div,{variants:C,animate:ee.psychotherapy_modalities?"edit":"visible",className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,w.jsxs)("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[(0,w.jsx)(c.A,{size:20,className:"text-purple-400"}),"Psychotherapy Modalities"]}),!ee.psychotherapy_modalities&&(0,w.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>Ne("psychotherapy_modalities"),className:"text-slate-400 hover:text-white transition-colors p-1 rounded",title:"Edit psychotherapy modalities",children:(0,w.jsx)(o.A,{size:16})})]}),ee.psychotherapy_modalities?(0,w.jsxs)("div",{className:"space-y-4",children:[(0,w.jsx)("textarea",{value:Array.isArray(null===(_=ae.psychotherapy_modalities)||void 0===_?void 0:_.psychotherapy_modalities)?ae.psychotherapy_modalities.psychotherapy_modalities.join("\n"):Array.isArray(Y.psychotherapy_modalities)?Y.psychotherapy_modalities.join("\n"):Y.psychotherapy_modalities||"",onChange:e=>Se("psychotherapy_modalities","psychotherapy_modalities",e.target.value.split("\n").filter(e=>e.trim())),rows:4,className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-3 text-white placeholder-slate-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none",placeholder:"Enter psychotherapy modalities (one per line)..."}),(0,w.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,w.jsx)("button",{onClick:()=>ke("psychotherapy_modalities"),className:"px-3 py-2 text-slate-300 hover:text-white border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors text-sm",children:"Cancel"}),(0,w.jsxs)(r.P.button,{onClick:()=>Ce("psychotherapy_modalities"),disabled:G,className:"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm flex items-center gap-2",children:[G?(0,w.jsx)(n.A,{size:14,className:"animate-spin"}):(0,w.jsx)(b.A,{size:14}),"Save"]})]})]}):(0,w.jsx)("div",{className:"space-y-2",children:(Y.psychotherapy_modalities||[]).length>0?Y.psychotherapy_modalities.map((e,t)=>(0,w.jsxs)("div",{className:"flex items-center gap-3",children:[(0,w.jsx)("span",{className:"text-purple-400 font-medium",children:"\u2022"}),(0,w.jsx)("span",{className:"text-slate-300",children:e})]},t)):(0,w.jsx)("span",{className:"text-slate-500 italic",children:"No psychotherapy modalities added"})})]})]},"treatment"),"connections"===J&&(0,w.jsx)(r.P.div,{ref:e=>ne.current.connections=e,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"h-full overflow-y-auto p-6 space-y-6",children:(0,w.jsxs)(r.P.div,{variants:C,initial:"hidden",animate:"visible",className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700",children:[(0,w.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,w.jsx)(h.A,{size:20,className:"text-blue-400"}),"Connected Nodes"]}),(0,w.jsx)("p",{className:"text-slate-400 text-center py-8",children:"This section will show nodes connected to this topic in the mind map."})]})},"connections")]})})]})},`topic-modal-${(null===T||void 0===T?void 0:T.id)||"default"}`)}):null}},8130:(e,t,a)=>{var i=a(5043),s=a(4391),r=(a(411),a(6213)),n=a(3546);const o=[{id:"entry-001",timestamp:"2024-01-14T10:00:00Z",date:"2024-01-14",title:"Initial Assessment",type:"patient",patientData:{chiefComplaint:"Feeling increasingly anxious and unable to concentrate at work",currentStatus:"First visit - seeking help for anxiety symptoms",notes:"Patient reports 3-month history of generalized anxiety, sleep disturbances, and difficulty focusing. No prior psychiatric treatment."},clinicalData:{chiefComplaint:"Generalized Anxiety Disorder assessment",currentStatus:"Initial diagnostic evaluation completed",notes:"GAD-7 score: 14 (moderate anxiety). Recommended CBT and consider medication. No suicidal ideation. Good insight and motivation for treatment."}},{id:"entry-002",timestamp:"2024-01-31T14:00:00Z",date:"2024-01-31",title:"Follow-up Visit",type:"clinical",patientData:{chiefComplaint:"Some improvement in sleep, but still feeling very anxious during work meetings",currentStatus:"Two weeks on sertraline 50mg, attending weekly therapy",notes:"Medication side effects minimal. Using breathing techniques learned in therapy with some success. Still avoiding certain social situations."},clinicalData:{chiefComplaint:"Medication response evaluation",currentStatus:"Partial response to initial treatment",notes:"GAD-7 score: 11 (mild-moderate). Continue sertraline, increase to 75mg. Therapy showing good engagement. Consider exposure exercises."}},{id:"entry-003",timestamp:"2024-02-14T11:00:00Z",date:"2024-02-14",title:"Therapy Session",type:"patient",patientData:{chiefComplaint:"Had a panic attack at work last week, but handled it better than before",currentStatus:"Learning coping strategies, medication helping with baseline anxiety",notes:"Successfully used grounding techniques during panic attack. Feeling more confident about managing symptoms. Sleep much improved."},clinicalData:{chiefComplaint:"Panic episode management and progress review",currentStatus:"Good therapeutic progress with CBT techniques",notes:"Patient demonstrating skill acquisition in anxiety management. Panic attack was brief and well-managed. Continue current treatment plan."}},{id:"entry-004",timestamp:"2024-02-29T16:00:00Z",date:"2024-02-29",title:"Medication Review",type:"clinical",patientData:{chiefComplaint:"Feeling much more stable, anxiety is manageable most days",currentStatus:"Sertraline 75mg working well, regular therapy sessions",notes:"Returned to normal work performance. Able to participate in meetings without significant anxiety. Relationship with partner improving."},clinicalData:{chiefComplaint:"Treatment response assessment",currentStatus:"Good response to combined therapy and medication",notes:"GAD-7 score: 6 (mild). Significant improvement achieved. Plan to continue current dose, transition to bi-weekly therapy sessions."}},{id:"entry-005",timestamp:"2024-03-14T13:00:00Z",date:"2024-03-14",title:"Relapse Prevention",type:"patient",patientData:{chiefComplaint:"Doing well overall, want to focus on preventing future episodes",currentStatus:"Stable on current treatment, learning long-term management",notes:"Confident in ability to manage anxiety symptoms. Interested in gradually reducing therapy frequency while maintaining medication."},clinicalData:{chiefComplaint:"Maintenance and relapse prevention planning",currentStatus:"Treatment goals largely achieved, planning maintenance phase",notes:"Excellent treatment response. Develop relapse prevention plan, continue medication, monthly check-ins. Consider therapy as needed basis."}}];var l=a(8270),d=a(579);const c=()=>{const e=(0,i.useRef)(null);return(0,i.useEffect)(()=>{e.current&&l.os.to(e.current,{duration:2,x:200,rotation:360,backgroundColor:"blue",repeat:-1,yoyo:!0})},[]),(0,d.jsxs)("div",{className:"p-8",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"GSAP Test"}),(0,d.jsx)("div",{ref:e,className:"w-16 h-16 bg-red-500 rounded"}),(0,d.jsx)("p",{className:"mt-4",children:"If GSAP is working, you should see the red box animating."})]})};var u=a(6446),p=a(5088),m=a(7118),h=a(4537),x=a(614),g=a(2667);const b={hidden:{opacity:0,backdropFilter:"blur(0px)"},visible:{opacity:.75,backdropFilter:"blur(4px)",transition:{duration:.3,ease:"easeOut"}},exit:{opacity:0,backdropFilter:"blur(0px)",transition:{duration:.2,ease:"easeIn"}}},v={hidden:{opacity:0,scale:.3,y:50,rotate:-5},visible:{opacity:1,scale:1,y:0,rotate:0,transition:{type:"spring",stiffness:300,damping:25,duration:.5}},exit:{opacity:0,scale:.8,y:-20,transition:{duration:.2,ease:"easeIn"}}},y=e=>{let{isOpen:t,onClose:a,title:s="Patient Timeline",data:r=o,onNodeClick:l,onNodeHover:c}=e;const[y,f]=(0,i.useState)(!1),w=(0,i.useCallback)(()=>{y||(f(!0),setTimeout(()=>{f(!1),a()},200))},[a,y]),j=(0,i.useCallback)(e=>{console.log("Timeline node clicked:",e),null===l||void 0===l||l(e)},[l]),N=(0,i.useCallback)((e,t)=>{console.log("Timeline node hover:",e.id,t),null===c||void 0===c||c(e,t)},[c]);return t?(0,d.jsx)(n.N,{mode:"wait",onExitComplete:()=>{f(!1)},children:t&&(0,d.jsx)(u.P.div,{initial:"hidden",animate:"visible",exit:"exit",variants:b,className:"fixed inset-0 bg-black flex items-center justify-center z-50 p-4",style:{willChange:"backdrop-filter, opacity",backfaceVisibility:"hidden",transform:"translate3d(0, 0, 0)"},onClick:e=>e.target===e.currentTarget&&w(),children:(0,d.jsxs)(u.P.div,{initial:"hidden",animate:"visible",exit:"exit",variants:v,className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden",style:{willChange:"transform, opacity, scale",backfaceVisibility:"hidden"},onClick:e=>e.stopPropagation(),children:[(0,d.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-gray-200 p-6",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,d.jsx)(p.A,{className:"h-6 w-6 text-blue-600"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:s}),(0,d.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Interactive patient timeline with drag-and-drop nodes"})]})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,d.jsx)(m.A,{className:"h-4 w-4"}),(0,d.jsxs)("span",{children:[r.length," nodes"]})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,d.jsx)(h.A,{className:"h-4 w-4"}),(0,d.jsx)("span",{children:"Interactive"})]}),(0,d.jsx)(u.P.button,{onClick:w,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,d.jsx)(x.A,{className:"h-5 w-5 text-gray-500"})})]})]})}),(0,d.jsx)("div",{className:"relative",style:{height:"calc(90vh - 120px)"},children:(0,d.jsx)(g.A,{data:r,onNodeClick:j,onNodeHover:N})}),(0,d.jsx)("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,d.jsx)("span",{className:"font-medium",children:"Instructions:"})," Drag nodes to reposition \u2022 Hover for details \u2022 Click to edit"]}),(0,d.jsx)("div",{className:"text-xs text-gray-500",children:"Timeline Modal \u2022 Interactive Mode"})]})})]},"timeline-modal-content")},"timeline-modal-backdrop")}):null},f=()=>{const[e,t]=(0,i.useState)(!0),[a,s]=(0,i.useState)(!1),[r,n]=(0,i.useState)(!1);(0,i.useEffect)(()=>{const e=setTimeout(()=>{t(!1)},500);return()=>clearTimeout(e)},[]);return e?(0,d.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:(0,d.jsx)("div",{className:"text-lg text-gray-600",children:"Loading timeline test..."})}):(0,d.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,d.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,d.jsxs)("div",{className:"mb-8",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Interactive Patient Timeline"}),(0,d.jsx)("p",{className:"text-gray-600",children:"Test timeline components in modal and standalone formats"}),(0,d.jsxs)("div",{className:"mt-4 space-x-4",children:[(0,d.jsx)("button",{onClick:()=>n(!0),className:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 shadow-md hover:shadow-lg transition-all duration-200",children:"Open Timeline Modal"}),(0,d.jsx)("button",{onClick:()=>s(!a),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:a?"Hide Simple GSAP Test":"Show Simple GSAP Test"})]})]}),a&&(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Simple GSAP Test"}),(0,d.jsx)(c,{})]}),(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Timeline Features"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("h3",{className:"font-semibold text-gray-800",children:"Modal Interface"}),(0,d.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,d.jsx)("li",{children:"\u2022 Timeline contained within a professional modal"}),(0,d.jsx)("li",{children:"\u2022 Matches existing mind map modal styling"}),(0,d.jsx)("li",{children:"\u2022 Proper backdrop blur and animations"}),(0,d.jsx)("li",{children:"\u2022 Responsive sizing with scroll containment"})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("h3",{className:"font-semibold text-gray-800",children:"Interaction"}),(0,d.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,d.jsx)("li",{children:"\u2022 Drag nodes with instant 1:1 mouse tracking"}),(0,d.jsx)("li",{children:"\u2022 Hover over nodes to see patient/clinical cards"}),(0,d.jsx)("li",{children:"\u2022 Click nodes to edit both cards simultaneously"}),(0,d.jsx)("li",{children:"\u2022 Add new nodes with smooth animations"})]})]})]})]})]}),(0,d.jsx)(y,{isOpen:r,onClose:()=>n(!1),title:"Patient Timeline - Interactive Mode",data:o,onNodeClick:e=>{console.log("Node clicked:",e)},onNodeHover:(e,t)=>{console.log("Node hover:",e.id,t)}})]})};var w=a(7845),j=a(7782);const N=(0,i.memo)(e=>{let{variant:t="radial",gap:a=50,size:i=2,color:s="#e2e8f0",style:r={},className:n="",showRadialLines:o=!0,showConcentricCircles:l=!0,enableParallax:c=!1}=e;const p=()=>(0,d.jsxs)("div",{className:"absolute inset-0 pointer-events-none",style:{background:"\n          radial-gradient(circle at 50% 50%, rgba(99, 102, 241, 0.03) 0%, transparent 70%),\n          radial-gradient(circle at 25% 25%, rgba(139, 92, 246, 0.02) 0%, transparent 50%),\n          radial-gradient(circle at 75% 75%, rgba(168, 85, 247, 0.02) 0%, transparent 50%)\n        ",...r},children:[l&&(0,d.jsxs)("svg",{className:"absolute inset-0 w-full h-full",children:[(0,d.jsx)("defs",{children:(0,d.jsx)("pattern",{id:"concentricCircles",x:"50%",y:"50%",patternUnits:"userSpaceOnUse",width:"100%",height:"100%",children:[200,400,600,800,1e3,1200].map((e,t)=>(0,d.jsx)("circle",{cx:"50%",cy:"50%",r:e,fill:"none",stroke:s,strokeWidth:0===t?2:1,strokeOpacity:.1-.01*t,strokeDasharray:t%2===0?"none":"4,8"},e))})}),(0,d.jsx)("rect",{width:"100%",height:"100%",fill:"url(#concentricCircles)"})]}),o&&(0,d.jsxs)("svg",{className:"absolute inset-0 w-full h-full",children:[(0,d.jsx)("defs",{children:(0,d.jsx)("pattern",{id:"radialLines",x:"50%",y:"50%",patternUnits:"userSpaceOnUse",width:"100%",height:"100%",children:Array.from({length:24},(e,t)=>{const a=15*t*(Math.PI/180),i=50+100*Math.cos(a),r=50+100*Math.sin(a);return(0,d.jsx)("line",{x1:"50%",y1:"50%",x2:`${i}%`,y2:`${r}%`,stroke:s,strokeWidth:t%6===0?2:1,strokeOpacity:t%6===0?.08:.04,strokeDasharray:t%3===0?"none":"2,6"},t)})})}),(0,d.jsx)("rect",{width:"100%",height:"100%",fill:"url(#radialLines)"})]}),(0,d.jsx)("div",{className:"absolute inset-0 opacity-30",style:{background:`\n            url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23${s.slice(1)}' fill-opacity='0.03'%3E%3Cpath d='M30 30c0-5.5-4.5-10-10-10s-10 4.5-10 10 4.5 10 10 10 10-4.5 10-10zm10 0c0-5.5-4.5-10-10-10s-10 4.5-10 10 4.5 10 10 10 10-4.5 10-10z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")\n          `}}),(0,d.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:Array.from({length:8},(e,t)=>(0,d.jsx)(u.P.div,{className:"absolute w-1 h-1 rounded-full bg-gradient-to-r from-indigo-400 to-purple-400 opacity-20",style:{left:20+10*t+"%",top:30+20*Math.sin(t)+"%"},animate:{y:[0,-20,0],opacity:[.2,.4,.2]},transition:{duration:4+t,repeat:1/0,ease:"easeInOut",delay:.5*t}},t))})]}),m=()=>(0,d.jsx)("div",{className:"absolute inset-0 pointer-events-none",style:{backgroundImage:`radial-gradient(circle, ${s} ${i}px, transparent ${i}px)`,backgroundSize:`${a}px ${a}px`,backgroundPosition:"0 0",opacity:.4,...r}}),h=()=>(0,d.jsx)("div",{className:"absolute inset-0 pointer-events-none",children:(0,d.jsxs)("svg",{className:"w-full h-full",children:[(0,d.jsx)("defs",{children:(0,d.jsx)("pattern",{id:"grid",width:a,height:a,patternUnits:"userSpaceOnUse",children:(0,d.jsx)("path",{d:`M ${a} 0 L 0 0 0 ${a}`,fill:"none",stroke:s,strokeWidth:i,strokeOpacity:.3})})}),(0,d.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid)",style:r})]})});return(0,d.jsx)(u.P.div,{className:`absolute inset-0 ${n}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:1.5,ease:"easeOut"},children:(()=>{switch(t){case"radial":default:return(0,d.jsx)(p,{});case"dots":return(0,d.jsx)(m,{});case"lines":return(0,d.jsx)(h,{})}})()})});N.displayName="ArtisticBackground";const k=N;var C=a(6833),S=a(7819),_=a(7856),A=a(2024),T=a(8693),D=a(6382),P=a(9917),z=a(2626),O=a(2054),$=a(1827),E=a(2119),I=a(9855),M=a(5087);const L=e=>{let{message:t="Loading..."}=e;return(0,d.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,d.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,d.jsx)(A.A,{className:"w-6 h-6 animate-spin text-blue-600"}),(0,d.jsx)("span",{className:"text-sm text-gray-600",children:t})]})})},H=(0,i.lazy)(()=>Promise.all([a.e(96),a.e(261)]).then(a.bind(a,6261))),R=(0,i.lazy)(()=>a.e(524).then(a.bind(a,4524))),X=(0,i.lazy)(()=>Promise.all([a.e(96),a.e(213)]).then(a.bind(a,4213))),F=(0,i.lazy)(()=>Promise.resolve().then(a.bind(a,9e3))),B=(0,i.lazy)(()=>Promise.resolve().then(a.bind(a,7173))),Y=(0,i.lazy)(()=>Promise.resolve().then(a.bind(a,8531))),U=(e,t)=>a=>(0,d.jsx)(i.Suspense,{fallback:(0,d.jsx)(L,{message:t}),children:(0,d.jsx)(e,{...a})}),G=(U(H,"Loading editor..."),U(R,"Loading templates..."),U(X,"Loading literature viewer..."));U(F,"Loading case details..."),U(B,"Loading topic details..."),U(Y,"Loading task details...");var V=a(9e3),W=a(7173),q=a(8531);function J(e,t,a){const{x:i,y:s,width:r,height:n}=e,{x:o,y:l}=t,{x:d,y:c}=a,u=i,p=i+r,m=s,h=s+n,x=d-o,g=c-l;if(Math.abs(x)<.001)return{x:o,y:g>0?h:m,side:g>0?"bottom":"top"};if(Math.abs(g)<.001)return{x:x>0?p:u,y:l,side:x>0?"right":"left"};const b=g/x,v=l-b*o,y=[],f=b*u+v;f>=m&&f<=h&&y.push({x:u,y:f,side:"left",distance:Math.hypot(u-o,f-l)});const w=b*p+v;w>=m&&w<=h&&y.push({x:p,y:w,side:"right",distance:Math.hypot(p-o,w-l)});const j=(m-v)/b;j>=u&&j<=p&&y.push({x:j,y:m,side:"top",distance:Math.hypot(j-o,m-l)});const N=(h-v)/b;N>=u&&N<=p&&y.push({x:N,y:h,side:"bottom",distance:Math.hypot(N-o,h-l)});const k=y.filter(e=>{const t=e.x-o,a=e.y-l;return(x>0&&t>=0||x<0&&t<=0)&&(g>0&&a>=0||g<0&&a<=0)});return k.sort((e,t)=>e.distance-t.distance),k[0]||{x:o,y:l,side:"center"}}const K=(0,i.memo)(e=>{var t,a,s,r,n,o,l,c;let{id:u,source:p,target:m,sourceX:h,sourceY:x,targetX:g,targetY:b,sourcePosition:v,targetPosition:y,style:f={},markerEnd:j,markerStart:N,data:k,label:C,labelStyle:S={},labelShowBg:_=!0,labelBgStyle:A={},...T}=e;const{getNode:D}=(0,w.VH)();let P,z;try{P=D(p),z=D(m)}catch(M){P=null,z=null}const O=(0,i.useMemo)(()=>{var e,t;switch(`${(null===(e=P)||void 0===e?void 0:e.type)||"default"}-${(null===(t=z)||void 0===t?void 0:t.type)||"default"}`){case"topic-case":case"case-topic":return{stroke:"url(#topicCaseGradient)",strokeWidth:3,strokeDasharray:"8,4",filter:"drop-shadow(0 2px 4px rgba(139, 92, 246, 0.3))",animation:"dash-flow 2s linear infinite"};case"task-case":case"case-task":return{stroke:"url(#taskCaseGradient)",strokeWidth:4,filter:"drop-shadow(0 2px 4px rgba(248, 113, 113, 0.3))"};case"literature-case":case"case-literature":return{stroke:"url(#literatureCaseGradient)",strokeWidth:2,strokeDasharray:"4,2,1,2",filter:"drop-shadow(0 1px 3px rgba(217, 119, 6, 0.2))"};case"topic-task":case"task-topic":return{stroke:"url(#topicTaskGradient)",strokeWidth:2.5,strokeDasharray:"6,3",filter:"drop-shadow(0 2px 4px rgba(99, 102, 241, 0.25))"};default:return{stroke:"url(#defaultGradient)",strokeWidth:2,filter:"drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1))"}}},[null===(t=P)||void 0===t?void 0:t.type,null===(a=z)||void 0===a?void 0:a.type]),{edgePath:$,labelX:E,labelY:I}=(0,i.useMemo)(()=>{if(null!==k&&void 0!==k&&k.__isAnimating||null!==k&&void 0!==k&&k.__forceUpdate)return{edgePath:`M${h},${x} L${g},${b}`,labelX:(h+g)/2,labelY:(x+b)/2};if(!P||!z)return{edgePath:`M${h},${x} L${g},${b}`,labelX:(h+g)/2,labelY:(x+b)/2};try{var e,t,a,i,s,r,n,o,l,d;const c=Boolean(P.width||(null===(e=P.dimensions)||void 0===e?void 0:e.width)||(null===(t=P.data)||void 0===t?void 0:t.width)||(null===(a=P.style)||void 0===a?void 0:a.width)),u=Boolean(z.width||(null===(i=z.dimensions)||void 0===i?void 0:i.width)||(null===(s=z.data)||void 0===s?void 0:s.width)||(null===(r=z.style)||void 0===r?void 0:r.width));if(!c||!u)return{edgePath:`M${h},${x} L${g},${b}`,labelX:(h+g)/2,labelY:(x+b)/2};const p=e=>{var t,a,i,s;const r="topic"===e.type?180:200,n="topic"===e.type?50:100;return{width:e.width||(null===(t=e.dimensions)||void 0===t?void 0:t.width)||(null===(a=e.data)||void 0===a?void 0:a.width)||r,height:e.height||(null===(i=e.dimensions)||void 0===i?void 0:i.height)||(null===(s=e.data)||void 0===s?void 0:s.height)||n}},m=p(P),v=p(z),y=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourcePosition:i={x:0,y:0},targetPosition:s={x:0,y:0},sourceWidth:r=200,sourceHeight:n=100,targetWidth:o=200,targetHeight:l=100,sourceX:d,sourceY:c,targetX:u,targetY:p,offset:m=0}=a;if(void 0!==d&&void 0!==c&&void 0!==u&&void 0!==p&&(r<=10||o<=10))return{sourceX:d,sourceY:c,targetX:u,targetY:p,sourceSide:"direct",targetSide:"direct"};const h={x:i.x+r/2,y:i.y+n/2},x={x:s.x+o/2,y:s.y+l/2},g={x:i.x,y:i.y,width:r,height:n},b={x:s.x,y:s.y,width:o,height:l},v=J(g,h,x),y=J(b,x,h),f=x.x-h.x,w=x.y-h.y,j=Math.sqrt(f*f+w*w);if(j>0){const e=f/j,t=w/j,a=3;v.x-=e*a,v.y-=t*a,y.x+=e*a,y.y+=t*a,m>0&&(v.x+=e*m,v.y+=t*m,y.x-=e*m,y.y-=t*m)}return!!a.debug&&(console.log("Source Node:",e),console.log("Target Node:",t),console.log("Source Intersection:",v),console.log("Target Intersection:",y)),{sourceX:v.x,sourceY:v.y,targetX:y.x,targetY:y.y,sourceSide:v.side,targetSide:y.side}}(P,z,{sourcePosition:{x:(null===(n=P.positionAbsolute)||void 0===n?void 0:n.x)||P.position.x,y:(null===(o=P.positionAbsolute)||void 0===o?void 0:o.y)||P.position.y},targetPosition:{x:(null===(l=z.positionAbsolute)||void 0===l?void 0:l.x)||z.position.x,y:(null===(d=z.positionAbsolute)||void 0===d?void 0:d.y)||z.position.y},sourceX:h,sourceY:x,targetX:g,targetY:b,sourceWidth:m.width,sourceHeight:m.height,targetWidth:v.width,targetHeight:v.height,debug:!1}),{sourceX:f,sourceY:w,targetX:j,targetY:N}=y,k=j-f,C=N-w,S=.25*Math.sqrt(k*k+C*C);return{edgePath:`M ${f},${w} C ${f+(k>0?S:-S)},${w} ${j-(k>0?S:-S)},${N} ${j},${N}`,labelX:(f+j)/2,labelY:(w+N)/2}}catch(M){return console.warn("FloatingEdge calculation error:",M),{edgePath:`M${h},${x} L${g},${b}`,labelX:(h+g)/2,labelY:(x+b)/2}}},[p,m,h,x,g,b,null===k||void 0===k?void 0:k.__forceUpdate,null===k||void 0===k?void 0:k.__isAnimating,null===(s=P)||void 0===s?void 0:s.id,null===(r=z)||void 0===r?void 0:r.id,null===(n=P)||void 0===n?void 0:n.width,null===(o=P)||void 0===o?void 0:o.height,null===(l=z)||void 0===l?void 0:l.width,null===(c=z)||void 0===c?void 0:c.height]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("defs",{children:[(0,d.jsxs)("linearGradient",{id:"topicCaseGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,d.jsx)("stop",{offset:"0%",stopColor:"#6366f1",stopOpacity:"0.8"}),(0,d.jsx)("stop",{offset:"50%",stopColor:"#8b5cf6",stopOpacity:"0.9"}),(0,d.jsx)("stop",{offset:"100%",stopColor:"#a855f7",stopOpacity:"0.8"})]}),(0,d.jsxs)("linearGradient",{id:"taskCaseGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,d.jsx)("stop",{offset:"0%",stopColor:"#f97316",stopOpacity:"0.9"}),(0,d.jsx)("stop",{offset:"50%",stopColor:"#ef4444",stopOpacity:"1.0"}),(0,d.jsx)("stop",{offset:"100%",stopColor:"#ec4899",stopOpacity:"0.9"})]}),(0,d.jsxs)("linearGradient",{id:"literatureCaseGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,d.jsx)("stop",{offset:"0%",stopColor:"#d97706",stopOpacity:"0.7"}),(0,d.jsx)("stop",{offset:"50%",stopColor:"#ca8a04",stopOpacity:"0.8"}),(0,d.jsx)("stop",{offset:"100%",stopColor:"#a16207",stopOpacity:"0.7"})]}),(0,d.jsxs)("linearGradient",{id:"topicTaskGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,d.jsx)("stop",{offset:"0%",stopColor:"#6366f1",stopOpacity:"0.7"}),(0,d.jsx)("stop",{offset:"100%",stopColor:"#f59e0b",stopOpacity:"0.8"})]}),(0,d.jsxs)("linearGradient",{id:"defaultGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,d.jsx)("stop",{offset:"0%",stopColor:"#64748b",stopOpacity:"0.6"}),(0,d.jsx)("stop",{offset:"100%",stopColor:"#475569",stopOpacity:"0.8"})]})]}),(0,d.jsx)(w.tE,{id:u,path:$,labelX:E,labelY:I,style:{transition:"none",...O,...f},markerEnd:j,markerStart:N}),C&&(0,d.jsx)("foreignObject",{x:E-50,y:I-12,width:100,height:24,className:"overflow-visible",children:(0,d.jsx)("div",{className:"\n              flex items-center justify-center px-3 py-1 rounded-lg\n              text-xs font-medium text-white backdrop-blur-sm\n              transition-opacity duration-200 opacity-0 hover:opacity-100\n              pointer-events-none\n            ",style:{backgroundColor:"rgba(0, 0, 0, 0.75)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.25)",...A},children:C})})]})},(e,t)=>{var a,i;return e.sourceX===t.sourceX&&e.sourceY===t.sourceY&&e.targetX===t.targetX&&e.targetY===t.targetY&&e.source===t.source&&e.target===t.target&&(null===(a=e.data)||void 0===a?void 0:a.__forceUpdate)===(null===(i=t.data)||void 0===i?void 0:i.__forceUpdate)}),Z=K,Q=(0,i.memo)(e=>{let{id:t,source:a,target:i,sourceX:s,sourceY:r,targetX:n,targetY:o,sourcePosition:l,targetPosition:c,style:u={},markerEnd:p,markerStart:m,label:h,sourceHandleId:x,targetHandleId:g,data:b,selected:v,animated:y}=e;const[f,N,k]=(0,j.Fp)({sourceX:s,sourceY:r,sourcePosition:l,targetX:n,targetY:o,targetPosition:c});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(w.tE,{id:t,path:f,style:u,markerEnd:p,markerStart:m}),h&&(0,d.jsx)(w.rV,{children:(0,d.jsx)("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${N}px,${k}px)`,fontSize:12,pointerEvents:"all"},className:"nodrag nopan bg-white px-2 py-1 rounded shadow border text-xs",children:h})})]})});Q.displayName="EnhancedEdge";const ee=Q,te=e=>{let{fromX:t,fromY:a,toX:i,toY:s,connectionLineStyle:r}=e;const n=`M ${t},${a} L ${i},${s}`,o={stroke:"#3b82f6",strokeWidth:3.5,strokeLinecap:"round",strokeDasharray:"5,3",filter:"drop-shadow(0 0 6px rgba(59, 130, 246, 0.6))",animation:"flowingDash 1s linear infinite",...r};return(0,d.jsxs)("g",{children:[(0,d.jsx)("path",{d:n,fill:"none",style:o}),(0,d.jsx)("path",{d:n,fill:"none",stroke:"transparent",strokeWidth:15,style:{pointerEvents:"stroke"}})]})};var ae=a(6099);const ie=e=>{let{message:t="Loading your mind map...",progress:a=null}=e;return(0,d.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center z-50",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsxs)("div",{className:"relative mb-6",children:[(0,d.jsx)(D.A,{className:"w-16 h-16 text-blue-600 mx-auto animate-pulse"}),(0,d.jsx)(ae.A,{className:"w-6 h-6 text-purple-500 absolute -top-2 -right-2 animate-bounce"})]}),(0,d.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-4",children:[(0,d.jsx)(A.A,{className:"w-6 h-6 animate-spin text-blue-600"}),(0,d.jsx)("span",{className:"text-lg font-medium text-gray-700",children:t})]}),null!==a&&(0,d.jsx)("div",{className:"w-64 bg-gray-200 rounded-full h-2 mx-auto mb-2",children:(0,d.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300 ease-out",style:{width:`${Math.max(0,Math.min(100,a))}%`}})}),(0,d.jsx)("div",{className:"text-sm text-gray-500 max-w-md mx-auto mt-4",children:(0,d.jsx)("p",{children:"\ud83d\udca1 Tip: Use the force layout button to auto-arrange your nodes"})})]})})};var se=a(1161),re=a(9350);const ne=e=>{let{data:t,selected:a}=e;const[s,r]=(0,i.useState)(t.skipAnimation||!1);(0,i.useEffect)(()=>{if(!t.skipAnimation){const e=setTimeout(()=>r(!0),100);return()=>clearTimeout(e)}},[t.skipAnimation]);const n=t.flashcard_count>0?(t.completed_flashcards||0)/t.flashcard_count*100:0;return(0,d.jsx)(u.P.div,{initial:t.skipAnimation?{opacity:1,scale:1}:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-20},transition:{duration:.6,ease:[.25,.46,.45,.94],delay:t.skipAnimation?0:.1},whileHover:{scale:1.06,y:-3,transition:{duration:.2}},className:"group relative min-w-[260px] max-w-[300px] cursor-pointer "+(a?"z-10":"z-0"),children:(0,d.jsxs)("div",{className:`\n          relative px-6 py-5 rounded-2xl backdrop-blur-sm\n          border-2 transition-all duration-400 overflow-hidden\n          shadow-lg hover:shadow-2xl\n          ${a?"border-indigo-300 shadow-indigo-500/30 ring-4 ring-indigo-200/60":"border-indigo-200/40 hover:border-indigo-300/70"}\n        `,style:{background:"linear-gradient(135deg, #0f172a 0%, #1e293b 20%, #312e81 60%, #4338ca 85%, #6366f1 100%)",boxShadow:a?"0 12px 28px -8px rgba(67, 56, 202, 0.4), 0 8px 16px -8px rgba(67, 56, 202, 0.3)":"0 6px 20px -6px rgba(67, 56, 202, 0.25), 0 4px 8px -4px rgba(67, 56, 202, 0.1)"},children:[(0,d.jsx)("div",{className:"\n            absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 \n            transition-opacity duration-400 pointer-events-none\n          ",style:{background:"radial-gradient(circle at 30% 20%, rgba(255,255,255,0.15) 0%, transparent 60%)"}}),(0,d.jsx)(w.h7,{id:"top",type:"source",position:j.yX.Top,className:"w-4 h-4 !bg-indigo-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-indigo-300",style:{left:"50%",transform:"translateX(-50%)",zIndex:2,boxShadow:"0 2px 8px rgba(67, 56, 202, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"top",type:"target",position:j.yX.Top,className:"w-4 h-4 !bg-indigo-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-indigo-300",style:{left:"50%",transform:"translateX(-50%)",zIndex:1,boxShadow:"0 2px 8px rgba(67, 56, 202, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"right",type:"source",position:j.yX.Right,className:"w-4 h-4 !bg-indigo-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-indigo-300",style:{top:"50%",transform:"translateY(-50%)",zIndex:2,boxShadow:"0 2px 8px rgba(67, 56, 202, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"right",type:"target",position:j.yX.Right,className:"w-4 h-4 !bg-indigo-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-indigo-300",style:{top:"50%",transform:"translateY(-50%)",zIndex:1,boxShadow:"0 2px 8px rgba(67, 56, 202, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"bottom",type:"source",position:j.yX.Bottom,className:"w-4 h-4 !bg-indigo-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-indigo-300",style:{left:"50%",transform:"translateX(-50%)",zIndex:2,boxShadow:"0 2px 8px rgba(67, 56, 202, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"bottom",type:"target",position:j.yX.Bottom,className:"w-4 h-4 !bg-indigo-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-indigo-300",style:{left:"50%",transform:"translateX(-50%)",zIndex:1,boxShadow:"0 2px 8px rgba(67, 56, 202, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"left",type:"source",position:j.yX.Left,className:"w-4 h-4 !bg-indigo-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-indigo-300",style:{top:"50%",transform:"translateY(-50%)",zIndex:2,boxShadow:"0 2px 8px rgba(67, 56, 202, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"left",type:"target",position:j.yX.Left,className:"w-4 h-4 !bg-indigo-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-indigo-300",style:{top:"50%",transform:"translateY(-50%)",zIndex:1,boxShadow:"0 2px 8px rgba(67, 56, 202, 0.4)"},isConnectable:!0}),(0,d.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 bg-white/15 rounded-xl px-3 py-2 backdrop-blur-sm",children:[(0,d.jsx)(u.P.div,{animate:{rotate:[0,5,-5,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:(0,d.jsx)(se.A,{size:20,className:"text-yellow-300"})}),(0,d.jsx)(z.A,{size:18,className:"text-indigo-200"})]}),(0,d.jsx)("div",{className:"font-bold text-xl text-white leading-tight",children:t.label})]}),t.onDelete&&(0,d.jsx)(u.P.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:e=>{e.preventDefault();const a=setTimeout(()=>{e.stopPropagation(),t.onDelete()},300);e.currentTarget.deleteTimeout=a},onDoubleClick:e=>{e.currentTarget.deleteTimeout&&(clearTimeout(e.currentTarget.deleteTimeout),e.currentTarget.deleteTimeout=null)},className:"p-2 hover:bg-white/20 rounded-lg transition-all duration-200 backdrop-blur-sm",children:(0,d.jsx)(x.A,{size:16,className:"text-indigo-100"})})]}),t.description&&(0,d.jsx)("div",{className:"text-sm text-indigo-100 mb-4 p-3 bg-white/10 rounded-xl backdrop-blur-sm leading-relaxed",children:t.description}),t.category&&(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,d.jsx)(re.A,{size:14,className:"text-indigo-200"}),(0,d.jsx)("span",{className:"text-xs font-semibold text-indigo-200 bg-white/15 px-3 py-1 rounded-full backdrop-blur-sm",children:t.category.toUpperCase()})]}),t.flashcard_count>0&&(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between text-sm text-indigo-100",children:[(0,d.jsx)("span",{className:"font-medium",children:"Learning Progress"}),(0,d.jsxs)("span",{className:"font-bold",children:[Math.round(n),"%"]})]}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("div",{className:"w-full bg-white/20 rounded-full h-3 backdrop-blur-sm border border-white/30",children:(0,d.jsx)(u.P.div,{className:"h-full rounded-full bg-gradient-to-r from-yellow-400 to-orange-400 shadow-lg",initial:{width:0},animate:{width:`${n}%`},transition:{duration:1,ease:"easeOut"}})}),(0,d.jsxs)("div",{className:"text-xs text-indigo-200 mt-1 flex justify-between",children:[(0,d.jsxs)("span",{children:[t.completed_flashcards||0," completed"]}),(0,d.jsxs)("span",{children:[t.flashcard_count," total"]})]})]})]}),(0,d.jsx)("div",{className:"absolute bottom-3 right-3 opacity-60 group-hover:opacity-100 transition-opacity duration-300",children:(0,d.jsx)(u.P.div,{animate:{scale:[1,1.1,1],opacity:[.6,1,.6]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:(0,d.jsx)(D.A,{size:16,className:"text-indigo-200"})})}),t.updated_at&&(0,d.jsx)("div",{className:"absolute bottom-2 left-3 opacity-50 group-hover:opacity-100 transition-opacity duration-300",children:(0,d.jsx)("div",{className:"w-6 h-6 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:(0,d.jsx)(p.A,{size:12,className:"text-indigo-100"})})})]})})};var oe=a(8646);const le=e=>{let{data:t,selected:a}=e;const[s,r]=(0,i.useState)(t.skipAnimation||!1);(0,i.useEffect)(()=>{if(!t.skipAnimation){const e=setTimeout(()=>r(!0),150);return()=>clearTimeout(e)}},[t.skipAnimation]);const n=(e=>{var t,a;const i=(null===(t=e.chief_complaint)||void 0===t?void 0:t.toLowerCase())||"",s=(null===(a=e.diagnosis)||void 0===a?void 0:a.toLowerCase())||"";return["emergency","urgent","crisis","acute","severe"].some(e=>i.includes(e)||s.includes(e))?"high":"normal"})(t);return(0,d.jsx)(u.P.div,{initial:t.skipAnimation?{opacity:1,scale:1}:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-20},transition:{duration:.5,ease:[.25,.46,.45,.94],delay:t.skipAnimation?0:.15},whileHover:{scale:1.05,y:-2,transition:{duration:.2}},className:"group relative min-w-[280px] max-w-[320px] cursor-pointer "+(a?"z-10":"z-0"),children:(0,d.jsxs)("div",{className:`\n          relative px-6 py-4 rounded-2xl backdrop-blur-sm\n          border transition-all duration-300 overflow-hidden\n          shadow-lg hover:shadow-2xl\n          ${a?"border-violet-300 shadow-violet-500/25 ring-4 ring-violet-200/50":"border-violet-200/30 hover:border-violet-300/60"}\n          ${"high"===n?"ring-2 ring-red-400/60":""}\n        `,style:{background:"linear-gradient(135deg, #581c87 0%, #7c3aed 25%, #a855f7 75%, #c084fc 100%)",boxShadow:a?"0 10px 25px -5px rgba(139, 92, 246, 0.4), 0 8px 10px -6px rgba(139, 92, 246, 0.3)":"0 4px 15px -3px rgba(139, 92, 246, 0.25), 0 4px 6px -4px rgba(139, 92, 246, 0.1)"},children:[(0,d.jsx)("div",{className:"\n            absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 \n            transition-opacity duration-300 pointer-events-none\n          ",style:{background:"radial-gradient(circle at 50% 0%, rgba(255,255,255,0.1) 0%, transparent 70%)"}}),(0,d.jsx)(w.h7,{id:"top",type:"source",position:j.yX.Top,className:"w-4 h-4 !bg-violet-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-violet-300",style:{left:"50%",transform:"translateX(-50%)",zIndex:2,boxShadow:"0 2px 8px rgba(139, 92, 246, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"top",type:"target",position:j.yX.Top,className:"w-4 h-4 !bg-violet-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-violet-300",style:{left:"50%",transform:"translateX(-50%)",zIndex:1,boxShadow:"0 2px 8px rgba(139, 92, 246, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"right",type:"source",position:j.yX.Right,className:"w-4 h-4 !bg-violet-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-violet-300",style:{top:"50%",transform:"translateY(-50%)",zIndex:2,boxShadow:"0 2px 8px rgba(139, 92, 246, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"right",type:"target",position:j.yX.Right,className:"w-4 h-4 !bg-violet-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-violet-300",style:{top:"50%",transform:"translateY(-50%)",zIndex:1,boxShadow:"0 2px 8px rgba(139, 92, 246, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"bottom",type:"source",position:j.yX.Bottom,className:"w-4 h-4 !bg-violet-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-violet-300",style:{left:"50%",transform:"translateX(-50%)",zIndex:2,boxShadow:"0 2px 8px rgba(139, 92, 246, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"bottom",type:"target",position:j.yX.Bottom,className:"w-4 h-4 !bg-violet-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-violet-300",style:{left:"50%",transform:"translateX(-50%)",zIndex:1,boxShadow:"0 2px 8px rgba(139, 92, 246, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"left",type:"source",position:j.yX.Left,className:"w-4 h-4 !bg-violet-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-violet-300",style:{top:"50%",transform:"translateY(-50%)",zIndex:2,boxShadow:"0 2px 8px rgba(139, 92, 246, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"left",type:"target",position:j.yX.Left,className:"w-4 h-4 !bg-violet-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-violet-300",style:{top:"50%",transform:"translateY(-50%)",zIndex:1,boxShadow:"0 2px 8px rgba(139, 92, 246, 0.4)"},isConnectable:!0}),"high"===n&&(0,d.jsx)(u.P.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-3 -right-3",children:(0,d.jsx)("div",{className:"w-7 h-7 bg-gradient-to-br from-red-400 to-red-600 rounded-full flex items-center justify-center border-2 border-white shadow-lg",children:(0,d.jsx)(u.P.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:(0,d.jsx)(S.A,{size:16,className:"text-white"})})})}),(0,d.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 bg-white/10 rounded-lg px-2 py-1 backdrop-blur-sm",children:[(0,d.jsx)(m.A,{size:18,className:"text-violet-100 flex-shrink-0"}),t.linked_topics&&t.linked_topics.length>0&&(0,d.jsx)("div",{className:"text-xs bg-violet-300 text-violet-900 px-2 py-0.5 rounded-full font-medium",children:t.linked_topics.length})]}),(0,d.jsx)("div",{className:"font-bold text-lg text-white truncate leading-tight",children:t.label})]}),t.onDelete&&(0,d.jsx)(u.P.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:e=>{e.preventDefault();const a=setTimeout(()=>{e.stopPropagation(),t.onDelete()},300);e.currentTarget.deleteTimeout=a},onDoubleClick:e=>{e.currentTarget.deleteTimeout&&(clearTimeout(e.currentTarget.deleteTimeout),e.currentTarget.deleteTimeout=null)},className:"p-2 hover:bg-white/20 rounded-lg transition-all duration-200 backdrop-blur-sm",children:(0,d.jsx)(x.A,{size:16,className:"text-violet-100"})})]}),t.diagnosis&&(0,d.jsx)("div",{className:"text-sm text-violet-100 mb-3 p-2 bg-white/10 rounded-lg backdrop-blur-sm font-medium",children:t.diagnosis}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[t.age&&(0,d.jsxs)("div",{className:"flex items-center gap-2 text-sm text-violet-100 bg-white/10 rounded-lg p-2 backdrop-blur-sm",children:[(0,d.jsx)(oe.A,{size:14,className:"text-violet-200"}),(0,d.jsxs)("span",{className:"font-medium",children:["Age ",t.age]})]}),t.status&&(0,d.jsx)("div",{className:`px-3 py-1.5 rounded-lg text-xs font-bold border-2 backdrop-blur-sm ${(e=>{switch(e){case"active":return"bg-green-100 text-green-800 border-green-200";case"archived":return"bg-gray-100 text-gray-800 border-gray-200";case"follow_up":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}})(t.status)}`,children:t.status.replace("_"," ").toUpperCase()})]}),t.tasks_count&&t.tasks_count>0&&(0,d.jsxs)("div",{className:"flex items-center justify-between text-sm text-violet-100 bg-white/10 rounded-lg p-2 backdrop-blur-sm",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(P.A,{size:14,className:"text-violet-200"}),(0,d.jsx)("span",{className:"font-medium",children:"Tasks Progress"})]}),(0,d.jsxs)("div",{className:"font-bold",children:[t.completed_tasks||0,"/",t.tasks_count]})]}),(0,d.jsx)(u.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0,transition:{delay:.2}},className:"opacity-0 group-hover:opacity-100 transition-all duration-300 mt-3",children:(0,d.jsxs)("div",{className:"flex items-center justify-center gap-2 bg-white/20 rounded-lg py-2 backdrop-blur-sm border border-white/30",children:[(0,d.jsx)(M.A,{size:16,className:"text-white"}),(0,d.jsx)("span",{className:"text-sm font-medium text-white",children:"View Timeline"})]})}),t.updated_at&&(0,d.jsx)("div",{className:"absolute bottom-2 right-2 opacity-50 group-hover:opacity-100 transition-opacity duration-300",children:(0,d.jsx)("div",{className:"w-6 h-6 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:(0,d.jsx)(p.A,{size:12,className:"text-violet-100"})})})]})})};var de=a(1482),ce=a(3165),ue=a(73);const pe=e=>{let{data:t,selected:a}=e;const[s,r]=(0,i.useState)(t.skipAnimation||!1);(0,i.useEffect)(()=>{if(!t.skipAnimation){const e=setTimeout(()=>r(!0),200);return()=>clearTimeout(e)}},[t.skipAnimation]);const n=(e=>{switch(e){case"pending":return{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 50%, #ea580c 100%)",ring:"ring-orange-300/50",shadow:"shadow-orange-500/30"};case"in_progress":return{background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 50%, #1d4ed8 100%)",ring:"ring-blue-300/50",shadow:"shadow-blue-500/30"};case"completed":return{background:"linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%)",ring:"ring-emerald-300/50",shadow:"shadow-emerald-500/30",opacity:"opacity-75"};default:return{background:"linear-gradient(135deg, #ff6b6b 0%, #ee5a52 50%, #e74c3c 100%)",ring:"ring-red-300/50",shadow:"shadow-red-500/30"}}})(t.status),o=(e=>{switch(e){case"high":return"ring-4 ring-red-400 ring-opacity-70";case"medium":return"ring-4 ring-yellow-400 ring-opacity-70";case"low":return"ring-4 ring-green-400 ring-opacity-70";default:return""}})(t.priority);return(0,d.jsx)(u.P.div,{initial:t.skipAnimation?{opacity:1,scale:1}:{opacity:0,scale:.8,x:-20},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.8,x:20},transition:{duration:.4,ease:[.68,-.55,.265,1.55],delay:t.skipAnimation?0:.2},whileHover:{scale:1.05,x:2,transition:{duration:.2}},className:"group relative min-w-[240px] max-w-[280px] cursor-pointer "+(a?"z-10":"z-0"),children:(0,d.jsxs)("div",{className:`\n          relative px-5 py-4 rounded-2xl backdrop-blur-sm\n          border-2 transition-all duration-300 overflow-hidden\n          shadow-lg hover:shadow-2xl text-white font-medium\n          ${a?`border-white shadow-2xl ring-4 ring-white/30 ${n.shadow}`:"border-white/30 hover:border-white/60"}\n          ${o}\n          ${n.opacity||""}\n        `,style:{background:n.background,boxShadow:a?"0 12px 32px -8px rgba(255, 107, 107, 0.4), 0 8px 16px -8px rgba(255, 107, 107, 0.3)":"0 6px 20px -6px rgba(255, 107, 107, 0.25), 0 4px 8px -4px rgba(255, 107, 107, 0.1)"},children:[(0,d.jsx)("div",{className:"\n            absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 \n            transition-opacity duration-300 pointer-events-none\n          ",style:{background:"radial-gradient(circle at 70% 30%, rgba(255,255,255,0.2) 0%, transparent 50%)"}}),(0,d.jsx)(w.h7,{id:"top",type:"source",position:j.yX.Top,className:"w-4 h-4 !bg-red-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-red-300",style:{left:"50%",transform:"translateX(-50%)",zIndex:2,boxShadow:"0 2px 8px rgba(248, 113, 113, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"top",type:"target",position:j.yX.Top,className:"w-4 h-4 !bg-red-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-red-300",style:{left:"50%",transform:"translateX(-50%)",zIndex:1,boxShadow:"0 2px 8px rgba(248, 113, 113, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"right",type:"source",position:j.yX.Right,className:"w-4 h-4 !bg-red-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-red-300",style:{top:"50%",transform:"translateY(-50%)",zIndex:2,boxShadow:"0 2px 8px rgba(248, 113, 113, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"right",type:"target",position:j.yX.Right,className:"w-4 h-4 !bg-red-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-red-300",style:{top:"50%",transform:"translateY(-50%)",zIndex:1,boxShadow:"0 2px 8px rgba(248, 113, 113, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"bottom",type:"source",position:j.yX.Bottom,className:"w-4 h-4 !bg-red-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-red-300",style:{left:"50%",transform:"translateX(-50%)",zIndex:2,boxShadow:"0 2px 8px rgba(248, 113, 113, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"bottom",type:"target",position:j.yX.Bottom,className:"w-4 h-4 !bg-red-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-red-300",style:{left:"50%",transform:"translateX(-50%)",zIndex:1,boxShadow:"0 2px 8px rgba(248, 113, 113, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"left",type:"source",position:j.yX.Left,className:"w-4 h-4 !bg-red-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-red-300",style:{top:"50%",transform:"translateY(-50%)",zIndex:2,boxShadow:"0 2px 8px rgba(248, 113, 113, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"left",type:"target",position:j.yX.Left,className:"w-4 h-4 !bg-red-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-red-300",style:{top:"50%",transform:"translateY(-50%)",zIndex:1,boxShadow:"0 2px 8px rgba(248, 113, 113, 0.4)"},isConnectable:!0}),t.priority&&(0,d.jsx)(u.P.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},className:"absolute -top-3 -right-3",children:(0,d.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center border-3 border-white shadow-lg\n              "+("high"===t.priority?"bg-red-500":"medium"===t.priority?"bg-yellow-500":"bg-green-500"),children:(0,d.jsx)(de.A,{size:16,className:"text-white"})})}),(0,d.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,d.jsx)("div",{className:"flex items-center gap-2 bg-white/20 rounded-xl px-3 py-2 backdrop-blur-sm",children:"completed"===t.status?(0,d.jsx)(u.P.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2},children:(0,d.jsx)(P.A,{size:20,className:"text-green-300"})}):"in_progress"===t.status?(0,d.jsx)(u.P.div,{animate:{rotate:[0,360]},transition:{duration:2,repeat:1/0,ease:"linear"},children:(0,d.jsx)(ce.A,{size:20,className:"text-blue-300"})}):(0,d.jsx)(ue.A,{size:20,className:"text-yellow-300"})}),(0,d.jsx)("div",{className:"font-bold text-lg text-white leading-tight",children:t.label})]}),t.onDelete&&(0,d.jsx)(u.P.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:e=>{e.preventDefault();const a=setTimeout(()=>{e.stopPropagation(),t.onDelete()},300);e.currentTarget.deleteTimeout=a},onDoubleClick:e=>{e.currentTarget.deleteTimeout&&(clearTimeout(e.currentTarget.deleteTimeout),e.currentTarget.deleteTimeout=null)},className:"p-2 hover:bg-white/20 rounded-lg transition-all duration-200 backdrop-blur-sm",children:(0,d.jsx)(x.A,{size:16,className:"text-white"})})]}),t.description&&(0,d.jsx)("div",{className:"text-sm text-white/90 mb-3 p-3 bg-white/15 rounded-xl backdrop-blur-sm leading-relaxed",children:t.description}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[t.due_date&&(0,d.jsxs)("div",{className:"flex items-center gap-2 text-sm text-white/90 bg-white/15 rounded-lg p-2 backdrop-blur-sm",children:[(0,d.jsx)(p.A,{size:14,className:"text-white"}),(0,d.jsx)("span",{className:"font-medium",children:t.due_date})]}),t.priority&&(0,d.jsxs)("div",{className:"flex items-center gap-2 text-sm text-white/90 bg-white/15 rounded-lg p-2 backdrop-blur-sm",children:[(0,d.jsx)(de.A,{size:14,className:"text-white"}),(0,d.jsx)("span",{className:"font-medium capitalize",children:t.priority})]})]}),t.total_subtasks&&t.total_subtasks>0&&(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-sm font-medium text-white/90",children:"Subtasks"}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)("span",{className:"text-sm font-bold text-white",children:[t.completed_subtasks||0,"/",t.total_subtasks]}),(0,d.jsx)("div",{className:"relative w-6 h-6",children:(0,d.jsxs)("svg",{className:"w-6 h-6 transform -rotate-90",viewBox:"0 0 24 24",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"8",stroke:"rgba(255,255,255,0.3)",strokeWidth:"2",fill:"none"}),(0,d.jsx)(u.P.circle,{cx:"12",cy:"12",r:"8",stroke:"white",strokeWidth:"2",fill:"none",strokeDasharray:""+2*Math.PI*8,strokeDashoffset:""+2*Math.PI*8*(1-(t.completed_subtasks||0)/t.total_subtasks),initial:{strokeDashoffset:2*Math.PI*8},animate:{strokeDashoffset:2*Math.PI*8*(1-(t.completed_subtasks||0)/t.total_subtasks)},transition:{duration:1,ease:"easeOut"}})]})})]})]}),t.updated_at&&(0,d.jsx)("div",{className:"absolute bottom-2 right-2 opacity-60 group-hover:opacity-100 transition-opacity duration-300",children:(0,d.jsx)("div",{className:"w-6 h-6 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:(0,d.jsx)(p.A,{size:12,className:"text-white"})})})]})})};var me=a(1680);const he={topic:ne,case:le,task:pe,literature:e=>{let{data:t,selected:a}=e;const[s,r]=(0,i.useState)(t.skipAnimation||!1);return(0,i.useEffect)(()=>{if(!t.skipAnimation){const e=setTimeout(()=>r(!0),250);return()=>clearTimeout(e)}},[t.skipAnimation]),(0,d.jsx)(u.P.div,{initial:t.skipAnimation?{opacity:1,scale:1}:{opacity:0,scale:.9,x:20,rotate:-1},animate:{opacity:1,scale:1,x:0,rotate:0},exit:{opacity:0,scale:.9,x:-20,rotate:1},transition:{duration:.5,ease:[.175,.885,.32,1.275],delay:t.skipAnimation?0:.25},whileHover:{scale:1.03,y:-2,rotate:.5,transition:{duration:.2}},className:"group relative min-w-[180px] max-w-[220px] cursor-pointer "+(a?"z-10":"z-0"),children:(0,d.jsxs)("div",{className:`\n          relative px-3 py-3 rounded-lg backdrop-blur-sm\n          border-2 transition-all duration-400 overflow-hidden\n          shadow-lg hover:shadow-xl text-slate-800\n          ${a?"border-amber-300 shadow-amber-200/40 ring-4 ring-amber-200/30":"border-amber-200/60 hover:border-amber-300/80"}\n        `,style:{background:"linear-gradient(145deg, #fefbf3 0%, #faf7f0 30%, #f7f3e9 70%, #f4f0e6 100%)",fontFamily:'"Crimson Text", "Times New Roman", serif',boxShadow:a?"0 8px 25px -5px rgba(217, 119, 6, 0.2), 0 6px 12px -6px rgba(217, 119, 6, 0.15)":"0 4px 15px -3px rgba(217, 119, 6, 0.1), 0 2px 6px -3px rgba(217, 119, 6, 0.05)",filter:"drop-shadow(0 1px 3px rgba(0,0,0,0.1))"},children:[(0,d.jsx)("div",{className:"\n            absolute inset-0 rounded-lg opacity-0 group-hover:opacity-100 \n            transition-opacity duration-400 pointer-events-none\n          ",style:{background:"\n              radial-gradient(circle at 20% 10%, rgba(245, 158, 11, 0.05) 0%, transparent 50%),\n              url(\"data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23d97706' fill-opacity='0.02'%3E%3Cpath d='M20 20.5V18H0v-2h20v-2H0v-2h20v-2H0V8h20V6H0V4h20V2H0V0h22v20h2V0h2v20h2V0h2v20h2V0h2v20h2V0h2v22H20v-1.5z'/%3E%3C/g%3E%3C/svg%3E\")\n            "}}),(0,d.jsx)(w.h7,{id:"top",type:"source",position:j.yX.Top,className:"w-4 h-4 !bg-amber-500 !border-2 !border-slate-700 transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-amber-400",style:{left:"50%",transform:"translateX(-50%)",zIndex:2,boxShadow:"0 2px 8px rgba(217, 119, 6, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"top",type:"target",position:j.yX.Top,className:"w-4 h-4 !bg-amber-500 !border-2 !border-slate-700 transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-amber-400",style:{left:"50%",transform:"translateX(-50%)",zIndex:1,boxShadow:"0 2px 8px rgba(217, 119, 6, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"right",type:"source",position:j.yX.Right,className:"w-4 h-4 !bg-amber-500 !border-2 !border-slate-700 transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-amber-400",style:{top:"50%",transform:"translateY(-50%)",zIndex:2,boxShadow:"0 2px 8px rgba(217, 119, 6, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"right",type:"target",position:j.yX.Right,className:"w-4 h-4 !bg-amber-500 !border-2 !border-slate-700 transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-amber-400",style:{top:"50%",transform:"translateY(-50%)",zIndex:1,boxShadow:"0 2px 8px rgba(217, 119, 6, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"bottom",type:"source",position:j.yX.Bottom,className:"w-4 h-4 !bg-amber-500 !border-2 !border-slate-700 transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-amber-400",style:{left:"50%",transform:"translateX(-50%)",zIndex:2,boxShadow:"0 2px 8px rgba(217, 119, 6, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"bottom",type:"target",position:j.yX.Bottom,className:"w-4 h-4 !bg-amber-500 !border-2 !border-slate-700 transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-amber-400",style:{left:"50%",transform:"translateX(-50%)",zIndex:1,boxShadow:"0 2px 8px rgba(217, 119, 6, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"left",type:"source",position:j.yX.Left,className:"w-4 h-4 !bg-amber-500 !border-2 !border-slate-700 transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-amber-400",style:{top:"50%",transform:"translateY(-50%)",zIndex:2,boxShadow:"0 2px 8px rgba(217, 119, 6, 0.4)"},isConnectable:!0}),(0,d.jsx)(w.h7,{id:"left",type:"target",position:j.yX.Left,className:"w-4 h-4 !bg-amber-500 !border-2 !border-slate-700 transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-amber-400",style:{top:"50%",transform:"translateY(-50%)",zIndex:1,boxShadow:"0 2px 8px rgba(217, 119, 6, 0.4)"},isConnectable:!0}),(0,d.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,d.jsxs)("div",{className:"flex items-center gap-1 bg-amber-100/80 rounded px-2 py-1 border border-amber-200/60",children:[(0,d.jsx)(me.A,{size:14,className:"text-amber-800"}),(0,d.jsx)(z.A,{size:12,className:"text-amber-700"})]}),(0,d.jsx)("div",{className:"font-bold text-sm text-slate-800 leading-tight line-clamp-2",style:{fontFamily:'"Crimson Text", serif'},children:t.title||t.label})]}),t.onDelete&&(0,d.jsx)(u.P.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:e=>{e.preventDefault();const a=setTimeout(()=>{e.stopPropagation(),t.onDelete()},300);e.currentTarget.deleteTimeout=a},onDoubleClick:e=>{e.currentTarget.deleteTimeout&&(clearTimeout(e.currentTarget.deleteTimeout),e.currentTarget.deleteTimeout=null)},className:"p-1 hover:bg-amber-100 rounded-lg transition-all duration-200",children:(0,d.jsx)(x.A,{size:14,className:"text-slate-600"})})]}),t.authors&&(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-2 text-xs text-slate-700",children:[(0,d.jsx)(m.A,{size:12,className:"text-amber-700"}),(0,d.jsx)("span",{className:"italic font-medium truncate",children:(()=>{const e=Array.isArray(t.authors)?t.authors.join(", "):t.authors;return e.length>30?`${e.substring(0,30)}...`:e})()}),t.year&&(0,d.jsxs)("span",{className:"text-slate-600 font-semibold",children:["(",t.year,")"]})]}),t.journal&&(0,d.jsxs)("div",{className:"text-xs text-slate-700 bg-amber-50/60 rounded px-2 py-1 mb-2 truncate",children:[(0,d.jsx)("span",{className:"font-medium italic",children:t.journal}),t.volume&&(0,d.jsxs)("span",{className:"ml-1 text-slate-600",children:["Vol.",t.volume]})]}),(()=>{const e=t.keywords||t.tags||[],a=Array.isArray(e)?e:[];return a.length>0&&(0,d.jsxs)("div",{className:"flex flex-wrap gap-1 mb-2",children:[a.slice(0,2).map((e,t)=>(0,d.jsx)("span",{className:"text-xs bg-slate-200/60 text-slate-700 px-1.5 py-0.5 rounded border border-slate-300/40",children:e.length>12?`${e.substring(0,12)}...`:e},t)),a.length>2&&(0,d.jsxs)("span",{className:"text-xs bg-slate-200/60 text-slate-700 px-1.5 py-0.5 rounded border border-slate-300/40",children:["+",a.length-2]})]})})(),(0,d.jsx)(u.P.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0,transition:{delay:.3}},className:"opacity-0 group-hover:opacity-100 transition-all duration-300 mt-2",children:(0,d.jsx)("div",{className:"text-xs bg-slate-700 text-white rounded py-1 px-2 border border-slate-600",children:(0,d.jsxs)("div",{className:"italic line-clamp-1",children:[t.authors&&Array.isArray(t.authors)?t.authors[0]:"Author"," et al.",t.year&&` (${t.year})`,t.journal&&`, ${t.journal.substring(0,20)}...`]})})}),t.updated_at&&(0,d.jsx)("div",{className:"absolute bottom-2 right-2 opacity-50 group-hover:opacity-100 transition-opacity duration-300",children:(0,d.jsx)("div",{className:"w-6 h-6 bg-amber-100/80 rounded-full flex items-center justify-center border border-amber-200/60",children:(0,d.jsx)(oe.A,{size:12,className:"text-amber-700"})})})]})})}};const xe=[{id:1,title:"Efficacy of Cognitive Behavioral Therapy for Depression: A Meta-Analysis",authors:"Smith, J.A., Johnson, B.K., Williams, C.D.",year:"2023",type:"meta-analysis",journal:"Journal of Clinical Psychology",volume:"79",pages:"234-251",doi:"10.1002/jclp.23456",abstract:"This meta-analysis examines the efficacy of cognitive behavioral therapy (CBT) for treating major depressive disorder across 45 randomized controlled trials involving 3,242 participants. Results indicate that CBT shows significant effectiveness with a large effect size (d = 0.85) compared to control conditions. The analysis also reveals that individual CBT may be more effective than group CBT for severe depression cases.",keywords:"cognitive behavioral therapy, depression, meta-analysis, psychotherapy, mental health",notes:"",pdf_url:"https://example.com/sample-cbt-meta-analysis.pdf",position:{x:300,y:100}},{id:2,title:"DSM-5-TR Clinical Cases",authors:"American Psychiatric Association",year:"2022",type:"guideline",journal:"American Psychiatric Publishing",abstract:"A comprehensive collection of clinical cases that illustrate the diagnostic criteria and clinical features of mental disorders as defined in the DSM-5-TR. Each case includes detailed patient presentations, differential diagnoses, and treatment considerations.",keywords:"DSM-5, diagnosis, clinical cases, psychiatric disorders, differential diagnosis",notes:"Essential reference for diagnostic clarity",position:{x:500,y:200}},{id:3,title:"Pharmacological Treatment of Bipolar Disorder: Current Evidence",authors:"Rodriguez, M.L., Chen, K.H., Anderson, P.R.",year:"2023",type:"review",journal:"Bipolar Disorders",volume:"25",pages:"123-145",doi:"10.1111/bdi.13289",abstract:"This comprehensive review examines current evidence for pharmacological treatments of bipolar disorder, including mood stabilizers, antipsychotics, and adjunctive therapies. The review covers efficacy, safety profiles, and treatment-resistant cases.",keywords:"bipolar disorder, pharmacotherapy, mood stabilizers, lithium, antipsychotics",notes:"Important for medication management decisions",position:{x:700,y:150}},{id:4,title:"Mindfulness-Based Interventions for Anxiety Disorders: A Systematic Review",authors:"Taylor, S.M., Brown, A.J., Davis, L.K.",year:"2023",type:"review",journal:"Clinical Psychology Review",volume:"88",pages:"102-118",abstract:"Systematic review of mindfulness-based interventions for treating various anxiety disorders. Analysis of 28 studies shows moderate to large effect sizes for reducing anxiety symptoms, with particular effectiveness for generalized anxiety disorder.",keywords:"mindfulness, anxiety disorders, meditation, systematic review, GAD",notes:"Good evidence for mindfulness approaches",position:{x:400,y:300}},{id:5,title:"Case Study: Treatment-Resistant Schizophrenia with Clozapine",authors:"Wilson, K.R., Martinez, E.S.",year:"2022",type:"case-study",journal:"Schizophrenia Bulletin",volume:"48",pages:"567-572",abstract:"Detailed case study of a 28-year-old male with treatment-resistant schizophrenia who showed significant improvement after clozapine initiation. The case discusses monitoring protocols, side effect management, and long-term outcomes.",keywords:"schizophrenia, clozapine, treatment-resistant, case study, antipsychotics",notes:"Useful for understanding clozapine protocols",position:{x:600,y:400}}],ge=[{id:"conn-1",source:"literature-1",target:"case-101",label:"Treatment approach"},{id:"conn-2",source:"literature-2",target:"topic-201",label:"Reference guide"},{id:"conn-3",source:"literature-3",target:"case-102",label:"Medication guidance"},{id:"conn-4",source:"literature-4",target:"case-103",label:"Treatment option"},{id:"conn-5",source:"literature-5",target:"case-104",label:"Treatment protocol"}],be=(e,t,a)=>{e(e=>{const i=new Set(e.literature.map(e=>e.id)),s=xe.filter(e=>!i.has(e.id));if(0===s.length)return a("Sample literature data already exists","info"),e;const r=new Set(e.cases.map(e=>e.id)),n=new Set(e.topics.map(e=>e.id)),o=[{id:101,label:"Major Depression Case",primary_diagnosis:"Major Depressive Disorder",chief_complaint:"Persistent sadness and loss of interest",secondary_diagnoses:["Anxiety","Insomnia"],position:{x:100,y:100}},{id:102,label:"Bipolar Disorder Case",primary_diagnosis:"Bipolar I Disorder",chief_complaint:"Mood swings and impulsivity",position:{x:200,y:200}},{id:103,label:"Generalized Anxiety Case",primary_diagnosis:"Generalized Anxiety Disorder",chief_complaint:"Excessive worry and restlessness",position:{x:300,y:300}},{id:104,label:"Schizophrenia Case",primary_diagnosis:"Schizophrenia",chief_complaint:"Auditory hallucinations and delusions",position:{x:400,y:400}}].filter(e=>!r.has(e.id)),l=[{id:201,title:"Diagnostic Criteria",category:"Assessment",tags:["DSM-5","diagnosis","criteria"],position:{x:150,y:50}}].filter(e=>!n.has(e.id)),d=new Set(e.connections.map(e=>e.id)),c=ge.filter(e=>!d.has(e.id)),u={...e,literature:[...e.literature,...s],cases:[...e.cases,...o],topics:[...e.topics,...l],connections:[...e.connections,...c]};return t(u),a(`Added ${s.length} literature items, ${o.length} cases, and ${l.length} topics`,"success"),u})},ve=()=>a.e(497).then(a.bind(a,9930)),ye=`${"https://patient-import.preview.emergentagent.com".replace(/\/$/,"")}/api`,fe=console.error;console.error=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];t[0]&&t[0].includes&&t[0].includes("ResizeObserver loop")||fe(...t)};const we=e=>{let{message:t,type:a="success",onClose:s,duration:r=3e3}=e;(0,i.useEffect)(()=>{const e=setTimeout(s,r);return()=>clearTimeout(e)},[s,r]);return(0,d.jsx)("div",{className:`fixed top-4 right-4 z-50 px-6 py-3 rounded-lg shadow-lg transition-all duration-500 transform ${{success:"bg-green-600 text-white border-l-4 border-green-400",error:"bg-red-600 text-white border-l-4 border-red-400",info:"bg-blue-600 text-white border-l-4 border-blue-400",saving:"bg-purple-600 text-white border-l-4 border-purple-400"}[a]}`,children:(0,d.jsxs)("div",{className:"flex items-center",children:[(()=>{switch(a){case"success":default:return(0,d.jsx)(C.A,{size:16,className:"mr-2"});case"error":return(0,d.jsx)(S.A,{size:16,className:"mr-2"});case"info":return(0,d.jsx)(_.A,{size:16,className:"mr-2"});case"saving":return(0,d.jsx)(A.A,{size:16,className:"mr-2 animate-spin"})}})(),(0,d.jsx)("span",{className:"text-sm font-medium",children:t}),(0,d.jsx)("button",{onClick:s,className:"ml-4 text-white hover:text-gray-200 transition-colors",children:(0,d.jsx)(x.A,{size:14})})]})})},je=e=>{let{onClick:t,loading:a,disabled:i,children:s,className:r,icon:n,...o}=e;return(0,d.jsx)("button",{onClick:t,disabled:i||a,className:`${r} transform transition-all duration-200 hover:scale-105 active:scale-95 ${i||a?"cursor-not-allowed opacity-50":"hover:shadow-lg"}`,...o,children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[a?(0,d.jsx)(A.A,{size:16,className:"animate-spin"}):n?(0,d.jsx)(n,{size:16}):null,s]})})},Ne="pgy3_mindmap_data",ke={save:(()=>{let e;return function(t,a,i){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];clearTimeout(e),a&&a();e=setTimeout(()=>{try{const e={version:"1.1",timestamp:(new Date).toISOString(),data:t};localStorage.setItem(Ne,JSON.stringify(e)),console.log("Mind map data auto-saved to localStorage"),i&&i(!0)}catch(e){if(console.error("Error saving to localStorage:",e),i&&i(!1,e),"QuotaExceededError"===e.name){console.warn("localStorage quota exceeded, clearing old data...");try{localStorage.removeItem(Ne)}catch(a){console.error("Error clearing localStorage:",a)}}}},s?1200:800)}})(),load:()=>{try{const e=localStorage.getItem(Ne);if(!e)return console.log("No localStorage data found"),null;const t=JSON.parse(e);return"1.1"!==t.version?(console.log("localStorage version mismatch, clearing old data"),localStorage.removeItem(Ne),null):(console.log("Mind map data loaded from localStorage",t.timestamp),t.data)}catch(e){console.error("Error loading from localStorage:",e);try{localStorage.removeItem(Ne)}catch(t){console.error("Error clearing corrupted localStorage:",t)}return null}},clear:()=>{try{localStorage.removeItem(Ne),console.log("localStorage data cleared")}catch(e){console.error("Error clearing localStorage:",e)}},getStorageInfo:()=>{try{const e=localStorage.getItem(Ne);if(!e)return null;const t=JSON.parse(e);return{version:t.version,timestamp:t.timestamp,size:new Blob([e]).size}}catch(e){return null}}},Ce=e=>{let{edge:t,isOpen:a,onClose:s,onSave:r}=e;const[n,o]=(0,i.useState)((null===t||void 0===t?void 0:t.label)||"");(0,i.useEffect)(()=>{o((null===t||void 0===t?void 0:t.label)||"")},[t]);const l=()=>{r(t.id,n),s()};return a&&t?(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm",children:(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl p-6 max-w-md w-full mx-4 transform transition-all",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,d.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Edit Connection Label"}),(0,d.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 p-1 transition-colors",children:(0,d.jsx)(x.A,{size:20})})]}),(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Connection Label"}),(0,d.jsx)("input",{type:"text",value:n,onChange:e=>o(e.target.value),onKeyPress:e=>{"Enter"===e.key?l():"Escape"===e.key&&s()},placeholder:"Enter a label for this connection...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",autoFocus:!0}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Press Enter to save, Escape to cancel"})]}),(0,d.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,d.jsx)("button",{onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors",children:"Cancel"}),(0,d.jsxs)("button",{onClick:l,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[(0,d.jsx)(T.A,{size:16}),"Save Label"]})]})]})}):null},Se=()=>{var e,t,a,s,o,l;const{fitView:c,setCenter:u,zoomTo:p,getViewport:h}=(0,w.VH)(),[x,g,b]=(0,w.ck)([]),[v,y,f]=(0,w.fM)([]),[N,C]=(0,i.useState)(0),[S,_]=(0,i.useState)({topics:[],cases:[],tasks:[],literature:[],connections:[]}),[T,L]=(0,i.useState)(!1),[H,R]=(0,i.useState)(null),[X,F]=(0,i.useState)(!0),[B,Y]=(0,i.useState)(0),[U,J]=(0,i.useState)("Initializing..."),[K,Q]=(0,i.useState)(!0),[ae,se]=(0,i.useState)(null),[re,ne]=(0,i.useState)(!1),[oe,le]=(0,i.useState)({isOpen:!1,data:null}),[de,ce]=(0,i.useState)({isOpen:!1,data:null}),[ue,pe]=(0,i.useState)({isOpen:!1,data:null}),me=(0,i.useRef)(null),xe=(0,i.useRef)(null),ge=(0,i.useRef)(null),[fe,Ne]=(0,i.useState)(!1),[Se,Ae]=(0,i.useState)(!1),[Te,De]=(0,i.useState)(!1),[Pe,ze]=(0,i.useState)(null),[Oe,$e]=(0,i.useState)(!1),[Ee,Ie]=(0,i.useState)({isOpen:!1,edge:null}),[Me,Le]=(0,i.useState)([]),[He,Re]=(0,i.useState)({isOpen:!1,data:null}),[Xe,Fe]=(0,i.useState)(!1),[Be,Ye]=(0,i.useState)({case:!1,topic:!1,task:!1,literature:!1}),Ue=(0,i.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;const i={id:Date.now(),message:e,type:t,duration:a};Le(e=>[...e,i])},[]),Ge=(0,i.useCallback)(e=>{Le(t=>t.filter(t=>t.id!==e))},[]),Ve=(0,i.useCallback)(e=>{var t,a,i;const s=oe.isOpen||de.isOpen||ue.isOpen||He.isOpen,r=Object.values(Be).some(e=>e),n=oe.isOpen&&(null===(t=oe.data)||void 0===t?void 0:t.isTabTransitioning)||de.isOpen&&(null===(a=de.data)||void 0===a?void 0:a.isTabTransitioning)||ue.isOpen&&(null===(i=ue.data)||void 0===i?void 0:i.isTabTransitioning);if(Xe||s||n||r){console.log("Deferring auto-save during animation, modal interaction, or tab transition");return void setTimeout(()=>Ve(e),n||r?2e3:1e3)}ke.save(e,()=>$e(!0),(e,t)=>{$e(!1),e?ze(new Date):(Ue("Auto-save failed","error",4e3),console.error("Auto-save error:",t))},Xe),window.requestIdleCallback?window.requestIdleCallback(()=>{Xe||Object.values(Be).some(e=>e)||Ze(e)},{timeout:5e3}):setTimeout(()=>{Xe||Object.values(Be).some(e=>e)||Ze(e)},100)},[Ue,Xe,Be,oe.isOpen,de.isOpen,ue.isOpen,He.isOpen]);(0,i.useCallback)(e=>{const t=oe.isOpen||de.isOpen||ue.isOpen||He.isOpen,a=Object.values(Be).some(e=>e);Xe||t||a||(ke.save(e,null,null,Xe),clearTimeout(window.positionBackendSaveTimeout),window.positionBackendSaveTimeout=setTimeout(()=>{Ve(e)},800))},[Xe,Be,oe.isOpen,de.isOpen,ue.isOpen,He.isOpen,Ve]);(0,i.useEffect)(()=>{oe.isOpen&&oe.data?me.current={...oe.data}:oe.isOpen||(me.current=null)},[oe.isOpen,null===(e=oe.data)||void 0===e?void 0:e.id]),(0,i.useEffect)(()=>{de.isOpen&&de.data?xe.current={...de.data}:de.isOpen||(xe.current=null)},[de.isOpen,null===(t=de.data)||void 0===t?void 0:t.id]),(0,i.useEffect)(()=>{ue.isOpen&&ue.data?ge.current={...ue.data}:ue.isOpen||(ge.current=null)},[ue.isOpen,null===(a=ue.data)||void 0===a?void 0:a.id]);const We=(0,i.useCallback)(e=>{console.log("Deleting node with full ID:",e);const[t,...a]=e.split("-"),i=a.join("-"),s="literature"===t?"literature":`${t}s`;_(a=>{const r=(a[s]||[]).filter(e=>String(e.id)!==i),n=(a.connections||[]).filter(t=>t.source!==e&&t.target!==e),o={...a,[s]:r,connections:n};return Ve(o),Ue(`${t.charAt(0).toUpperCase()+t.slice(1)} deleted.`,"success"),o}),g(t=>t.filter(t=>t.id!==e)),y(t=>t.filter(t=>t.source!==e&&t.target!==e))},[_,Ve,Ue,g,y]),qe=(0,i.useCallback)(e=>{Fe(!0),Re({isOpen:!0,data:e}),setTimeout(()=>Fe(!1),700)},[]),Je=(0,i.useCallback)(()=>{console.log("syncNodeData called - syncing node colors and labels"),g(e=>{let t=!1;const a=e.map(e=>{const a=e.id.split("-")[0],i=e.id.split("-")[1];let s=e.data.label,r=e.data.color,n=!1;if("case"===a){var o;const t=null===(o=S.cases)||void 0===o?void 0:o.find(e=>String(e.id)===i);if(t){const a=t.primaryDiagnosis||t.primary_diagnosis||t.title||"Untitled Case";a!==e.data.label&&(s=a,n=!0)}}else if("topic"===a){var l;const t=null===(l=S.topics)||void 0===l?void 0:l.find(e=>String(e.id)===i);if(t){const a=t.title||"Untitled Topic",o=t.color||"#3B82F6";a!==e.data.label&&(s=a,n=!0),o!==e.data.color&&(r=o,n=!0,console.log(`Topic ${i}: Color changing from ${e.data.color} to ${o}`))}}else if("task"===a){var d;const t=null===(d=S.tasks)||void 0===d?void 0:d.find(e=>String(e.id)===i);if(t){const a=t.title||"Untitled Task";a!==e.data.label&&(s=a,n=!0)}}else if("literature"===a){var c;const t=null===(c=S.literature)||void 0===c?void 0:c.find(e=>String(e.id)===i);if(t){const a=t.title||"Untitled Literature";a!==e.data.label&&(s=a,n=!0)}}if(n){t=!0;const i=Date.now();return{id:e.id,type:e.type,position:{...e.position},data:{...e.data,label:s,color:r,lastUpdated:i},style:"topic"===a?{backgroundColor:r,color:"white",boxShadow:`0 4px 20px ${r}20`,transition:"all 0.7s cubic-bezier(0.34, 1.56, 0.64, 1), transform 0.3s ease",zIndex:i%1e3}:e.style,key:`${e.id}-${i}`}}return e});return t?(console.log("syncNodeData: Changes detected, updating nodes with forced re-render"),[...a]):(console.log("syncNodeData: No changes needed"),e)})},[S,g]);(0,i.useEffect)(()=>{var e,t,a,i;if(S&&((null===(e=S.cases)||void 0===e?void 0:e.length)>0||(null===(t=S.topics)||void 0===t?void 0:t.length)>0||(null===(a=S.tasks)||void 0===a?void 0:a.length)>0||(null===(i=S.literature)||void 0===i?void 0:i.length)>0)){const e=setTimeout(()=>{console.log("useEffect triggered syncNodeData due to mindMapData change"),Je()},50);return 0===x.length&&(console.log("Converting data to React Flow nodes due to data change"),setTimeout(()=>{Ke(S,!1)},100)),()=>clearTimeout(e)}},[S,Je,x.length]),(0,i.useEffect)(()=>{N>0&&(console.log("Force update triggered by nodeUpdateTrigger:",N),setTimeout(()=>{Je()},100))},[N,Je]);const Ke=(0,i.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=[...e.topics.map(e=>({...e,type:"topic"})),...e.cases.map(e=>({...e,type:"case"})),...e.tasks.map(e=>({...e,type:"task"})),...e.literature.map(e=>({...e,type:"literature"}))];let i;const s=a.some(e=>e.position&&"number"===typeof e.position.x&&"number"===typeof e.position.y);if(a.length>0&&t&&!s)try{const{forceSimulation:t,forceManyBody:s,forceLink:r,forceCenter:n,forceCollide:o}=await ve(),l=a.map((e,t)=>{var a,i;return{id:`${e.type}-${e.id}`,x:(null===(a=e.position)||void 0===a?void 0:a.x)||200*(Math.random()-.5),y:(null===(i=e.position)||void 0===i?void 0:i.y)||200*(Math.random()-.5),type:e.type}}),d=(e.connections||[]).map(e=>({source:e.source,target:e.target,id:e.id})).filter(e=>{const t=new Set(l.map(e=>e.id));return t.has(e.source)&&t.has(e.target)}),c=t(l).force("link",r(d).id(e=>e.id).distance(200).strength(.5)).force("charge",s().strength(-800).distanceMax(400)).force("center",n(window.innerWidth/3,window.innerHeight/2)).force("collision",o().radius(80)).stop();for(let e=0;e<300;e++)c.tick();const u=new Map;l.forEach(e=>{u.set(e.id,{x:e.x,y:e.y})}),i=a.map(e=>{const t=`${e.type}-${e.id}`,a=u.get(t)||{x:0,y:0};return{...e,position:a}})}catch(o){console.warn("Failed to apply initial layout, using fallback positioning:",o),i=a}else i=a;const r=(i||a).map((e,t)=>{const i=`${e.type}-${e.id}`,s="case"===e.type?{...e,chiefComplaint:e.chiefComplaint||e.chief_complaint||"",initialPresentation:e.initialPresentation||e.initial_presentation||"",currentPresentation:e.currentPresentation||e.current_presentation||"",medicationHistory:e.medicationHistory||e.medication_history||"",therapyProgress:e.therapyProgress||e.therapy_progress||"",defensePatterns:e.defensePatterns||e.defense_patterns||"",clinicalReflection:e.clinicalReflection||e.clinical_reflection||""}:e;let r;if(e.position&&"number"===typeof e.position.x&&"number"===typeof e.position.y)r=e.position;else{const e=Math.ceil(Math.sqrt(a.length)),i=250,s=150;r={x:t%e*i+300,y:Math.floor(t/e)*i+s}}return{id:i,type:e.type,position:r,data:{...s,label:e.title||e.label||`Untitled ${e.type}`,color:e.color||"#3B82F6",onDelete:()=>We(i),onLiteratureClick:"literature"===e.type?qe:void 0,skipAnimation:K},style:"topic"===e.type?{backgroundColor:e.color||"#3B82F6"}:void 0}}),n=((e,t)=>{const a=new Set(t);return e.filter(e=>a.has(e.source)&&a.has(e.target)).map(e=>({id:e.id,source:e.source,target:e.target,label:e.label,type:"floating",style:{strokeWidth:2,stroke:"#64748b",opacity:.85},animated:!1,updatable:!0}))})(e.connections||[],r.map(e=>e.id));g(r),y(n)},[g,y,We,qe,K]),Ze=(0,i.useCallback)(async e=>{const t={topics:JSON.parse(JSON.stringify(e.topics||[])),cases:JSON.parse(JSON.stringify(e.cases||[])),tasks:JSON.parse(JSON.stringify(e.tasks||[])),literature:JSON.parse(JSON.stringify(e.literature||[])),connections:JSON.parse(JSON.stringify(e.connections||[]))};try{const e=(new Date).toISOString();t.topics=t.topics.map((t,a)=>{var i,s;return{id:String(t.id||`${Date.now()}-${a}-topic`),title:t.title||"Untitled Topic",description:t.description||"",category:t.category||"Uncategorized",color:t.color||"#3B82F6",position:{x:Number(null===(i=t.position)||void 0===i?void 0:i.x)||0,y:Number(null===(s=t.position)||void 0===s?void 0:s.y)||0},flashcard_count:Number(t.flashcard_count)||0,completed_flashcards:Number(t.completed_flashcards)||0,resources:Array.isArray(t.resources)?t.resources:[],created_at:t.created_at||e,updated_at:e}}),t.cases=t.cases.map((t,a)=>{var i,s;return{id:String(t.id||`${Date.now()}-${a}-case`),case_id:t.case_id||`CASE-${Date.now()}-${a}`,encounter_date:t.encounter_date||e,primary_diagnosis:t.primary_diagnosis||"Unspecified",secondary_diagnoses:Array.isArray(t.secondary_diagnoses)?t.secondary_diagnoses:[],age:void 0!==t.age?Number(t.age):null,gender:t.gender||null,chief_complaint:t.chiefComplaint||t.chief_complaint||"",initial_presentation:t.initialPresentation||t.initial_presentation||"",current_presentation:t.currentPresentation||t.current_presentation||"",medication_history:t.medicationHistory||t.medication_history||"",therapy_progress:t.therapyProgress||t.therapy_progress||"",defense_patterns:t.defensePatterns||t.defense_patterns||"",clinical_reflection:t.clinicalReflection||t.clinical_reflection||"",history_present_illness:t.history_present_illness||null,medical_history:t.medical_history||null,medications:Array.isArray(t.medications)?t.medications:[],mental_status_exam:t.mental_status_exam||null,assessment_plan:t.assessment_plan||null,notes:t.notes||null,status:t.status||"active",linked_topics:Array.isArray(t.linked_topics)?t.linked_topics:[],position:{x:Number(null===(i=t.position)||void 0===i?void 0:i.x)||0,y:Number(null===(s=t.position)||void 0===s?void 0:s.y)||0},created_at:t.created_at||e,updated_at:e}}),t.tasks=t.tasks.map((t,a)=>{var i,s;return{id:String(t.id||`${Date.now()}-${a}-task`),title:t.title||"Untitled Task",description:t.description||null,status:t.status||"pending",priority:t.priority||"medium",due_date:t.due_date||null,linked_case_id:t.linked_case_id||null,linked_topic_id:t.linked_topic_id||null,position:{x:Number(null===(i=t.position)||void 0===i?void 0:i.x)||0,y:Number(null===(s=t.position)||void 0===s?void 0:s.y)||0},created_at:t.created_at||e,updated_at:e}}),t.literature=t.literature.map((t,a)=>{var i,s;return{id:String(t.id||`${Date.now()}-${a}-lit`),title:t.title||"Untitled Literature",authors:t.authors||null,publication:t.publication||null,year:void 0!==t.year?Number(t.year):null,doi:t.doi||null,abstract:t.abstract||null,notes:t.notes||null,pdf_path:t.pdf_path||null,linked_topics:Array.isArray(t.linked_topics)?t.linked_topics:[],position:{x:Number(null===(i=t.position)||void 0===i?void 0:i.x)||0,y:Number(null===(s=t.position)||void 0===s?void 0:s.y)||0},created_at:t.created_at||e,updated_at:e}}),t.connections=t.connections.map((e,t)=>({id:String(e.id||`${Date.now()}-${t}-conn`),source:e.source||"",target:e.target||"",label:e.label||""})),t.connections=t.connections.filter(e=>e.source&&e.target&&"string"===typeof e.source&&"string"===typeof e.target&&e.source.length>0&&e.target.length>0),console.log("Sending cleaned data to backend:",t);const a=await r.A.put(`${ye}/mindmap-data`,t,{headers:{"Content-Type":"application/json"}});console.log("Backend save successful:",a.data)}catch(o){var a,i,s,n;console.error("Failed to save to backend:",(null===(a=o.response)||void 0===a?void 0:a.data)||o.message),422===(null===(i=o.response)||void 0===i?void 0:i.status)&&null!==(s=o.response)&&void 0!==s&&null!==(n=s.data)&&void 0!==n&&n.detail&&(console.error("Validation errors:"),console.error(JSON.stringify(o.response.data.detail,null,2)),console.error("Request data that caused validation error:"),console.error(JSON.stringify(t,null,2)))}},[]),Qe=(0,i.useCallback)(e=>{const t=`conn-${Date.now()}`,a={...e,id:t,type:"floating",style:{strokeWidth:2,stroke:"#64748b",opacity:.85,transition:"none"},data:{__forceUpdate:Date.now()},interactionWidth:20};y(e=>(0,j.rN)(a,e)),_(t=>{const i=[...t.connections,{id:a.id,source:e.source,target:e.target,label:""}],s={...t,connections:i};return Ve(s),s})},[y,_,Ve]),et=(0,i.useCallback)((e,t)=>{R(t),g(e=>e.map(e=>({...e,selected:e.id===t.id})))},[g]),tt=(0,i.useCallback)((e,t)=>{const a=t.id.split("-"),i=a[0],s=a.slice(1).join("-");if(("case"!==i||!oe.isOpen)&&("topic"!==i||!de.isOpen)&&("task"!==i||!ue.isOpen)&&("literature"!==i||!He.isOpen)){if("literature"===i){const e=S.literature.find(e=>String(e.id)===s);return void(e&&Re({isOpen:!0,data:e}))}if("case"===i){const e=S.cases.find(e=>String(e.id)===s);return void(e&&(Ye(e=>({...e,case:!0})),le({isOpen:!0,data:e}),setTimeout(()=>{Ye(e=>({...e,case:!1}))},800)))}if("topic"===i){const e=S.topics.find(e=>String(e.id)===s);return void(e&&(Ye(e=>({...e,topic:!0})),ce({isOpen:!0,data:e}),setTimeout(()=>{Ye(e=>({...e,topic:!1}))},800)))}if("task"===i){const e=S.tasks.find(e=>String(e.id)===s);return void(e&&(Ye(e=>({...e,task:!0})),pe({isOpen:!0,data:e}),setTimeout(()=>{Ye(e=>({...e,task:!1}))},800)))}}},[S,oe.isOpen,de.isOpen,ue.isOpen,He.isOpen]),at=(0,i.useCallback)((e,t)=>{y(e=>e.filter(e=>e.id!==t.id)),_(e=>{const a=e.connections.filter(e=>e.id!==t.id),i={...e,connections:a};return Ve(i),Ue("Connection deleted","success"),i})},[y,_,Ve,Ue]),it=(0,i.useCallback)((e,t)=>{e.preventDefault(),Ie({isOpen:!0,edge:t})},[]),st=(0,i.useCallback)((e,t)=>{y(a=>a.map(a=>a.id===e?{...a,label:t}:a)),_(a=>{const i=a.connections.map(a=>a.id===e?{...a,label:t}:a),s={...a,connections:i};return Ve(s),s})},[y,_,Ve]),rt=(0,i.useCallback)((e,t)=>{y(e=>e.map(e=>e.id===t.id?{...e,className:"highlighted"}:e))},[y]),nt=(0,i.useCallback)((e,t)=>{y(e=>e.map(e=>e.id===t.id?{...e,className:""}:e))},[y]),ot=(0,i.useCallback)(async()=>{if(0!==x.length)try{const{forceSimulation:e,forceManyBody:t,forceLink:a,forceCenter:i,forceCollide:s}=await ve(),r=[...v],n=new Set(x.map(e=>e.id)),o=r.filter(e=>n.has(e.source)&&n.has(e.target)),l=o.map(e=>({source:e.source,target:e.target,id:e.id})),d=x.map(e=>({id:e.id,x:e.position.x,y:e.position.y,fx:null,fy:null})),u=e(d).force("link",a(l).id(e=>e.id).distance(200).strength(.5)).force("charge",t().strength(-800).distanceMax(400)).force("center",i(window.innerWidth/3,window.innerHeight/2)).force("collision",s().radius(80)).stop(),p=50,m=400;let h=0;const b=()=>{const e=Math.min(p,m-h);for(let t=0;t<e;t++)u.tick();if(h+=e,h<m)requestAnimationFrame(b);else{const e=d.map(e=>({...x.find(t=>t.id===e.id),position:{x:e.x,y:e.y}}));g(e),y(o),_(t=>{const a={...t};return e.forEach(e=>{var t;const[i,s]=e.id.split("-"),r=null===(t=a["literature"===i?"literature":`${i}s`])||void 0===t?void 0:t.find(e=>String(e.id)===s);r&&(r.position=e.position)}),a}),setTimeout(()=>{c({duration:800,padding:.2})},200)}};requestAnimationFrame(b)}catch(e){console.error("Force layout failed:",e),Ue("Layout calculation failed","error")}},[x,v,g,y,_,c,Ue]),lt=(0,i.useCallback)(()=>{try{ot(),Ue("Nodes realigned successfully","success")}catch(e){console.error("Force layout error:",e),Ue("Failed to realign nodes","error")}},[ot,Ue]),dt=(0,i.useCallback)(()=>{if(!window.confirm("Are you sure you want to clear the entire mind map?"))return;const e={topics:[],cases:[],tasks:[],literature:[],connections:[]};_(e),g([]),y([]),R(null),le({isOpen:!1,data:null}),ce({isOpen:!1,data:null}),pe({isOpen:!1,data:null}),Re({isOpen:!1,data:null}),se(null),Ve(e),Ue("Mind map cleared successfully","success")},[g,y,Ve,Ue]),ct=(0,i.useCallback)(e=>{var t,a,i,s;const r=Date.now(),n=`${e}-${r}`;let o={id:r,label:`New ${e}`};"case"===e&&(o={...o,chiefComplaint:"",initialPresentation:"",currentPresentation:"",medicationHistory:"",therapyProgress:"",defensePatterns:"",clinicalReflection:""});const l=((null===(t=S.topics)||void 0===t?void 0:t.length)||0)+((null===(a=S.cases)||void 0===a?void 0:a.length)||0)+((null===(i=S.tasks)||void 0===i?void 0:i.length)||0)+((null===(s=S.literature)||void 0===s?void 0:s.length)||0),d=Math.ceil(Math.sqrt(l+1)),c={x:l%d*280+400,y:280*Math.floor(l/d)+150},u={id:n,type:e,position:c,data:{...o,onDelete:()=>We(n)}};_(t=>{const a="literature"===e?"literature":`${e}s`,i={...u.data,position:u.position};delete i.onDelete;const s={...t,[a]:[...t[a]||[],i]};return Ve(s),s}),g(e=>e.concat(u)),Ue(`${e.charAt(0).toUpperCase()+e.slice(1)} added successfully`,"success")},[S,We,_,Ve,g,Ue]),ut=(0,i.useCallback)(e=>{if(b(e),Xe)return void console.log("Skipping position updates during animation");const t=e.filter(e=>"position"===e.type&&e.position);t.length>0&&(console.log("Processing position changes:",t),_(e=>{const a={...e};return t.forEach(e=>{if(e.position){var t;const[i,s]=e.id.split("-"),r=null===(t=a["literature"===i?"literature":`${i}s`])||void 0===t?void 0:t.find(e=>String(e.id)===s);r&&(r.position={...e.position},console.log(`Updated ${i} ${s} position to:`,e.position))}}),ke.save(a,null,null,!1),a}),setTimeout(()=>{Ve(S)},500))},[b,_,Xe,Ve,S]),pt=(0,i.useCallback)((e,t)=>{clearTimeout(window.dragSaveTimeout),window.dragSaveTimeout=setTimeout(()=>{_(e=>(Ve(e),e))},500)},[Ve]),mt=(0,i.useCallback)(async()=>{F(!0),Y(10),J("Checking local data...");try{const t=ke.load();if(t)return Y(30),J("Loading from cache..."),t.connections||(t.connections=[]),_(t),Y(60),J("Applying layout..."),await Ke(t,!0),Y(90),J("Finalizing..."),F(!1),Q(!1),Y(100),void setTimeout(async()=>{try{const e=await r.A.get(`${ye}/mindmap-data`);JSON.stringify(e.data)!==JSON.stringify(t)&&(e.data.connections||(e.data.connections=[]),_(e.data),await Ke(e.data),Ve(e.data),Ue("Data synchronized with server","info"))}catch(e){console.warn("Background sync failed:",e)}},500);Y(20),J("Loading from server...");try{const e=await r.A.get(`${ye}/mindmap-data`);e.data.connections||(e.data.connections=[]),Y(50),J("Processing data..."),_(e.data),Y(80),J("Applying layout..."),await Ke(e.data,!0),Ve(e.data),Y(100),F(!1),Q(!1)}catch(e){console.warn("Backend loading failed, populating with sample data:",e),Y(60),J("Loading sample data...");_({topics:[],cases:[],tasks:[],literature:[],connections:[]}),setTimeout(()=>{be(_,Ve,Ue)},100),Y(100),F(!1),Q(!1)}}catch(t){console.error("Error loading mind map:",t),Ue("Failed to load mind map","error"),F(!1),Q(!1)}},[Ue,Ve,Ke]);(0,i.useEffect)(()=>{mt()},[]);const ht=(0,i.useCallback)((e,t)=>{if(!e||!e.id||!e.data)return!1;if(!t)return!0;const a=t.toLowerCase().trim();if(!a)return!0;try{const t=e.id.split("-"),i=t.length>0?t[0]:"",s=t.length>1?t[1]:"";let r=!1;if(!r&&e.data.label){r=e.data.label.toLowerCase().includes(a)}if(!r&&i&&(r=i.includes(a)),!r&&"case"===i&&s&&(r=`case-${s}`.toLowerCase().includes(a)),!r)if("case"===i){r=(e.data.primary_diagnosis||e.data.primaryDiagnosis||"").toLowerCase().includes(a)}else if("topic"===i){r=(e.data.title||"").toLowerCase().includes(a)}else if("literature"===i){const t=(e.data.title||"").toLowerCase(),i=(e.data.authors||"").toLowerCase();r=t.includes(a)||i.includes(a)}if(!r&&e.data.category){r=e.data.category.toLowerCase().includes(a)}return r}catch(i){return console.error("Error in nodeMatchesSearch for node:",e.id,i),!1}},[]);if((0,i.useEffect)(()=>{const e=e=>{var t;if("INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName){if(e.ctrlKey||e.metaKey)switch(e.key){case"n":e.preventDefault(),ne(!0);break;case"e":e.preventDefault(),L(!T);break;case"r":e.preventDefault(),lt();break;case"f":e.preventDefault(),null===(t=document.querySelector('input[type="text"][placeholder*="Search"]'))||void 0===t||t.focus()}"Escape"===e.key&&(R(null),le({isOpen:!1,data:null}),ce({isOpen:!1,data:null}),pe({isOpen:!1,data:null}),Re({isOpen:!1,data:null}),ne(!1),!oe.isOpen&&!de.isOpen&&!ue.isOpen&&He.isOpen)}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[lt,oe,de,ue,He]),(0,i.useEffect)(()=>{(fe&&!Se&&x.length>0||K&&x.length>0)&&Ae(!0)},[fe,Se,x,K]),(0,i.useEffect)(()=>{if(0===x.length)return;Object.values(Be).some(e=>e)},[ae,x,ht,Xe,Be]),(0,i.useEffect)(()=>{if(!fe)return;const e=document.getElementById("search-filter-styles")||document.createElement("style");e.id="search-filter-styles",document.getElementById("search-filter-styles")||document.head.appendChild(e);e.textContent="\n      /* Default node styling */\n      .react-flow__node {\n        transition: opacity 0.3s ease, transform 0.3s ease, filter 0.3s ease !important;\n      }\n      \n      /* Search dimmed nodes */\n      .react-flow__node.search-dimmed {\n        opacity: 0.15 !important;\n        filter: grayscale(0.7) !important;\n        transform: scale(0.9) !important;\n      }\n      \n      /* Selected node highlighting */\n      .react-flow__node.search-selected {\n        box-shadow: 0 0 0 2px #10b981, 0 0 20px rgba(16, 185, 129, 0.6) !important;\n        z-index: 1000 !important;\n      }\n      \n      /* Ensure dragging still works */\n      .react-flow__node.search-dimmed {\n        pointer-events: auto !important;\n      }\n    "},[fe]),X)return(0,d.jsx)(ie,{message:U,progress:B});return(0,d.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,d.jsxs)("div",{className:"w-80 bg-gradient-to-b from-slate-800 to-slate-900 text-white p-6 shadow-2xl flex flex-col",children:[(0,d.jsxs)("div",{className:"mb-8",children:[(0,d.jsx)("div",{className:"text-3xl font-bold tracking-wide text-white",children:"PGY-3 HQ"}),(0,d.jsx)("div",{className:"text-sm text-slate-300 mt-2",children:"Psychiatry Resident Dashboard"})]}),(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsx)("h3",{className:"text-sm font-semibold text-slate-300 mb-3",children:"Filter by Category"}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,d.jsx)("button",{onClick:()=>se(null),className:"px-3 py-2 rounded-lg text-xs transition-all "+(null===ae?"bg-teal-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"),children:"All"}),(0,d.jsxs)("button",{onClick:()=>se("topic"),className:"px-3 py-2 rounded-lg text-xs transition-all flex items-center gap-1 "+("topic"===ae?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"),children:[(0,d.jsx)(D.A,{size:12}),"Topics"]}),(0,d.jsxs)("button",{onClick:()=>se("case"),className:"px-3 py-2 rounded-lg text-xs transition-all flex items-center gap-1 "+("case"===ae?"bg-indigo-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"),children:[(0,d.jsx)(m.A,{size:12}),"Cases"]}),(0,d.jsxs)("button",{onClick:()=>se("task"),className:"px-3 py-2 rounded-lg text-xs transition-all flex items-center gap-1 "+("task"===ae?"bg-amber-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"),children:[(0,d.jsx)(P.A,{size:12}),"Tasks"]}),(0,d.jsxs)("button",{onClick:()=>se("literature"),className:"px-3 py-2 rounded-lg text-xs transition-all flex items-center gap-1 "+("literature"===ae?"bg-purple-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"),children:[(0,d.jsx)(z.A,{size:12}),"Literature"]})]})]}),(0,d.jsx)("div",{className:"mb-4 p-3 bg-slate-700 bg-opacity-50 rounded-lg",children:(0,d.jsx)("div",{className:"flex items-center gap-2 text-xs",children:Oe?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(A.A,{size:12,className:"animate-spin"}),(0,d.jsx)("span",{className:"text-amber-300",children:"Saving..."})]}):Pe?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(O.A,{size:12,className:"text-green-400"}),(0,d.jsxs)("span",{className:"text-slate-300",children:["Last saved: ",Pe.toLocaleTimeString()]})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)($.A,{size:12,className:"text-slate-400"}),(0,d.jsx)("span",{className:"text-slate-400",children:"Auto-save enabled"})]})})}),(0,d.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,d.jsx)(je,{onClick:lt,icon:E.A,className:"w-full bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md text-sm",children:"Realign Nodes"}),(0,d.jsx)(je,{onClick:()=>be(_,Ve,Ue),icon:z.A,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-md text-sm",children:"Add Sample Literature"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("div",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wide mb-2",children:"Add Nodes"}),(0,d.jsxs)(je,{onClick:()=>ct("topic"),icon:D.A,className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm flex items-center gap-2",children:[(0,d.jsx)(D.A,{size:16}),"Add Topic"]}),(0,d.jsxs)(je,{onClick:()=>ct("case"),icon:m.A,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md text-sm flex items-center gap-2",children:[(0,d.jsx)(m.A,{size:16}),"Add Case"]}),(0,d.jsxs)(je,{onClick:()=>ct("task"),icon:P.A,className:"w-full bg-amber-600 hover:bg-amber-700 text-white px-4 py-2 rounded-md text-sm flex items-center gap-2",children:[(0,d.jsx)(P.A,{size:16}),"Add Task"]}),(0,d.jsxs)(je,{onClick:()=>ct("literature"),icon:z.A,className:"w-full bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md text-sm flex items-center gap-2",children:[(0,d.jsx)(z.A,{size:16}),"Add Literature"]})]}),(0,d.jsx)(je,{onClick:dt,icon:I.A,className:"w-full bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md text-sm",children:"Clear All Data"})]}),H&&(0,d.jsxs)("div",{className:"mt-auto p-4 bg-slate-700 bg-opacity-50 rounded-lg",children:[(0,d.jsx)("h3",{className:"text-sm font-semibold text-slate-300 mb-2",children:"Selected Node"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:["topic"===H.type&&(0,d.jsx)(D.A,{size:14,className:"text-blue-400"}),"case"===H.type&&(0,d.jsx)(m.A,{size:14,className:"text-indigo-400"}),"task"===H.type&&(0,d.jsx)(P.A,{size:14,className:"text-amber-400"}),"literature"===H.type&&(0,d.jsx)(z.A,{size:14,className:"text-purple-400"}),(0,d.jsx)("span",{className:"text-sm text-white font-medium truncate",children:H.data.label})]}),H.data.category&&(0,d.jsxs)("div",{className:"text-xs text-slate-400",children:["Category: ",H.data.category]}),H.data.status&&(0,d.jsxs)("div",{className:"text-xs text-slate-400",children:["Status: ",H.data.status]}),(0,d.jsxs)("button",{onClick:()=>{const[e,t]=H.id.split("-"),a=S["literature"===e?"literature":`${e}s`].find(e=>String(e.id)===t);a&&("case"===e?le({isOpen:!0,data:a}):"topic"===e?ce({isOpen:!0,data:a}):"task"===e?pe({isOpen:!0,data:a}):"literature"===e&&qe(a))},className:"w-full mt-2 px-3 py-2 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded-lg transition-colors flex items-center gap-2",children:[(0,d.jsx)(M.A,{size:12}),"View Details"]})]})]}),!H&&(0,d.jsxs)("div",{className:"mt-auto p-3 bg-slate-700 bg-opacity-30 rounded-lg",children:[(0,d.jsx)("h4",{className:"text-xs font-semibold text-slate-300 mb-2",children:"Keyboard Shortcuts"}),(0,d.jsxs)("div",{className:"space-y-1 text-xs text-slate-400",children:[(0,d.jsx)("div",{children:"Ctrl+N - Add Node"}),(0,d.jsx)("div",{children:"Ctrl+E - Toggle Edit Mode"}),(0,d.jsx)("div",{children:"Ctrl+R - Realign Nodes"}),(0,d.jsx)("div",{children:"Esc - Clear Selection"})]})]})]}),(0,d.jsx)("div",{className:"flex-1 relative",children:(0,d.jsx)(_e,{children:(0,d.jsxs)(w.Gc,{nodes:x,edges:v,onNodesChange:ut,onEdgesChange:f,onConnect:Qe,onNodeClick:et,onNodeDoubleClick:tt,onNodeDragStop:pt,onEdgeDoubleClick:at,onEdgeContextMenu:it,onEdgeMouseEnter:rt,onEdgeMouseLeave:nt,nodeTypes:he,edgeTypes:{floating:Z,enhanced:ee},connectionLineComponent:te,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,onInit:e=>{Ne(!0),window.reactFlowInstance=e},onError:(e,t)=>{console.warn("React Flow Error:",e,t),!Xe||t.includes("dimensions")},fitView:!0,snapToGrid:!1,snapGrid:[15,15],elevateEdgesOnSelect:!1,connectionLineStyle:{stroke:"#3b82f6",strokeWidth:3.5,opacity:.9,strokeLinecap:"round",strokeDasharray:"5,3",filter:"drop-shadow(0 0 6px rgba(59, 130, 246, 0.6))",animation:"flowingDash 1s linear infinite"},defaultEdgeOptions:{type:"floating",style:{strokeWidth:2.5,stroke:"#64748b",opacity:.9,strokeLinecap:"round",transition:"none"}},className:"bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,d.jsx)(k,{variant:"radial",color:"#e2e8f0",showRadialLines:!0,showConcentricCircles:!0}),(0,d.jsx)(w.H2,{}),(0,d.jsx)(w.of,{})]})})}),He.isOpen&&(0,d.jsx)(G,{isOpen:He.isOpen,onClose:()=>{Fe(!0),Re({isOpen:!1,data:null}),setTimeout(()=>Fe(!1),500)},onAnimationStart:()=>Fe(!0),onAnimationEnd:()=>Fe(!1),literatureData:He.data,allNodes:x,connections:S.connections||[],setMindMapData:_,autoSaveMindMapData:Ve,addToast:Ue}),(0,d.jsx)(n.N,{mode:"wait",children:oe.isOpen&&(0,d.jsx)(V.default,{isOpen:oe.isOpen,data:me.current||oe.data,onClose:()=>{Ye(e=>({...e,case:!0})),le({isOpen:!1,data:null})},onAnimationStart:()=>{Fe(!0),Ye(e=>({...e,case:!0}))},onAnimationEnd:()=>{Fe(!1),Ye(e=>({...e,case:!1}))},setMindMapData:_,autoSaveMindMapData:Ve,addToast:Ue},`case-modal-${(null===(s=oe.data)||void 0===s?void 0:s.id)||"default"}`)}),(0,d.jsx)(n.N,{mode:"wait",children:de.isOpen&&(0,d.jsx)(W.default,{isOpen:de.isOpen,data:xe.current||de.data,onClose:()=>{Ye(e=>({...e,topic:!0})),ce({isOpen:!1,data:null})},onAnimationStart:()=>{Fe(!0),Ye(e=>({...e,topic:!0}))},onAnimationEnd:()=>{Fe(!1),Ye(e=>({...e,topic:!1}))},setMindMapData:_,autoSaveMindMapData:Ve,addToast:Ue,syncNodeData:Je,forceNodeUpdate:()=>C(e=>e+1)},`topic-modal-${(null===(o=de.data)||void 0===o?void 0:o.id)||"default"}`)}),(0,d.jsx)(n.N,{mode:"wait",children:ue.isOpen&&(0,d.jsx)(q.default,{isOpen:ue.isOpen,data:ge.current||ue.data,onClose:()=>{Ye(e=>({...e,task:!0})),pe({isOpen:!1,data:null})},onAnimationStart:()=>{Fe(!0),Ye(e=>({...e,task:!0}))},onAnimationEnd:()=>{Fe(!1),Ye(e=>({...e,task:!1}))},setMindMapData:_,autoSaveMindMapData:Ve,addToast:Ue},`task-modal-${(null===(l=ue.data)||void 0===l?void 0:l.id)||"default"}`)}),(0,d.jsx)(Ce,{isOpen:Ee.isOpen,edge:Ee.edge,onClose:()=>Ie({isOpen:!1,edge:null}),onSave:st}),X&&(0,d.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-80 flex items-center justify-center z-50",children:(0,d.jsx)(A.A,{size:48,className:"animate-spin text-blue-600"})}),Me.map(e=>(0,d.jsx)(we,{message:e.message,type:e.type,duration:e.duration,onClose:()=>Ge(e.id)},e.id))]})};class _e extends i.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return e.message&&e.message.includes("dimensions")?(console.warn("React Flow dimension error caught, recovering..."),{hasError:!1}):{hasError:!0}}componentDidCatch(e,t){e.message&&e.message.includes("dimensions")?setTimeout(()=>{window.reactFlowInstance&&window.reactFlowInstance.fitView()},100):console.error("React Flow Error:",e,t)}render(){return this.state.hasError?(0,d.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Mind Map Temporarily Unavailable"}),(0,d.jsx)("p",{className:"text-gray-600 mb-4",children:"There was an issue with the mind map. Please refresh the page."}),(0,d.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Refresh Page"})]})}):this.props.children}}const Ae=()=>(0,d.jsx)(w.Ln,{children:(0,d.jsx)(Se,{})});const Te=function(){return"true"===new URLSearchParams(window.location.search).get("timeline-test")?(0,d.jsx)(f,{}):(0,d.jsx)(Ae,{})};s.createRoot(document.getElementById("root")).render((0,d.jsx)(i.StrictMode,{children:(0,d.jsx)(Te,{})}))},8531:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var i=a(5043),s=a(3546),r=a(6446),n=a(2024),o=a(4596),l=a(9917),d=a(7719),c=a(8646),u=a(5088),p=a(1680),m=a(1482),h=a(8487),x=a(9340),g=a(4830),b=a(8693),v=a(3165),y=a(9855),f=a(4919),w=a(614),j=a(579);const N={hidden:{opacity:0,scale:.3,y:50,rotate:-5},visible:{opacity:1,scale:1,y:0,rotate:0,transition:{type:"spring",damping:25,stiffness:300,duration:.6}},exit:{opacity:0,scale:.7,y:30,rotate:-3,transition:{type:"easeInOut",duration:.4}}},k={hidden:{opacity:0,backdropFilter:"blur(0px)"},visible:{opacity:1,backdropFilter:"blur(8px)",transition:{duration:.4,ease:"easeOut"}},exit:{opacity:0,backdropFilter:"blur(0px)",transition:{duration:.3,ease:"easeIn"}}},C={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"easeOut",duration:.3,delay:.1}},exit:{opacity:0,y:-10,scale:1.02,transition:{type:"easeIn",duration:.2}}},S=e=>{var t;let{isOpen:a,data:S,onClose:_,onAnimationStart:A,onAnimationEnd:T,setMindMapData:D,autoSaveMindMapData:P,addToast:z}=e;const[O,$]=(0,i.useState)(!1),[E,I]=(0,i.useState)(!1),[M,L]=(0,i.useState)(!1),[H,R]=(0,i.useState)(!1),[X,F]=(0,i.useState)({}),[B,Y]=(0,i.useState)(!1),[U,G]=(0,i.useState)(!1),[V,W]=(0,i.useState)("overview"),[q,J]=(0,i.useState)(!1);(0,i.useEffect)(()=>{a&&S&&!U?(I(!0),F({...S,status:S.status||"pending",priority:S.priority||"medium"}),G(!0),$(!0),A&&A(),setTimeout(()=>{$(!1),T&&T()},600)):!a&&U&&G(!1)},[a,U,A,T]),(0,i.useEffect)(()=>{!(a&&S&&U)||H||B||q||O||F({...S,status:S.status||"pending",priority:S.priority||"medium"})},[null===S||void 0===S?void 0:S.id,a,U,H,B,q,O]);const K=(0,i.useMemo)(()=>({low:{color:"green",label:"Low Priority",icon:m.A},medium:{color:"yellow",label:"Medium Priority",icon:m.A},high:{color:"red",label:"High Priority",icon:m.A},urgent:{color:"purple",label:"Urgent",icon:d.A}}),[]),Z=(0,i.useMemo)(()=>({pending:{color:"gray",label:"Pending",icon:u.A},in_progress:{color:"blue",label:"In Progress",icon:g.A},completed:{color:"green",label:"Completed",icon:l.A},paused:{color:"orange",label:"Paused",icon:x.A}}),[]),Q=(0,i.useMemo)(()=>{if(!X.due_date)return!1;return new Date(X.due_date)<new Date&&"completed"!==X.status},[X.due_date,X.status]),ee=(0,i.useCallback)(()=>{O||M||($(!0),L(!0),A&&A(),I(!1))},[A,O,M]),te=(0,i.useCallback)(async()=>{if(!B){Y(!0);try{D(e=>{const t=e.tasks.map(e=>String(e.id)===String(null===S||void 0===S?void 0:S.id)?{...e,...X}:e),a={...e,tasks:t};return P(a),a}),R(!1),z("Task updated successfully","success")}catch(e){console.error("Error saving task:",e),z("Failed to save task","error")}finally{Y(!1)}}},[null===S||void 0===S?void 0:S.id,X,D,P,z,B]),ae=(0,i.useCallback)(async()=>{if(!B&&window.confirm("Are you sure you want to delete this task?")){Y(!0);try{D(e=>{const t=e.tasks.filter(e=>String(e.id)!==String(null===S||void 0===S?void 0:S.id)),a={...e,tasks:t};return P(a),a}),z("Task deleted successfully","success"),ee()}catch(e){console.error("Error deleting task:",e),z("Failed to delete task","error")}finally{Y(!1)}}},[null===S||void 0===S?void 0:S.id,D,P,z,ee,B]),ie=(0,i.useCallback)(e=>{F(t=>({...t,status:e}))},[]),se=(0,i.useCallback)((e,t)=>{F(a=>({...a,[e]:t}))},[]),re=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=X[t]||"";return H?"textarea"===a?(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,j.jsx)("textarea",{value:s,onChange:e=>se(t,e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",rows:i.rows||3,placeholder:`Enter ${e.toLowerCase()}...`})]}):"select"===a&&i.choices?(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,j.jsxs)("select",{value:s,onChange:e=>se(t,e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",children:[(0,j.jsxs)("option",{value:"",children:["Select ",e.toLowerCase(),"..."]}),i.choices.map(e=>(0,j.jsx)("option",{value:e.value,children:e.label},e.value))]})]}):"date"===a?(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,j.jsx)("input",{type:"date",value:s,onChange:e=>se(t,e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"})]}):(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,j.jsx)("input",{type:a,value:s,onChange:e=>se(t,"number"===a?Number(e.target.value):e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:`Enter ${e.toLowerCase()}...`})]}):"textarea"===a?(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,j.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border min-h-[2.5rem] text-gray-800",children:s||(0,j.jsx)("span",{className:"text-gray-400 italic",children:"Not specified"})})]}):"select"===a?(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,j.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border text-gray-800",children:s||(0,j.jsx)("span",{className:"text-gray-400 italic",children:"Not specified"})})]}):"date"===a?(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,j.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border text-gray-800",children:s?new Date(s).toLocaleDateString():(0,j.jsx)("span",{className:"text-gray-400 italic",children:"Not set"})})]}):(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e}),(0,j.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border text-gray-800",children:s||(0,j.jsx)("span",{className:"text-gray-400 italic",children:"Not specified"})})]})};return a?(0,j.jsx)(s.N,{mode:"wait",onExitComplete:()=>{$(!1),L(!1),G(!1),_(),T&&T()},children:E&&(0,j.jsx)(r.P.div,{initial:"hidden",animate:"visible",exit:"exit",variants:k,className:"fixed inset-0 bg-black flex items-center justify-center z-50",style:{willChange:"backdrop-filter, opacity",backfaceVisibility:"hidden",transform:"translate3d(0, 0, 0)"},onClick:e=>e.target===e.currentTarget&&ee(),children:(0,j.jsxs)(r.P.div,{initial:"hidden",animate:"visible",exit:"exit",variants:N,className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full mx-4 max-h-[85vh] overflow-hidden",style:{willChange:"transform, opacity, scale",backfaceVisibility:"hidden"},onClick:e=>e.stopPropagation(),onAnimationStart:()=>{$(!0),A&&A()},onAnimationComplete:()=>{$(!1),T&&T()},children:[(0,j.jsxs)(r.P.div,{initial:"hidden",animate:"visible",exit:"exit",variants:C,className:"bg-gradient-to-br from-slate-900 to-slate-800 text-white px-6 py-4 flex items-center justify-between",children:[(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsx)(l.A,{size:24}),(0,j.jsx)("h2",{className:"text-xl font-semibold",children:"Task Details"}),Q&&(0,j.jsxs)(r.P.div,{animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},className:"flex items-center gap-1 px-2 py-1 bg-red-500 rounded-full text-xs font-medium",children:[(0,j.jsx)(d.A,{size:12}),"Overdue"]})]}),(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[!H&&!B&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("button",{onClick:()=>R(!0),className:"text-white hover:text-gray-200 p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-all",title:"Edit",children:(0,j.jsx)(o.A,{size:20})}),(0,j.jsx)("button",{onClick:ae,className:"text-white hover:text-red-200 p-2 rounded-full hover:bg-red-500 hover:bg-opacity-30 transition-all",title:"Delete",children:(0,j.jsx)(y.A,{size:20})})]}),(0,j.jsx)("button",{onClick:ee,className:"text-white hover:text-gray-200 p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-all",children:(0,j.jsx)(w.A,{size:20})})]})]}),(0,j.jsx)("div",{className:"bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 border-b border-slate-600",children:(0,j.jsx)("nav",{className:"flex flex-wrap gap-2 px-6 py-4",children:[{key:"overview",label:"Overview",icon:l.A},{key:"progress",label:"Progress",icon:f.A},{key:"connections",label:"Connections",icon:h.A},{key:"details",label:"Details",icon:p.A}].map(e=>{let{key:t,label:a,icon:i}=e;return(0,j.jsxs)(r.P.button,{onClick:()=>{q||(J(!0),W(t),setTimeout(()=>J(!1),300))},className:"relative flex items-center gap-2 px-4 py-3 rounded-xl font-medium text-sm transition-all duration-300 "+(V===t?"bg-gradient-to-r from-emerald-500 to-teal-600 text-white shadow-lg shadow-emerald-500/25":"text-slate-300 hover:text-white hover:bg-slate-700/50 hover:shadow-md"),whileHover:{scale:V===t?1:1.02},whileTap:{scale:.98},initial:!1,animate:{scale:V===t?1.05:1,boxShadow:V===t?"0 8px 25px rgba(16, 185, 129, 0.3), 0 0 20px rgba(20, 184, 166, 0.2)":"0 2px 8px rgba(0, 0, 0, 0.1)"},transition:{duration:.3,ease:"easeOut"},children:[(0,j.jsx)(i,{size:16,className:V===t?"drop-shadow-sm":""}),a,V===t&&(0,j.jsx)(r.P.div,{layoutId:"taskTabGlow",className:"absolute inset-0 bg-gradient-to-r from-emerald-400/20 to-teal-500/20 rounded-xl blur-sm",initial:!1,transition:{type:"spring",bounce:.2,duration:.6}})]},t)})})}),(0,j.jsx)(r.P.div,{className:"relative overflow-hidden bg-gradient-to-br from-slate-50 to-slate-100",layout:"position",layoutRoot:!0,transition:{layout:{duration:.4,ease:"easeInOut"},height:{duration:.4,ease:"easeInOut"}},children:(0,j.jsxs)(s.N,{mode:"wait",initial:!1,onExitComplete:()=>J(!1),children:["overview"===V&&(0,j.jsx)(r.P.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},exit:{opacity:0,x:30},transition:{duration:.4,ease:"easeOut"},layout:"position",layoutId:"tabContent",className:"p-6 overflow-y-auto max-h-[calc(85vh-200px)] scrollbar-thin scrollbar-thumb-slate-400 scrollbar-track-slate-200",children:(0,j.jsxs)("div",{className:"space-y-6",children:[(0,j.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200",children:[(0,j.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[(0,j.jsx)(v.A,{size:20,className:"text-emerald-600"}),"Task Information"]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[re("Title","title"),re("Priority","priority","select",{choices:[{value:"low",label:"Low Priority"},{value:"medium",label:"Medium Priority"},{value:"high",label:"High Priority"},{value:"urgent",label:"Urgent"}]})]}),(0,j.jsx)("div",{className:"mt-6",children:re("Description","description","textarea",{rows:4})})]}),(0,j.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200",children:[(0,j.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[(0,j.jsx)(u.A,{size:20,className:"text-blue-600"}),"Status & Timeline"]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[re("Status","status","select",{choices:[{value:"pending",label:"Pending"},{value:"in_progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"paused",label:"Paused"}]}),re("Due Date","due_date","date")]}),(0,j.jsxs)("div",{className:"mt-6",children:[(0,j.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Quick Status Update"}),(0,j.jsx)("div",{className:"flex flex-wrap gap-3",children:Object.entries(Z).map(e=>{let[t,a]=e;const i=a.icon,s=X.status===t;return(0,j.jsxs)(r.P.button,{onClick:()=>ie(t),disabled:!H,whileHover:H?{scale:1.05}:{},whileTap:H?{scale:.95}:{},className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all "+(s?`bg-${a.color}-100 text-${a.color}-800 border-2 border-${a.color}-300`:"bg-gray-100 text-gray-600 border-2 border-gray-200 "+(H?"hover:bg-gray-200":"cursor-not-allowed opacity-50")),children:[(0,j.jsx)(i,{size:16}),a.label]},t)})})]})]})]})},"overview"),"progress"===V&&(0,j.jsx)(r.P.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},exit:{opacity:0,x:30},transition:{duration:.4,ease:"easeOut"},layout:"position",layoutId:"tabContent",className:"p-6 overflow-y-auto max-h-[calc(85vh-200px)] scrollbar-thin scrollbar-thumb-slate-400 scrollbar-track-slate-200",children:(0,j.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200",children:[(0,j.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-6 flex items-center gap-2",children:[(0,j.jsx)(f.A,{size:20,className:"text-blue-600"}),"Task Progress"]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,j.jsxs)(r.P.div,{whileHover:{scale:1.02},className:"p-4 rounded-lg border-2 "+("completed"===X.status?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"),children:[(0,j.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,j.jsx)(l.A,{size:20,className:"completed"===X.status?"text-green-600":"text-gray-400"}),(0,j.jsx)("span",{className:"font-medium "+("completed"===X.status?"text-green-800":"text-gray-600"),children:"Completion"})]}),(0,j.jsx)("div",{className:"text-2xl font-bold "+("completed"===X.status?"text-green-700":"text-gray-700"),children:"completed"===X.status?"100%":"0%"})]}),(0,j.jsxs)(r.P.div,{whileHover:{scale:1.02},className:"p-4 rounded-lg border-2 "+(Q?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200"),children:[(0,j.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,j.jsx)(c.A,{size:20,className:Q?"text-red-600":"text-blue-600"}),(0,j.jsx)("span",{className:"font-medium "+(Q?"text-red-800":"text-blue-800"),children:"Due Date"})]}),(0,j.jsx)("div",{className:"text-lg font-bold "+(Q?"text-red-700":"text-blue-700"),children:X.due_date?new Date(X.due_date).toLocaleDateString():"Not set"}),Q&&(0,j.jsx)("div",{className:"text-sm text-red-600 mt-1",children:"Overdue"})]}),(0,j.jsxs)(r.P.div,{whileHover:{scale:1.02},className:"p-4 rounded-lg border-2 "+("urgent"===X.priority||"high"===X.priority?"bg-orange-50 border-orange-200":"bg-gray-50 border-gray-200"),children:[(0,j.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,j.jsx)(m.A,{size:20,className:"urgent"===X.priority||"high"===X.priority?"text-orange-600":"text-gray-600"}),(0,j.jsx)("span",{className:"font-medium "+("urgent"===X.priority||"high"===X.priority?"text-orange-800":"text-gray-800"),children:"Priority"})]}),(0,j.jsx)("div",{className:"text-lg font-bold "+("urgent"===X.priority||"high"===X.priority?"text-orange-700":"text-gray-700"),children:(null===(t=K[X.priority])||void 0===t?void 0:t.label)||"Not set"})]})]})]})},"progress"),"connections"===V&&(0,j.jsx)(r.P.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},exit:{opacity:0,x:30},transition:{duration:.4,ease:"easeOut"},layout:"position",layoutId:"tabContent",className:"p-6 overflow-y-auto max-h-[calc(85vh-200px)] scrollbar-thin scrollbar-thumb-slate-400 scrollbar-track-slate-200",children:(0,j.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200",children:[(0,j.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-6 flex items-center gap-2",children:[(0,j.jsx)(h.A,{size:20,className:"text-indigo-600"}),"Related Content"]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[re("Linked Case ID","linked_case_id"),re("Linked Topic ID","linked_topic_id")]}),(0,j.jsxs)("div",{className:"mt-8 text-center py-8 text-gray-500",children:[(0,j.jsx)(h.A,{size:48,className:"mx-auto mb-3 text-gray-300"}),(0,j.jsx)("p",{children:"No connections found"}),(0,j.jsx)("p",{className:"text-sm mt-1",children:"Link this task to cases or topics to create connections"})]})]})},"connections"),"details"===V&&(0,j.jsx)(r.P.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},exit:{opacity:0,x:30},transition:{duration:.4,ease:"easeOut"},layout:"position",layoutId:"tabContent",className:"p-6 overflow-y-auto max-h-[calc(85vh-200px)] scrollbar-thin scrollbar-thumb-slate-400 scrollbar-track-slate-200",children:(0,j.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200",children:[(0,j.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-6 flex items-center gap-2",children:[(0,j.jsx)(p.A,{size:20,className:"text-gray-600"}),"Additional Details"]}),(0,j.jsxs)("div",{className:"space-y-6",children:[(0,j.jsxs)("div",{className:"text-sm text-gray-600 bg-slate-50 p-4 rounded-lg",children:[(0,j.jsx)("p",{className:"font-medium mb-2",children:"Task Details"}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsxs)("p",{children:[(0,j.jsx)("span",{className:"font-medium",children:"Created:"})," ",null!==S&&void 0!==S&&S.created_at?new Date(S.created_at).toLocaleString():"Unknown"]}),(0,j.jsxs)("p",{children:[(0,j.jsx)("span",{className:"font-medium",children:"Last Updated:"})," ",null!==S&&void 0!==S&&S.updated_at?new Date(S.updated_at).toLocaleString():"Unknown"]}),(0,j.jsxs)("p",{children:[(0,j.jsx)("span",{className:"font-medium",children:"Task ID:"})," ",(null===S||void 0===S?void 0:S.id)||"Unknown"]})]})]}),(0,j.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,j.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"Task Management Tips"}),(0,j.jsxs)("ul",{className:"text-blue-700 text-sm space-y-1",children:[(0,j.jsx)("li",{children:"\u2022 Break large tasks into smaller, manageable subtasks"}),(0,j.jsx)("li",{children:"\u2022 Set realistic due dates to maintain accountability"}),(0,j.jsx)("li",{children:"\u2022 Link tasks to relevant cases or topics for better organization"}),(0,j.jsx)("li",{children:"\u2022 Update status regularly to track progress"})]})]})]})]})},"details")]})}),H&&(0,j.jsxs)("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,j.jsx)("div",{className:"text-sm text-gray-500",children:"Changes will be auto-saved"}),(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsx)("button",{onClick:()=>{R(!1),F({...S})},disabled:B,className:"px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors",children:"Cancel"}),(0,j.jsxs)("button",{onClick:te,disabled:B,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors flex items-center gap-2",children:[B?(0,j.jsx)(n.A,{size:16,className:"animate-spin"}):(0,j.jsx)(b.A,{size:16}),B?"Saving...":"Save Changes"]})]})]})]})},`task-modal-${(null===S||void 0===S?void 0:S.id)||"default"}`)}):null},_=i.memo(S,(e,t)=>{var a,i,s,r;return e.isOpen===t.isOpen&&(null===(a=e.data)||void 0===a?void 0:a.id)===(null===(i=t.data)||void 0===i?void 0:i.id)&&(null===(s=e.data)||void 0===s?void 0:s.updated_at)===(null===(r=t.data)||void 0===r?void 0:r.updated_at)})},9e3:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var i=a(5043),s=a(3546),r=a(6446),n=a(2024),o=a(4596),l=a(4537),d=a(2626),c=a(6382),u=a(8646),p=a(5088),m=a(1680),h=a(8487),x=a(6835),g=a(1360),b=a(8693),v=a(9855),y=a(7118),f=a(614),w=a(2667),j=a(579);const N={hidden:{opacity:0,scale:.3,y:50,rotate:-5},visible:{opacity:1,scale:1,y:0,rotate:0,transition:{type:"spring",damping:25,stiffness:300,duration:.6}},exit:{opacity:0,scale:.7,y:30,rotate:-3,transition:{type:"easeInOut",duration:.4}}},k={hidden:{opacity:0,backdropFilter:"blur(0px)"},visible:{opacity:1,backdropFilter:"blur(8px)",transition:{duration:.4,ease:"easeOut"}},exit:{opacity:0,backdropFilter:"blur(0px)",transition:{duration:.3,ease:"easeIn"}}},C={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"easeOut",duration:.3,delay:.1}},exit:{opacity:0,y:-10,scale:1.02,transition:{type:"easeIn",duration:.2}}},S={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{duration:.4,ease:"easeOut"}},edit:{scale:1.02,boxShadow:"0 8px 25px rgba(59, 130, 246, 0.15)",transition:{duration:.3,ease:"easeOut"}},saved:{scale:1,boxShadow:"0 4px 15px rgba(34, 197, 94, 0.15)",transition:{duration:.3,ease:"easeOut"}}},_=e=>{var t,a,_,A;let{isOpen:T,data:D,onClose:P,onAnimationStart:z,onAnimationEnd:O,setMindMapData:$,autoSaveMindMapData:E,addToast:I}=e;const[M,L]=(0,i.useState)(!1),[H,R]=(0,i.useState)(!1),[X,F]=(0,i.useState)(!1),[B,Y]=(0,i.useState)({}),[U,G]=(0,i.useState)(!1),[V,W]=(0,i.useState)(!1),[q,J]=(0,i.useState)("overview"),[K,Z]=(0,i.useState)(!1),[Q,ee]=(0,i.useState)({}),[te,ae]=(0,i.useState)({}),[ie,se]=(0,i.useState)({}),re=(0,i.useRef)({}),[ne,oe]=(0,i.useState)({name:"",dosage:"",frequency:"",effect:""}),[le,de]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if(T&&D&&!V){R(!0);const e={...D,narrative_summary:D.narrative_summary||"",medications:D.medications||[],therapeutic_highlights:D.therapeutic_highlights||"",timeline:D.timeline||[],last_updated:D.last_updated||(new Date).toISOString()};Y(e),W(!0),L(!0),z&&z(),setTimeout(()=>{L(!1),O&&O()},600)}else!T&&V&&(W(!1),se({}),ee({}),ae({}))},[T,D,V,z,O]),(0,i.useEffect)(()=>{T&&D&&V&&Y(e=>({...e,...D}))},[D,T,V]);const ce=(0,i.useCallback)(()=>{M||X||(L(!0),F(!0),z&&z(),R(!1))},[z,M,X]);(0,i.useEffect)(()=>{const e=e=>{"Escape"===e.key&&ce()};if(T)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[T,ce]);(0,i.useCallback)(async()=>{if(!U){G(!0);try{const e={...B,last_updated:(new Date).toISOString()};$(t=>{const a=t.cases.map(t=>String(t.id)===String(null===D||void 0===D?void 0:D.id)?{...t,...e}:t),i={...t,cases:a};return E(i),i}),Y(e),I("Case updated successfully","success")}catch(e){console.error("Error saving case:",e),I("Failed to save case","error")}finally{G(!1)}}},[null===D||void 0===D?void 0:D.id,B,$,E,I,U]);const ue=(0,i.useCallback)(e=>{const t=re.current[e];t&&se(a=>({...a,[e]:t.scrollTop}))},[]),pe=(0,i.useCallback)(e=>{setTimeout(()=>{const t=re.current[e],a=ie[e];t&&a&&(t.scrollTop=a)},100)},[ie]),me=(0,i.useCallback)(e=>{e===q||K||(ue(q),Z(!0),J(e),setTimeout(()=>{Z(!1),pe(e)},300))},[q,K,ue,pe]),he=(0,i.useCallback)(e=>{ee(t=>({...t,[e]:!t[e]})),Q[e]||ae(t=>({...t,[e]:{..."basic_info"===e&&{label:B.label||B.title||"",status:B.status||"active"},..."chief_complaint"===e&&{content:B.chiefComplaint||B.chief_complaint||""},..."initial_presentation"===e&&{content:B.initialPresentation||B.initial_presentation||""},..."narrative"===e&&{content:B.narrative_summary||""},..."therapeutic_highlights"===e&&{therapeutic_highlights:B.therapeutic_highlights||""}}}))},[Q,B]),xe=(0,i.useCallback)((e,t,a)=>{ae(i=>({...i,[e]:{...i[e],[t]:a}}))},[]),ge=(0,i.useCallback)(e=>{ee(t=>({...t,[e]:!1})),ae(t=>{const a={...t};return delete a[e],a})},[]),be=(0,i.useCallback)(async e=>{if(!U){G(!0);try{const t=te[e]||{};let a={...B};"basic_info"===e?(t.label&&(a.label=t.label,a.title=t.label),t.status&&(a.status=t.status)):"chief_complaint"===e?void 0!==t.content&&(a.chief_complaint=t.content,a.chiefComplaint=t.content):"initial_presentation"===e?void 0!==t.content&&(a.initial_presentation=t.content,a.initialPresentation=t.content):"narrative"===e&&void 0!==t.content&&(a.narrative_summary=t.content),a.last_updated=(new Date).toISOString(),Y(a),$(e=>{const t=e.cases.map(e=>String(e.id)===String(null===D||void 0===D?void 0:D.id)?{...e,...a}:e),i={...e,cases:t};return E(i),i}),ee(t=>({...t,[e]:!1})),ae(t=>{const a={...t};return delete a[e],a}),I("Case information updated successfully","success")}catch(t){console.error("Error saving section:",t),I("Failed to save changes","error")}finally{G(!1)}}},[te,B,null===D||void 0===D?void 0:D.id,$,E,I,U]),ve=((0,i.useCallback)(async()=>{if(!U&&window.confirm("Are you sure you want to delete this case?")){G(!0);try{$(e=>{const t=e.cases.filter(e=>String(e.id)!==String(null===D||void 0===D?void 0:D.id)),a={...e,cases:t};return E(a),a}),I("Case deleted successfully","success"),ce()}catch(e){console.error("Error deleting case:",e),I("Failed to delete case","error")}finally{G(!1)}}},[null===D||void 0===D?void 0:D.id,$,E,I,ce,U]),(0,i.useCallback)(e=>{ee(t=>({...t,[e]:!0})),ae(t=>({...t,[e]:{...B}}))},[B])),ye=(0,i.useCallback)(e=>{ee(t=>({...t,[e]:!1})),ae(t=>{const a={...t};return delete a[e],a})},[]),fe=(0,i.useCallback)(async e=>{if(U)return;const t=te[e];if(t){G(!0);try{const a={...B,...t,last_updated:(new Date).toISOString()};Y(a),$(e=>{const t=e.cases.map(e=>String(e.id)===String(null===D||void 0===D?void 0:D.id)?{...e,...a}:e),i={...e,cases:t};return E(i),i}),ee(t=>({...t,[e]:!1})),ae(t=>{const a={...t};return delete a[e],a}),I("Section updated successfully","success")}catch(a){console.error("Error saving section:",a),I("Failed to save section","error")}finally{G(!1)}}},[te,B,null===D||void 0===D?void 0:D.id,$,E,I,U]),we=(0,i.useCallback)((e,t,a)=>{ae(i=>({...i,[e]:{...i[e],[t]:a}}))},[]),je=(0,i.useCallback)(()=>{if(!ne.name.trim())return;const e=[...B.medications||[],{id:Date.now(),...ne,dateAdded:(new Date).toISOString()}],t={...B,medications:e,last_updated:(new Date).toISOString()};Y(t),$(e=>{const a=e.cases.map(e=>String(e.id)===String(null===D||void 0===D?void 0:D.id)?{...e,...t}:e),i={...e,cases:a};return E(i),i}),oe({name:"",dosage:"",frequency:"",effect:""}),de(!1),I("Medication added successfully","success")},[ne,B,null===D||void 0===D?void 0:D.id,$,E,I]),Ne=(0,i.useCallback)(e=>{const t=(B.medications||[]).filter(t=>t.id!==e),a={...B,medications:t,last_updated:(new Date).toISOString()};Y(a),$(e=>{const t=e.cases.map(e=>String(e.id)===String(null===D||void 0===D?void 0:D.id)?{...e,...a}:e),i={...e,cases:t};return E(i),i}),I("Medication removed successfully","success")},[B,null===D||void 0===D?void 0:D.id,$,E,I]),ke=(0,i.useMemo)(()=>{const e=B.timeline||[];return console.log(`Timeline entries for case ${null===D||void 0===D?void 0:D.id}:`,e),e},[B.timeline,null===D||void 0===D?void 0:D.id]),Ce=(0,i.useCallback)(((e,t)=>{let a;return function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];clearTimeout(a),a=setTimeout(()=>e.apply(null,s),t)}})(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;try{const t=e.map((e,t)=>{var a,i;return{id:e.id||`timeline-${null===D||void 0===D?void 0:D.id}-${Date.now()}-${t}`,title:e.title||`Timeline Entry ${t+1}`,type:e.type||"timeline_entry",timestamp:e.timestamp||e.date||(new Date).toISOString(),date:e.date||e.timestamp||(new Date).toISOString(),patient_narrative:e.patient_narrative||(null===(a=e.patientData)||void 0===a?void 0:a.notes)||"",clinical_notes:e.clinical_notes||(null===(i=e.clinicalData)||void 0===i?void 0:i.notes)||"",content:e.content||e.patient_narrative||e.clinical_notes||"",symptoms:e.symptoms||[],orderIndex:void 0!==e.orderIndex?e.orderIndex:t,x:e.x||400,y:e.y||100+200*t,created_at:e.created_at||(new Date).toISOString(),updated_at:(new Date).toISOString(),...e}}),a={...B,timeline:t,last_updated:(new Date).toISOString()};return Y(a),$(e=>{const i=e.cases.map(e=>String(e.id)===String(null===D||void 0===D?void 0:D.id)?{...e,...a,timeline:t.map(t=>({id:String(t.id||`${Date.now()}-${e.id}-timeline-${t.orderIndex||0}`),title:t.title||`Timeline Entry ${(t.orderIndex||0)+1}`,type:t.type||"timeline_entry",timestamp:t.timestamp||t.date||(new Date).toISOString(),date:t.date||t.timestamp||(new Date).toISOString(),patient_narrative:t.patient_narrative||"",clinical_notes:t.clinical_notes||"",content:t.content||t.patient_narrative||t.clinical_notes||"",symptoms:t.symptoms||[],orderIndex:void 0!==t.orderIndex?t.orderIndex:0,x:Number(t.x)||400,y:Number(t.y)||100,created_at:t.created_at||(new Date).toISOString(),updated_at:(new Date).toISOString()}))}:e),s={...e,cases:i};return E(s),s}),{success:!0,data:a}}catch(a){return console.error("Timeline save error:",a),t<3?(console.log(`Retrying timeline save (attempt ${t+1}/3)`),Ce(e,t+1)):{success:!1,error:a}}},500),[B,null===D||void 0===D?void 0:D.id,$,E]),Se=((0,i.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(U&&!t.force)return;return e.some(e=>e.patient_narrative&&e.patient_narrative.trim()||e.clinical_notes&&e.clinical_notes.trim()||e.content&&e.content.trim()||400!==e.x||100!==e.y)||t.force?(console.log(`Updating timeline for case ${null===D||void 0===D?void 0:D.id} with ${e.length} entries`),Ce(e)):(console.log("Skipping timeline save - no meaningful content or changes"),{success:!0,skipped:!0})},[Ce,U,null===D||void 0===D?void 0:D.id]),(0,i.useMemo)(()=>(null!==D&&void 0!==D&&D.id,{topics:[],literature:[],cases:[]}),[null===D||void 0===D?void 0:D.id])),_e=[{id:"overview",label:"Overview",icon:y.A},{id:"medications",label:"Medications",icon:x.A},{id:"therapy",label:"Therapy & Insights",icon:c.A},{id:"timeline",label:"Timeline",icon:p.A},{id:"related",label:"Related",icon:h.A}];return T?(0,j.jsx)(s.N,{mode:"wait",onExitComplete:()=>{L(!1),F(!1),W(!1),P(),O&&O()},children:H&&(0,j.jsx)(r.P.div,{initial:"hidden",animate:"visible",exit:"exit",variants:k,className:"fixed inset-0 bg-black flex items-center justify-center z-50",style:{willChange:"backdrop-filter, opacity",backfaceVisibility:"hidden",transform:"translate3d(0, 0, 0)"},onClick:e=>e.target===e.currentTarget&&ce(),children:(0,j.jsxs)(r.P.div,{initial:"hidden",animate:"visible",exit:"exit",variants:N,className:"bg-white rounded-2xl shadow-2xl w-full mx-4 max-h-[90vh] overflow-hidden transition-all duration-500 ease-in-out "+("timeline"===q?"max-w-7xl":"max-w-4xl"),style:{willChange:"transform, opacity, scale",backfaceVisibility:"hidden"},onClick:e=>e.stopPropagation(),onAnimationStart:()=>{L(!0),z&&z()},onAnimationComplete:()=>{L(!1),O&&O()},children:[(0,j.jsxs)(r.P.div,{initial:"hidden",animate:"visible",exit:"exit",variants:C,className:"bg-gradient-to-br from-slate-900 to-slate-800 text-white px-6 py-4 flex items-center justify-between",children:[(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsx)(y.A,{size:24}),(0,j.jsx)("h2",{className:"text-xl font-semibold",children:"Case Details"})]}),(0,j.jsx)("button",{onClick:ce,className:"text-slate-400 hover:text-white transition-colors",children:(0,j.jsx)(f.A,{size:24})})]}),(0,j.jsx)("div",{className:"bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 border-b border-slate-600",children:(0,j.jsx)("nav",{className:"flex flex-wrap gap-2 px-6 py-4",children:_e.map(e=>{let{id:t,label:a,icon:i}=e;return(0,j.jsxs)(r.P.button,{onClick:()=>me(t),className:"relative flex items-center gap-2 px-4 py-3 rounded-xl font-medium text-sm transition-all duration-300 "+(q===t?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-lg shadow-blue-500/25":"text-slate-300 hover:text-white hover:bg-slate-700/50 hover:shadow-md"),whileHover:{scale:q===t?1:1.02},whileTap:{scale:.98},disabled:K,children:[(0,j.jsx)(i,{size:16,className:q===t?"drop-shadow-sm":""}),a,q===t&&(0,j.jsx)(r.P.div,{layoutId:"caseActiveTab",className:"absolute inset-0 bg-gradient-to-r from-blue-400/20 to-indigo-500/20 rounded-xl blur-sm",initial:!1,transition:{duration:.3,ease:"easeOut"}})]},t)})})}),(0,j.jsx)(r.P.div,{className:"flex-1 bg-gradient-to-br from-slate-900 to-slate-800 overflow-hidden",animate:{opacity:K?.7:1},transition:{duration:.2},children:(0,j.jsxs)(s.N,{mode:"wait",children:["overview"===q&&(0,j.jsxs)(r.P.div,{ref:e=>re.current.overview=e,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"h-full overflow-y-auto p-6 space-y-6",children:[(0,j.jsxs)(r.P.div,{variants:S,initial:"hidden",animate:"visible",className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,j.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Case Information"}),(0,j.jsx)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>he("basic_info"),className:"text-blue-400 hover:text-blue-300 transition-colors p-2 rounded-lg hover:bg-slate-700/50",title:"Edit case information",children:(0,j.jsx)(o.A,{size:16})})]}),Q.basic_info?(0,j.jsxs)("div",{className:"space-y-4",children:[(0,j.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Case Title/Label"}),(0,j.jsx)("input",{type:"text",value:void 0!==(null===(t=te.basic_info)||void 0===t?void 0:t.label)?te.basic_info.label:B.label||B.title||"",onChange:e=>xe("basic_info","label",e.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white placeholder-slate-400 focus:ring-2 focus:ring-blue-400 focus:border-blue-400",placeholder:"Enter case title/label"})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Status"}),(0,j.jsxs)("select",{value:void 0!==(null===(a=te.basic_info)||void 0===a?void 0:a.status)?te.basic_info.status:B.status||"active",onChange:e=>xe("basic_info","status",e.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-400 focus:border-blue-400",children:[(0,j.jsx)("option",{value:"active",children:"Active"}),(0,j.jsx)("option",{value:"archived",children:"Archived"}),(0,j.jsx)("option",{value:"follow_up",children:"Follow-up"}),(0,j.jsx)("option",{value:"completed",children:"Completed"})]})]})]}),(0,j.jsxs)("div",{className:"flex gap-2 justify-end min-h-[44px] items-center",children:[(0,j.jsx)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ge("basic_info"),className:"px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-500 transition-colors",children:"Cancel"}),(0,j.jsxs)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be("basic_info"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[(0,j.jsx)(b.A,{size:16}),"Save Changes"]})]})]}):(0,j.jsxs)("div",{className:"space-y-4",children:[(0,j.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Case Title/Label"}),(0,j.jsx)("div",{className:"bg-slate-700/50 rounded-lg p-3 "+(B.label||B.title?"text-white":"text-slate-400 italic"),children:B.label||B.title||"Untitled case"})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Status"}),(0,j.jsx)("div",{className:"text-white bg-slate-700/50 rounded-lg p-3",children:B.status||"Active"})]})]}),(0,j.jsx)("div",{className:"flex gap-2 justify-end min-h-[44px] items-center"})]})]}),(0,j.jsxs)(r.P.div,{variants:S,initial:"hidden",animate:"visible",className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,j.jsxs)("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[(0,j.jsx)(m.A,{size:20,className:"text-blue-400"}),"Case Narrative"]}),(0,j.jsx)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>he("narrative"),className:"text-blue-400 hover:text-blue-300 transition-colors p-2 rounded-lg hover:bg-slate-700/50",title:"Edit narrative summary",children:(0,j.jsx)(o.A,{size:16})})]}),Q.narrative?(0,j.jsxs)("div",{className:"space-y-4",children:[(0,j.jsx)("textarea",{value:void 0!==(null===(_=te.narrative)||void 0===_?void 0:_.content)?te.narrative.content:B.narrative_summary||"",onChange:e=>xe("narrative","content",e.target.value),rows:8,className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white placeholder-slate-400 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 resize-none",placeholder:"Enter the narrative summary for this case..."}),(0,j.jsxs)("div",{className:"flex gap-2 justify-end min-h-[44px] items-center",children:[(0,j.jsx)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ge("narrative"),className:"px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-500 transition-colors",children:"Cancel"}),(0,j.jsxs)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>be("narrative"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[(0,j.jsx)(b.A,{size:16}),"Save Changes"]})]})]}):(0,j.jsxs)("div",{className:"space-y-4",children:[(0,j.jsx)("div",{className:"leading-relaxed bg-slate-700/30 rounded-lg p-4 "+(B.narrative_summary?"text-slate-300":"text-slate-400 italic"),children:B.narrative_summary||"No narrative summary documented"}),(0,j.jsx)("div",{className:"flex gap-2 justify-end min-h-[44px] items-center"})]})]}),(0,j.jsxs)("div",{className:"text-xs text-slate-500 text-right",children:["Last updated: ",B.last_updated?new Date(B.last_updated).toLocaleString():"Never"]})]},"overview"),"medications"===q&&(0,j.jsx)(r.P.div,{ref:e=>re.current.medications=e,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"h-full overflow-y-auto p-6 space-y-6",children:(0,j.jsxs)(r.P.div,{variants:S,initial:"hidden",animate:"visible",className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700",children:[(0,j.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,j.jsx)(x.A,{size:20,className:"text-green-400"}),"Current Medications"]}),(0,j.jsx)("div",{className:"space-y-4 mb-6",children:(0,j.jsx)(s.N,{children:(B.medications||[]).map((e,t)=>(0,j.jsx)(r.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"bg-green-600/10 border border-green-600/20 rounded-lg p-4 group hover:bg-green-600/15 transition-colors",children:(0,j.jsxs)("div",{className:"flex items-start justify-between",children:[(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,j.jsx)("h4",{className:"font-semibold text-green-300",children:e.name}),e.dosage&&(0,j.jsx)("span",{className:"text-xs bg-green-600/20 text-green-300 px-2 py-1 rounded",children:e.dosage})]}),(0,j.jsxs)("div",{className:"space-y-1 text-sm text-slate-300",children:[e.frequency&&(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)(p.A,{size:14,className:"text-green-400"}),(0,j.jsxs)("span",{children:["Frequency: ",e.frequency]})]}),e.effect&&(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)(l.A,{size:14,className:"text-green-400"}),(0,j.jsxs)("span",{children:["Effect: ",e.effect]})]}),e.dateAdded&&(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)(u.A,{size:14,className:"text-green-400"}),(0,j.jsxs)("span",{children:["Added: ",new Date(e.dateAdded).toLocaleDateString()]})]})]})]}),(0,j.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>Ne(e.id),className:"text-green-400 hover:text-green-200 opacity-0 group-hover:opacity-100 transition-opacity p-1 rounded",title:"Remove medication",children:(0,j.jsx)(v.A,{size:16})})]})},e.id||t))})}),le?(0,j.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-slate-700/30 rounded-lg p-4 space-y-4",children:[(0,j.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,j.jsxs)("div",{children:[(0,j.jsxs)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Medication Name ",(0,j.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,j.jsx)("input",{type:"text",value:ne.name,onChange:e=>oe(t=>({...t,name:e.target.value})),className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white placeholder-slate-400 focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter medication name"})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Dosage"}),(0,j.jsx)("input",{type:"text",value:ne.dosage,onChange:e=>oe(t=>({...t,dosage:e.target.value})),className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white placeholder-slate-400 focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 50mg"})]})]}),(0,j.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Frequency"}),(0,j.jsx)("input",{type:"text",value:ne.frequency,onChange:e=>oe(t=>({...t,frequency:e.target.value})),className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white placeholder-slate-400 focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Once daily"})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Effect/Notes"}),(0,j.jsx)("input",{type:"text",value:ne.effect,onChange:e=>oe(t=>({...t,effect:e.target.value})),className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white placeholder-slate-400 focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Improved mood"})]})]}),(0,j.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,j.jsx)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{de(!1),oe({name:"",dosage:"",frequency:"",effect:""})},className:"px-4 py-2 text-slate-300 hover:text-white border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors",children:"Cancel"}),(0,j.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:je,disabled:!ne.name.trim(),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,j.jsx)(g.A,{size:16}),"Add Medication"]})]})]}):(0,j.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>de(!0),className:"w-full flex items-center justify-center gap-2 p-4 border-2 border-dashed border-green-600/30 rounded-lg text-green-400 hover:border-green-600/50 hover:bg-green-600/5 transition-colors",children:[(0,j.jsx)(g.A,{size:16}),"Add New Medication"]}),0===(B.medications||[]).length&&!le&&(0,j.jsx)("p",{className:"text-slate-500 italic text-center py-8",children:"No medications documented yet"})]})},"medications"),"therapy"===q&&(0,j.jsx)(r.P.div,{ref:e=>re.current.therapy=e,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"h-full overflow-y-auto p-6 space-y-6",children:(0,j.jsxs)(r.P.div,{variants:S,animate:Q.therapeutic_highlights?"edit":"visible",className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,j.jsxs)("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[(0,j.jsx)(c.A,{size:20,className:"text-purple-400"}),"Therapeutic Highlights"]}),!Q.therapeutic_highlights&&(0,j.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>ve("therapeutic_highlights"),className:"text-slate-400 hover:text-white transition-colors p-1 rounded",title:"Edit therapeutic highlights",children:(0,j.jsx)(o.A,{size:16})})]}),Q.therapeutic_highlights?(0,j.jsxs)(r.P.div,{className:"space-y-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[(0,j.jsx)("textarea",{value:void 0!==(null===(A=te.therapeutic_highlights)||void 0===A?void 0:A.therapeutic_highlights)?te.therapeutic_highlights.therapeutic_highlights:B.therapeutic_highlights||"",onChange:e=>we("therapeutic_highlights","therapeutic_highlights",e.target.value),rows:10,className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-3 text-white placeholder-slate-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none",placeholder:"Enter key therapeutic moments, insights, breakthroughs, or notes on therapy process..."}),(0,j.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,j.jsx)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>ye("therapeutic_highlights"),className:"px-3 py-2 text-slate-300 hover:text-white border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors text-sm",children:"Cancel"}),(0,j.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>fe("therapeutic_highlights"),disabled:U,className:"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm flex items-center gap-2",children:[U?(0,j.jsx)(n.A,{size:14,className:"animate-spin"}):(0,j.jsx)(b.A,{size:14}),"Save"]})]})]}):(0,j.jsx)(r.P.div,{className:"text-slate-300 leading-relaxed cursor-pointer hover:bg-slate-700/20 rounded-lg p-4 transition-colors min-h-[200px]",whileHover:{scale:1.01},transition:{duration:.2},onClick:()=>ve("therapeutic_highlights"),children:B.therapeutic_highlights?(0,j.jsx)("div",{className:"whitespace-pre-wrap",children:B.therapeutic_highlights}):(0,j.jsx)("span",{className:"text-slate-500 italic",children:"Click to add therapeutic highlights, key moments, insights, breakthroughs, or therapy process notes..."})})]})},"therapy"),"timeline"===q&&(0,j.jsx)(r.P.div,{ref:e=>re.current.timeline=e,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"h-full",children:(0,j.jsx)(w.A,{data:ke,caseId:null===D||void 0===D?void 0:D.id,setMindMapData:$,autoSaveMindMapData:E,onDataChange:e=>{console.log("Timeline data updated:",e),I("Timeline updated successfully","success")}})},"timeline"),"related"===q&&(0,j.jsx)(r.P.div,{ref:e=>re.current.related=e,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"h-full overflow-y-auto p-6 space-y-6",children:(0,j.jsxs)(r.P.div,{variants:S,initial:"hidden",animate:"visible",className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700",children:[(0,j.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,j.jsx)(h.A,{size:20,className:"text-cyan-400"}),"Connected Nodes"]}),(0,j.jsxs)("div",{className:"mb-6",children:[(0,j.jsxs)("h4",{className:"text-md font-medium text-slate-300 mb-3 flex items-center gap-2",children:[(0,j.jsx)(c.A,{size:16,className:"text-blue-400"}),"Related Topics"]}),Se.topics.length>0?(0,j.jsx)("div",{className:"space-y-2",children:Se.topics.map((e,t)=>(0,j.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-blue-600/10 border border-blue-600/20 rounded-lg",children:[(0,j.jsx)(c.A,{size:16,className:"text-blue-400"}),(0,j.jsx)("span",{className:"text-blue-300",children:e.title})]},t))}):(0,j.jsx)("p",{className:"text-slate-500 italic text-sm",children:"No connected topics"})]}),(0,j.jsxs)("div",{className:"mb-6",children:[(0,j.jsxs)("h4",{className:"text-md font-medium text-slate-300 mb-3 flex items-center gap-2",children:[(0,j.jsx)(d.A,{size:16,className:"text-purple-400"}),"Related Literature"]}),Se.literature.length>0?(0,j.jsx)("div",{className:"space-y-2",children:Se.literature.map((e,t)=>(0,j.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-purple-600/10 border border-purple-600/20 rounded-lg",children:[(0,j.jsx)(d.A,{size:16,className:"text-purple-400"}),(0,j.jsx)("span",{className:"text-purple-300",children:e.title})]},t))}):(0,j.jsx)("p",{className:"text-slate-500 italic text-sm",children:"No connected literature"})]}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("h4",{className:"text-md font-medium text-slate-300 mb-3 flex items-center gap-2",children:[(0,j.jsx)(y.A,{size:16,className:"text-green-400"}),"Related Cases"]}),Se.cases.length>0?(0,j.jsx)("div",{className:"space-y-2",children:Se.cases.map((e,t)=>(0,j.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-green-600/10 border border-green-600/20 rounded-lg",children:[(0,j.jsx)(y.A,{size:16,className:"text-green-400"}),(0,j.jsx)("span",{className:"text-green-300",children:e.title})]},t))}):(0,j.jsx)("p",{className:"text-slate-500 italic text-sm",children:"No connected cases"})]}),(0,j.jsx)("div",{className:"mt-6 p-4 bg-slate-700/20 rounded-lg border border-slate-600",children:(0,j.jsx)("p",{className:"text-slate-400 text-sm italic",children:"Connected nodes will be automatically populated based on mind map relationships and connections created in the graph view."})})]})},"related")]})})]})},`case-modal-${(null===D||void 0===D?void 0:D.id)||"default"}`)}):null}}},t={};function a(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={id:i,loaded:!1,exports:{}};return e[i](r,r.exports,a),r.loaded=!0,r.exports}a.m=e,(()=>{var e=[];a.O=(t,i,s,r)=>{if(!i){var n=1/0;for(c=0;c<e.length;c++){i=e[c][0],s=e[c][1],r=e[c][2];for(var o=!0,l=0;l<i.length;l++)(!1&r||n>=r)&&Object.keys(a.O).every(e=>a.O[e](i[l]))?i.splice(l--,1):(o=!1,r<n&&(n=r));if(o){e.splice(c--,1);var d=s();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[i,s,r]}})(),(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;a.t=function(i,s){if(1&s&&(i=this(i)),8&s)return i;if("object"===typeof i&&i){if(4&s&&i.__esModule)return i;if(16&s&&"function"===typeof i.then)return i}var r=Object.create(null);a.r(r);var n={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&i;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>n[e]=()=>i[e]);return n.default=()=>i,a.d(r,n),r}})(),a.d=(e,t)=>{for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce((t,i)=>(a.f[i](e,t),t),[])),a.u=e=>"static/js/"+e+"."+{213:"953ef4c7",261:"de3004f3",524:"7d493d91"}[e]+".chunk.js",a.miniCssF=e=>{},a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="frontend:";a.l=(i,s,r,n)=>{if(e[i])e[i].push(s);else{var o,l;if(void 0!==r)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+r){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",t+r),o.src=i),e[i]=[s];var p=(t,a)=>{o.onerror=o.onload=null,clearTimeout(m);var s=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach(e=>e(a)),t)return t(a)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=p.bind(null,o.onerror),o.onload=p.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),a.p="./",(()=>{var e={792:0};a.f.j=(t,i)=>{var s=a.o(e,t)?e[t]:void 0;if(0!==s)if(s)i.push(s[2]);else{var r=new Promise((a,i)=>s=e[t]=[a,i]);i.push(s[2]=r);var n=a.p+a.u(t),o=new Error;a.l(n,i=>{if(a.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var r=i&&("load"===i.type?"missing":i.type),n=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+r+": "+n+")",o.name="ChunkLoadError",o.type=r,o.request=n,s[1](o)}},"chunk-"+t,t)}},a.O.j=t=>0===e[t];var t=(t,i)=>{var s,r,n=i[0],o=i[1],l=i[2],d=0;if(n.some(t=>0!==e[t])){for(s in o)a.o(o,s)&&(a.m[s]=o[s]);if(l)var c=l(a)}for(t&&t(i);d<n.length;d++)r=n[d],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},i=self.webpackChunkfrontend=self.webpackChunkfrontend||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var i=a.O(void 0,[967,497,96],()=>a(8130));i=a.O(i)})();
//# sourceMappingURL=main.d965e3d0.js.map