{"version":3,"file":"static/js/main.d965e3d0.js","mappings":"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","sources":["components/timeline-test/VerticalTimeline.js","components/TopicModal.js","components/timeline-test/sampleVerticalTimelineData.js","components/timeline-test/SimpleGSAPTest.js","components/TimelineModal.js","components/timeline-test/TimelineTestPage.js","components/ArtisticBackground.js","components/LazyComponents.js","utils/floatingEdgeUtils.js","components/FloatingEdge.js","components/EnhancedEdge.js","components/ConnectionLine.js","components/OptimizedLoadingScreen.js","components/nodes/TopicNode.js","components/nodes/CaseNode.js","components/nodes/TaskNode.js","components/nodes/LiteratureNode.js","components/nodes/index.js","utils/performanceUtils.js","data/sampleLiteratureData.js","utils/sampleDataUtils.js","App.js","index.js","components/TaskModal.js","components/CaseModal.js","../webpack/bootstrap","../webpack/runtime/chunk loaded","../webpack/runtime/create fake namespace object","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/global","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/load script","../webpack/runtime/make namespace object","../webpack/runtime/node module decorator","../webpack/runtime/publicPath","../webpack/runtime/jsonp chunk loading","../webpack/startup"],"sourcesContent":["import React, { useState, useRef, useCallback, useEffect, useMemo } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { gsap } from 'gsap';\r\n\r\n// Enhanced custom scrollbar styles with animations to match CaseModal theme\r\nconst scrollbarStyles = `\r\n  .timeline-scrollbar::-webkit-scrollbar {\r\n    width: 12px;\r\n    height: 12px;\r\n  }\r\n  \r\n  .timeline-scrollbar::-webkit-scrollbar-track {\r\n    background: rgba(30, 41, 59, 0.3);\r\n    border-radius: 6px;\r\n    margin: 4px;\r\n  }\r\n  \r\n  .timeline-scrollbar::-webkit-scrollbar-thumb {\r\n    background: linear-gradient(45deg, rgba(59, 130, 246, 0.6), rgba(99, 102, 241, 0.8));\r\n    border-radius: 6px;\r\n    border: 2px solid rgba(30, 41, 59, 0.3);\r\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n  }\r\n  \r\n  .timeline-scrollbar::-webkit-scrollbar-thumb:hover {\r\n    background: linear-gradient(45deg, rgba(59, 130, 246, 0.8), rgba(99, 102, 241, 1));\r\n    border-color: rgba(59, 130, 246, 0.3);\r\n    transform: scale(1.1);\r\n    box-shadow: 0 0 10px rgba(59, 130, 246, 0.4);\r\n  }\r\n  \r\n  .timeline-scrollbar::-webkit-scrollbar-thumb:active {\r\n    background: linear-gradient(45deg, rgba(37, 99, 235, 0.9), rgba(79, 70, 229, 1));\r\n    transform: scale(1.05);\r\n  }\r\n  \r\n  .timeline-scrollbar::-webkit-scrollbar-corner {\r\n    background: rgba(30, 41, 59, 0.3);\r\n    border-radius: 6px;\r\n  }\r\n  \r\n  .timeline-scrollbar {\r\n    scrollbar-width: thin;\r\n    scrollbar-color: rgba(59, 130, 246, 0.5) rgba(30, 41, 59, 0.3);\r\n    scroll-behavior: smooth;\r\n    animation: scrollbar-glow 3s ease-in-out infinite alternate;\r\n  }\r\n  \r\n  @keyframes scrollbar-glow {\r\n    from {\r\n      scrollbar-color: rgba(59, 130, 246, 0.4) rgba(30, 41, 59, 0.3);\r\n    }\r\n    to {\r\n      scrollbar-color: rgba(59, 130, 246, 0.7) rgba(30, 41, 59, 0.4);\r\n    }\r\n  }\r\n  \r\n  /* Smooth scrolling enhancement */\r\n  .timeline-scrollbar {\r\n    scroll-padding-top: 20px;\r\n    scroll-padding-bottom: 20px;\r\n  }\r\n\r\n  /* Custom animations for the timeline components */\r\n  @keyframes shimmer {\r\n    0% { transform: translateX(-100%); }\r\n    100% { transform: translateX(100%); }\r\n  }\r\n  \r\n  @keyframes shimmerReverse {\r\n    0% { transform: translateX(100%); }\r\n    100% { transform: translateX(-100%); }\r\n  }\r\n  \r\n  @keyframes pulse {\r\n    0%, 100% { opacity: 0.6; }\r\n    50% { opacity: 0.2; }\r\n  }\r\n`;\r\n\r\nconst VerticalTimeline = ({ \r\n  data, \r\n  onNodeClick, \r\n  onNodeHover, \r\n  onDataChange,\r\n  // Mind map integration props\r\n  caseId,\r\n  autoSaveMindMapData,\r\n  setMindMapData \r\n}) => {\r\n  const [nodes, setNodes] = useState([]);\r\n  const [hoveredNode, setHoveredNode] = useState(null);\r\n  const [editingCards, setEditingCards] = useState({}); // Track which cards are being edited\r\n  const [cardTexts, setCardTexts] = useState({}); // Store card text content\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [isAnimatingNewNode, setIsAnimatingNewNode] = useState(false); // Track new node animation\r\n  const [isSaving, setIsSaving] = useState(false); // Track save state\r\n  const [lastSaved, setLastSaved] = useState(null); // Track last save time\r\n  const [scrollProgress, setScrollProgress] = useState(0); // Track scroll position\r\n  const timelineRef = useRef(null);\r\n  const nodeRefs = useRef({}); // Refs for direct DOM manipulation\r\n  const pathRefs = useRef({}); // Refs for SVG path elements\r\n  const dragState = useRef({ isDragging: false, draggedNodeId: null }); // Ref-based drag state\r\n  const scrollContainerRef = useRef(null); // Ref for scroll container\r\n  const saveTimeoutRef = useRef(null); // Ref for auto-save debounce\r\n  const nodePhysics = useRef({}); // Empty placeholder for backward compatibility\r\n\r\n  // Constants for layout\r\n  const NODE_SPACING = 200; // Vertical spacing between nodes\r\n  const TIMELINE_WIDTH = 800;\r\n  const CENTER_X = TIMELINE_WIDTH / 2;\r\n  const CARD_WIDTH = 320;\r\n  const CARD_OFFSET = 200; // Distance from center line to card\r\n\r\n  // Path animation properties\r\n  const PATH_ANIMATION_DURATION = 0.3;\r\n  const PATH_ANIMATION_EASE = \"elastic.out(1, 0.4)\";\r\n\r\n  // Enhanced scroll utility functions\r\n  const scrollToNode = useCallback((nodeId) => {\r\n    console.log('scrollToNode called with nodeId:', nodeId);\r\n    const node = nodes.find(n => n.id === nodeId);\r\n    console.log('Found node:', node);\r\n    if (node && scrollContainerRef.current) {\r\n      const container = scrollContainerRef.current;\r\n      const targetY = node.y - (container.clientHeight / 2);\r\n      console.log('Scrolling to Y position:', targetY);\r\n      \r\n      container.scrollTo({\r\n        top: Math.max(0, targetY),\r\n        behavior: 'smooth'\r\n      });\r\n    } else {\r\n      console.log('Node or scroll container not found');\r\n    }\r\n  }, [nodes]);\r\n\r\n  const scrollToTop = useCallback(() => {\r\n    console.log('scrollToTop clicked');\r\n    console.log('scrollContainerRef.current:', scrollContainerRef.current);\r\n    if (scrollContainerRef.current) {\r\n      console.log('Scrolling to top');\r\n      scrollContainerRef.current.scrollTo({\r\n        top: 0,\r\n        behavior: 'smooth'\r\n      });\r\n    } else {\r\n      console.log('scrollContainerRef is null');\r\n    }\r\n  }, []);\r\n\r\n  const scrollToBottom = useCallback(() => {\r\n    console.log('scrollToBottom clicked');\r\n    console.log('scrollContainerRef.current:', scrollContainerRef.current);\r\n    if (scrollContainerRef.current) {\r\n      console.log('Scrolling to bottom, scrollHeight:', scrollContainerRef.current.scrollHeight);\r\n      scrollContainerRef.current.scrollTo({\r\n        top: scrollContainerRef.current.scrollHeight,\r\n        behavior: 'smooth'\r\n      });\r\n    } else {\r\n      console.log('scrollContainerRef is null');\r\n    }\r\n  }, []);\r\n\r\n  // Auto-scroll to new nodes when added\r\n  const scrollToLatestNode = useCallback(() => {\r\n    console.log('scrollToLatestNode clicked');\r\n    if (nodes.length > 0) {\r\n      const latestNode = nodes[nodes.length - 1];\r\n      console.log('Latest node:', latestNode);\r\n      setTimeout(() => scrollToNode(latestNode.id), 100);\r\n    } else {\r\n      console.log('No nodes available');\r\n    }\r\n  }, [nodes, scrollToNode]);\r\n\r\n  // Force scroll container to recognize new height\r\n  const refreshScrollContainer = useCallback(() => {\r\n    if (scrollContainerRef.current) {\r\n      const container = scrollContainerRef.current;\r\n      // Force reflow by reading scroll height\r\n      const _ = container.scrollHeight;\r\n      // Update progress after height change\r\n      const { scrollTop, scrollHeight, clientHeight } = container;\r\n      const maxScroll = scrollHeight - clientHeight;\r\n      const progress = maxScroll > 0 ? Math.round((scrollTop / maxScroll) * 100) : 0;\r\n      setScrollProgress(Math.min(100, Math.max(0, progress)));\r\n    }\r\n  }, []);\r\n\r\n  // Calculate dynamic height based on actual node positions plus padding\r\n  const totalHeight = useMemo(() => {\r\n    if (nodes.length === 0) return 600;\r\n    \r\n    // Find the maximum Y position among all nodes - safe version\r\n    const validYPositions = nodes.map(node => node.y || 0).filter(y => y > 0);\r\n    const maxY = validYPositions.length > 0 ? Math.max(...validYPositions) : 0;\r\n    \r\n    // Use either the calculated height based on spacing, or actual max position + padding  \r\n    const spacingBasedHeight = (nodes.length * 200) + 200; // 200 is NODE_SPACING value\r\n    const positionBasedHeight = maxY + 300; // Extra padding for nodes at bottom\r\n    \r\n    const calculatedHeight = Math.max(600, spacingBasedHeight, positionBasedHeight);\r\n    \r\n    return calculatedHeight;\r\n  }, [nodes]);\r\n\r\n  // Refresh scroll container when totalHeight changes\r\n  useEffect(() => {\r\n    refreshScrollContainer();\r\n  }, [totalHeight]); // Remove refreshScrollContainer from dependencies to prevent loop\r\n\r\n  // Track scroll progress and ensure proper scroll container height\r\n  useEffect(() => {\r\n    const scrollContainer = scrollContainerRef.current;\r\n    if (!scrollContainer) return;\r\n\r\n    const handleScroll = () => {\r\n      const { scrollTop, scrollHeight, clientHeight } = scrollContainer;\r\n      const maxScroll = scrollHeight - clientHeight;\r\n      const progress = maxScroll > 0 ? Math.round((scrollTop / maxScroll) * 100) : 0;\r\n      setScrollProgress(Math.min(100, Math.max(0, progress)));\r\n    };\r\n\r\n    // Initial progress calculation\r\n    handleScroll();\r\n\r\n    scrollContainer.addEventListener('scroll', handleScroll, { passive: true });\r\n    \r\n    return () => {\r\n      scrollContainer.removeEventListener('scroll', handleScroll);\r\n    };\r\n  }, [totalHeight]); // Re-run when totalHeight changes\r\n\r\n  // Store initial positions in ref\r\n  const initialPositions = useRef({});\r\n\r\n  // Auto-save functionality with mind map integration - enhanced for case-specific data\r\n  const saveTimelineData = useCallback(async (force = false) => {\r\n    if (isSaving && !force) return;\r\n    \r\n    setIsSaving(true);\r\n    \r\n    try {\r\n      // Prepare timeline data in the format expected by the mind map case structure\r\n      const timelineData = nodes.map((node, index) => ({\r\n        id: node.id || `timeline-${caseId}-${Date.now()}-${index}`,\r\n        title: node.title || `Timeline Entry ${index + 1}`,\r\n        type: 'timeline_entry',\r\n        timestamp: node.date || new Date().toISOString(),\r\n        date: node.date || new Date().toISOString(),\r\n        orderIndex: index,\r\n        // Patient narrative from card text or existing data\r\n        patient_narrative: cardTexts[node.id]?.patient || node.patientData?.notes || node.patient_narrative || '',\r\n        // Clinical notes from card text or existing data  \r\n        clinical_notes: cardTexts[node.id]?.clinical || node.clinicalData?.notes || node.clinical_notes || '',\r\n        // Combined content for search/display\r\n        content: cardTexts[node.id]?.patient || cardTexts[node.id]?.clinical || node.content || '',\r\n        // Preserve existing patient and clinical data structures\r\n        patientData: {\r\n          ...node.patientData,\r\n          notes: cardTexts[node.id]?.patient || node.patientData?.notes || ''\r\n        },\r\n        clinicalData: {\r\n          ...node.clinicalData,\r\n          notes: cardTexts[node.id]?.clinical || node.clinicalData?.notes || ''\r\n        },\r\n        // Position and metadata\r\n        symptoms: node.symptoms || [],\r\n        x: node.x || CENTER_X,\r\n        y: node.y || (100 + (index * NODE_SPACING)),\r\n        created_at: node.created_at || new Date().toISOString(),\r\n        updated_at: new Date().toISOString()\r\n      }));\r\n\r\n      console.log(`Saving timeline data for case ${caseId}:`, timelineData);\r\n\r\n      // If integrated with mind map, update the case data\r\n      if (caseId && setMindMapData && autoSaveMindMapData) {\r\n        setMindMapData(prevData => {\r\n          const updatedCases = prevData.cases.map(caseItem => {\r\n            if (String(caseItem.id) === String(caseId)) {\r\n              return {\r\n                ...caseItem,\r\n                timeline: timelineData,\r\n                last_updated: new Date().toISOString()\r\n              };\r\n            }\r\n            return caseItem;\r\n          });\r\n          const newData = { ...prevData, cases: updatedCases };\r\n          autoSaveMindMapData(newData);\r\n          return newData;\r\n        });\r\n      } else {\r\n        // Fallback to localStorage for standalone usage\r\n        const standaloneData = {\r\n          nodes: nodes.map(node => ({\r\n            ...node,\r\n            patientData: {\r\n              ...node.patientData,\r\n              notes: cardTexts[node.id]?.patient || node.patientData?.notes || ''\r\n            },\r\n            clinicalData: {\r\n              ...node.clinicalData,\r\n              notes: cardTexts[node.id]?.clinical || node.clinicalData?.notes || ''\r\n            }\r\n          })),\r\n          cardTexts,\r\n          timestamp: new Date().toISOString(),\r\n          version: '1.0'\r\n        };\r\n        localStorage.setItem('timeline-data', JSON.stringify(standaloneData));\r\n      }\r\n      \r\n      // Call parent callback if provided\r\n      if (onDataChange) {\r\n        await onDataChange(timelineData);\r\n      }\r\n      \r\n      setLastSaved(new Date());\r\n      console.log('Timeline data saved successfully');\r\n    } catch (error) {\r\n      console.error('Failed to save timeline data:', error);\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  }, [nodes, cardTexts, isSaving, onDataChange, caseId, setMindMapData, autoSaveMindMapData]);\r\n\r\n  // Debounced auto-save\r\n  const triggerAutoSave = useCallback(() => {\r\n    if (saveTimeoutRef.current) {\r\n      clearTimeout(saveTimeoutRef.current);\r\n    }\r\n    \r\n    saveTimeoutRef.current = setTimeout(() => {\r\n      saveTimelineData();\r\n    }, 800); // 800ms debounce\r\n  }, [saveTimelineData]);\r\n\r\n  // Load timeline data from localStorage or mind map data on mount - enhanced for case-specific integration\r\n  useEffect(() => {\r\n    const loadTimelineData = () => {\r\n      try {\r\n        console.log(`Loading timeline data for case ${caseId}:`, data);\r\n        \r\n        // Priority 1: Load from mind map case data if integrated\r\n        if (caseId && data && Array.isArray(data)) {\r\n          console.log(`Loading ${data.length} timeline entries from case integration for case ${caseId}`);\r\n          \r\n          const timelineNodes = data.map((entry, index) => {\r\n            const nodeId = entry.id || `timeline-${caseId}-${Date.now()}-${index}`;\r\n            const baseY = 100 + (index * NODE_SPACING);\r\n            \r\n            // Initialize card texts from timeline entry data\r\n            setCardTexts(prev => ({\r\n              ...prev,\r\n              [nodeId]: {\r\n                patient: entry.patient_narrative || entry.patientData?.notes || '',\r\n                clinical: entry.clinical_notes || entry.clinicalData?.notes || ''\r\n              }\r\n            }));\r\n            \r\n            // Store initial position in ref\r\n            initialPositions.current[nodeId] = {\r\n              x: entry.x || CENTER_X,\r\n              y: entry.y || baseY,\r\n              index: index\r\n            };\r\n\r\n            // No physics initialization needed for SVG path morphing\r\n            \r\n            return {\r\n              id: nodeId,\r\n              title: entry.title || `Timeline Entry ${index + 1}`,\r\n              date: entry.timestamp || entry.date || new Date().toISOString(),\r\n              type: entry.type || 'timeline_entry',\r\n              patient_narrative: entry.patient_narrative || '',\r\n              clinical_notes: entry.clinical_notes || '',\r\n              content: entry.content || entry.patient_narrative || entry.clinical_notes || '',\r\n              patientData: {\r\n                notes: entry.patient_narrative || '',\r\n                ...entry.patientData\r\n              },\r\n              clinicalData: {\r\n                notes: entry.clinical_notes || '',\r\n                ...entry.clinicalData\r\n              },\r\n              symptoms: entry.symptoms || [],\r\n              x: entry.x || CENTER_X,\r\n              y: entry.y || baseY,\r\n              originalY: baseY,\r\n              orderIndex: entry.orderIndex !== undefined ? entry.orderIndex : index,\r\n              created_at: entry.created_at || new Date().toISOString(),\r\n              updated_at: entry.updated_at || new Date().toISOString()\r\n            };\r\n          });\r\n          \r\n          if (timelineNodes.length > 0) {\r\n            setNodes(timelineNodes);\r\n            console.log(`Successfully loaded ${timelineNodes.length} timeline nodes for case ${caseId}`);\r\n            return true;\r\n          }\r\n        }\r\n        \r\n        // Priority 2: Fallback to localStorage for standalone usage or case with no timeline data\r\n        if (!caseId) {\r\n          const savedData = localStorage.getItem('timeline-data');\r\n          if (savedData) {\r\n            const parsedData = JSON.parse(savedData);\r\n            console.log('Loading saved timeline data from localStorage:', parsedData);\r\n            \r\n            if (parsedData.nodes && parsedData.nodes.length > 0 && nodes.length === 0) {\r\n              setNodes(parsedData.nodes);\r\n              if (parsedData.cardTexts) {\r\n                setCardTexts(parsedData.cardTexts);\r\n              }\r\n              \r\n              // Update refs for saved nodes\r\n              parsedData.nodes.forEach((node, index) => {\r\n                initialPositions.current[node.id] = {\r\n                  x: node.x || CENTER_X,\r\n                  y: node.y || (100 + (index * NODE_SPACING)),\r\n                  index: index\r\n                };\r\n                \r\n                // No physics initialization needed for SVG path morphing\r\n              });\r\n              \r\n              setLastSaved(new Date(parsedData.timestamp));\r\n              return true;\r\n            }\r\n          }\r\n        }\r\n        \r\n        // If no data found, initialize empty timeline for new cases\r\n        console.log(`No existing timeline data found for case ${caseId || 'standalone'}, initializing empty timeline`);\r\n        return false;\r\n        \r\n      } catch (error) {\r\n        console.error('Failed to load timeline data:', error);\r\n        return false;\r\n      }\r\n    };\r\n\r\n    // Try to load saved data first, then fall back to prop data\r\n    const dataLoaded = loadTimelineData();\r\n    if (!dataLoaded && data && data.length > 0 && nodes.length === 0 && !caseId) {\r\n      // Initialize with prop data if no saved data and not integrated with mind map\r\n      const initialNodes = data.map((item, index) => {\r\n        const baseY = 100 + (index * NODE_SPACING);\r\n        const nodeId = item.id;\r\n        \r\n        // Store initial position in ref\r\n        initialPositions.current[nodeId] = {\r\n          x: CENTER_X,\r\n          y: baseY,\r\n          index: index\r\n        };\r\n\r\n        // No physics initialization needed for SVG path morphing\r\n        \r\n        // Initialize card texts from data\r\n        setCardTexts(prev => ({\r\n          ...prev,\r\n          [nodeId]: {\r\n            patient: item.patientData?.notes || item.patientData?.chiefComplaint || '',\r\n            clinical: item.clinicalData?.notes || item.clinicalData?.chiefComplaint || ''\r\n          }\r\n        }));\r\n        \r\n        return {\r\n          ...item,\r\n          x: CENTER_X,\r\n          y: baseY,\r\n          originalY: baseY\r\n        };\r\n      });\r\n      setNodes(initialNodes);\r\n    }\r\n  }, [data, caseId]); // Include caseId in dependencies\r\n\r\n  // Update SVG path connections between nodes\r\n  const updateConnectionPaths = useCallback((draggedNodeId, draggedPosition) => {\r\n    // Find the dragged node's index\r\n    const draggedIndex = initialPositions.current[draggedNodeId]?.index;\r\n    if (draggedIndex === undefined) return;\r\n    \r\n    // Find connections that need updating (previous and next connections)\r\n    const connectionsToUpdate = [];\r\n    \r\n    // If not the first node, update connection from previous node\r\n    if (draggedIndex > 0) {\r\n      const prevNode = nodes[draggedIndex - 1];\r\n      if (prevNode) {\r\n        connectionsToUpdate.push({\r\n          id: `connection-${draggedNodeId}-prev`,\r\n          sourceNode: prevNode,\r\n          targetNode: { ...prevNode, x: draggedPosition.x, y: draggedPosition.y }\r\n        });\r\n      }\r\n    }\r\n    \r\n    // If not the last node, update connection to next node\r\n    if (draggedIndex < nodes.length - 1) {\r\n      const nextNode = nodes[draggedIndex + 1];\r\n      if (nextNode) {\r\n        connectionsToUpdate.push({\r\n          id: `connection-${draggedNodeId}-next`,\r\n          sourceNode: { ...nextNode, x: draggedPosition.x, y: draggedPosition.y },\r\n          targetNode: nextNode\r\n        });\r\n      }\r\n    }\r\n    \r\n    // Update each connection path with GSAP animation\r\n    connectionsToUpdate.forEach(connection => {\r\n      const pathRef = pathRefs.current[connection.id];\r\n      \r\n      if (pathRef) {\r\n        // Calculate curved Bezier path\r\n        const x1 = connection.sourceNode.x;\r\n        const y1 = connection.sourceNode.y;\r\n        const x2 = connection.targetNode.x;\r\n        const y2 = connection.targetNode.y;\r\n        \r\n        // Create a curved path using cubic Bezier that bows slightly outward\r\n        const pathD = `M ${x1} ${y1} C ${x1} ${(y1 + y2) / 2}, ${x2} ${(y1 + y2) / 2}, ${x2} ${y2}`;\r\n        \r\n        // Animate the path morphing with GSAP\r\n        gsap.to(pathRef, {\r\n          attr: { d: pathD },\r\n          duration: PATH_ANIMATION_DURATION,\r\n          ease: PATH_ANIMATION_EASE\r\n        });\r\n      }\r\n    });\r\n  }, [nodes]);\r\n\r\n  // Native drag handling for instant response\r\n  const handleMouseDown = useCallback((event, nodeId) => {\r\n    event.preventDefault();\r\n    \r\n    dragState.current.isDragging = true;\r\n    dragState.current.draggedNodeId = nodeId;\r\n    setIsDragging(true);\r\n\r\n    const currentNodeRef = nodeRefs.current[nodeId];\r\n    if (!currentNodeRef) return;\r\n\r\n    const rect = timelineRef.current?.getBoundingClientRect();\r\n    if (!rect) return;\r\n\r\n    const initialPos = initialPositions.current[nodeId];\r\n    if (!initialPos) return;\r\n\r\n    // Calculate initial offset between mouse and node center\r\n    const startMouseX = event.clientX;\r\n    const startMouseY = event.clientY;\r\n    const startNodeX = initialPos.x;\r\n    const startNodeY = initialPos.y;\r\n\r\n    const handleMouseMove = (moveEvent) => {\r\n      // Calculate exact mouse position relative to timeline container\r\n      const rect = timelineRef.current?.getBoundingClientRect();\r\n      if (!rect) return;\r\n\r\n      const mouseX = moveEvent.clientX - rect.left;\r\n      const mouseY = moveEvent.clientY - rect.top;\r\n\r\n      // Apply constraints - allow Y to expand beyond current totalHeight\r\n      const constrainedX = Math.max(50, Math.min(TIMELINE_WIDTH - 50, mouseX));\r\n      // Remove rigid Y constraint to allow expansion, but keep minimum boundary\r\n      const constrainedY = Math.max(50, mouseY);\r\n\r\n      // Position node directly at mouse position (accounting for node center offset)\r\n      currentNodeRef.style.left = `${constrainedX - 30}px`; // Updated for bigger nodes (60x60)\r\n      currentNodeRef.style.top = `${constrainedY - 30}px`; // Updated for bigger nodes (60x60)\r\n      currentNodeRef.style.transform = '';\r\n\r\n      // Update node state immediately for cards to follow\r\n      setNodes(prevNodes => \r\n        prevNodes.map(node => \r\n          node.id === nodeId \r\n            ? { ...node, x: constrainedX, y: constrainedY }\r\n            : node\r\n        )\r\n      );\r\n\r\n      // Update connection paths with GSAP animations\r\n      updateConnectionPaths(nodeId, { x: constrainedX, y: constrainedY });\r\n    };\r\n\r\n    const handleMouseUp = (upEvent) => {\r\n      dragState.current.isDragging = false;\r\n      dragState.current.draggedNodeId = null;\r\n      setIsDragging(false);\r\n\r\n      // Add a small wobble effect on path when drag ends\r\n      const connectionIds = [\r\n        `connection-${nodeId}-prev`,\r\n        `connection-${nodeId}-next`\r\n      ];\r\n      \r\n      // Apply wobble animation to affected paths\r\n      connectionIds.forEach(id => {\r\n        const pathRef = pathRefs.current[id];\r\n        if (pathRef) {\r\n          gsap.fromTo(pathRef,\r\n            { rotation: -1 },\r\n            { rotation: 0, duration: 0.3, ease: \"sine.out\" }\r\n          );\r\n        }\r\n      });\r\n\r\n      // Calculate final position from current DOM position\r\n      const rect = timelineRef.current?.getBoundingClientRect();\r\n      if (!rect) return;\r\n\r\n      const finalX = Math.max(50, Math.min(TIMELINE_WIDTH - 50, upEvent.clientX - rect.left));\r\n      // Remove rigid Y constraint to allow expansion beyond current totalHeight\r\n      const finalY = Math.max(50, upEvent.clientY - rect.top);\r\n\r\n      // Update state\r\n      setNodes(prevNodes => \r\n        prevNodes.map(node => \r\n          node.id === nodeId \r\n            ? { ...node, x: finalX, y: finalY }\r\n            : node\r\n        )\r\n      );\r\n\r\n      // Update the initial position reference for future drags\r\n      initialPositions.current[nodeId].x = finalX;\r\n      initialPositions.current[nodeId].y = finalY;\r\n\r\n      // Trigger auto-save after position change\r\n      triggerAutoSave();\r\n\r\n      // Refresh scroll container to recognize new height\r\n      setTimeout(() => refreshScrollContainer(), 50);\r\n\r\n      // Clean up event listeners\r\n      document.removeEventListener('mousemove', handleMouseMove);\r\n      document.removeEventListener('mouseup', handleMouseUp);\r\n\r\n      // Small delay to allow drag state to clear before click events\r\n      setTimeout(() => {\r\n        dragState.current.isDragging = false;\r\n      }, 10);\r\n    };\r\n\r\n    // Add event listeners\r\n    document.addEventListener('mousemove', handleMouseMove);\r\n    document.addEventListener('mouseup', handleMouseUp);\r\n  }, [totalHeight, updateConnectionPaths, triggerAutoSave]); // Remove refreshScrollContainer to prevent dependency loop\r\n\r\n  // Handle node click - trigger edit mode for both cards and scroll to center\r\n  const handleNodeClick = useCallback((node) => {\r\n    // Only trigger if not currently dragging\r\n    if (dragState.current.isDragging) return;\r\n    \r\n    // Smooth scroll to center the clicked node\r\n    if (scrollContainerRef.current) {\r\n      const container = scrollContainerRef.current;\r\n      const targetY = node.y - (container.clientHeight / 2);\r\n      \r\n      container.scrollTo({\r\n        top: Math.max(0, targetY),\r\n        behavior: 'smooth'\r\n      });\r\n    }\r\n    \r\n    // Clear any hover state and set editing state for this node only\r\n    setHoveredNode(null);\r\n    setEditingCards({\r\n      [node.id]: { patient: true, clinical: true }\r\n    });\r\n    onNodeClick?.(node);\r\n  }, [onNodeClick]);\r\n\r\n  // Handle node hover\r\n  const handleNodeHover = useCallback((node, isHovering) => {\r\n    if (!dragState.current.isDragging) {\r\n      if (isHovering) {\r\n        // Clear any existing editing states when hovering over a different node\r\n        setEditingCards({});\r\n        setHoveredNode(node);\r\n      } else {\r\n        setHoveredNode(null);\r\n      }\r\n      onNodeHover?.(node, isHovering);\r\n    }\r\n  }, [onNodeHover]);\r\n\r\n  // Handle text change with auto-save\r\n  const handleTextChange = useCallback((nodeId, cardType, newText) => {\r\n    setCardTexts(prev => ({\r\n      ...prev,\r\n      [nodeId]: {\r\n        ...prev[nodeId],\r\n        [cardType]: newText\r\n      }\r\n    }));\r\n    \r\n    // Trigger auto-save after text change\r\n    triggerAutoSave();\r\n  }, [triggerAutoSave]);\r\n\r\n  // Handle click outside card (save and exit edit mode for both cards)\r\n  const handleClickOutside = useCallback((nodeId, cardType) => {\r\n    setEditingCards(prev => ({\r\n      ...prev,\r\n      [nodeId]: { patient: false, clinical: false }\r\n    }));\r\n  }, []);\r\n\r\n  // Determine if cards should be visible\r\n  const shouldShowCards = useCallback((nodeId) => {\r\n    const isHovered = hoveredNode?.id === nodeId;\r\n    const isEditing = editingCards[nodeId]?.patient || editingCards[nodeId]?.clinical;\r\n    console.log(`Cards visibility check for ${nodeId}:`, { isHovered, isEditing, editingState: editingCards[nodeId] });\r\n    return isHovered || isEditing;\r\n  }, [hoveredNode, editingCards]);\r\n\r\n  // Handle adding new node to the timeline\r\n  const handleAddNode = useCallback(() => {\r\n    if (isAnimatingNewNode) return; // Prevent multiple additions during animation\r\n    \r\n    setIsAnimatingNewNode(true);\r\n    \r\n    // Generate new node data\r\n    const newNodeId = `node-${Date.now()}`;\r\n    const newIndex = nodes.length;\r\n    const baseY = 100 + (newIndex * NODE_SPACING);\r\n    \r\n    const newNodeData = {\r\n      id: newNodeId,\r\n      date: new Date().toISOString(),\r\n      patientData: {\r\n        chiefComplaint: '',\r\n        notes: ''\r\n      },\r\n      clinicalData: {\r\n        chiefComplaint: '',\r\n        notes: ''\r\n      },\r\n      x: CENTER_X,\r\n      y: baseY,\r\n      originalY: baseY\r\n    };\r\n\r\n    // Store initial position and physics data\r\n    initialPositions.current[newNodeId] = {\r\n      x: CENTER_X,\r\n      y: baseY,\r\n      index: newIndex\r\n    };\r\n\r\n    // No physics initialization needed for SVG path morphing\r\n\r\n    // Initialize card texts\r\n    setCardTexts(prev => ({\r\n      ...prev,\r\n      [newNodeId]: {\r\n        patient: '',\r\n        clinical: ''\r\n      }\r\n    }));\r\n\r\n    // Add new node to the timeline\r\n    setNodes(prevNodes => {\r\n      const updatedNodes = [...prevNodes, newNodeData];\r\n      \r\n      // Update all node indices in initialPositions\r\n      updatedNodes.forEach((node, index) => {\r\n        if (initialPositions.current[node.id]) {\r\n          initialPositions.current[node.id].index = index;\r\n        }\r\n      });\r\n      \r\n      return updatedNodes;\r\n    });\r\n\r\n    // Scroll to the new node after a brief delay for animation\r\n    setTimeout(() => {\r\n      const newNodeElement = document.querySelector(`[data-node-id=\"${newNodeId}\"]`);\r\n      if (newNodeElement && scrollContainerRef.current) {\r\n        newNodeElement.scrollIntoView({ \r\n          behavior: 'smooth', \r\n          block: 'center',\r\n          inline: 'nearest' \r\n        });\r\n      }\r\n      setIsAnimatingNewNode(false);\r\n      \r\n      // Trigger auto-save after adding new node\r\n      triggerAutoSave();\r\n    }, 800);\r\n\r\n  }, [nodes.length, isAnimatingNewNode, triggerAutoSave]);\r\n\r\n  // Handle resetting layout to original straight line\r\n  const handleResetLayout = useCallback(() => {\r\n    // Reset all nodes to their original positions\r\n    setNodes(prevNodes => \r\n      prevNodes.map((node, index) => {\r\n        const baseY = 100 + (index * NODE_SPACING);\r\n        const resetNode = {\r\n          ...node,\r\n          x: CENTER_X,\r\n          y: baseY,\r\n          originalY: baseY\r\n        };\r\n\r\n        // Update initial positions reference\r\n        if (initialPositions.current[node.id]) {\r\n          initialPositions.current[node.id].x = CENTER_X;\r\n          initialPositions.current[node.id].y = baseY;\r\n          initialPositions.current[node.id].index = index;\r\n        }\r\n\r\n        // Reset physics state\r\n        // Update connection paths after layout reset\r\n        const prevId = `connection-${node.id}-prev`;\r\n        const nextId = `connection-${node.id}-next`;\r\n        \r\n        [prevId, nextId].forEach(id => {\r\n          const pathRef = pathRefs.current[id];\r\n          if (pathRef) {\r\n            gsap.to(pathRef, {\r\n              attr: { d: \"\" }, // Will be recalculated when nodes are rendered\r\n              duration: PATH_ANIMATION_DURATION,\r\n              ease: PATH_ANIMATION_EASE\r\n            });\r\n          }\r\n        });\r\n\r\n        // Update DOM positions immediately\r\n        const nodeElement = document.querySelector(`[data-node-id=\"${node.id}\"]`);\r\n        if (nodeElement) {\r\n          nodeElement.style.left = `${CENTER_X - 30}px`;\r\n          nodeElement.style.top = `${baseY - 30}px`;\r\n          nodeElement.style.transform = '';\r\n        }\r\n\r\n        // Update card positions\r\n        const patientCard = document.querySelector(`[data-patient-card=\"${node.id}\"]`);\r\n        const clinicalCard = document.querySelector(`[data-clinical-card=\"${node.id}\"]`);\r\n        if (patientCard) {\r\n          patientCard.style.left = `${CENTER_X - CARD_OFFSET - CARD_WIDTH}px`;\r\n          patientCard.style.top = `${baseY - 60}px`;\r\n          patientCard.style.transform = '';\r\n        }\r\n        if (clinicalCard) {\r\n          clinicalCard.style.left = `${CENTER_X + CARD_OFFSET}px`;\r\n          clinicalCard.style.top = `${baseY - 60}px`;\r\n          clinicalCard.style.transform = '';\r\n        }\r\n\r\n        return resetNode;\r\n      })\r\n    );\r\n    \r\n    // Trigger auto-save after reset\r\n    triggerAutoSave();\r\n  }, [triggerAutoSave]);\r\n\r\n  // Manual save function\r\n  const handleManualSave = useCallback(() => {\r\n    saveTimelineData(true); // Force save\r\n  }, [saveTimelineData]);\r\n\r\n  // Cleanup auto-save timeout on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (saveTimeoutRef.current) {\r\n        clearTimeout(saveTimeoutRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"relative w-full h-full\">\r\n      {/* Inject custom scrollbar styles */}\r\n      <style>{scrollbarStyles}</style>\r\n      \r\n      {/* Control Buttons Container */}\r\n      <div className=\"absolute top-4 right-4 flex gap-2 z-40\">\r\n        {/* Scroll Navigation */}\r\n        <motion.button\r\n          className=\"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-3 py-2 rounded-lg shadow-lg flex items-center gap-2 transition-all hover:shadow-blue-300/30\"\r\n          onClick={scrollToTop}\r\n          whileHover={{ scale: 1.05 }}\r\n          whileTap={{ scale: 0.95 }}\r\n          initial={{ opacity: 0, x: 20 }}\r\n          animate={{ opacity: 1, x: 0 }}\r\n          transition={{ delay: 1.8, duration: 0.5 }}\r\n          title=\"Scroll to Top\"\r\n        >\r\n          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 10l7-7m0 0l7 7m-7-7v18\" />\r\n          </svg>\r\n          Top\r\n        </motion.button>\r\n\r\n        <motion.button\r\n          className=\"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-3 py-2 rounded-lg shadow-lg flex items-center gap-2 transition-all hover:shadow-blue-300/30\"\r\n          onClick={scrollToBottom}\r\n          whileHover={{ scale: 1.05 }}\r\n          whileTap={{ scale: 0.95 }}\r\n          initial={{ opacity: 0, x: 20 }}\r\n          animate={{ opacity: 1, x: 0 }}\r\n          transition={{ delay: 2.0, duration: 0.5 }}\r\n          title=\"Scroll to Bottom\"\r\n        >\r\n          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 14l-7 7m0 0l-7-7m7 7V4\" />\r\n          </svg>\r\n          Bottom\r\n        </motion.button>\r\n\r\n        <motion.button\r\n          className=\"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-3 py-2 rounded-lg shadow-lg flex items-center gap-2 transition-all hover:shadow-indigo-300/30\"\r\n          onClick={scrollToLatestNode}\r\n          whileHover={{ scale: 1.05 }}\r\n          whileTap={{ scale: 0.95 }}\r\n          initial={{ opacity: 0, x: 20 }}\r\n          animate={{ opacity: 1, x: 0 }}\r\n          transition={{ delay: 2.2, duration: 0.5 }}\r\n          title=\"Go to Latest Entry\"\r\n        >\r\n          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n          </svg>\r\n          Latest\r\n        </motion.button>\r\n\r\n        {/* Save Button */}\r\n        <motion.button\r\n          className={`${\r\n            isSaving \r\n              ? 'bg-gradient-to-r from-green-500 to-emerald-600 cursor-not-allowed' \r\n              : 'bg-gradient-to-r from-green-500 to-emerald-600 hover:shadow-green-300/30'\r\n          } text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2 transition-all`}\r\n          onClick={handleManualSave}\r\n          disabled={isSaving}\r\n          whileHover={!isSaving ? { scale: 1.05 } : {}}\r\n          whileTap={!isSaving ? { scale: 0.95 } : {}}\r\n          initial={{ opacity: 0, x: 20 }}\r\n          animate={{ opacity: 1, x: 0 }}\r\n          transition={{ delay: 1.4, duration: 0.5 }}\r\n        >\r\n          {isSaving ? (\r\n            <svg className=\"w-4 h-4 animate-spin\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\r\n            </svg>\r\n          ) : (\r\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4\" />\r\n            </svg>\r\n          )}\r\n          {isSaving ? 'Saving...' : 'Save'}\r\n        </motion.button>\r\n\r\n        {/* Reset Layout Button */}\r\n        <motion.button\r\n          className=\"bg-gradient-to-r from-gray-600 to-slate-700 text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2 transition-all hover:shadow-gray-400/20\"\r\n          onClick={handleResetLayout}\r\n          whileHover={{ scale: 1.05 }}\r\n          whileTap={{ scale: 0.95 }}\r\n          initial={{ opacity: 0, x: 20 }}\r\n          animate={{ opacity: 1, x: 0 }}\r\n          transition={{ delay: 1.2, duration: 0.5 }}\r\n        >\r\n          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\r\n          </svg>\r\n          Reset Layout\r\n        </motion.button>\r\n\r\n        {/* Add Node Button */}\r\n        <motion.button\r\n          className=\"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2 transition-all hover:shadow-blue-400/30\"\r\n          onClick={handleAddNode}\r\n          disabled={isAnimatingNewNode}\r\n          whileHover={{ scale: 1.05 }}\r\n          whileTap={{ scale: 0.95 }}\r\n          initial={{ opacity: 0, x: 20 }}\r\n          animate={{ opacity: 1, x: 0 }}\r\n          transition={{ delay: 1, duration: 0.5 }}\r\n        >\r\n          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\r\n          </svg>\r\n          {isAnimatingNewNode ? 'Adding...' : 'Add Node'}\r\n        </motion.button>\r\n      </div>\r\n\r\n      {/* Scrollable Timeline Container */}\r\n      <div \r\n        ref={scrollContainerRef}\r\n        className=\"timeline-scrollbar relative w-full overflow-y-auto\"\r\n        style={{ \r\n          height: '80vh', // Fixed height to ensure scrolling works\r\n          maxHeight: '600px' // Maximum height constraint\r\n        }}\r\n        onClick={(e) => {\r\n          // Close all edit modes when clicking outside cards and nodes\r\n          const isClickOnCard = e.target.closest('.timeline-card');\r\n          const isClickOnNode = e.target.closest('.timeline-node');\r\n          const isClickOnButton = e.target.closest('button');\r\n          \r\n          if (!isClickOnCard && !isClickOnNode && !isClickOnButton) {\r\n            setEditingCards({});\r\n          }\r\n        }}\r\n      >\r\n        <div \r\n          className=\"relative w-full\" \r\n          style={{ \r\n            height: Math.max((totalHeight || 600) + 200, window.innerHeight || 600),\r\n            minHeight: '100vh' // Ensure minimum height is always at least viewport height\r\n          }}\r\n        >\r\n      {/* Main timeline container */}\r\n      <div \r\n        ref={timelineRef}\r\n        className=\"relative mx-auto\"\r\n        style={{ width: TIMELINE_WIDTH, height: (totalHeight || 600) + 200 }}\r\n      >\r\n        {/* Dynamic vertical line that responds to node movement */}\r\n        <svg \r\n          className=\"absolute inset-0 pointer-events-none\"\r\n          style={{ zIndex: 1 }}\r\n          width={TIMELINE_WIDTH}\r\n          height={totalHeight + 200}\r\n          viewBox={`0 0 ${TIMELINE_WIDTH} ${totalHeight + 200}`}\r\n        >\r\n          <path\r\n            d={`M ${CENTER_X} 50 ${nodes.map(node => `L ${node.x} ${node.y}`).join(' ')}`}\r\n            stroke=\"url(#timelineGradient)\"\r\n            strokeWidth=\"2\"\r\n            fill=\"none\"\r\n            strokeDasharray=\"5,5\"\r\n          />\r\n          \r\n          {/* Define gradients for timeline elements */}\r\n          <defs>\r\n            <linearGradient id=\"timelineGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n              <stop offset=\"0%\" stopColor=\"#93C5FD\" />\r\n              <stop offset=\"100%\" stopColor=\"#C4B5FD\" />\r\n            </linearGradient>\r\n            <linearGradient id=\"connectionGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n              <stop offset=\"0%\" stopColor=\"#3B82F6\" />\r\n              <stop offset=\"100%\" stopColor=\"#8B5CF6\" />\r\n            </linearGradient>\r\n            <filter id=\"glow\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\r\n              <feGaussianBlur stdDeviation=\"3\" result=\"blur\" />\r\n              <feComposite in=\"SourceGraphic\" in2=\"blur\" operator=\"over\" />\r\n            </filter>\r\n          </defs>\r\n          \r\n          {/* Curved connection paths between nodes with GSAP morphing */}\r\n          {nodes.map((node, index) => {\r\n            if (index === 0) return null;\r\n            const prevNode = nodes[index - 1];\r\n            \r\n            // Create curved Bezier path\r\n            const x1 = prevNode.x;\r\n            const y1 = prevNode.y;\r\n            const x2 = node.x;\r\n            const y2 = node.y;\r\n            const pathD = `M ${x1} ${y1} C ${x1} ${(y1 + y2) / 2}, ${x2} ${(y1 + y2) / 2}, ${x2} ${y2}`;\r\n            \r\n            // Create connection IDs for both directions\r\n            const prevConnectionId = `connection-${prevNode.id}-next`;\r\n            const nextConnectionId = `connection-${node.id}-prev`;\r\n            \r\n            // Generate the key using both node IDs to ensure uniqueness\r\n            const connectionKey = `connection-${prevNode.id}-${node.id}`;\r\n            \r\n            return (\r\n              <motion.path\r\n                key={connectionKey}\r\n                ref={el => {\r\n                  // Store refs for both connecting nodes for animation\r\n                  pathRefs.current[prevConnectionId] = el;\r\n                  pathRefs.current[nextConnectionId] = el;\r\n                }}\r\n                d={pathD}\r\n                stroke=\"url(#connectionGradient)\"\r\n                strokeWidth=\"3\"\r\n                fill=\"none\"\r\n                strokeLinecap=\"round\"\r\n                strokeOpacity=\"0.8\"\r\n                filter=\"url(#glow)\"\r\n                style={{ transformOrigin: 'center' }}\r\n                initial={{ opacity: 1, pathLength: 0 }}\r\n                animate={{ opacity: 1, pathLength: 1 }}\r\n                transition={{ duration: 0.8, delay: Math.min(0.5, index * 0.1) }}\r\n              />\r\n            );\r\n          })}\r\n        </svg>\r\n\r\n        {/* Timeline title */}\r\n        <motion.div\r\n          className=\"absolute text-center\"\r\n          style={{\r\n            left: CENTER_X - 150,\r\n            top: 10,\r\n            width: 300\r\n          }}\r\n          initial={{ opacity: 0, y: -20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.5, duration: 0.6 }}\r\n        >\r\n          <h2 className=\"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\">Patient Timeline</h2>\r\n          <p className=\"text-sm text-gray-600\">Instant 1:1 drag • Hover for cards • Click to edit</p>\r\n        </motion.div>\r\n\r\n        {/* All connections are now handled by the SVG path elements above */}\r\n\r\n        {/* Timeline nodes */}\r\n        {nodes.map((node, index) => (\r\n          <div key={node.id}>\r\n            {/* Pure DOM Draggable Timeline Node */}\r\n            <motion.div\r\n              ref={el => nodeRefs.current[node.id] = el}\r\n              data-node-id={node.id}\r\n              className={`timeline-node absolute cursor-grab active:cursor-grabbing transform-gpu ${\r\n                hoveredNode?.id === node.id\r\n                  ? 'ring-[5px] ring-purple-200/40 shadow-xl scale-110' \r\n                  : 'shadow-md hover:shadow-lg hover:scale-105'\r\n              }`}\r\n              style={{\r\n                left: node.x - 30, // Updated for bigger nodes\r\n                top: node.y - 30, // Updated for bigger nodes\r\n                width: 60, // Increased from 40\r\n                height: 60, // Increased from 40\r\n                borderRadius: '50%',\r\n                background: hoveredNode?.id === node.id\r\n                  ? 'linear-gradient(135deg, #8B5CF6, #6366F1, #4F46E5)' // Purple to indigo gradient when hovered\r\n                  : 'linear-gradient(135deg, #3B82F6, #6366F1, #4F46E5)', // Blue to indigo gradient normally\r\n                boxShadow: hoveredNode?.id === node.id\r\n                  ? '0 0 20px rgba(139, 92, 246, 0.6), inset 0 0 10px rgba(255, 255, 255, 0.2)' // Enhanced purple glow when hovered\r\n                  : '0 0 15px rgba(59, 130, 246, 0.5), inset 0 0 8px rgba(255, 255, 255, 0.2)', // Enhanced blue glow normally\r\n                border: '3px solid rgba(255, 255, 255, 0.9)',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                zIndex: 10,\r\n                transition: dragState.current.isDragging \r\n                  ? 'none' \r\n                  : 'all 0.2s cubic-bezier(0.4, 0, 0.2, 1), transform 0.15s ease-out',\r\n                willChange: dragState.current.isDragging ? 'transform' : 'auto'\r\n              }}\r\n              initial={{ scale: 0, opacity: 0 }}\r\n              animate={{ scale: 1, opacity: 1 }}\r\n              transition={{ \r\n                type: \"spring\", \r\n                stiffness: 200, \r\n                damping: 20,\r\n                delay: index * 0.1 \r\n              }}\r\n              onMouseDown={(event) => {\r\n                // Add active state animation\r\n                const nodeEl = event.currentTarget;\r\n                nodeEl.style.transform = 'scale(0.95)';\r\n                setTimeout(() => {\r\n                  if (nodeEl.style.transform === 'scale(0.95)') {\r\n                    nodeEl.style.transform = '';\r\n                  }\r\n                }, 100);\r\n                \r\n                handleMouseDown(event, node.id);\r\n              }}\r\n              onClick={(event) => {\r\n                event.stopPropagation();\r\n                // Small delay to ensure drag state is cleared\r\n                setTimeout(() => {\r\n                  if (!dragState.current.isDragging) {\r\n                    handleNodeClick(node);\r\n                  }\r\n                }, 20);\r\n              }}\r\n              onMouseEnter={(event) => {\r\n                // Only trigger hover if not dragging\r\n                if (!dragState.current.isDragging) {\r\n                  handleNodeHover(node, true);\r\n                }\r\n              }}\r\n              onMouseLeave={(event) => {\r\n                // Only trigger hover if not dragging\r\n                if (!dragState.current.isDragging) {\r\n                  handleNodeHover(node, false);\r\n                }\r\n              }}\r\n            >\r\n              {/* Node inner circle with pulse animation and icon */}\r\n              <div className=\"w-full h-full rounded-full bg-gradient-to-b from-white/40 to-white/10 flex items-center justify-center relative overflow-hidden backdrop-blur-[1px]\">\r\n                {/* Glass effect background */}\r\n                <div className=\"absolute inset-1 rounded-full bg-white/10 backdrop-blur-[2px]\"></div>\r\n                \r\n                {/* Icon with enhanced styling */}\r\n                <div className=\"z-10 text-white drop-shadow-lg relative\">\r\n                  {/* Show different icons based on node content or type */}\r\n                  {node.symptoms && node.symptoms.length > 0 ? (\r\n                    <svg className=\"w-6 h-6 filter drop-shadow-md\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                      <path d=\"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z\" />\r\n                      <path fillRule=\"evenodd\" d=\"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5z\" clipRule=\"evenodd\" />\r\n                    </svg>\r\n                  ) : node.patientData?.notes ? (\r\n                    <svg className=\"w-6 h-6 filter drop-shadow-md\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                      <path fillRule=\"evenodd\" d=\"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z\" clipRule=\"evenodd\" />\r\n                    </svg>\r\n                  ) : (\r\n                    <svg className=\"w-6 h-6 filter drop-shadow-md\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                      <path fillRule=\"evenodd\" d=\"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z\" clipRule=\"evenodd\" />\r\n                    </svg>\r\n                  )}\r\n                </div>\r\n                {/* Enhanced pulse ring effect with gradient */}\r\n                <div \r\n                  className=\"absolute inset-0 rounded-full bg-gradient-to-r from-white/30 to-blue-300/30\"\r\n                  style={{\r\n                    animation: hoveredNode?.id === node.id \r\n                      ? 'pulse 1.8s cubic-bezier(0.4, 0, 0.6, 1) infinite' \r\n                      : 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',\r\n                    opacity: hoveredNode?.id === node.id ? 0.8 : 0.4\r\n                  }}\r\n                ></div>\r\n                \r\n                {/* Second pulse ring for enhanced effect */}\r\n                {hoveredNode?.id === node.id && (\r\n                  <div \r\n                    className=\"absolute inset-[-5px] rounded-full bg-purple-300/20\"\r\n                    style={{\r\n                      animation: 'pulse 2.2s cubic-bezier(0.4, 0, 0.6, 1) infinite 0.5s'\r\n                    }}\r\n                  ></div>\r\n                )}\r\n              </div>\r\n              \r\n              {/* Date label with slide animation */}\r\n              <div \r\n                className={`absolute text-xs font-medium whitespace-nowrap transition-all duration-200 ease-out ${\r\n                  hoveredNode?.id === node.id \r\n                  ? 'translate-x-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-md' \r\n                  : 'bg-white/90 text-gray-700'\r\n                } px-2 py-1 rounded-md shadow-sm`}\r\n                style={{\r\n                  left: 70, // Adjusted for bigger node\r\n                  top: '50%',\r\n                  transform: hoveredNode?.id === node.id \r\n                    ? 'translateY(-50%) translateX(8px) scale(1.05)' \r\n                    : 'translateY(-50%)',\r\n                  borderLeft: hoveredNode?.id === node.id\r\n                    ? '3px solid rgba(255, 255, 255, 0.7)'\r\n                    : 'none'\r\n                }}\r\n              >\r\n                {/* Format date to be more readable */}\r\n                {(() => {\r\n                  const date = new Date(node.date);\r\n                  return `${date.toLocaleDateString(undefined, { month: 'short', day: 'numeric' })} · ${date.toLocaleTimeString(undefined, { hour: '2-digit', minute: '2-digit' })}`;\r\n                })()}\r\n              </div>\r\n            </motion.div>\r\n\r\n            {/* Hover/Edit Cards */}\r\n            <AnimatePresence>\r\n              {shouldShowCards(node.id) && (\r\n                <>\r\n                  {/* Patient Card */}\r\n                  <motion.div\r\n                    data-patient-card={node.id}\r\n                    className=\"timeline-card absolute bg-white rounded-lg shadow-xl z-20 backdrop-blur-sm\"\r\n                    style={{\r\n                      left: node.x - CARD_OFFSET - CARD_WIDTH,\r\n                      top: node.y - 60,\r\n                      width: CARD_WIDTH,\r\n                      borderRadius: '0.75rem',\r\n                      borderLeft: '4px solid transparent',\r\n                      borderImage: 'linear-gradient(to bottom, #3B82F6, #8B5CF6) 1',\r\n                      boxShadow: '0 10px 25px -5px rgba(30, 58, 138, 0.3), 0 8px 10px -6px rgba(67, 56, 202, 0.25)',\r\n                      padding: '16px',\r\n                      background: 'linear-gradient(to bottom right, rgba(30, 41, 59, 0.85), rgba(15, 23, 42, 0.9))',\r\n                    }}\r\n                    initial={{ opacity: 0, scale: 0.8, x: 20 }}\r\n                    animate={{ opacity: 1, scale: 1, x: 0 }}\r\n                    exit={{ opacity: 0, scale: 0.8, x: 20 }}\r\n                    transition={{ type: \"spring\", stiffness: 300, damping: 25 }}\r\n                  >\r\n                    <div className=\"flex items-center mb-3\">\r\n                      <div className=\"w-3 h-3 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-full mr-2 shadow-sm\"></div>\r\n                      <h4 className=\"font-semibold bg-gradient-to-r from-blue-300 to-indigo-300 bg-clip-text text-transparent\">Patient Narrative</h4>\r\n                      {editingCards[node.id]?.patient && (\r\n                        <div className=\"ml-auto text-xs font-medium px-2 py-0.5 rounded-full bg-blue-900/50 text-blue-200 shadow-inner border border-blue-700/30\">Editing</div>\r\n                      )}\r\n                    </div>\r\n                    \r\n                    {editingCards[node.id]?.patient ? (\r\n                      <textarea\r\n                        className=\"w-full h-24 p-3 border-2 border-blue-700/50 rounded-lg resize-none text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-600 shadow-inner bg-slate-800/70 backdrop-blur-sm transition-all text-blue-100\"\r\n                        value={cardTexts[node.id]?.patient || ''}\r\n                        onChange={(e) => handleTextChange(node.id, 'patient', e.target.value)}\r\n                        onBlur={(e) => {\r\n                          // Save and close when focus is lost\r\n                          handleClickOutside(node.id, 'patient');\r\n                        }}\r\n                        placeholder=\"Enter patient narrative...\"\r\n                        style={{\r\n                          boxShadow: 'inset 0 2px 4px 0 rgba(29, 78, 216, 0.2)'\r\n                        }}\r\n                      />\r\n                    ) : (\r\n                      <div\r\n                        className=\"text-sm text-blue-100 min-h-[60px] p-3 border-2 border-transparent hover:border-blue-700/40 rounded-lg cursor-text hover:bg-slate-800/50 transition-all\"\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          // Clear any hover state and set editing for this node only\r\n                          setHoveredNode(null);\r\n                          setEditingCards({\r\n                            [node.id]: { patient: true, clinical: true }\r\n                          });\r\n                        }}\r\n                        style={{\r\n                          backgroundImage: cardTexts[node.id]?.patient ? 'linear-gradient(to bottom right, rgba(30, 58, 138, 0.3), rgba(30, 64, 175, 0.15))' : 'none',\r\n                          boxShadow: cardTexts[node.id]?.patient ? 'inset 0 1px 2px 0 rgba(29, 78, 216, 0.15)' : 'none'\r\n                        }}\r\n                      >\r\n                        {cardTexts[node.id]?.patient || (\r\n                          <span className=\"text-blue-300 italic\">Click to add patient narrative...</span>\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                    \r\n                    {/* Connection line to node - gradient line with animated pulse */}\r\n                    <div className=\"absolute\" style={{\r\n                        width: CARD_OFFSET - 20,\r\n                        height: 2,\r\n                        right: -CARD_OFFSET + 20,\r\n                        top: 50,\r\n                        zIndex: 0,\r\n                        overflow: 'hidden'\r\n                      }}\r\n                    >\r\n                      <div \r\n                        className=\"h-full w-full bg-gradient-to-r from-blue-300 via-indigo-400 to-blue-500\"\r\n                        style={{\r\n                          animation: hoveredNode?.id === node.id \r\n                            ? 'shimmer 1.5s linear infinite' \r\n                            : 'none'\r\n                        }}\r\n                      ></div>\r\n                      <style jsx>{`\r\n                        @keyframes shimmer {\r\n                          0% { transform: translateX(-100%); }\r\n                          100% { transform: translateX(100%); }\r\n                        }\r\n                      `}</style>\r\n                    </div>\r\n                  </motion.div>\r\n\r\n                  {/* Clinical Card */}\r\n                  <motion.div\r\n                    data-clinical-card={node.id}\r\n                    className=\"timeline-card absolute bg-white rounded-lg shadow-xl z-20 backdrop-blur-sm\"\r\n                    style={{\r\n                      left: node.x + CARD_OFFSET,\r\n                      top: node.y - 60,\r\n                      width: CARD_WIDTH,\r\n                      borderRadius: '0.75rem',\r\n                      borderLeft: '4px solid transparent',\r\n                      borderImage: 'linear-gradient(to bottom, #8B5CF6, #6366F1) 1',\r\n                      boxShadow: '0 10px 25px -5px rgba(91, 33, 182, 0.3), 0 8px 10px -6px rgba(76, 29, 149, 0.25)',\r\n                      padding: '16px',\r\n                      background: 'linear-gradient(to bottom right, rgba(30, 41, 59, 0.85), rgba(15, 23, 42, 0.9))'\r\n                    }}\r\n                    initial={{ opacity: 0, scale: 0.8, x: -20 }}\r\n                    animate={{ opacity: 1, scale: 1, x: 0 }}\r\n                    exit={{ opacity: 0, scale: 0.8, x: -20 }}\r\n                    transition={{ type: \"spring\", stiffness: 300, damping: 25, delay: 0.1 }}\r\n                  >\r\n                    <div className=\"flex items-center mb-3\">\r\n                      <div className=\"w-3 h-3 bg-gradient-to-r from-purple-400 to-indigo-500 rounded-full mr-2 shadow-sm\"></div>\r\n                      <h4 className=\"font-semibold bg-gradient-to-r from-purple-300 to-indigo-300 bg-clip-text text-transparent\">Clinical Impression</h4>\r\n                      {editingCards[node.id]?.clinical && (\r\n                        <div className=\"ml-auto text-xs font-medium px-2 py-0.5 rounded-full bg-purple-900/50 text-purple-200 shadow-inner border border-purple-700/30\">Editing</div>\r\n                      )}\r\n                    </div>\r\n                    \r\n                    {editingCards[node.id]?.clinical ? (\r\n                      <textarea\r\n                        className=\"w-full h-24 p-3 border-2 border-purple-700/50 rounded-lg resize-none text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-600 shadow-inner bg-slate-800/70 backdrop-blur-sm transition-all text-purple-100\"\r\n                        value={cardTexts[node.id]?.clinical || ''}\r\n                        onChange={(e) => handleTextChange(node.id, 'clinical', e.target.value)}\r\n                        onBlur={(e) => {\r\n                          // Save and close when focus is lost\r\n                          handleClickOutside(node.id, 'clinical');\r\n                        }}\r\n                        placeholder=\"Enter clinical impression...\"\r\n                        style={{\r\n                          boxShadow: 'inset 0 2px 4px 0 rgba(126, 34, 206, 0.2)'\r\n                        }}\r\n                      />\r\n                    ) : (\r\n                      <div\r\n                        className=\"text-sm text-purple-100 min-h-[60px] p-3 border-2 border-transparent hover:border-purple-700/40 rounded-lg cursor-text hover:bg-slate-800/50 transition-all\"\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          // Clear any hover state and set editing for this node only\r\n                          setHoveredNode(null);\r\n                          setEditingCards({\r\n                            [node.id]: { patient: true, clinical: true }\r\n                          });\r\n                        }}\r\n                        style={{\r\n                          backgroundImage: cardTexts[node.id]?.clinical ? 'linear-gradient(to bottom right, rgba(88, 28, 135, 0.3), rgba(76, 29, 149, 0.15))' : 'none',\r\n                          boxShadow: cardTexts[node.id]?.clinical ? 'inset 0 1px 2px 0 rgba(126, 34, 206, 0.15)' : 'none'\r\n                        }}\r\n                      >\r\n                        {cardTexts[node.id]?.clinical || (\r\n                          <span className=\"text-purple-300 italic\">Click to add clinical impression...</span>\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                    \r\n                    {/* Connection line to node - gradient line with animated pulse */}\r\n                    <div className=\"absolute\" style={{\r\n                        width: CARD_OFFSET - 20,\r\n                        height: 2,\r\n                        left: -CARD_OFFSET + 20,\r\n                        top: 50,\r\n                        zIndex: 0,\r\n                        overflow: 'hidden'\r\n                      }}\r\n                    >\r\n                      <div \r\n                        className=\"h-full w-full bg-gradient-to-r from-purple-300 via-indigo-400 to-purple-500\"\r\n                        style={{\r\n                          animation: hoveredNode?.id === node.id \r\n                            ? 'shimmerReverse 1.5s linear infinite' \r\n                            : 'none'\r\n                        }}\r\n                      ></div>\r\n                      <style jsx>{`\r\n                        @keyframes shimmerReverse {\r\n                          0% { transform: translateX(100%); }\r\n                          100% { transform: translateX(-100%); }\r\n                        }\r\n                      `}</style>\r\n                    </div>\r\n                  </motion.div>\r\n                </>\r\n              )}\r\n            </AnimatePresence>\r\n          </div>\r\n        ))}\r\n      \r\n        {/* Scroll Progress Indicator */}\r\n        <div className=\"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-40\">\r\n          <motion.div \r\n            className=\"bg-slate-800 bg-opacity-90 rounded-full px-4 py-2 flex items-center gap-3 shadow-lg border border-slate-600\"\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: 2.5, duration: 0.5 }}\r\n          >\r\n            <span className=\"text-sm text-blue-300\">\r\n              {nodes.length} {nodes.length === 1 ? 'entry' : 'entries'}\r\n            </span>\r\n            <div className=\"w-px h-4 bg-slate-600\"></div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"w-16 h-1 bg-slate-600 rounded-full overflow-hidden\">\r\n                <div \r\n                  className=\"h-full bg-blue-400 rounded-full transition-all duration-300 ease-out\"\r\n                  style={{ width: `${scrollProgress}%` }}\r\n                ></div>\r\n              </div>\r\n              <span className=\"text-xs text-slate-400 min-w-[3rem] text-center\">\r\n                {scrollProgress}%\r\n              </span>\r\n            </div>\r\n            <div className=\"w-px h-4 bg-slate-600\"></div>\r\n            <span className=\"text-xs text-slate-400\">\r\n              Click nodes to center\r\n            </span>\r\n          </motion.div>\r\n        </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VerticalTimeline;\r\n","// Enhanced Topic Modal with tabbed interface and advanced animations\nimport React, { useState, useEffect, useMemo, useCallback, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  X, \n  BookOpen, \n  Brain, \n  Target, \n  Award, \n  Clock, \n  Sparkles, \n  Link2,\n  Edit3,\n  Trash2,\n  Save,\n  Loader2,\n  Star,\n  Plus,\n  Check,\n  RotateCcw,\n  TrendingUp,\n  Lightbulb,\n  FileText,\n  Layers,\n  Stethoscope,\n  Pill,\n  Users,\n  Tag,\n  Calendar,\n  Activity,\n  ChevronDown,\n  ChevronRight\n} from 'lucide-react';\n\n// Animation variants for Framer Motion\nconst modalVariants = {\n  hidden: {\n    opacity: 0,\n    scale: 0.3,\n    y: 50,\n    rotate: -5,\n  },\n  visible: {\n    opacity: 1,\n    scale: 1,\n    y: 0,\n    rotate: 0,\n    transition: {\n      type: \"spring\",\n      damping: 25,\n      stiffness: 300,\n      duration: 0.6,\n    }\n  },\n  exit: {\n    opacity: 0,\n    scale: 0.7,\n    y: 30,\n    rotate: -3,\n    transition: {\n      type: \"easeInOut\",\n      duration: 0.4,\n    }\n  }\n};\n\nconst backdropVariants = {\n  hidden: { \n    opacity: 0,\n    backdropFilter: 'blur(0px)'\n  },\n  visible: { \n    opacity: 1,\n    backdropFilter: 'blur(8px)',\n    transition: {\n      duration: 0.4,\n      ease: \"easeOut\"\n    }\n  },\n  exit: { \n    opacity: 0,\n    backdropFilter: 'blur(0px)',\n    transition: {\n      duration: 0.3,\n      ease: \"easeIn\"\n    }\n  }\n};\n\nconst contentVariants = {\n  hidden: {\n    opacity: 0,\n    y: 20,\n    scale: 0.95,\n  },\n  visible: {\n    opacity: 1,\n    y: 0,\n    scale: 1,\n    transition: {\n      type: \"easeOut\",\n      duration: 0.3,\n      delay: 0.1,\n    }\n  },\n  exit: {\n    opacity: 0,\n    y: -10,\n    scale: 1.02,\n    transition: {\n      type: \"easeIn\",\n      duration: 0.2,\n    }\n  }\n};\n\n// Card animation variants for sections\nconst cardVariants = {\n  hidden: { opacity: 0, y: 20, scale: 0.95 },\n  visible: { \n    opacity: 1, \n    y: 0, \n    scale: 1,\n    transition: {\n      duration: 0.4,\n      ease: \"easeOut\"\n    }\n  },\n  edit: { \n    scale: 1.02,\n    boxShadow: \"0 8px 25px rgba(59, 130, 246, 0.15)\",\n    transition: {\n      duration: 0.3,\n      ease: \"easeOut\"\n    }\n  },\n  saved: {\n    scale: 1,\n    boxShadow: \"0 4px 15px rgba(34, 197, 94, 0.15)\",\n    transition: {\n      duration: 0.3,\n      ease: \"easeOut\"\n    }\n  }\n};\n\nconst TopicModal = ({ \n  isOpen, \n  data, \n  onClose,\n  onAnimationStart,\n  onAnimationEnd,\n  setMindMapData,\n  autoSaveMindMapData,\n  addToast,\n  syncNodeData,\n  forceNodeUpdate\n}) => {\n  const [isAnimating, setIsAnimating] = useState(false);\n  const [isVisible, setIsVisible] = useState(false);\n  const [isClosing, setIsClosing] = useState(false);\n  const [editData, setEditData] = useState({});\n  const [isLoading, setIsLoading] = useState(false);\n  const [hasInitialized, setHasInitialized] = useState(false);\n  const [activeTab, setActiveTab] = useState('overview');\n  const [isTabTransitioning, setIsTabTransitioning] = useState(false);\n  \n  // Individual section edit states\n  const [editingSections, setEditingSections] = useState({});\n  const [sectionData, setSectionData] = useState({});\n  \n  // Tab-specific scroll positions\n  const [scrollPositions, setScrollPositions] = useState({});\n  const contentRefs = useRef({});\n  \n  // Form states for different tabs\n  const [expandedCriteria, setExpandedCriteria] = useState(false);\n  const [newTags, setNewTags] = useState({}); // For managing new tag inputs\n  const [newResource, setNewResource] = useState('');\n  const [showResourceForm, setShowResourceForm] = useState(false);\n\n  // Category color mapping\n  const categoryColors = {\n    'Mood Disorders': { primary: '#ef4444', secondary: '#fca5a5' }, // red\n    'Anxiety Disorders': { primary: '#f59e0b', secondary: '#fbbf24' }, // amber\n    'Psychotic Disorders': { primary: '#8b5cf6', secondary: '#c4b5fd' }, // violet\n    'Personality Disorders': { primary: '#10b981', secondary: '#6ee7b7' }, // emerald\n    'Neurodevelopmental Disorders': { primary: '#3b82f6', secondary: '#93c5fd' }, // blue\n    'Trauma Related Disorders': { primary: '#dc2626', secondary: '#f87171' }, // red-600\n    'Substance Use Disorders': { primary: '#059669', secondary: '#34d399' }, // emerald-600\n    'Eating Disorders': { primary: '#d946ef', secondary: '#e879f9' }, // fuchsia\n    'Sleep Disorders': { primary: '#6366f1', secondary: '#a5b4fc' }, // indigo\n    'Cognitive Disorders': { primary: '#ea580c', secondary: '#fb923c' }, // orange-600\n    'Other': { primary: '#6b7280', secondary: '#9ca3af' } // gray\n  };\n\n  // Tab configuration\n  const tabs = [\n    { id: 'overview', label: 'Overview', icon: BookOpen },\n    { id: 'concept', label: 'Concept', icon: Brain },\n    { id: 'clinical', label: 'Clinical Associations', icon: Stethoscope },\n    { id: 'treatment', label: 'Treatment', icon: Pill },\n    { id: 'connections', label: 'Connections', icon: Link2 }\n  ];\n\n  useEffect(() => {\n    if (isOpen && data && !hasInitialized) {\n      setIsVisible(true);\n      const initialData = { \n        ...data,\n        category: data.category || 'Other',\n        definition: data.definition || '',\n        diagnostic_criteria: data.diagnostic_criteria || [],\n        comorbidities: data.comorbidities || [],\n        differential_diagnoses: data.differential_diagnoses || [],\n        medications: data.medications || [],\n        psychotherapy_modalities: data.psychotherapy_modalities || [],\n        flashcard_count: data.flashcard_count || 0,\n        completed_flashcards: data.completed_flashcards || 0,\n        last_updated: data.last_updated || new Date().toISOString()\n      };\n      setEditData(initialData);\n      setHasInitialized(true);\n      setIsAnimating(true);\n      if (onAnimationStart) onAnimationStart();\n      \n      setTimeout(() => {\n        setIsAnimating(false);\n        if (onAnimationEnd) onAnimationEnd();\n      }, 600);\n    } else if (!isOpen && hasInitialized) {\n      setHasInitialized(false);\n      setScrollPositions({});\n      setEditingSections({});\n      setSectionData({});\n    }\n  }, [isOpen, data, hasInitialized, onAnimationStart, onAnimationEnd]);\n\n  // Enhanced effect for instant feedback - updates editData immediately when data changes\n  useEffect(() => {\n    if (isOpen && data && hasInitialized) {\n      // Update editData with latest data for instant feedback\n      setEditData(prevEditData => {\n        const updatedData = { \n          ...prevEditData, // Keep any local edits\n          ...data, // Override with latest data from parent\n          category: data.category || prevEditData.category || 'Other',\n          definition: data.definition || prevEditData.definition || '',\n          diagnostic_criteria: data.diagnostic_criteria || prevEditData.diagnostic_criteria || [],\n          comorbidities: data.comorbidities || prevEditData.comorbidities || [],\n          differential_diagnoses: data.differential_diagnoses || prevEditData.differential_diagnoses || [],\n          medications: data.medications || prevEditData.medications || [],\n          psychotherapy_modalities: data.psychotherapy_modalities || prevEditData.psychotherapy_modalities || [],\n          flashcard_count: data.flashcard_count || prevEditData.flashcard_count || 0,\n          completed_flashcards: data.completed_flashcards || prevEditData.completed_flashcards || 0,\n          last_updated: data.last_updated || prevEditData.last_updated || new Date().toISOString()\n        };\n        return updatedData;\n      });\n    }\n  }, [data, isOpen, hasInitialized]);\n\n  const progressPercentage = useMemo(() => {\n    const total = editData.flashcard_count || 0;\n    const completed = editData.completed_flashcards || 0;\n    return total > 0 ? Math.round((completed / total) * 100) : 0;\n  }, [editData.flashcard_count, editData.completed_flashcards]);\n\n  const handleClose = useCallback(() => {\n    if (isAnimating || isClosing) return;\n    \n    setIsAnimating(true);\n    setIsClosing(true);\n    if (onAnimationStart) onAnimationStart();\n    \n    // Set visibility to false to trigger exit animation\n    setIsVisible(false);\n  }, [onAnimationStart, isAnimating, isClosing]);\n\n  const handleSave = useCallback(async () => {\n    if (isLoading) return;\n    \n    setIsLoading(true);\n    try {\n      const updatedData = {\n        ...editData,\n        last_updated: new Date().toISOString()\n      };\n      \n      setMindMapData(prevData => {\n        const updatedTopics = prevData.topics.map(topic =>\n          String(topic.id) === String(data?.id) ? { ...topic, ...updatedData } : topic\n        );\n        const newData = { ...prevData, topics: updatedTopics };\n        autoSaveMindMapData(newData);\n        return newData;\n      });\n      \n      setEditData(updatedData);\n      addToast('Topic updated successfully', 'success');\n    } catch (error) {\n      console.error('Error saving topic:', error);\n      addToast('Failed to save topic', 'error');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [data?.id, editData, setMindMapData, autoSaveMindMapData, addToast, isLoading]);\n\n  // Save current tab's scroll position before switching\n  const saveScrollPosition = useCallback((tabId) => {\n    const contentRef = contentRefs.current[tabId];\n    if (contentRef) {\n      setScrollPositions(prev => ({\n        ...prev,\n        [tabId]: contentRef.scrollTop\n      }));\n    }\n  }, []);\n\n  // Restore scroll position when switching to a tab\n  const restoreScrollPosition = useCallback((tabId) => {\n    setTimeout(() => {\n      const contentRef = contentRefs.current[tabId];\n      const savedPosition = scrollPositions[tabId];\n      if (contentRef && savedPosition) {\n        contentRef.scrollTop = savedPosition;\n      }\n    }, 100); // Small delay to ensure content is rendered\n  }, [scrollPositions]);\n\n  // Handle tab switching with scroll position preservation\n  const handleTabSwitch = useCallback((newTabId) => {\n    if (newTabId === activeTab || isTabTransitioning) return;\n    \n    // Save current tab's scroll position\n    saveScrollPosition(activeTab);\n    \n    setIsTabTransitioning(true);\n    setActiveTab(newTabId);\n    \n    setTimeout(() => {\n      setIsTabTransitioning(false);\n      // Restore new tab's scroll position\n      restoreScrollPosition(newTabId);\n    }, 300);\n  }, [activeTab, isTabTransitioning, saveScrollPosition, restoreScrollPosition]);\n\n// Enhanced category change handler - fixes node color updates and category saving\n  const handleCategoryChange = useCallback(async (newCategory) => {\n    console.log('Category changing to:', newCategory);\n    \n    // Get the new color for immediate update\n    const newColor = categoryColors[newCategory]?.primary || categoryColors.Other.primary;\n    console.log('New color for category:', newColor);\n    \n    // Update local edit data for immediate UI feedback\n    const updatedEditData = { ...editData, category: newCategory, color: newColor, last_updated: new Date().toISOString() };\n    setEditData(updatedEditData);\n    \n    // Update node color in mind map immediately and save\n    setMindMapData(prevData => {\n      const updatedTopics = prevData.topics.map(topic =>\n        String(topic.id) === String(data?.id) \n          ? { ...topic, category: newCategory, color: newColor, last_updated: new Date().toISOString() }\n          : topic\n      );\n      const newData = { ...prevData, topics: updatedTopics };\n      \n      // Auto-save the changes to backend immediately\n      console.log('Saving category change to backend:', newCategory, newColor);\n      autoSaveMindMapData(newData);\n      \n      // Force immediate node update after state change\n      setTimeout(() => {\n        console.log('Triggering force node update');\n        if (forceNodeUpdate) {\n          forceNodeUpdate();\n        }\n        if (syncNodeData) {\n          syncNodeData();\n        }\n      }, 200);\n      \n      return newData;\n    });\n    \n    addToast(`Category updated to ${newCategory}`, 'success');\n  }, [data?.id, editData, setMindMapData, categoryColors, autoSaveMindMapData, addToast, syncNodeData, forceNodeUpdate]);\n\n  // Get connected nodes for Connections tab\n  const connectedNodes = useMemo(() => {\n    if (!data?.id) return { cases: [], literature: [] };\n    \n    // This would typically come from your mind map data\n    // For now, return empty arrays - you can implement based on your data structure\n    return {\n      cases: [],\n      literature: []\n    };\n  }, [data?.id]);\n\n  const handleDelete = useCallback(async () => {\n    if (isLoading) return;\n    \n    if (!window.confirm('Are you sure you want to delete this topic?')) return;\n    \n    setIsLoading(true);\n    try {\n      setMindMapData(prevData => {\n        const updatedTopics = prevData.topics.filter(topic => String(topic.id) !== String(data?.id));\n        const newData = { ...prevData, topics: updatedTopics };\n        autoSaveMindMapData(newData);\n        return newData;\n      });\n      \n      addToast('Topic deleted successfully', 'success');\n      handleClose();\n    } catch (error) {\n      console.error('Error deleting topic:', error);\n      addToast('Failed to delete topic', 'error');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [data?.id, setMindMapData, autoSaveMindMapData, addToast, handleClose, isLoading]);\n\n  // Individual section edit functions\n  const startEditingSection = useCallback((sectionId) => {\n    setEditingSections(prev => ({ ...prev, [sectionId]: true }));\n    // Initialize section data with current values\n    setSectionData(prev => ({\n      ...prev,\n      [sectionId]: { ...editData }\n    }));\n  }, [editData]);\n\n  const cancelEditingSection = useCallback((sectionId) => {\n    setEditingSections(prev => ({ ...prev, [sectionId]: false }));\n    setSectionData(prev => {\n      const newData = { ...prev };\n      delete newData[sectionId];\n      return newData;\n    });\n  }, []);\n\n  const saveSectionEdit = useCallback(async (sectionId) => {\n    if (isLoading) return;\n    \n    const sectionChanges = sectionData[sectionId];\n    if (!sectionChanges) return;\n    \n    setIsLoading(true);\n    try {\n      const updatedData = {\n        ...editData,\n        ...sectionChanges,\n        last_updated: new Date().toISOString()\n      };\n      \n      // Update editData immediately for instant feedback\n      setEditData(updatedData);\n      \n      setMindMapData(prevData => {\n        const updatedTopics = prevData.topics.map(topic =>\n          String(topic.id) === String(data?.id) ? { ...topic, ...updatedData } : topic\n        );\n        const newData = { ...prevData, topics: updatedTopics };\n        autoSaveMindMapData(newData);\n        return newData;\n      });\n      \n      setEditingSections(prev => ({ ...prev, [sectionId]: false }));\n      setSectionData(prev => {\n        const newData = { ...prev };\n        delete newData[sectionId];\n        return newData;\n      });\n      \n      addToast('Section updated successfully', 'success');\n    } catch (error) {\n      console.error('Error saving section:', error);\n      addToast('Failed to save section', 'error');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [sectionData, editData, data?.id, setMindMapData, autoSaveMindMapData, addToast, isLoading]);\n\n  const updateSectionField = useCallback((sectionId, field, value) => {\n    setSectionData(prev => ({\n      ...prev,\n      [sectionId]: {\n        ...prev[sectionId],\n        [field]: value\n      }\n    }));\n  }, []);\n\n  // Tag management functions for list-based sections\n  const addTagToSection = useCallback((sectionId, field, tag) => {\n    if (!tag.trim()) return;\n    \n    const currentTags = sectionData[sectionId]?.[field] || editData[field] || [];\n    if (!currentTags.includes(tag.trim())) {\n      updateSectionField(sectionId, field, [...currentTags, tag.trim()]);\n    }\n  }, [sectionData, editData, updateSectionField]);\n\n  const removeTagFromSection = useCallback((sectionId, field, tagToRemove) => {\n    const currentTags = sectionData[sectionId]?.[field] || editData[field] || [];\n    updateSectionField(sectionId, field, currentTags.filter(tag => tag !== tagToRemove));\n  }, [sectionData, editData, updateSectionField]);\n\n  // Helper functions for new tag input management\n  const setNewTag = useCallback((sectionId, value) => {\n    setNewTags(prev => ({ ...prev, [sectionId]: value }));\n  }, []);\n\n  const getNewTag = useCallback((sectionId) => {\n    return newTags[sectionId] || '';\n  }, [newTags]);\n\n  const clearNewTag = useCallback((sectionId) => {\n    setNewTags(prev => {\n      const newTags = { ...prev };\n      delete newTags[sectionId];\n      return newTags;\n    });\n  }, []);\n\n  // Enhanced direct list management functions\n  const addItemDirectly = useCallback((field, item) => {\n    if (!item.trim()) return;\n    \n    const currentItems = editData[field] || [];\n    if (!currentItems.includes(item.trim())) {\n      const updatedItems = [...currentItems, item.trim()];\n      const updatedData = { \n        ...editData, \n        [field]: updatedItems, \n        last_updated: new Date().toISOString() \n      };\n      \n      // Update local state immediately\n      setEditData(updatedData);\n      \n      // Update mind map data and save\n      setMindMapData(prevData => {\n        const updatedTopics = prevData.topics.map(topic =>\n          String(topic.id) === String(data?.id) ? { ...topic, ...updatedData } : topic\n        );\n        const newData = { ...prevData, topics: updatedTopics };\n        autoSaveMindMapData(newData);\n        return newData;\n      });\n      \n      addToast(`${field} updated successfully`, 'success');\n    }\n  }, [editData, data?.id, setMindMapData, autoSaveMindMapData, addToast]);\n\n  const removeItemDirectly = useCallback((field, itemToRemove) => {\n    const currentItems = editData[field] || [];\n    const updatedItems = currentItems.filter(item => item !== itemToRemove);\n    const updatedData = { \n      ...editData, \n      [field]: updatedItems, \n      last_updated: new Date().toISOString() \n    };\n    \n    // Update local state immediately\n    setEditData(updatedData);\n    \n    // Update mind map data and save\n    setMindMapData(prevData => {\n      const updatedTopics = prevData.topics.map(topic =>\n        String(topic.id) === String(data?.id) ? { ...topic, ...updatedData } : topic\n      );\n      const newData = { ...prevData, topics: updatedTopics };\n      autoSaveMindMapData(newData);\n      return newData;\n    });\n    \n    addToast(`${field} updated successfully`, 'success');\n  }, [editData, data?.id, setMindMapData, autoSaveMindMapData, addToast]);\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence mode=\"wait\" onExitComplete={() => {\n      setIsAnimating(false);\n      setIsClosing(false);\n      setHasInitialized(false);\n      onClose();\n      if (onAnimationEnd) onAnimationEnd();\n    }}>\n      {isVisible && (\n        <motion.div\n          key={`topic-modal-${data?.id || 'default'}`}\n          initial=\"hidden\"\n          animate=\"visible\"\n          exit=\"exit\"\n          variants={backdropVariants}\n          className=\"fixed inset-0 bg-black flex items-center justify-center z-50\"\n          style={{ \n            willChange: 'backdrop-filter, opacity',\n            backfaceVisibility: 'hidden',\n            transform: 'translate3d(0, 0, 0)'\n          }}\n          onClick={(e) => e.target === e.currentTarget && handleClose()}\n        >\n          <motion.div\n            initial=\"hidden\"\n            animate=\"visible\"\n            exit=\"exit\"\n            variants={modalVariants}\n            className=\"bg-white rounded-2xl shadow-2xl max-w-4xl w-full mx-4 max-h-[85vh] overflow-hidden\"\n            style={{ \n              willChange: 'transform, opacity, scale',\n              backfaceVisibility: 'hidden'\n            }}\n            onClick={(e) => e.stopPropagation()}\n            onAnimationStart={() => {\n              setIsAnimating(true);\n              if (onAnimationStart) onAnimationStart();\n            }}\n            onAnimationComplete={() => {\n              setIsAnimating(false);\n              if (onAnimationEnd) onAnimationEnd();\n            }}\n          >\n            <motion.div \n              initial=\"hidden\"\n              animate=\"visible\"\n              exit=\"exit\"\n              variants={contentVariants}\n              className=\"bg-gradient-to-br from-slate-900 to-slate-800 text-white px-6 py-4 flex items-center justify-between\"\n            >\n              <div className=\"flex items-center gap-3\">\n                <BookOpen size={24} />\n                <h2 className=\"text-xl font-semibold\">Topic Details</h2>\n              </div>\n              <button\n                onClick={handleClose}\n                className=\"text-slate-400 hover:text-white transition-colors\"\n              >\n                <X size={24} />\n              </button>\n            </motion.div>\n\n            {/* Tab Navigation */}\n            <div className=\"bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 border-b border-slate-600\">\n              <nav className=\"flex flex-wrap gap-2 px-6 py-4\">\n                {tabs.map(({ id, label, icon: Icon }) => (\n                  <motion.button\n                    key={id}\n                    onClick={() => handleTabSwitch(id)}\n                    className={`relative flex items-center gap-2 px-4 py-3 rounded-xl font-medium text-sm transition-all duration-300 ${\n                      activeTab === id\n                        ? 'bg-gradient-to-r from-purple-500 to-indigo-600 text-white shadow-lg shadow-purple-500/25'\n                        : 'text-slate-300 hover:text-white hover:bg-slate-700/50 hover:shadow-md'\n                    }`}\n                    whileHover={{ scale: activeTab === id ? 1 : 1.02 }}\n                    whileTap={{ scale: 0.98 }}\n                    disabled={isTabTransitioning}\n                  >\n                    <Icon size={16} className={activeTab === id ? 'drop-shadow-sm' : ''} />\n                    {label}\n                    \n                    {activeTab === id && (\n                      <motion.div\n                        layoutId=\"topicActiveTab\"\n                        className=\"absolute inset-0 bg-gradient-to-r from-purple-400/20 to-indigo-500/20 rounded-xl blur-sm\"\n                        initial={false}\n                        transition={{ duration: 0.3, ease: \"easeOut\" }}\n                      />\n                    )}\n                  </motion.button>\n                ))}\n              </nav>\n            </div>\n\n            {/* Dark Content Area */}\n            <motion.div\n              className=\"flex-1 bg-gradient-to-br from-slate-900 to-slate-800 overflow-hidden\"\n              animate={{ opacity: isTabTransitioning ? 0.7 : 1 }}\n              transition={{ duration: 0.2 }}\n            >\n              <AnimatePresence mode=\"wait\">\n                {/* Overview Tab */}\n                {activeTab === 'overview' && (\n                  <motion.div\n                    key=\"overview\"\n                    ref={el => contentRefs.current.overview = el}\n                    initial={{ opacity: 0, x: -20 }}\n                    animate={{ opacity: 1, x: 0 }}\n                    exit={{ opacity: 0, x: 20 }}\n                    transition={{ duration: 0.3 }}\n                    className=\"h-full overflow-y-auto p-6 space-y-6\"\n                  >\n                    {/* Title Section */}\n                    <motion.div \n                      variants={cardVariants}\n                      animate={editingSections.title ? \"edit\" : \"visible\"}\n                      className=\"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700\"\n                    >\n                      <div className=\"flex items-center justify-between mb-4\">\n                        <h3 className=\"text-lg font-semibold text-white\">Title</h3>\n                        {!editingSections.title && (\n                          <motion.button\n                            whileHover={{ scale: 1.1 }}\n                            whileTap={{ scale: 0.9 }}\n                            onClick={() => startEditingSection('title')}\n                            className=\"text-slate-400 hover:text-white transition-colors p-1 rounded\"\n                            title=\"Edit title\"\n                          >\n                            <Edit3 size={16} />\n                          </motion.button>\n                        )}\n                      </div>\n                      \n                      {editingSections.title ? (\n                        <motion.div \n                          className=\"space-y-4\"\n                          initial={{ opacity: 0, y: 10 }}\n                          animate={{ opacity: 1, y: 0 }}\n                          transition={{ duration: 0.3 }}\n                        >\n                          <input\n                            type=\"text\"\n                            value={sectionData.title?.title || editData.title || ''}\n                            onChange={(e) => updateSectionField('title', 'title', e.target.value)}\n                            className=\"w-full text-xl font-bold bg-slate-700 border border-slate-600 rounded-lg px-4 py-3 text-white placeholder-slate-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500\"\n                            placeholder=\"Topic title...\"\n                          />\n                          <div className=\"flex justify-end gap-2\">\n                            <motion.button\n                              whileHover={{ scale: 1.02 }}\n                              whileTap={{ scale: 0.98 }}\n                              onClick={() => cancelEditingSection('title')}\n                              className=\"px-3 py-2 text-slate-300 hover:text-white border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors text-sm\"\n                            >\n                              Cancel\n                            </motion.button>\n                            <motion.button\n                              whileHover={{ scale: 1.02 }}\n                              whileTap={{ scale: 0.98 }}\n                              onClick={() => saveSectionEdit('title')}\n                              disabled={isLoading}\n                              className=\"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm flex items-center gap-2\"\n                            >\n                              {isLoading ? <Loader2 size={14} className=\"animate-spin\" /> : <Save size={14} />}\n                              Save\n                            </motion.button>\n                          </div>\n                        </motion.div>\n                      ) : (\n                        <motion.h1 \n                          className=\"text-2xl font-bold text-white\"\n                          whileHover={{ scale: 1.01 }}\n                          transition={{ duration: 0.2 }}\n                        >\n                          {editData.title || 'Untitled Topic'}\n                        </motion.h1>\n                      )}\n                    </motion.div>\n\n                    {/* Category and Progress Row */}\n                    <div className=\"grid md:grid-cols-2 gap-6\">\n                      {/* Category Selection - Direct Access (No Edit Button) */}\n                      <motion.div \n                        variants={cardVariants}\n                        initial=\"hidden\"\n                        animate=\"visible\"\n                        className=\"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700\"\n                      >\n                        <label className=\"block text-sm font-medium text-slate-300 mb-3\">Category</label>\n                        <motion.select\n                          value={editData.category || 'Other'}\n                          onChange={(e) => handleCategoryChange(e.target.value)}\n                          className=\"w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 hover:bg-slate-650 transition-colors cursor-pointer\"\n                          whileFocus={{ scale: 1.02 }}\n                        >\n                          {Object.keys(categoryColors).map(category => (\n                            <option key={category} value={category}>{category}</option>\n                          ))}\n                        </motion.select>\n                        <p className=\"text-xs text-slate-400 mt-2\">\n                          Changes are saved automatically and will update the node color\n                        </p>\n                      </motion.div>\n\n                      {/* Flashcard Progress */}\n                      <motion.div \n                        variants={cardVariants}\n                        initial=\"hidden\"\n                        animate=\"visible\"\n                        className=\"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700\"\n                      >\n                        <div className=\"flex items-center justify-between mb-3\">\n                          <span className=\"text-sm font-medium text-slate-300\">Flashcard Progress</span>\n                          <span className=\"text-sm text-slate-400\">\n                            {editData.completed_flashcards || 0} / {editData.flashcard_count || 0}\n                          </span>\n                        </div>\n                        <div className=\"w-full bg-slate-700 rounded-full h-3 mb-2\">\n                          <motion.div\n                            className=\"h-3 rounded-full bg-gradient-to-r from-purple-500 to-indigo-600\"\n                            initial={{ width: 0 }}\n                            animate={{ width: `${progressPercentage}%` }}\n                            transition={{ duration: 1, ease: \"easeOut\" }}\n                          />\n                        </div>\n                        <div className=\"text-right\">\n                          <span className=\"text-lg font-bold text-white\">{progressPercentage}%</span>\n                          <span className=\"text-sm text-slate-400 ml-1\">complete</span>\n                        </div>\n                      </motion.div>\n                    </div>\n\n                    {/* Last Updated */}\n                    <div className=\"text-xs text-slate-500 text-right\">\n                      Last updated: {editData.last_updated ? new Date(editData.last_updated).toLocaleString() : 'Never'}\n                    </div>\n                  </motion.div>\n                )}\n\n                {/* Concept Tab */}\n                {activeTab === 'concept' && (\n                  <motion.div\n                    key=\"concept\"\n                    ref={el => contentRefs.current.concept = el}\n                    initial={{ opacity: 0, x: -20 }}\n                    animate={{ opacity: 1, x: 0 }}\n                    exit={{ opacity: 0, x: 20 }}\n                    transition={{ duration: 0.3 }}\n                    className=\"h-full overflow-y-auto p-6 space-y-6\"\n                  >\n                    {/* Definition Section */}\n                    <motion.div \n                      variants={cardVariants}\n                      animate={editingSections.definition ? \"edit\" : \"visible\"}\n                      className=\"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700\"\n                    >\n                      <div className=\"flex items-center justify-between mb-4\">\n                        <h3 className=\"text-lg font-semibold text-white flex items-center gap-2\">\n                          <Brain size={20} className=\"text-purple-400\" />\n                          Definition\n                        </h3>\n                        {!editingSections.definition && (\n                          <motion.button\n                            whileHover={{ scale: 1.1 }}\n                            whileTap={{ scale: 0.9 }}\n                            onClick={() => startEditingSection('definition')}\n                            className=\"text-slate-400 hover:text-white transition-colors p-1 rounded\"\n                            title=\"Edit definition\"\n                          >\n                            <Edit3 size={16} />\n                          </motion.button>\n                        )}\n                      </div>\n                      \n                      {editingSections.definition ? (\n                        <motion.div \n                          className=\"space-y-4\"\n                          initial={{ opacity: 0, y: 10 }}\n                          animate={{ opacity: 1, y: 0 }}\n                          transition={{ duration: 0.3 }}\n                        >\n                          <textarea\n                            value={sectionData.definition?.definition || editData.definition || ''}\n                            onChange={(e) => updateSectionField('definition', 'definition', e.target.value)}\n                            rows={4}\n                            className=\"w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-3 text-white placeholder-slate-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none\"\n                            placeholder=\"Enter the definition of this topic...\"\n                          />\n                          <div className=\"flex justify-end gap-2\">\n                            <motion.button\n                              whileHover={{ scale: 1.02 }}\n                              whileTap={{ scale: 0.98 }}\n                              onClick={() => cancelEditingSection('definition')}\n                              className=\"px-3 py-2 text-slate-300 hover:text-white border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors text-sm\"\n                            >\n                              Cancel\n                            </motion.button>\n                            <motion.button\n                              whileHover={{ scale: 1.02 }}\n                              whileTap={{ scale: 0.98 }}\n                              onClick={() => saveSectionEdit('definition')}\n                              disabled={isLoading}\n                              className=\"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm flex items-center gap-2\"\n                            >\n                              {isLoading ? <Loader2 size={14} className=\"animate-spin\" /> : <Save size={14} />}\n                              Save\n                            </motion.button>\n                          </div>\n                        </motion.div>\n                      ) : (\n                        <motion.div \n                          className=\"text-slate-300 leading-relaxed\"\n                          whileHover={{ scale: 1.01 }}\n                          transition={{ duration: 0.2 }}\n                        >\n                          {editData.definition || <span className=\"text-slate-500 italic\">No definition provided</span>}\n                        </motion.div>\n                      )}\n                    </motion.div>\n\n                    {/* Diagnostic Criteria Section */}\n                    <motion.div \n                      variants={cardVariants}\n                      animate={editingSections.diagnostic_criteria ? \"edit\" : \"visible\"}\n                      className=\"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700\"\n                    >\n                      <div className=\"flex items-center justify-between mb-4\">\n                        <h3 className=\"text-lg font-semibold text-white flex items-center gap-2\">\n                          <FileText size={20} className=\"text-indigo-400\" />\n                          Diagnostic Criteria\n                        </h3>\n                        <div className=\"flex items-center gap-2\">\n                          {!editingSections.diagnostic_criteria && (\n                            <motion.button\n                              whileHover={{ scale: 1.1 }}\n                              whileTap={{ scale: 0.9 }}\n                              onClick={() => startEditingSection('diagnostic_criteria')}\n                              className=\"text-slate-400 hover:text-white transition-colors p-1 rounded\"\n                              title=\"Edit diagnostic criteria\"\n                            >\n                              <Edit3 size={16} />\n                            </motion.button>\n                          )}\n                          <button\n                            onClick={() => setExpandedCriteria(!expandedCriteria)}\n                            className=\"text-slate-400 hover:text-white transition-colors\"\n                          >\n                            {expandedCriteria ? <ChevronDown size={20} /> : <ChevronRight size={20} />}\n                          </button>\n                        </div>\n                      </div>\n                      \n                      <AnimatePresence>\n                        {expandedCriteria && (\n                          <motion.div\n                            initial={{ height: 0, opacity: 0 }}\n                            animate={{ height: 'auto', opacity: 1 }}\n                            exit={{ height: 0, opacity: 0 }}\n                            transition={{ duration: 0.3 }}\n                            className=\"overflow-hidden\"\n                          >\n                            {editingSections.diagnostic_criteria ? (\n                              <div className=\"space-y-4\">\n                                <textarea\n                                  value={Array.isArray(sectionData.diagnostic_criteria?.diagnostic_criteria) \n                                    ? sectionData.diagnostic_criteria.diagnostic_criteria.join('\\n') \n                                    : Array.isArray(editData.diagnostic_criteria) \n                                      ? editData.diagnostic_criteria.join('\\n') \n                                      : editData.diagnostic_criteria || ''}\n                                  onChange={(e) => updateSectionField('diagnostic_criteria', 'diagnostic_criteria', e.target.value.split('\\n').filter(item => item.trim()))}\n                                  rows={6}\n                                  className=\"w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-3 text-white placeholder-slate-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none\"\n                                  placeholder=\"Enter diagnostic criteria (one per line)...\"\n                                />\n                                <div className=\"flex justify-end gap-2\">\n                                  <button\n                                    onClick={() => cancelEditingSection('diagnostic_criteria')}\n                                    className=\"px-3 py-2 text-slate-300 hover:text-white border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors text-sm\"\n                                  >\n                                    Cancel\n                                  </button>\n                                  <motion.button\n                                    onClick={() => saveSectionEdit('diagnostic_criteria')}\n                                    disabled={isLoading}\n                                    className=\"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm flex items-center gap-2\"\n                                  >\n                                    {isLoading ? <Loader2 size={14} className=\"animate-spin\" /> : <Save size={14} />}\n                                    Save\n                                  </motion.button>\n                                </div>\n                              </div>\n                            ) : (\n                              <div className=\"space-y-2\">\n                                {(editData.diagnostic_criteria || []).length > 0 ? (\n                                  editData.diagnostic_criteria.map((criteria, index) => (\n                                    <div key={index} className=\"flex items-start gap-3\">\n                                      <span className=\"text-purple-400 font-medium\">{index + 1}.</span>\n                                      <span className=\"text-slate-300\">{criteria}</span>\n                                    </div>\n                                  ))\n                                ) : (\n                                  <span className=\"text-slate-500 italic\">No diagnostic criteria provided</span>\n                                )}\n                              </div>\n                            )}\n                          </motion.div>\n                        )}\n                      </AnimatePresence>\n                    </motion.div>\n                  </motion.div>\n                )}\n\n                {/* Clinical Associations Tab */}\n                {activeTab === 'clinical' && (\n                  <motion.div\n                    key=\"clinical\"\n                    ref={el => contentRefs.current.clinical = el}\n                    initial={{ opacity: 0, x: -20 }}\n                    animate={{ opacity: 1, x: 0 }}\n                    exit={{ opacity: 0, x: 20 }}\n                    transition={{ duration: 0.3 }}\n                    className=\"h-full overflow-y-auto p-6 space-y-6\"\n                  >\n                    {/* Comorbidities Section */}\n                    <motion.div \n                      variants={cardVariants}\n                      initial=\"hidden\"\n                      animate=\"visible\"\n                      className=\"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700\"\n                    >\n                      <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center gap-2\">\n                        <Users size={20} className=\"text-amber-400\" />\n                        Comorbidities\n                      </h3>\n                      \n                      {/* Current comorbidities list */}\n                      <div className=\"space-y-2 mb-4\">\n                        <AnimatePresence>\n                          {(editData.comorbidities || []).map((comorbidity, index) => (\n                            <motion.div\n                              key={index}\n                              initial={{ opacity: 0, scale: 0.8 }}\n                              animate={{ opacity: 1, scale: 1 }}\n                              exit={{ opacity: 0, scale: 0.8 }}\n                              className=\"flex items-center justify-between p-3 bg-amber-600/10 rounded-lg border border-amber-600/20 group hover:bg-amber-600/15 transition-colors\"\n                            >\n                              <span className=\"text-amber-300\">{comorbidity}</span>\n                              <motion.button\n                                whileHover={{ scale: 1.1 }}\n                                whileTap={{ scale: 0.9 }}\n                                onClick={() => removeItemDirectly('comorbidities', comorbidity)}\n                                className=\"text-amber-400 hover:text-amber-200 opacity-0 group-hover:opacity-100 transition-opacity p-1 rounded\"\n                                title=\"Remove comorbidity\"\n                              >\n                                <X size={16} />\n                              </motion.button>\n                            </motion.div>\n                          ))}\n                        </AnimatePresence>\n                      </div>\n                      \n                      {/* Add new comorbidity */}\n                      <div className=\"flex gap-2\">\n                        <input\n                          type=\"text\"\n                          value={getNewTag('comorbidities')}\n                          onChange={(e) => setNewTag('comorbidities', e.target.value)}\n                          placeholder=\"Add comorbidity...\"\n                          className=\"flex-1 bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white placeholder-slate-400 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-colors\"\n                          onKeyPress={(e) => {\n                            if (e.key === 'Enter' && getNewTag('comorbidities').trim()) {\n                              addItemDirectly('comorbidities', getNewTag('comorbidities'));\n                              clearNewTag('comorbidities');\n                            }\n                          }}\n                        />\n                        <motion.button\n                          whileHover={{ scale: 1.02 }}\n                          whileTap={{ scale: 0.98 }}\n                          onClick={() => {\n                            if (getNewTag('comorbidities').trim()) {\n                              addItemDirectly('comorbidities', getNewTag('comorbidities'));\n                              clearNewTag('comorbidities');\n                            }\n                          }}\n                          className=\"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors flex items-center gap-2\"\n                        >\n                          <Plus size={16} />\n                          Add\n                        </motion.button>\n                      </div>\n                      \n                      {(editData.comorbidities || []).length === 0 && (\n                        <p className=\"text-slate-500 italic text-center py-4\">No comorbidities added yet</p>\n                      )}\n                    </motion.div>\n\n                    {/* Differential Diagnoses Section */}\n                    <motion.div \n                      variants={cardVariants}\n                      initial=\"hidden\"\n                      animate=\"visible\"\n                      className=\"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700\"\n                    >\n                      <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center gap-2\">\n                        <Activity size={20} className=\"text-cyan-400\" />\n                        Differential Diagnoses\n                      </h3>\n                      \n                      {/* Current differential diagnoses list */}\n                      <div className=\"space-y-2 mb-4\">\n                        <AnimatePresence>\n                          {(editData.differential_diagnoses || []).map((diagnosis, index) => (\n                            <motion.div\n                              key={index}\n                              initial={{ opacity: 0, scale: 0.8 }}\n                              animate={{ opacity: 1, scale: 1 }}\n                              exit={{ opacity: 0, scale: 0.8 }}\n                              className=\"flex items-center justify-between p-3 bg-cyan-600/10 rounded-lg border border-cyan-600/20 group hover:bg-cyan-600/15 transition-colors\"\n                            >\n                              <span className=\"text-cyan-300\">{diagnosis}</span>\n                              <motion.button\n                                whileHover={{ scale: 1.1 }}\n                                whileTap={{ scale: 0.9 }}\n                                onClick={() => removeItemDirectly('differential_diagnoses', diagnosis)}\n                                className=\"text-cyan-400 hover:text-cyan-200 opacity-0 group-hover:opacity-100 transition-opacity p-1 rounded\"\n                                title=\"Remove differential diagnosis\"\n                              >\n                                <X size={16} />\n                              </motion.button>\n                            </motion.div>\n                          ))}\n                        </AnimatePresence>\n                      </div>\n                      \n                      {/* Add new differential diagnosis */}\n                      <div className=\"flex gap-2\">\n                        <input\n                          type=\"text\"\n                          value={getNewTag('differential_diagnoses')}\n                          onChange={(e) => setNewTag('differential_diagnoses', e.target.value)}\n                          placeholder=\"Add differential diagnosis...\"\n                          className=\"flex-1 bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white placeholder-slate-400 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-colors\"\n                          onKeyPress={(e) => {\n                            if (e.key === 'Enter' && getNewTag('differential_diagnoses').trim()) {\n                              addItemDirectly('differential_diagnoses', getNewTag('differential_diagnoses'));\n                              clearNewTag('differential_diagnoses');\n                            }\n                          }}\n                        />\n                        <motion.button\n                          whileHover={{ scale: 1.02 }}\n                          whileTap={{ scale: 0.98 }}\n                          onClick={() => {\n                            if (getNewTag('differential_diagnoses').trim()) {\n                              addItemDirectly('differential_diagnoses', getNewTag('differential_diagnoses'));\n                              clearNewTag('differential_diagnoses');\n                            }\n                          }}\n                          className=\"px-4 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 transition-colors flex items-center gap-2\"\n                        >\n                          <Plus size={16} />\n                          Add\n                        </motion.button>\n                      </div>\n                      \n                      {(editData.differential_diagnoses || []).length === 0 && (\n                        <p className=\"text-slate-500 italic text-center py-4\">No differential diagnoses added yet</p>\n                      )}\n                    </motion.div>\n                  </motion.div>\n                )}\n\n                {/* Treatment Tab */}\n                {activeTab === 'treatment' && (\n                  <motion.div\n                    key=\"treatment\"\n                    ref={el => contentRefs.current.treatment = el}\n                    initial={{ opacity: 0, x: -20 }}\n                    animate={{ opacity: 1, x: 0 }}\n                    exit={{ opacity: 0, x: 20 }}\n                    transition={{ duration: 0.3 }}\n                    className=\"h-full overflow-y-auto p-6 space-y-6\"\n                  >\n                    {/* Medications Section */}\n                    <motion.div \n                      variants={cardVariants}\n                      initial=\"hidden\"\n                      animate=\"visible\"\n                      className=\"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700\"\n                    >\n                      <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center gap-2\">\n                        <Pill size={20} className=\"text-green-400\" />\n                        Medications\n                      </h3>\n                      \n                      {/* Current medications list */}\n                      <div className=\"space-y-2 mb-4\">\n                        <AnimatePresence>\n                          {(editData.medications || []).map((medication, index) => (\n                            <motion.div\n                              key={index}\n                              initial={{ opacity: 0, scale: 0.8 }}\n                              animate={{ opacity: 1, scale: 1 }}\n                              exit={{ opacity: 0, scale: 0.8 }}\n                              className=\"flex items-center justify-between p-3 bg-green-600/10 rounded-lg border border-green-600/20 group hover:bg-green-600/15 transition-colors\"\n                            >\n                              <span className=\"text-green-300\">{medication}</span>\n                              <motion.button\n                                whileHover={{ scale: 1.1 }}\n                                whileTap={{ scale: 0.9 }}\n                                onClick={() => removeItemDirectly('medications', medication)}\n                                className=\"text-green-400 hover:text-green-200 opacity-0 group-hover:opacity-100 transition-opacity p-1 rounded\"\n                                title=\"Remove medication\"\n                              >\n                                <X size={16} />\n                              </motion.button>\n                            </motion.div>\n                          ))}\n                        </AnimatePresence>\n                      </div>\n                      \n                      {/* Add new medication */}\n                      <div className=\"flex gap-2\">\n                        <input\n                          type=\"text\"\n                          value={getNewTag('medications')}\n                          onChange={(e) => setNewTag('medications', e.target.value)}\n                          placeholder=\"Add medication...\"\n                          className=\"flex-1 bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white placeholder-slate-400 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors\"\n                          onKeyPress={(e) => {\n                            if (e.key === 'Enter' && getNewTag('medications').trim()) {\n                              addItemDirectly('medications', getNewTag('medications'));\n                              clearNewTag('medications');\n                            }\n                          }}\n                        />\n                        <motion.button\n                          whileHover={{ scale: 1.02 }}\n                          whileTap={{ scale: 0.98 }}\n                          onClick={() => {\n                            if (getNewTag('medications').trim()) {\n                              addItemDirectly('medications', getNewTag('medications'));\n                              clearNewTag('medications');\n                            }\n                          }}\n                          className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2\"\n                        >\n                          <Plus size={16} />\n                          Add\n                        </motion.button>\n                      </div>\n                      \n                      {(editData.medications || []).length === 0 && (\n                        <p className=\"text-slate-500 italic text-center py-4\">No medications added yet</p>\n                      )}\n                    </motion.div>\n\n                    {/* Psychotherapy Modalities Section */}\n                    <motion.div \n                      variants={cardVariants}\n                      animate={editingSections.psychotherapy_modalities ? \"edit\" : \"visible\"}\n                      className=\"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700\"\n                    >\n                      <div className=\"flex items-center justify-between mb-4\">\n                        <h3 className=\"text-lg font-semibold text-white flex items-center gap-2\">\n                          <Brain size={20} className=\"text-purple-400\" />\n                          Psychotherapy Modalities\n                        </h3>\n                        {!editingSections.psychotherapy_modalities && (\n                          <motion.button\n                            whileHover={{ scale: 1.1 }}\n                            whileTap={{ scale: 0.9 }}\n                            onClick={() => startEditingSection('psychotherapy_modalities')}\n                            className=\"text-slate-400 hover:text-white transition-colors p-1 rounded\"\n                            title=\"Edit psychotherapy modalities\"\n                          >\n                            <Edit3 size={16} />\n                          </motion.button>\n                        )}\n                      </div>\n                      \n                      {editingSections.psychotherapy_modalities ? (\n                        <div className=\"space-y-4\">\n                          <textarea\n                            value={Array.isArray(sectionData.psychotherapy_modalities?.psychotherapy_modalities) \n                              ? sectionData.psychotherapy_modalities.psychotherapy_modalities.join('\\n') \n                              : Array.isArray(editData.psychotherapy_modalities)\n                                ? editData.psychotherapy_modalities.join('\\n')\n                                : editData.psychotherapy_modalities || ''}\n                            onChange={(e) => updateSectionField('psychotherapy_modalities', 'psychotherapy_modalities', e.target.value.split('\\n').filter(item => item.trim()))}\n                            rows={4}\n                            className=\"w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-3 text-white placeholder-slate-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none\"\n                            placeholder=\"Enter psychotherapy modalities (one per line)...\"\n                          />\n                          <div className=\"flex justify-end gap-2\">\n                            <button\n                              onClick={() => cancelEditingSection('psychotherapy_modalities')}\n                              className=\"px-3 py-2 text-slate-300 hover:text-white border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors text-sm\"\n                            >\n                              Cancel\n                            </button>\n                            <motion.button\n                              onClick={() => saveSectionEdit('psychotherapy_modalities')}\n                              disabled={isLoading}\n                              className=\"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm flex items-center gap-2\"\n                            >\n                              {isLoading ? <Loader2 size={14} className=\"animate-spin\" /> : <Save size={14} />}\n                              Save\n                            </motion.button>\n                          </div>\n                        </div>\n                      ) : (\n                        <div className=\"space-y-2\">\n                          {(editData.psychotherapy_modalities || []).length > 0 ? (\n                            editData.psychotherapy_modalities.map((modality, index) => (\n                              <div key={index} className=\"flex items-center gap-3\">\n                                <span className=\"text-purple-400 font-medium\">•</span>\n                                <span className=\"text-slate-300\">{modality}</span>\n                              </div>\n                            ))\n                          ) : (\n                            <span className=\"text-slate-500 italic\">No psychotherapy modalities added</span>\n                          )}\n                        </div>\n                      )}\n                    </motion.div>\n                  </motion.div>\n                )}\n\n                {/* Connections Tab */}\n                {activeTab === 'connections' && (\n                  <motion.div\n                    key=\"connections\"\n                    ref={el => contentRefs.current.connections = el}\n                    initial={{ opacity: 0, x: -20 }}\n                    animate={{ opacity: 1, x: 0 }}\n                    exit={{ opacity: 0, x: 20 }}\n                    transition={{ duration: 0.3 }}\n                    className=\"h-full overflow-y-auto p-6 space-y-6\"\n                  >\n                    <motion.div \n                      variants={cardVariants}\n                      initial=\"hidden\"\n                      animate=\"visible\"\n                      className=\"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700\"\n                    >\n                      <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center gap-2\">\n                        <Link2 size={20} className=\"text-blue-400\" />\n                        Connected Nodes\n                      </h3>\n                      <p className=\"text-slate-400 text-center py-8\">\n                        This section will show nodes connected to this topic in the mind map.\n                      </p>\n                    </motion.div>\n                  </motion.div>\n                )}\n              </AnimatePresence>\n            </motion.div>\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n};\n\nexport default TopicModal;","export const sampleVerticalTimelineData = [\r\n  {\r\n    id: 'entry-001',\r\n    timestamp: '2024-01-14T10:00:00Z',\r\n    date: '2024-01-14',\r\n    title: 'Initial Assessment',\r\n    type: 'patient',\r\n    patientData: {\r\n      chiefComplaint: 'Feeling increasingly anxious and unable to concentrate at work',\r\n      currentStatus: 'First visit - seeking help for anxiety symptoms',\r\n      notes: 'Patient reports 3-month history of generalized anxiety, sleep disturbances, and difficulty focusing. No prior psychiatric treatment.'\r\n    },\r\n    clinicalData: {\r\n      chiefComplaint: 'Generalized Anxiety Disorder assessment',\r\n      currentStatus: 'Initial diagnostic evaluation completed',\r\n      notes: 'GAD-7 score: 14 (moderate anxiety). Recommended CBT and consider medication. No suicidal ideation. Good insight and motivation for treatment.'\r\n    }\r\n  },\r\n  {\r\n    id: 'entry-002',\r\n    timestamp: '2024-01-31T14:00:00Z',\r\n    date: '2024-01-31',\r\n    title: 'Follow-up Visit',\r\n    type: 'clinical',\r\n    patientData: {\r\n      chiefComplaint: 'Some improvement in sleep, but still feeling very anxious during work meetings',\r\n      currentStatus: 'Two weeks on sertraline 50mg, attending weekly therapy',\r\n      notes: 'Medication side effects minimal. Using breathing techniques learned in therapy with some success. Still avoiding certain social situations.'\r\n    },\r\n    clinicalData: {\r\n      chiefComplaint: 'Medication response evaluation',\r\n      currentStatus: 'Partial response to initial treatment',\r\n      notes: 'GAD-7 score: 11 (mild-moderate). Continue sertraline, increase to 75mg. Therapy showing good engagement. Consider exposure exercises.'\r\n    }\r\n  },\r\n  {\r\n    id: 'entry-003',\r\n    timestamp: '2024-02-14T11:00:00Z',\r\n    date: '2024-02-14',\r\n    title: 'Therapy Session',\r\n    type: 'patient',\r\n    patientData: {\r\n      chiefComplaint: 'Had a panic attack at work last week, but handled it better than before',\r\n      currentStatus: 'Learning coping strategies, medication helping with baseline anxiety',\r\n      notes: 'Successfully used grounding techniques during panic attack. Feeling more confident about managing symptoms. Sleep much improved.'\r\n    },\r\n    clinicalData: {\r\n      chiefComplaint: 'Panic episode management and progress review',\r\n      currentStatus: 'Good therapeutic progress with CBT techniques',\r\n      notes: 'Patient demonstrating skill acquisition in anxiety management. Panic attack was brief and well-managed. Continue current treatment plan.'\r\n    }\r\n  },\r\n  {\r\n    id: 'entry-004',\r\n    timestamp: '2024-02-29T16:00:00Z',\r\n    date: '2024-02-29',\r\n    title: 'Medication Review',\r\n    type: 'clinical',\r\n    patientData: {\r\n      chiefComplaint: 'Feeling much more stable, anxiety is manageable most days',\r\n      currentStatus: 'Sertraline 75mg working well, regular therapy sessions',\r\n      notes: 'Returned to normal work performance. Able to participate in meetings without significant anxiety. Relationship with partner improving.'\r\n    },\r\n    clinicalData: {\r\n      chiefComplaint: 'Treatment response assessment',\r\n      currentStatus: 'Good response to combined therapy and medication',\r\n      notes: 'GAD-7 score: 6 (mild). Significant improvement achieved. Plan to continue current dose, transition to bi-weekly therapy sessions.'\r\n    }\r\n  },\r\n  {\r\n    id: 'entry-005',\r\n    timestamp: '2024-03-14T13:00:00Z',\r\n    date: '2024-03-14',\r\n    title: 'Relapse Prevention',\r\n    type: 'patient',\r\n    patientData: {\r\n      chiefComplaint: 'Doing well overall, want to focus on preventing future episodes',\r\n      currentStatus: 'Stable on current treatment, learning long-term management',\r\n      notes: 'Confident in ability to manage anxiety symptoms. Interested in gradually reducing therapy frequency while maintaining medication.'\r\n    },\r\n    clinicalData: {\r\n      chiefComplaint: 'Maintenance and relapse prevention planning',\r\n      currentStatus: 'Treatment goals largely achieved, planning maintenance phase',\r\n      notes: 'Excellent treatment response. Develop relapse prevention plan, continue medication, monthly check-ins. Consider therapy as needed basis.'\r\n    }\r\n  }\r\n];\r\n","import React, { useRef, useEffect } from 'react';\r\nimport { gsap } from 'gsap';\r\n\r\nconst SimpleGSAPTest = () => {\r\n  const boxRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (boxRef.current) {\r\n      gsap.to(boxRef.current, {\r\n        duration: 2,\r\n        x: 200,\r\n        rotation: 360,\r\n        backgroundColor: \"blue\",\r\n        repeat: -1,\r\n        yoyo: true\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"p-8\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">GSAP Test</h1>\r\n      <div \r\n        ref={boxRef}\r\n        className=\"w-16 h-16 bg-red-500 rounded\"\r\n      />\r\n      <p className=\"mt-4\">If GSAP is working, you should see the red box animating.</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SimpleGSAPTest;\r\n","// Timeline Modal Component for PGY3-HUB\r\nimport React, { useState, useCallback } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { X, Clock, Users, Activity } from 'lucide-react';\r\nimport VerticalTimeline from './timeline-test/VerticalTimeline';\r\nimport { sampleVerticalTimelineData } from './timeline-test/sampleVerticalTimelineData';\r\n\r\n// Animation variants for the modal\r\nconst backdropVariants = {\r\n  hidden: { \r\n    opacity: 0,\r\n    backdropFilter: 'blur(0px)'\r\n  },\r\n  visible: { \r\n    opacity: 0.75,\r\n    backdropFilter: 'blur(4px)',\r\n    transition: {\r\n      duration: 0.3,\r\n      ease: \"easeOut\"\r\n    }\r\n  },\r\n  exit: {\r\n    opacity: 0,\r\n    backdropFilter: 'blur(0px)',\r\n    transition: {\r\n      duration: 0.2,\r\n      ease: \"easeIn\"\r\n    }\r\n  }\r\n};\r\n\r\nconst modalVariants = {\r\n  hidden: {\r\n    opacity: 0,\r\n    scale: 0.3,\r\n    y: 50,\r\n    rotate: -5,\r\n  },\r\n  visible: {\r\n    opacity: 1,\r\n    scale: 1,\r\n    y: 0,\r\n    rotate: 0,\r\n    transition: {\r\n      type: \"spring\",\r\n      stiffness: 300,\r\n      damping: 25,\r\n      duration: 0.5\r\n    }\r\n  },\r\n  exit: {\r\n    opacity: 0,\r\n    scale: 0.8,\r\n    y: -20,\r\n    transition: {\r\n      duration: 0.2,\r\n      ease: \"easeIn\"\r\n    }\r\n  }\r\n};\r\n\r\nconst TimelineModal = ({ \r\n  isOpen, \r\n  onClose, \r\n  title = \"Patient Timeline\",\r\n  data = sampleVerticalTimelineData,\r\n  onNodeClick,\r\n  onNodeHover\r\n}) => {\r\n  const [isClosing, setIsClosing] = useState(false);\r\n\r\n  const handleClose = useCallback(() => {\r\n    if (isClosing) return;\r\n    setIsClosing(true);\r\n    \r\n    // Allow animation to complete before calling onClose\r\n    setTimeout(() => {\r\n      setIsClosing(false);\r\n      onClose();\r\n    }, 200);\r\n  }, [onClose, isClosing]);\r\n\r\n  const handleNodeClick = useCallback((node) => {\r\n    console.log('Timeline node clicked:', node);\r\n    onNodeClick?.(node);\r\n  }, [onNodeClick]);\r\n\r\n  const handleNodeHover = useCallback((node, isHovering) => {\r\n    console.log('Timeline node hover:', node.id, isHovering);\r\n    onNodeHover?.(node, isHovering);\r\n  }, [onNodeHover]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <AnimatePresence mode=\"wait\" onExitComplete={() => {\r\n      setIsClosing(false);\r\n    }}>\r\n      {isOpen && (\r\n        <motion.div\r\n          key=\"timeline-modal-backdrop\"\r\n          initial=\"hidden\"\r\n          animate=\"visible\"\r\n          exit=\"exit\"\r\n          variants={backdropVariants}\r\n          className=\"fixed inset-0 bg-black flex items-center justify-center z-50 p-4\"\r\n          style={{ \r\n            willChange: 'backdrop-filter, opacity',\r\n            backfaceVisibility: 'hidden',\r\n            transform: 'translate3d(0, 0, 0)'\r\n          }}\r\n          onClick={(e) => e.target === e.currentTarget && handleClose()}\r\n        >\r\n          <motion.div\r\n            key=\"timeline-modal-content\"\r\n            initial=\"hidden\"\r\n            animate=\"visible\"\r\n            exit=\"exit\"\r\n            variants={modalVariants}\r\n            className=\"bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden\"\r\n            style={{ \r\n              willChange: 'transform, opacity, scale',\r\n              backfaceVisibility: 'hidden'\r\n            }}\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            {/* Modal Header */}\r\n            <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-gray-200 p-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <div className=\"p-2 bg-blue-100 rounded-lg\">\r\n                    <Clock className=\"h-6 w-6 text-blue-600\" />\r\n                  </div>\r\n                  <div>\r\n                    <h2 className=\"text-2xl font-bold text-gray-900\">{title}</h2>\r\n                    <p className=\"text-sm text-gray-600 mt-1\">\r\n                      Interactive patient timeline with drag-and-drop nodes\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"flex items-center space-x-3\">\r\n                  <div className=\"flex items-center space-x-2 text-sm text-gray-500\">\r\n                    <Users className=\"h-4 w-4\" />\r\n                    <span>{data.length} nodes</span>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2 text-sm text-gray-500\">\r\n                    <Activity className=\"h-4 w-4\" />\r\n                    <span>Interactive</span>\r\n                  </div>\r\n                  <motion.button\r\n                    onClick={handleClose}\r\n                    className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                    whileHover={{ scale: 1.1 }}\r\n                    whileTap={{ scale: 0.9 }}\r\n                  >\r\n                    <X className=\"h-5 w-5 text-gray-500\" />\r\n                  </motion.button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Modal Content - Timeline Container */}\r\n            <div className=\"relative\" style={{ height: 'calc(90vh - 120px)' }}>\r\n              <VerticalTimeline\r\n                data={data}\r\n                onNodeClick={handleNodeClick}\r\n                onNodeHover={handleNodeHover}\r\n              />\r\n            </div>\r\n\r\n            {/* Modal Footer with Instructions */}\r\n            <div className=\"bg-gray-50 border-t border-gray-200 px-6 py-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"text-sm text-gray-600\">\r\n                  <span className=\"font-medium\">Instructions:</span> Drag nodes to reposition • Hover for details • Click to edit\r\n                </div>\r\n                <div className=\"text-xs text-gray-500\">\r\n                  Timeline Modal • Interactive Mode\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        </motion.div>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n};\r\n\r\nexport default TimelineModal;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { sampleVerticalTimelineData } from './sampleVerticalTimelineData';\r\nimport SimpleGSAPTest from './SimpleGSAPTest';\r\nimport TimelineModal from '../TimelineModal';\r\n\r\nconst TimelineTestPage = () => {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [showSimpleTest, setShowSimpleTest] = useState(false);\r\n  const [showTimelineModal, setShowTimelineModal] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Simulate loading data\r\n    const timer = setTimeout(() => {\r\n      setIsLoading(false);\r\n    }, 500);\r\n\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n  const handleNodeClick = (node) => {\r\n    console.log('Node clicked:', node);\r\n  };\r\n\r\n  const handleNodeHover = (node, isHovering) => {\r\n    console.log('Node hover:', node.id, isHovering);\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen bg-gray-100\">\r\n        <div className=\"text-lg text-gray-600\">Loading timeline test...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100\">\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">\r\n            Interactive Patient Timeline\r\n          </h1>\r\n          <p className=\"text-gray-600\">\r\n            Test timeline components in modal and standalone formats\r\n          </p>\r\n          <div className=\"mt-4 space-x-4\">\r\n            <button \r\n              onClick={() => setShowTimelineModal(true)}\r\n              className=\"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 shadow-md hover:shadow-lg transition-all duration-200\"\r\n            >\r\n              Open Timeline Modal\r\n            </button>\r\n            <button \r\n              onClick={() => setShowSimpleTest(!showSimpleTest)}\r\n              className=\"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600\"\r\n            >\r\n              {showSimpleTest ? 'Hide Simple GSAP Test' : 'Show Simple GSAP Test'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {showSimpleTest && (\r\n          <div className=\"bg-white rounded-lg shadow-lg p-6 mb-8\">\r\n            <h2 className=\"text-xl font-semibold mb-4\">Simple GSAP Test</h2>\r\n            <SimpleGSAPTest />\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"bg-white rounded-lg shadow p-6\">\r\n          <h2 className=\"text-xl font-semibold mb-4\">Timeline Features</h2>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            <div className=\"space-y-2\">\r\n              <h3 className=\"font-semibold text-gray-800\">Modal Interface</h3>\r\n              <ul className=\"text-sm text-gray-600 space-y-1\">\r\n                <li>• Timeline contained within a professional modal</li>\r\n                <li>• Matches existing mind map modal styling</li>\r\n                <li>• Proper backdrop blur and animations</li>\r\n                <li>• Responsive sizing with scroll containment</li>\r\n              </ul>\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <h3 className=\"font-semibold text-gray-800\">Interaction</h3>\r\n              <ul className=\"text-sm text-gray-600 space-y-1\">\r\n                <li>• Drag nodes with instant 1:1 mouse tracking</li>\r\n                <li>• Hover over nodes to see patient/clinical cards</li>\r\n                <li>• Click nodes to edit both cards simultaneously</li>\r\n                <li>• Add new nodes with smooth animations</li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Timeline Modal */}\r\n      <TimelineModal\r\n        isOpen={showTimelineModal}\r\n        onClose={() => setShowTimelineModal(false)}\r\n        title=\"Patient Timeline - Interactive Mode\"\r\n        data={sampleVerticalTimelineData}\r\n        onNodeClick={handleNodeClick}\r\n        onNodeHover={handleNodeHover}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TimelineTestPage;\r\n","import React, { memo } from 'react';\r\nimport { motion } from 'framer-motion';\r\n\r\n/**\r\n * 🎨 ARTISTIC BACKGROUND COMPONENT\r\n * \r\n * Replaces the default ReactFlow grid with a sophisticated radial design\r\n * featuring concentric circles, radial lines, and subtle texture overlays\r\n * to create depth and visual interest for the mind map interface.\r\n */\r\nconst ArtisticBackground = memo(({ \r\n  variant = 'radial',\r\n  gap = 50,\r\n  size = 2,\r\n  color = '#e2e8f0',\r\n  style = {},\r\n  className = '',\r\n  showRadialLines = true,\r\n  showConcentricCircles = true,\r\n  enableParallax = false\r\n}) => {\r\n  \r\n  const RadialGrid = () => (\r\n    <div \r\n      className=\"absolute inset-0 pointer-events-none\"\r\n      style={{\r\n        background: `\r\n          radial-gradient(circle at 50% 50%, rgba(99, 102, 241, 0.03) 0%, transparent 70%),\r\n          radial-gradient(circle at 25% 25%, rgba(139, 92, 246, 0.02) 0%, transparent 50%),\r\n          radial-gradient(circle at 75% 75%, rgba(168, 85, 247, 0.02) 0%, transparent 50%)\r\n        `,\r\n        ...style\r\n      }}\r\n    >\r\n      {/* 🎯 CONCENTRIC CIRCLES for depth */}\r\n      {showConcentricCircles && (\r\n        <svg className=\"absolute inset-0 w-full h-full\">\r\n          <defs>\r\n            <pattern id=\"concentricCircles\" x=\"50%\" y=\"50%\" patternUnits=\"userSpaceOnUse\" width=\"100%\" height=\"100%\">\r\n              {[200, 400, 600, 800, 1000, 1200].map((radius, index) => (\r\n                <circle\r\n                  key={radius}\r\n                  cx=\"50%\"\r\n                  cy=\"50%\"\r\n                  r={radius}\r\n                  fill=\"none\"\r\n                  stroke={color}\r\n                  strokeWidth={index === 0 ? 2 : 1}\r\n                  strokeOpacity={0.1 - (index * 0.01)}\r\n                  strokeDasharray={index % 2 === 0 ? \"none\" : \"4,8\"}\r\n                />\r\n              ))}\r\n            </pattern>\r\n          </defs>\r\n          <rect width=\"100%\" height=\"100%\" fill=\"url(#concentricCircles)\" />\r\n        </svg>\r\n      )}\r\n\r\n      {/* ⚡ RADIAL LINES extending from center */}\r\n      {showRadialLines && (\r\n        <svg className=\"absolute inset-0 w-full h-full\">\r\n          <defs>\r\n            <pattern id=\"radialLines\" x=\"50%\" y=\"50%\" patternUnits=\"userSpaceOnUse\" width=\"100%\" height=\"100%\">\r\n              {Array.from({ length: 24 }, (_, index) => {\r\n                const angle = (index * 15) * (Math.PI / 180); // 15 degree increments\r\n                const x1 = 50;\r\n                const y1 = 50;\r\n                const x2 = 50 + Math.cos(angle) * 100;\r\n                const y2 = 50 + Math.sin(angle) * 100;\r\n                \r\n                return (\r\n                  <line\r\n                    key={index}\r\n                    x1={`${x1}%`}\r\n                    y1={`${y1}%`}\r\n                    x2={`${x2}%`}\r\n                    y2={`${y2}%`}\r\n                    stroke={color}\r\n                    strokeWidth={index % 6 === 0 ? 2 : 1}\r\n                    strokeOpacity={index % 6 === 0 ? 0.08 : 0.04}\r\n                    strokeDasharray={index % 3 === 0 ? \"none\" : \"2,6\"}\r\n                  />\r\n                );\r\n              })}\r\n            </pattern>\r\n          </defs>\r\n          <rect width=\"100%\" height=\"100%\" fill=\"url(#radialLines)\" />\r\n        </svg>\r\n      )}\r\n\r\n      {/* 🌊 SUBTLE TEXTURE OVERLAY */}\r\n      <div \r\n        className=\"absolute inset-0 opacity-30\"\r\n        style={{\r\n          background: `\r\n            url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23${color.slice(1)}' fill-opacity='0.03'%3E%3Cpath d='M30 30c0-5.5-4.5-10-10-10s-10 4.5-10 10 4.5 10 10 10 10-4.5 10-10zm10 0c0-5.5-4.5-10-10-10s-10 4.5-10 10 4.5 10 10 10 10-4.5 10-10z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")\r\n          `\r\n        }}\r\n      />\r\n\r\n      {/* ✨ FLOATING PARTICLES for extra visual interest */}\r\n      <div className=\"absolute inset-0 overflow-hidden\">\r\n        {Array.from({ length: 8 }, (_, index) => (\r\n          <motion.div\r\n            key={index}\r\n            className=\"absolute w-1 h-1 rounded-full bg-gradient-to-r from-indigo-400 to-purple-400 opacity-20\"\r\n            style={{\r\n              left: `${20 + (index * 10)}%`,\r\n              top: `${30 + (Math.sin(index) * 20)}%`,\r\n            }}\r\n            animate={{\r\n              y: [0, -20, 0],\r\n              opacity: [0.2, 0.4, 0.2],\r\n            }}\r\n            transition={{\r\n              duration: 4 + index,\r\n              repeat: Infinity,\r\n              ease: \"easeInOut\",\r\n              delay: index * 0.5\r\n            }}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const DotGrid = () => (\r\n    <div \r\n      className=\"absolute inset-0 pointer-events-none\"\r\n      style={{\r\n        backgroundImage: `radial-gradient(circle, ${color} ${size}px, transparent ${size}px)`,\r\n        backgroundSize: `${gap}px ${gap}px`,\r\n        backgroundPosition: '0 0',\r\n        opacity: 0.4,\r\n        ...style\r\n      }}\r\n    />\r\n  );\r\n\r\n  const LineGrid = () => (\r\n    <div className=\"absolute inset-0 pointer-events-none\">\r\n      <svg className=\"w-full h-full\">\r\n        <defs>\r\n          <pattern id=\"grid\" width={gap} height={gap} patternUnits=\"userSpaceOnUse\">\r\n            <path \r\n              d={`M ${gap} 0 L 0 0 0 ${gap}`} \r\n              fill=\"none\" \r\n              stroke={color} \r\n              strokeWidth={size}\r\n              strokeOpacity={0.3}\r\n            />\r\n          </pattern>\r\n        </defs>\r\n        <rect width=\"100%\" height=\"100%\" fill=\"url(#grid)\" style={style} />\r\n      </svg>\r\n    </div>\r\n  );\r\n\r\n  const renderBackground = () => {\r\n    switch (variant) {\r\n      case 'radial':\r\n        return <RadialGrid />;\r\n      case 'dots':\r\n        return <DotGrid />;\r\n      case 'lines':\r\n        return <LineGrid />;\r\n      default:\r\n        return <RadialGrid />;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <motion.div \r\n      className={`absolute inset-0 ${className}`}\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      transition={{ duration: 1.5, ease: \"easeOut\" }}\r\n    >\r\n      {renderBackground()}\r\n    </motion.div>\r\n  );\r\n});\r\n\r\nArtisticBackground.displayName = 'ArtisticBackground';\r\n\r\nexport default ArtisticBackground;\r\n","// Lazy loading component wrapper for performance optimization\nimport React, { Suspense, lazy } from 'react';\nimport { Loader2 } from 'lucide-react';\n\n// Loading fallback component\nconst LoadingSpinner = ({ message = \"Loading...\" }) => (\n  <div className=\"flex items-center justify-center p-8\">\n    <div className=\"flex flex-col items-center gap-2\">\n      <Loader2 className=\"w-6 h-6 animate-spin text-blue-600\" />\n      <span className=\"text-sm text-gray-600\">{message}</span>\n    </div>\n  </div>\n);\n\n// Lazy load components that aren't needed immediately\nexport const LazyRichTextEditor = lazy(() => import('./RichTextEditor'));\nexport const LazyTemplateManager = lazy(() => import('./TemplateManager'));\nexport const LazyLiteratureModal = lazy(() => import('./LiteratureModal'));\n\n// Lazy load modals for better initial load performance\nexport const LazyCaseModal = lazy(() => import('./CaseModal'));\nexport const LazyTopicModal = lazy(() => import('./TopicModal'));\nexport const LazyTaskModal = lazy(() => import('./TaskModal'));\n\n// HOC for wrapping lazy components with suspense\nexport const withLazyLoading = (LazyComponent, fallbackMessage) => (props) => (\n  <Suspense fallback={<LoadingSpinner message={fallbackMessage} />}>\n    <LazyComponent {...props} />\n  </Suspense>\n);\n\n// Pre-wrapped components ready to use\nexport const RichTextEditor = withLazyLoading(LazyRichTextEditor, \"Loading editor...\");\nexport const TemplateManager = withLazyLoading(LazyTemplateManager, \"Loading templates...\");\nexport const LiteratureModal = withLazyLoading(LazyLiteratureModal, \"Loading literature viewer...\");\n\n// Pre-wrapped modal components\nexport const CaseModal = withLazyLoading(LazyCaseModal, \"Loading case details...\");\nexport const TopicModal = withLazyLoading(LazyTopicModal, \"Loading topic details...\");\nexport const TaskModal = withLazyLoading(LazyTaskModal, \"Loading task details...\");\n","// Floating Edge Utilities for React Flow\n// Calculates intersection points between nodes for custom floating edges\n\n/**\n * Calculate the intersection point of a line with a rectangle\n * @param {Object} rect - Rectangle with x, y, width, height\n * @param {Object} center - Center point with x, y\n * @param {Object} point - External point with x, y\n * @returns {Object} Intersection point with x, y coordinates\n */\nfunction getIntersectionPoint(rect, center, point) {\n  const { x: rectX, y: rectY, width, height } = rect;\n  const { x: centerX, y: centerY } = center;\n  const { x: pointX, y: pointY } = point;\n\n  // Calculate rectangle bounds - no buffer as we want exact edges\n  const left = rectX;\n  const right = rectX + width;\n  const top = rectY;\n  const bottom = rectY + height;\n\n  // Direction vector from center to point\n  const dx = pointX - centerX;\n  const dy = pointY - centerY;\n\n  // Handle edge cases where the line is vertical or horizontal\n  if (Math.abs(dx) < 0.001) {\n    // Vertical line\n    return {\n      x: centerX,\n      y: dy > 0 ? bottom : top,\n      side: dy > 0 ? 'bottom' : 'top'\n    };\n  }\n\n  if (Math.abs(dy) < 0.001) {\n    // Horizontal line\n    return {\n      x: dx > 0 ? right : left,\n      y: centerY,\n      side: dx > 0 ? 'right' : 'left'\n    };\n  }\n\n  // Calculate slope and y-intercept\n  const slope = dy / dx;\n  const yIntercept = centerY - slope * centerX;\n\n  // Calculate intersection points with all four sides\n  const intersections = [];\n\n  // Left side (x = left)\n  const leftY = slope * left + yIntercept;\n  if (leftY >= top && leftY <= bottom) {\n    intersections.push({ x: left, y: leftY, side: 'left', distance: Math.hypot(left - centerX, leftY - centerY) });\n  }\n\n  // Right side (x = right)\n  const rightY = slope * right + yIntercept;\n  if (rightY >= top && rightY <= bottom) {\n    intersections.push({ x: right, y: rightY, side: 'right', distance: Math.hypot(right - centerX, rightY - centerY) });\n  }\n\n  // Top side (y = top)\n  const topX = (top - yIntercept) / slope;\n  if (topX >= left && topX <= right) {\n    intersections.push({ x: topX, y: top, side: 'top', distance: Math.hypot(topX - centerX, top - centerY) });\n  }\n\n  // Bottom side (y = bottom)\n  const bottomX = (bottom - yIntercept) / slope;\n  if (bottomX >= left && bottomX <= right) {\n    intersections.push({ x: bottomX, y: bottom, side: 'bottom', distance: Math.hypot(bottomX - centerX, bottom - centerY) });\n  }\n\n  // Find the intersection point that's in the correct direction\n  // and is closest to the center (to avoid picking the wrong side)\n  const validIntersections = intersections.filter(intersection => {\n    const intersectionDx = intersection.x - centerX;\n    const intersectionDy = intersection.y - centerY;\n    \n    // Check if the intersection is in the same direction as the target point\n    return (\n      (dx > 0 && intersectionDx >= 0) || (dx < 0 && intersectionDx <= 0)\n    ) && (\n      (dy > 0 && intersectionDy >= 0) || (dy < 0 && intersectionDy <= 0)\n    );\n  });\n\n  // Sort by distance and take the closest valid intersection\n  validIntersections.sort((a, b) => a.distance - b.distance);\n  return validIntersections[0] || { x: centerX, y: centerY, side: 'center' };\n}\n\n/**\n * Calculate the floating edge path between two nodes\n * @param {Object} sourceNode - Source node with position and measured dimensions\n * @param {Object} targetNode - Target node with position and measured dimensions\n * @param {Object} options - Optional configuration\n * @returns {Object} Edge path data with sourceX, sourceY, targetX, targetY\n */\nexport function getFloatingEdgePath(sourceNode, targetNode, options = {}) {\n  const {\n    sourcePosition = { x: 0, y: 0 },\n    targetPosition = { x: 0, y: 0 },\n    sourceWidth = 200,\n    sourceHeight = 100,\n    targetWidth = 200,\n    targetHeight = 100,\n    // Direct coordinates from React Flow (fallback)\n    sourceX,\n    sourceY,\n    targetX,\n    targetY,\n    offset = 0 // Default to zero offset to ensure edges connect to borders\n  } = options;\n  \n  // Use direct coordinates if provided and dimensions appear invalid\n  if (sourceX !== undefined && sourceY !== undefined && \n      targetX !== undefined && targetY !== undefined &&\n      (sourceWidth <= 10 || targetWidth <= 10)) {\n    return {\n      sourceX, \n      sourceY, \n      targetX, \n      targetY,\n      sourceSide: 'direct',\n      targetSide: 'direct'\n    };\n  }\n\n  // Calculate node centers\n  const sourceCenter = {\n    x: sourcePosition.x + sourceWidth / 2,\n    y: sourcePosition.y + sourceHeight / 2\n  };\n\n  const targetCenter = {\n    x: targetPosition.x + targetWidth / 2,\n    y: targetPosition.y + targetHeight / 2\n  };\n\n  // Create rectangle objects for intersection calculation\n  const sourceRect = {\n    x: sourcePosition.x,\n    y: sourcePosition.y,\n    width: sourceWidth,\n    height: sourceHeight\n  };\n\n  const targetRect = {\n    x: targetPosition.x,\n    y: targetPosition.y,\n    width: targetWidth,\n    height: targetHeight\n  };\n\n  // Calculate intersection points\n  const sourceIntersection = getIntersectionPoint(sourceRect, sourceCenter, targetCenter);\n  const targetIntersection = getIntersectionPoint(targetRect, targetCenter, sourceCenter);\n\n  // Calculate vector from source to target center\n  const dx = targetCenter.x - sourceCenter.x;\n  const dy = targetCenter.y - sourceCenter.y;\n  const distance = Math.sqrt(dx * dx + dy * dy);\n\n  // Add a stronger extension to ensure visual connection with the node borders\n  // This is done by extending the line in both directions\n  if (distance > 0) {\n    const unitX = dx / distance;\n    const unitY = dy / distance;\n    \n    // Extend lines by 3 pixels to ensure visual connection\n    // Using a larger value for more reliability across different node types\n    const extensionAmount = 3;\n\n    // Extend the line outward from the source node\n    sourceIntersection.x -= unitX * extensionAmount;\n    sourceIntersection.y -= unitY * extensionAmount;\n    \n    // Extend the line outward from the target node\n    targetIntersection.x += unitX * extensionAmount;\n    targetIntersection.y += unitY * extensionAmount;\n    \n    // Apply additional offset if needed\n    if (offset > 0) {\n      sourceIntersection.x += unitX * offset;\n      sourceIntersection.y += unitY * offset;\n      targetIntersection.x -= unitX * offset;\n      targetIntersection.y -= unitY * offset;\n    }\n  }\n\n  // Debug flag to help diagnose intersection issues\n  const debug = options.debug || false;\n  if (debug) {\n    console.log('Source Node:', sourceNode);\n    console.log('Target Node:', targetNode);\n    console.log('Source Intersection:', sourceIntersection);\n    console.log('Target Intersection:', targetIntersection);\n  }\n\n  return {\n    sourceX: sourceIntersection.x,\n    sourceY: sourceIntersection.y,\n    targetX: targetIntersection.x,\n    targetY: targetIntersection.y,\n    sourceSide: sourceIntersection.side,\n    targetSide: targetIntersection.side\n  };\n}\n\n/**\n * Generate SVG path string for a bezier curve between two points\n * @param {number} sourceX - Source X coordinate\n * @param {number} sourceY - Source Y coordinate\n * @param {number} targetX - Target X coordinate\n * @param {number} targetY - Target Y coordinate\n * @param {number} curvature - Curve intensity (0-1)\n * @returns {string} SVG path string\n */\nexport function getBezierPath(sourceX, sourceY, targetX, targetY, curvature = 0.25) {\n  const dx = targetX - sourceX;\n  const dy = targetY - sourceY;\n  \n  // Calculate control points for a smooth bezier curve\n  const controlOffset = Math.sqrt(dx * dx + dy * dy) * curvature;\n  \n  const controlX1 = sourceX + dx * 0.5 + dy * controlOffset * 0.5;\n  const controlY1 = sourceY + dy * 0.5 - dx * controlOffset * 0.5;\n  \n  const controlX2 = sourceX + dx * 0.5 - dy * controlOffset * 0.5;\n  const controlY2 = sourceY + dy * 0.5 + dx * controlOffset * 0.5;\n  \n  return `M ${sourceX},${sourceY} C ${controlX1},${controlY1} ${controlX2},${controlY2} ${targetX},${targetY}`;\n}\n\n/**\n * Calculate the center point of an edge path\n * @param {number} sourceX - Source X coordinate\n * @param {number} sourceY - Source Y coordinate\n * @param {number} targetX - Target X coordinate\n * @param {number} targetY - Target Y coordinate\n * @returns {Object} Center point with x, y coordinates\n */\nexport function getEdgeCenter(sourceX, sourceY, targetX, targetY) {\n  return {\n    x: (sourceX + targetX) / 2,\n    y: (sourceY + targetY) / 2\n  };\n}\n\n/**\n * Calculate marker end position for arrow heads\n * @param {number} sourceX - Source X coordinate\n * @param {number} sourceY - Source Y coordinate\n * @param {number} targetX - Target X coordinate\n * @param {number} targetY - Target Y coordinate\n * @returns {string} Transform string for marker positioning\n */\nexport function getMarkerEnd(sourceX, sourceY, targetX, targetY) {\n  const dx = targetX - sourceX;\n  const dy = targetY - sourceY;\n  const angle = Math.atan2(dy, dx) * (180 / Math.PI);\n  \n  return `url(#arrowhead) rotate(${angle} ${targetX} ${targetY})`;\n}\n","import React, { memo, useMemo, useEffect } from 'react';\nimport { BaseEdge, useReactFlow } from '@xyflow/react';\nimport { getFloatingEdgePath } from '../utils/floatingEdgeUtils';\n\n/**\n * 🎨 ENHANCED ARTISTIC FLOATING EDGE COMPONENT\n * \n * This redesigned edge component provides:\n * - Type-based styling (topic-to-case = dashed, task-to-case = solid)\n * - Gradient strokes for enhanced visual appeal\n * - Cubic Bézier curves for smooth connections\n * - Hoverable labels with dark translucent backgrounds\n * - Performance-optimized path calculations\n * \n * Features:\n * - Direct path calculation using geometry\n * - Memoized path computation for performance\n * - Type-specific styling based on source/target node types\n * - Smooth gradients and enhanced visual effects\n */\nconst FloatingEdge = memo(({\n  id,\n  source,\n  target,\n  sourceX,\n  sourceY,\n  targetX,\n  targetY,\n  sourcePosition,\n  targetPosition,\n  style = {},\n  markerEnd,\n  markerStart,\n  data,\n  label,\n  labelStyle = {},\n  labelShowBg = true,\n  labelBgStyle = {},\n  ...props\n}) => {\n  const { getNode } = useReactFlow();\n  \n  // Safely get nodes outside of useMemo to avoid scope issues\n  let sourceNode, targetNode;\n  try {\n    sourceNode = getNode(source);\n    targetNode = getNode(target);\n  } catch (error) {\n    // Nodes not available, will use fallback\n    sourceNode = null;\n    targetNode = null;\n  }\n\n  // 🎨 ARTISTIC EDGE STYLING based on node types\n  const getEdgeStyles = useMemo(() => {\n    const sourceType = sourceNode?.type || 'default';\n    const targetType = targetNode?.type || 'default';\n    const edgeKey = `${sourceType}-${targetType}`;\n\n    // Enhanced styling based on connection types\n    switch (edgeKey) {\n      case 'topic-case':\n      case 'case-topic':\n        return {\n          stroke: 'url(#topicCaseGradient)',\n          strokeWidth: 3,\n          strokeDasharray: '8,4',\n          filter: 'drop-shadow(0 2px 4px rgba(139, 92, 246, 0.3))',\n          animation: 'dash-flow 2s linear infinite'\n        };\n      \n      case 'task-case':\n      case 'case-task':\n        return {\n          stroke: 'url(#taskCaseGradient)',\n          strokeWidth: 4,\n          filter: 'drop-shadow(0 2px 4px rgba(248, 113, 113, 0.3))'\n        };\n      \n      case 'literature-case':\n      case 'case-literature':\n        return {\n          stroke: 'url(#literatureCaseGradient)',\n          strokeWidth: 2,\n          strokeDasharray: '4,2,1,2',\n          filter: 'drop-shadow(0 1px 3px rgba(217, 119, 6, 0.2))'\n        };\n      \n      case 'topic-task':\n      case 'task-topic':\n        return {\n          stroke: 'url(#topicTaskGradient)',\n          strokeWidth: 2.5,\n          strokeDasharray: '6,3',\n          filter: 'drop-shadow(0 2px 4px rgba(99, 102, 241, 0.25))'\n        };\n      \n      default:\n        return {\n          stroke: 'url(#defaultGradient)',\n          strokeWidth: 2,\n          filter: 'drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1))'\n        };\n    }\n  }, [sourceNode?.type, targetNode?.type]);\n\n  // Memoize the edge path calculation for better performance\n  const { edgePath, labelX, labelY } = useMemo(() => {\n    // During animations or rapid updates, use simple direct paths\n    if (data?.__isAnimating || data?.__forceUpdate) {\n      return {\n        edgePath: `M${sourceX},${sourceY} L${targetX},${targetY}`,\n        labelX: (sourceX + targetX) / 2,\n        labelY: (sourceY + targetY) / 2\n      };\n    }\n\n    // Default fallback if nodes aren't available\n    if (!sourceNode || !targetNode) {\n      return {\n        edgePath: `M${sourceX},${sourceY} L${targetX},${targetY}`,\n        labelX: (sourceX + targetX) / 2,\n        labelY: (sourceY + targetY) / 2\n      };\n    }\n\n    try {\n      // Safely check if we have enough information to calculate an accurate path\n      const sourceHasDimensions = Boolean(\n        sourceNode.width || \n        sourceNode.dimensions?.width || \n        sourceNode.data?.width || \n        sourceNode.style?.width\n      );\n      \n      const targetHasDimensions = Boolean(\n        targetNode.width || \n        targetNode.dimensions?.width || \n        targetNode.data?.width || \n        targetNode.style?.width\n      );\n      \n      // If we don't have dimensions, use the provided coordinates directly\n      if (!sourceHasDimensions || !targetHasDimensions) {\n        return {\n          edgePath: `M${sourceX},${sourceY} L${targetX},${targetY}`,\n          labelX: (sourceX + targetX) / 2,\n          labelY: (sourceY + targetY) / 2\n        };\n      }\n\n      // Safe dimension extraction with fallbacks\n      const getNodeDimensions = (node) => {\n        const defaultWidth = node.type === 'topic' ? 180 : 200;\n        const defaultHeight = node.type === 'topic' ? 50 : 100;\n        \n        return {\n          width: node.width || \n                 node.dimensions?.width || \n                 node.data?.width || \n                 defaultWidth,\n          height: node.height || \n                  node.dimensions?.height || \n                  node.data?.height || \n                  defaultHeight\n        };\n      };\n      \n      const sourceDims = getNodeDimensions(sourceNode);\n      const targetDims = getNodeDimensions(targetNode);\n\n      // Calculate floating edge with proper intersections\n      const floatingEdgeData = getFloatingEdgePath(\n        sourceNode,\n        targetNode,\n        {\n          // Use React Flow's sourceX/Y and targetX/Y if available\n          sourcePosition: {\n            x: sourceNode.positionAbsolute?.x || sourceNode.position.x,\n            y: sourceNode.positionAbsolute?.y || sourceNode.position.y\n          },\n          targetPosition: {\n            x: targetNode.positionAbsolute?.x || targetNode.position.x,\n            y: targetNode.positionAbsolute?.y || targetNode.position.y\n          },\n          // Fallback coordinates - use the direct ones provided by React Flow\n          sourceX: sourceX,\n          sourceY: sourceY,\n          targetX: targetX,\n          targetY: targetY,\n          sourceWidth: sourceDims.width,\n          sourceHeight: sourceDims.height,\n          targetWidth: targetDims.width,\n          targetHeight: targetDims.height,\n          debug: false // Set to true to debug connection issues\n        }\n      );\n\n      const { \n        sourceX: sx, \n        sourceY: sy, \n        targetX: tx, \n        targetY: ty \n      } = floatingEdgeData;\n      \n      // 🎨 Enhanced cubic Bézier curve for smooth connections\n      const deltaX = tx - sx;\n      const deltaY = ty - sy;\n      const controlDistance = Math.sqrt(deltaX * deltaX + deltaY * deltaY) * 0.25;\n      \n      // Calculate control points for smooth curves\n      const controlX1 = sx + (deltaX > 0 ? controlDistance : -controlDistance);\n      const controlY1 = sy;\n      const controlX2 = tx - (deltaX > 0 ? controlDistance : -controlDistance);  \n      const controlY2 = ty;\n      \n      return {\n        edgePath: `M ${sx},${sy} C ${controlX1},${controlY1} ${controlX2},${controlY2} ${tx},${ty}`,\n        labelX: (sx + tx) / 2,\n        labelY: (sy + ty) / 2\n      };\n    } catch (error) {\n      console.warn('FloatingEdge calculation error:', error);\n      return {\n        edgePath: `M${sourceX},${sourceY} L${targetX},${targetY}`,\n        labelX: (sourceX + targetX) / 2,\n        labelY: (sourceY + targetY) / 2\n      };\n    }\n  }, [\n    source,\n    target,\n    sourceX, \n    sourceY, \n    targetX, \n    targetY,\n    data?.__forceUpdate,\n    data?.__isAnimating,\n    // Safe node dimension tracking\n    sourceNode?.id,\n    targetNode?.id,\n    sourceNode?.width,\n    sourceNode?.height,\n    targetNode?.width,\n    targetNode?.height\n  ]);\n\n  return (\n    <>\n      {/* 🎨 GRADIENT DEFINITIONS for artistic edge styling */}\n      <defs>\n        <linearGradient id=\"topicCaseGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n          <stop offset=\"0%\" stopColor=\"#6366f1\" stopOpacity=\"0.8\" />\n          <stop offset=\"50%\" stopColor=\"#8b5cf6\" stopOpacity=\"0.9\" />\n          <stop offset=\"100%\" stopColor=\"#a855f7\" stopOpacity=\"0.8\" />\n        </linearGradient>\n        \n        <linearGradient id=\"taskCaseGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n          <stop offset=\"0%\" stopColor=\"#f97316\" stopOpacity=\"0.9\" />\n          <stop offset=\"50%\" stopColor=\"#ef4444\" stopOpacity=\"1.0\" />\n          <stop offset=\"100%\" stopColor=\"#ec4899\" stopOpacity=\"0.9\" />\n        </linearGradient>\n        \n        <linearGradient id=\"literatureCaseGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n          <stop offset=\"0%\" stopColor=\"#d97706\" stopOpacity=\"0.7\" />\n          <stop offset=\"50%\" stopColor=\"#ca8a04\" stopOpacity=\"0.8\" />\n          <stop offset=\"100%\" stopColor=\"#a16207\" stopOpacity=\"0.7\" />\n        </linearGradient>\n        \n        <linearGradient id=\"topicTaskGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n          <stop offset=\"0%\" stopColor=\"#6366f1\" stopOpacity=\"0.7\" />\n          <stop offset=\"100%\" stopColor=\"#f59e0b\" stopOpacity=\"0.8\" />\n        </linearGradient>\n        \n        <linearGradient id=\"defaultGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n          <stop offset=\"0%\" stopColor=\"#64748b\" stopOpacity=\"0.6\" />\n          <stop offset=\"100%\" stopColor=\"#475569\" stopOpacity=\"0.8\" />\n        </linearGradient>\n      </defs>\n      \n      <BaseEdge\n        id={id}\n        path={edgePath}\n        labelX={labelX}\n        labelY={labelY}\n        style={{\n          transition: 'none', // Critical: disable all CSS transitions for performance\n          ...getEdgeStyles, // Apply artistic styling\n          ...style // Allow override\n        }}\n        markerEnd={markerEnd}\n        markerStart={markerStart}\n      />\n      \n      {/* 🏷️ ENHANCED EDGE LABEL with dark translucent background */}\n      {label && (\n        <foreignObject\n          x={labelX - 50}\n          y={labelY - 12}\n          width={100}\n          height={24}\n          className=\"overflow-visible\"\n        >\n          <div\n            className={`\n              flex items-center justify-center px-3 py-1 rounded-lg\n              text-xs font-medium text-white backdrop-blur-sm\n              transition-opacity duration-200 opacity-0 hover:opacity-100\n              pointer-events-none\n            `}\n            style={{\n              backgroundColor: 'rgba(0, 0, 0, 0.75)',\n              boxShadow: '0 2px 8px rgba(0, 0, 0, 0.25)',\n              ...labelBgStyle\n            }}\n          >\n            {label}\n          </div>\n        </foreignObject>\n      )}\n    </>\n  );\n}, (prevProps, nextProps) => {\n  // Optimize re-rendering with precise dependency checking\n  return (\n    prevProps.sourceX === nextProps.sourceX &&\n    prevProps.sourceY === nextProps.sourceY &&\n    prevProps.targetX === nextProps.targetX &&\n    prevProps.targetY === nextProps.targetY &&\n    prevProps.source === nextProps.source &&\n    prevProps.target === nextProps.target &&\n    prevProps.data?.__forceUpdate === nextProps.data?.__forceUpdate\n  );\n});\n\nexport default FloatingEdge;\n\n\n","import React, { memo } from 'react';\nimport { BaseEdge, getBezierPath, EdgeLabelRenderer } from '@xyflow/react';\n\n/**\n * Enhanced Edge Component with Label Support\n * \n * This edge component supports labels and uses proper prop destructuring\n * to prevent React Flow-specific props from reaching DOM elements.\n */\nconst EnhancedEdge = memo(({\n  id,\n  source,\n  target,\n  sourceX,\n  sourceY,\n  targetX,\n  targetY,\n  sourcePosition,\n  targetPosition,\n  style = {},\n  markerEnd,\n  markerStart,\n  label,\n  // Destructure React Flow-specific props to prevent them from reaching DOM\n  sourceHandleId,\n  targetHandleId,\n  data,\n  selected,\n  animated,\n  // Don't pass any other props to BaseEdge\n}) => {\n  const [edgePath, labelX, labelY] = getBezierPath({\n    sourceX,\n    sourceY,\n    sourcePosition,\n    targetX,\n    targetY,\n    targetPosition,\n  });\n\n  return (\n    <>\n      <BaseEdge\n        id={id}\n        path={edgePath}\n        style={style}\n        markerEnd={markerEnd}\n        markerStart={markerStart}\n        // Only pass valid BaseEdge props, no React Flow-specific props\n      />\n      {label && (\n        <EdgeLabelRenderer>\n          <div\n            style={{\n              position: 'absolute',\n              transform: `translate(-50%, -50%) translate(${labelX}px,${labelY}px)`,\n              fontSize: 12,\n              pointerEvents: 'all',\n            }}\n            className=\"nodrag nopan bg-white px-2 py-1 rounded shadow border text-xs\"\n          >\n            {label}\n          </div>\n        </EdgeLabelRenderer>\n      )}\n    </>\n  );\n});\n\nEnhancedEdge.displayName = 'EnhancedEdge';\n\nexport default EnhancedEdge;\n","import React from 'react';\n\n/**\n * Custom connection line component for React Flow.\n * Shows a preview of the connection as the user drags to create a new edge.\n * Styled to match our floating edge appearance but with enhanced visual feedback.\n */\nconst ConnectionLine = ({\n  fromX,\n  fromY,\n  toX,\n  toY,\n  connectionLineStyle,\n}) => {\n  // Create a straight path from source to target\n  const path = `M ${fromX},${fromY} L ${toX},${toY}`;\n  \n  // Apply our custom styling combined with any passed styling\n  const defaultStyle = {\n    stroke: '#3b82f6', // Bright blue for visibility\n    strokeWidth: 3.5,\n    strokeLinecap: 'round',\n    strokeDasharray: '5,3', \n    filter: 'drop-shadow(0 0 6px rgba(59, 130, 246, 0.6))',\n    animation: 'flowingDash 1s linear infinite',\n  };\n\n  // Merge the default style with any props passed in\n  const style = { ...defaultStyle, ...connectionLineStyle };\n\n  return (\n    <g>\n      {/* Main visible connection line */}\n      <path\n        d={path}\n        fill=\"none\"\n        style={style}\n      />\n      \n      {/* Larger invisible path for easier interaction */}\n      <path\n        d={path}\n        fill=\"none\"\n        stroke=\"transparent\"\n        strokeWidth={15}\n        style={{ pointerEvents: 'stroke' }}\n      />\n    </g>\n  );\n};\n\nexport default ConnectionLine;\n","// Optimized loading screen component\nimport React from 'react';\nimport { Loader2, Brain, Sparkles } from 'lucide-react';\n\nconst OptimizedLoadingScreen = ({ message = \"Loading your mind map...\", progress = null }) => {\n  return (\n    <div className=\"fixed inset-0 bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center z-50\">\n      <div className=\"text-center\">\n        {/* Animated brain icon */}\n        <div className=\"relative mb-6\">\n          <Brain className=\"w-16 h-16 text-blue-600 mx-auto animate-pulse\" />\n          <Sparkles className=\"w-6 h-6 text-purple-500 absolute -top-2 -right-2 animate-bounce\" />\n        </div>\n        \n        {/* Loading spinner */}\n        <div className=\"flex items-center justify-center gap-3 mb-4\">\n          <Loader2 className=\"w-6 h-6 animate-spin text-blue-600\" />\n          <span className=\"text-lg font-medium text-gray-700\">{message}</span>\n        </div>\n        \n        {/* Progress bar if provided */}\n        {progress !== null && (\n          <div className=\"w-64 bg-gray-200 rounded-full h-2 mx-auto mb-2\">\n            <div \n              className=\"bg-blue-600 h-2 rounded-full transition-all duration-300 ease-out\" \n              style={{ width: `${Math.max(0, Math.min(100, progress))}%` }}\n            />\n          </div>\n        )}\n        \n        {/* Helpful tips during loading */}\n        <div className=\"text-sm text-gray-500 max-w-md mx-auto mt-4\">\n          <p>💡 Tip: Use the force layout button to auto-arrange your nodes</p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default OptimizedLoadingScreen;\n","import React, { useState, useEffect } from 'react';\nimport { Handle, Position } from '@xyflow/react';\nimport { Brain, Tag, Clock, X, BookOpen, Lightbulb } from 'lucide-react';\nimport { motion } from 'framer-motion';\n\nconst TopicNode = ({ data, selected }) => {\n  const [isVisible, setIsVisible] = useState(data.skipAnimation || false);\n  \n  // Entry animation - only if not skipping animations\n  useEffect(() => {\n    if (!data.skipAnimation) {\n      const timer = setTimeout(() => setIsVisible(true), 100);\n      return () => clearTimeout(timer);\n    }\n  }, [data.skipAnimation]);\n\n  const completionPercentage = data.flashcard_count > 0\n    ? ((data.completed_flashcards || 0) / data.flashcard_count) * 100\n    : 0;\n\n  return (\n    <motion.div\n      initial={data.skipAnimation ? { opacity: 1, scale: 1 } : { opacity: 0, scale: 0.8, y: 20 }}\n      animate={{ opacity: 1, scale: 1, y: 0 }}\n      exit={{ opacity: 0, scale: 0.8, y: -20 }}\n      transition={{ \n        duration: 0.6, \n        ease: [0.25, 0.46, 0.45, 0.94],\n        delay: data.skipAnimation ? 0 : 0.1\n      }}\n      whileHover={{ \n        scale: 1.06, \n        y: -3,\n        transition: { duration: 0.2 }\n      }}\n      className={`group relative min-w-[260px] max-w-[300px] cursor-pointer ${selected ? 'z-10' : 'z-0'}`}\n    >\n      {/* 🎨 ARTISTIC TOPIC CONTAINER with midnight blue → indigo gradient */}\n      <div\n        className={`\n          relative px-6 py-5 rounded-2xl backdrop-blur-sm\n          border-2 transition-all duration-400 overflow-hidden\n          shadow-lg hover:shadow-2xl\n          ${selected\n            ? 'border-indigo-300 shadow-indigo-500/30 ring-4 ring-indigo-200/60' \n            : 'border-indigo-200/40 hover:border-indigo-300/70'\n          }\n        `}\n        style={{\n          background: 'linear-gradient(135deg, #0f172a 0%, #1e293b 20%, #312e81 60%, #4338ca 85%, #6366f1 100%)',\n          boxShadow: selected \n            ? '0 12px 28px -8px rgba(67, 56, 202, 0.4), 0 8px 16px -8px rgba(67, 56, 202, 0.3)'\n            : '0 6px 20px -6px rgba(67, 56, 202, 0.25), 0 4px 8px -4px rgba(67, 56, 202, 0.1)'\n        }}\n      >\n        {/* 🌟 KNOWLEDGE GLOW EFFECT */}\n        <div \n          className={`\n            absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 \n            transition-opacity duration-400 pointer-events-none\n          `}\n          style={{\n            background: 'radial-gradient(circle at 30% 20%, rgba(255,255,255,0.15) 0%, transparent 60%)',\n          }}\n        />\n\n        {/* 🔗 ENHANCED CONNECTION HANDLES with indigo theme */}\n        {/* Top handles */}\n        <Handle\n          id=\"top\"\n          type=\"source\"\n          position={Position.Top}\n          className=\"w-4 h-4 !bg-indigo-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-indigo-300\"\n          style={{\n            left: '50%',\n            transform: 'translateX(-50%)',\n            zIndex: 2,\n            boxShadow: '0 2px 8px rgba(67, 56, 202, 0.4)'\n          }}\n          isConnectable={true}\n        />\n        <Handle\n          id=\"top\"\n          type=\"target\"\n          position={Position.Top}\n          className=\"w-4 h-4 !bg-indigo-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-indigo-300\"\n          style={{\n            left: '50%',\n            transform: 'translateX(-50%)',\n            zIndex: 1,\n            boxShadow: '0 2px 8px rgba(67, 56, 202, 0.4)'\n          }}\n          isConnectable={true}\n        />\n\n        {/* Right handles */}\n        <Handle\n          id=\"right\"\n          type=\"source\"\n          position={Position.Right}\n          className=\"w-4 h-4 !bg-indigo-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-indigo-300\"\n          style={{\n            top: '50%',\n            transform: 'translateY(-50%)',\n            zIndex: 2,\n            boxShadow: '0 2px 8px rgba(67, 56, 202, 0.4)'\n          }}\n          isConnectable={true}\n        />\n        <Handle\n          id=\"right\"\n          type=\"target\"\n          position={Position.Right}\n          className=\"w-4 h-4 !bg-indigo-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-indigo-300\"\n          style={{\n            top: '50%',\n            transform: 'translateY(-50%)',\n            zIndex: 1,\n            boxShadow: '0 2px 8px rgba(67, 56, 202, 0.4)'\n          }}\n          isConnectable={true}\n        />\n\n        {/* Bottom handles */}\n        <Handle\n          id=\"bottom\"\n          type=\"source\"\n          position={Position.Bottom}\n          className=\"w-4 h-4 !bg-indigo-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-indigo-300\"\n          style={{\n            left: '50%',\n            transform: 'translateX(-50%)',\n            zIndex: 2,\n            boxShadow: '0 2px 8px rgba(67, 56, 202, 0.4)'\n          }}\n          isConnectable={true}\n        />\n        <Handle\n          id=\"bottom\"\n          type=\"target\"\n          position={Position.Bottom}\n          className=\"w-4 h-4 !bg-indigo-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-indigo-300\"\n          style={{\n            left: '50%',\n            transform: 'translateX(-50%)',\n            zIndex: 1,\n            boxShadow: '0 2px 8px rgba(67, 56, 202, 0.4)'\n          }}\n          isConnectable={true}\n        />\n\n        {/* Left handles */}\n        <Handle\n          id=\"left\"\n          type=\"source\"\n          position={Position.Left}\n          className=\"w-4 h-4 !bg-indigo-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-indigo-300\"\n          style={{\n            top: '50%',\n            transform: 'translateY(-50%)',\n            zIndex: 2,\n            boxShadow: '0 2px 8px rgba(67, 56, 202, 0.4)'\n          }}\n          isConnectable={true}\n        />\n        <Handle\n          id=\"left\"\n          type=\"target\"\n          position={Position.Left}\n          className=\"w-4 h-4 !bg-indigo-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-indigo-300\"\n          style={{\n            top: '50%',\n            transform: 'translateY(-50%)',\n            zIndex: 1,\n            boxShadow: '0 2px 8px rgba(67, 56, 202, 0.4)'\n          }}\n          isConnectable={true}\n        />\n\n        {/* 📚 TOPIC HEADER with knowledge icons */}\n        <div className=\"flex items-start justify-between mb-4\">\n          <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n            <div className=\"flex items-center gap-2 bg-white/15 rounded-xl px-3 py-2 backdrop-blur-sm\">\n              <motion.div\n                animate={{ rotate: [0, 5, -5, 0] }}\n                transition={{ duration: 4, repeat: Infinity, ease: \"easeInOut\" }}\n              >\n                <Lightbulb size={20} className=\"text-yellow-300\" />\n              </motion.div>\n              <BookOpen size={18} className=\"text-indigo-200\" />\n            </div>\n            <div className=\"font-bold text-xl text-white leading-tight\">\n              {data.label}\n            </div>\n          </div>\n          \n          {data.onDelete && (\n            <motion.button\n              whileHover={{ scale: 1.1 }}\n              whileTap={{ scale: 0.95 }}\n              onClick={(e) => {\n                e.preventDefault();\n                const deleteTimeout = setTimeout(() => {\n                  e.stopPropagation();\n                  data.onDelete();\n                }, 300);\n                e.currentTarget.deleteTimeout = deleteTimeout;\n              }}\n              onDoubleClick={(e) => {\n                if (e.currentTarget.deleteTimeout) {\n                  clearTimeout(e.currentTarget.deleteTimeout);\n                  e.currentTarget.deleteTimeout = null;\n                }\n              }}\n              className=\"p-2 hover:bg-white/20 rounded-lg transition-all duration-200 backdrop-blur-sm\"\n            >\n              <X size={16} className=\"text-indigo-100\" />\n            </motion.button>\n          )}\n        </div>\n\n        {/* 📝 TOPIC DESCRIPTION */}\n        {data.description && (\n          <div className=\"text-sm text-indigo-100 mb-4 p-3 bg-white/10 rounded-xl backdrop-blur-sm leading-relaxed\">\n            {data.description}\n          </div>\n        )}\n\n        {/* 🏷️ CATEGORY TAG */}\n        {data.category && (\n          <div className=\"flex items-center gap-2 mb-4\">\n            <Tag size={14} className=\"text-indigo-200\" />\n            <span className=\"text-xs font-semibold text-indigo-200 bg-white/15 px-3 py-1 rounded-full backdrop-blur-sm\">\n              {data.category.toUpperCase()}\n            </span>\n          </div>\n        )}\n\n        {/* 📊 PROGRESS VISUALIZATION */}\n        {data.flashcard_count > 0 && (\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center justify-between text-sm text-indigo-100\">\n              <span className=\"font-medium\">Learning Progress</span>\n              <span className=\"font-bold\">{Math.round(completionPercentage)}%</span>\n            </div>\n            \n            {/* Enhanced progress bar */}\n            <div className=\"relative\">\n              <div className=\"w-full bg-white/20 rounded-full h-3 backdrop-blur-sm border border-white/30\">\n                <motion.div\n                  className=\"h-full rounded-full bg-gradient-to-r from-yellow-400 to-orange-400 shadow-lg\"\n                  initial={{ width: 0 }}\n                  animate={{ width: `${completionPercentage}%` }}\n                  transition={{ duration: 1, ease: \"easeOut\" }}\n                />\n              </div>\n              <div className=\"text-xs text-indigo-200 mt-1 flex justify-between\">\n                <span>{data.completed_flashcards || 0} completed</span>\n                <span>{data.flashcard_count} total</span>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* 🧠 BRAIN ACTIVITY INDICATOR */}\n        <div className=\"absolute bottom-3 right-3 opacity-60 group-hover:opacity-100 transition-opacity duration-300\">\n          <motion.div\n            animate={{ \n              scale: [1, 1.1, 1],\n              opacity: [0.6, 1, 0.6]\n            }}\n            transition={{ \n              duration: 3, \n              repeat: Infinity, \n              ease: \"easeInOut\" \n            }}\n            className=\"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm\"\n          >\n            <Brain size={16} className=\"text-indigo-200\" />\n          </motion.div>\n        </div>\n\n        {/* 🕐 LAST UPDATED with enhanced styling */}\n        {data.updated_at && (\n          <div className=\"absolute bottom-2 left-3 opacity-50 group-hover:opacity-100 transition-opacity duration-300\">\n            <div className=\"w-6 h-6 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm\">\n              <Clock size={12} className=\"text-indigo-100\" />\n            </div>\n          </div>\n        )}\n      </div>\n    </motion.div>\n  );\n};\n\nexport default TopicNode;","import React, { useState, useEffect } from 'react';\nimport { Handle, Position } from '@xyflow/react';\nimport { Users, Calendar, CheckSquare, Clock, X, AlertCircle, Eye } from 'lucide-react';\nimport { motion } from 'framer-motion';\n\nconst CaseNode = ({ data, selected }) => {\n  const [isVisible, setIsVisible] = useState(data.skipAnimation || false);\n  \n  // Entry animation with slight delay for staggered effect - only if not skipping animations\n  useEffect(() => {\n    if (!data.skipAnimation) {\n      const timer = setTimeout(() => setIsVisible(true), 150);\n      return () => clearTimeout(timer);\n    }\n  }, [data.skipAnimation]);\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case 'active': return 'bg-green-100 text-green-800 border-green-200';\n      case 'archived': return 'bg-gray-100 text-gray-800 border-gray-200';\n      case 'follow_up': return 'bg-yellow-100 text-yellow-800 border-yellow-200';\n      default: return 'bg-blue-100 text-blue-800 border-blue-200';\n    }\n  };\n\n  const getUrgencyLevel = (data) => {\n    // Simple urgency calculation based on keywords\n    const urgentKeywords = ['emergency', 'urgent', 'crisis', 'acute', 'severe'];\n    const complaint = data.chief_complaint?.toLowerCase() || '';\n    const diagnosis = data.diagnosis?.toLowerCase() || '';\n\n    if (urgentKeywords.some(keyword => complaint.includes(keyword) || diagnosis.includes(keyword))) {\n      return 'high';\n    }\n    return 'normal';\n  };\n\n  const urgency = getUrgencyLevel(data);\n\n  return (\n    <motion.div\n      initial={data.skipAnimation ? { opacity: 1, scale: 1 } : { opacity: 0, scale: 0.8, y: 20 }}\n      animate={{ opacity: 1, scale: 1, y: 0 }}\n      exit={{ opacity: 0, scale: 0.8, y: -20 }}\n      transition={{ \n        duration: 0.5, \n        ease: [0.25, 0.46, 0.45, 0.94],\n        delay: data.skipAnimation ? 0 : 0.15\n      }}\n      whileHover={{ \n        scale: 1.05, \n        y: -2,\n        transition: { duration: 0.2 }\n      }}\n      className={`group relative min-w-[280px] max-w-[320px] cursor-pointer ${selected ? 'z-10' : 'z-0'}`}\n    >\n      {/* 🎨 ARTISTIC CARD CONTAINER with deep violet → plum gradient */}\n      <div\n        className={`\n          relative px-6 py-4 rounded-2xl backdrop-blur-sm\n          border transition-all duration-300 overflow-hidden\n          shadow-lg hover:shadow-2xl\n          ${selected\n            ? 'border-violet-300 shadow-violet-500/25 ring-4 ring-violet-200/50' \n            : 'border-violet-200/30 hover:border-violet-300/60'\n          }\n          ${urgency === 'high' ? 'ring-2 ring-red-400/60' : ''}\n        `}\n        style={{\n          background: 'linear-gradient(135deg, #581c87 0%, #7c3aed 25%, #a855f7 75%, #c084fc 100%)',\n          boxShadow: selected \n            ? '0 10px 25px -5px rgba(139, 92, 246, 0.4), 0 8px 10px -6px rgba(139, 92, 246, 0.3)'\n            : '0 4px 15px -3px rgba(139, 92, 246, 0.25), 0 4px 6px -4px rgba(139, 92, 246, 0.1)'\n        }}\n      >\n        {/* 🌟 GLOW EFFECT OVERLAY */}\n        <div \n          className={`\n            absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 \n            transition-opacity duration-300 pointer-events-none\n          `}\n          style={{\n            background: 'radial-gradient(circle at 50% 0%, rgba(255,255,255,0.1) 0%, transparent 70%)',\n          }}\n        />\n\n        {/* 🔗 ENHANCED CONNECTION HANDLES */}\n        {/* Top handles with violet theme */}\n        <Handle\n          id=\"top\"\n          type=\"source\"\n          position={Position.Top}\n          className=\"w-4 h-4 !bg-violet-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-violet-300\"\n          style={{\n            left: '50%',\n            transform: 'translateX(-50%)',\n            zIndex: 2,\n            boxShadow: '0 2px 8px rgba(139, 92, 246, 0.4)'\n          }}\n          isConnectable={true}\n        />\n        <Handle\n          id=\"top\"\n          type=\"target\"\n          position={Position.Top}\n          className=\"w-4 h-4 !bg-violet-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-violet-300\"\n          style={{\n            left: '50%',\n            transform: 'translateX(-50%)',\n            zIndex: 1,\n            boxShadow: '0 2px 8px rgba(139, 92, 246, 0.4)'\n          }}\n          isConnectable={true}\n        />\n\n        {/* Right handles */}\n        <Handle\n          id=\"right\"\n          type=\"source\"\n          position={Position.Right}\n          className=\"w-4 h-4 !bg-violet-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-violet-300\"\n          style={{\n            top: '50%',\n            transform: 'translateY(-50%)',\n            zIndex: 2,\n            boxShadow: '0 2px 8px rgba(139, 92, 246, 0.4)'\n          }}\n          isConnectable={true}\n        />\n        <Handle\n          id=\"right\"\n          type=\"target\"\n          position={Position.Right}\n          className=\"w-4 h-4 !bg-violet-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-violet-300\"\n          style={{\n            top: '50%',\n            transform: 'translateY(-50%)',\n            zIndex: 1,\n            boxShadow: '0 2px 8px rgba(139, 92, 246, 0.4)'\n          }}\n          isConnectable={true}\n        />\n\n        {/* Bottom handles */}\n        <Handle\n          id=\"bottom\"\n          type=\"source\"\n          position={Position.Bottom}\n          className=\"w-4 h-4 !bg-violet-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-violet-300\"\n          style={{\n            left: '50%',\n            transform: 'translateX(-50%)',\n            zIndex: 2,\n            boxShadow: '0 2px 8px rgba(139, 92, 246, 0.4)'\n          }}\n          isConnectable={true}\n        />\n        <Handle\n          id=\"bottom\"\n          type=\"target\"\n          position={Position.Bottom}\n          className=\"w-4 h-4 !bg-violet-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-violet-300\"\n          style={{\n            left: '50%',\n            transform: 'translateX(-50%)',\n            zIndex: 1,\n            boxShadow: '0 2px 8px rgba(139, 92, 246, 0.4)'\n          }}\n          isConnectable={true}\n        />\n\n        {/* Left handles */}\n        <Handle\n          id=\"left\"\n          type=\"source\"\n          position={Position.Left}\n          className=\"w-4 h-4 !bg-violet-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-violet-300\"\n          style={{\n            top: '50%',\n            transform: 'translateY(-50%)',\n            zIndex: 2,\n            boxShadow: '0 2px 8px rgba(139, 92, 246, 0.4)'\n          }}\n          isConnectable={true}\n        />\n        <Handle\n          id=\"left\"\n          type=\"target\"\n          position={Position.Left}\n          className=\"w-4 h-4 !bg-violet-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-violet-300\"\n          style={{\n            top: '50%',\n            transform: 'translateY(-50%)',\n            zIndex: 1,\n            boxShadow: '0 2px 8px rgba(139, 92, 246, 0.4)'\n          }}\n          isConnectable={true}\n        />\n\n        {/* 🚨 ENHANCED URGENCY INDICATOR */}\n        {urgency === 'high' && (\n          <motion.div \n            initial={{ scale: 0 }}\n            animate={{ scale: 1 }}\n            className=\"absolute -top-3 -right-3\"\n          >\n            <div className=\"w-7 h-7 bg-gradient-to-br from-red-400 to-red-600 rounded-full flex items-center justify-center border-2 border-white shadow-lg\">\n              <motion.div\n                animate={{ scale: [1, 1.2, 1] }}\n                transition={{ duration: 2, repeat: Infinity }}\n              >\n                <AlertCircle size={16} className=\"text-white\" />\n              </motion.div>\n            </div>\n          </motion.div>\n        )}\n\n        {/* 📱 CARD HEADER with enhanced styling */}\n        <div className=\"flex items-start justify-between mb-3\">\n          <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n            <div className=\"flex items-center gap-2 bg-white/10 rounded-lg px-2 py-1 backdrop-blur-sm\">\n              <Users size={18} className=\"text-violet-100 flex-shrink-0\" />\n              {data.linked_topics && data.linked_topics.length > 0 && (\n                <div className=\"text-xs bg-violet-300 text-violet-900 px-2 py-0.5 rounded-full font-medium\">\n                  {data.linked_topics.length}\n                </div>\n              )}\n            </div>\n            <div className=\"font-bold text-lg text-white truncate leading-tight\">\n              {data.label}\n            </div>\n          </div>\n          \n          {data.onDelete && (\n            <motion.button\n              whileHover={{ scale: 1.1 }}\n              whileTap={{ scale: 0.95 }}\n              onClick={(e) => {\n                e.preventDefault();\n                const deleteTimeout = setTimeout(() => {\n                  e.stopPropagation();\n                  data.onDelete();\n                }, 300);\n                e.currentTarget.deleteTimeout = deleteTimeout;\n              }}\n              onDoubleClick={(e) => {\n                if (e.currentTarget.deleteTimeout) {\n                  clearTimeout(e.currentTarget.deleteTimeout);\n                  e.currentTarget.deleteTimeout = null;\n                }\n              }}\n              className=\"p-2 hover:bg-white/20 rounded-lg transition-all duration-200 backdrop-blur-sm\"\n            >\n              <X size={16} className=\"text-violet-100\" />\n            </motion.button>\n          )}\n        </div>\n\n        {/* 🏥 DIAGNOSIS with enhanced styling */}\n        {data.diagnosis && (\n          <div className=\"text-sm text-violet-100 mb-3 p-2 bg-white/10 rounded-lg backdrop-blur-sm font-medium\">\n            {data.diagnosis}\n          </div>\n        )}\n\n        {/* 📊 ENHANCED PATIENT INFO GRID */}\n        <div className=\"grid grid-cols-2 gap-3 mb-3\">\n          {data.age && (\n            <div className=\"flex items-center gap-2 text-sm text-violet-100 bg-white/10 rounded-lg p-2 backdrop-blur-sm\">\n              <Calendar size={14} className=\"text-violet-200\" />\n              <span className=\"font-medium\">Age {data.age}</span>\n            </div>\n          )}\n\n          {data.status && (\n            <div className={`px-3 py-1.5 rounded-lg text-xs font-bold border-2 backdrop-blur-sm ${getStatusColor(data.status)}`}>\n              {data.status.replace('_', ' ').toUpperCase()}\n            </div>\n          )}\n        </div>\n\n        {/* 📋 PROGRESS INDICATORS with enhanced design */}\n        {data.tasks_count && data.tasks_count > 0 && (\n          <div className=\"flex items-center justify-between text-sm text-violet-100 bg-white/10 rounded-lg p-2 backdrop-blur-sm\">\n            <div className=\"flex items-center gap-2\">\n              <CheckSquare size={14} className=\"text-violet-200\" />\n              <span className=\"font-medium\">Tasks Progress</span>\n            </div>\n            <div className=\"font-bold\">\n              {data.completed_tasks || 0}/{data.tasks_count}\n            </div>\n          </div>\n        )}\n\n        {/* 👁️ VIEW TIMELINE BADGE (appears on hover) */}\n        <motion.div\n          initial={{ opacity: 0, y: 10 }}\n          animate={{ \n            opacity: 1, \n            y: 0,\n            transition: { delay: 0.2 }\n          }}\n          className=\"opacity-0 group-hover:opacity-100 transition-all duration-300 mt-3\"\n        >\n          <div className=\"flex items-center justify-center gap-2 bg-white/20 rounded-lg py-2 backdrop-blur-sm border border-white/30\">\n            <Eye size={16} className=\"text-white\" />\n            <span className=\"text-sm font-medium text-white\">View Timeline</span>\n          </div>\n        </motion.div>\n\n        {/* 🕐 LAST UPDATED INDICATOR with enhanced styling */}\n        {data.updated_at && (\n          <div className=\"absolute bottom-2 right-2 opacity-50 group-hover:opacity-100 transition-opacity duration-300\">\n            <div className=\"w-6 h-6 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm\">\n              <Clock size={12} className=\"text-violet-100\" />\n            </div>\n          </div>\n        )}\n      </div>\n    </motion.div>\n  );\n};\n\nexport default CaseNode;","import React, { useState, useEffect } from 'react';\nimport { Handle, Position } from '@xyflow/react';\nimport { CheckSquare, X, Clock, Flag, Target, Zap } from 'lucide-react';\nimport { motion } from 'framer-motion';\n\nconst TaskNode = ({ data, selected }) => {\n  const [isVisible, setIsVisible] = useState(data.skipAnimation || false);\n  \n  // Entry animation with different timing for variety - only if not skipping animations\n  useEffect(() => {\n    if (!data.skipAnimation) {\n      const timer = setTimeout(() => setIsVisible(true), 200);\n      return () => clearTimeout(timer);\n    }\n  }, [data.skipAnimation]);\n\n  // 🎨 Enhanced status styling with better visual hierarchy\n  const getStatusStyles = (status) => {\n    switch (status) {\n      case 'pending':\n        return {\n          background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 50%, #ea580c 100%)',\n          ring: 'ring-orange-300/50',\n          shadow: 'shadow-orange-500/30'\n        };\n      case 'in_progress':\n        return {\n          background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 50%, #1d4ed8 100%)',\n          ring: 'ring-blue-300/50',\n          shadow: 'shadow-blue-500/30'\n        };\n      case 'completed':\n        return {\n          background: 'linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%)',\n          ring: 'ring-emerald-300/50',\n          shadow: 'shadow-emerald-500/30',\n          opacity: 'opacity-75'\n        };\n      default:\n        return {\n          background: 'linear-gradient(135deg, #ff6b6b 0%, #ee5a52 50%, #e74c3c 100%)',\n          ring: 'ring-red-300/50',\n          shadow: 'shadow-red-500/30'\n        };\n    }\n  };\n\n  // 🎯 Priority ring colors\n  const getPriorityRing = (priority) => {\n    switch (priority) {\n      case 'high': return 'ring-4 ring-red-400 ring-opacity-70';\n      case 'medium': return 'ring-4 ring-yellow-400 ring-opacity-70';\n      case 'low': return 'ring-4 ring-green-400 ring-opacity-70';\n      default: return '';\n    }\n  };\n\n  const statusStyles = getStatusStyles(data.status);\n  const priorityRing = getPriorityRing(data.priority);\n\n  return (\n    <motion.div\n      initial={data.skipAnimation ? { opacity: 1, scale: 1 } : { opacity: 0, scale: 0.8, x: -20 }}\n      animate={{ opacity: 1, scale: 1, x: 0 }}\n      exit={{ opacity: 0, scale: 0.8, x: 20 }}\n      transition={{ \n        duration: 0.4, \n        ease: [0.68, -0.55, 0.265, 1.55],\n        delay: data.skipAnimation ? 0 : 0.2\n      }}\n      whileHover={{ \n        scale: 1.05, \n        x: 2,\n        transition: { duration: 0.2 }\n      }}\n      className={`group relative min-w-[240px] max-w-[280px] cursor-pointer ${selected ? 'z-10' : 'z-0'}`}\n    >\n      {/* 🎨 ARTISTIC TASK CONTAINER with bright coral theme */}\n      <div\n        className={`\n          relative px-5 py-4 rounded-2xl backdrop-blur-sm\n          border-2 transition-all duration-300 overflow-hidden\n          shadow-lg hover:shadow-2xl text-white font-medium\n          ${selected\n            ? `border-white shadow-2xl ring-4 ring-white/30 ${statusStyles.shadow}` \n            : 'border-white/30 hover:border-white/60'\n          }\n          ${priorityRing}\n          ${statusStyles.opacity || ''}\n        `}\n        style={{\n          background: statusStyles.background,\n          boxShadow: selected \n            ? '0 12px 32px -8px rgba(255, 107, 107, 0.4), 0 8px 16px -8px rgba(255, 107, 107, 0.3)'\n            : '0 6px 20px -6px rgba(255, 107, 107, 0.25), 0 4px 8px -4px rgba(255, 107, 107, 0.1)'\n        }}\n      >\n        {/* 🌟 ENERGY GLOW EFFECT */}\n        <div \n          className={`\n            absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 \n            transition-opacity duration-300 pointer-events-none\n          `}\n          style={{\n            background: 'radial-gradient(circle at 70% 30%, rgba(255,255,255,0.2) 0%, transparent 50%)',\n          }}\n        />\n\n        {/* 🔗 ENHANCED CONNECTION HANDLES with coral theme */}\n        {/* Top handles */}\n        <Handle\n          id=\"top\"\n          type=\"source\"\n          position={Position.Top}\n          className=\"w-4 h-4 !bg-red-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-red-300\"\n          style={{\n            left: '50%',\n            transform: 'translateX(-50%)',\n            zIndex: 2,\n            boxShadow: '0 2px 8px rgba(248, 113, 113, 0.4)'\n          }}\n          isConnectable={true}\n        />\n        <Handle\n          id=\"top\"\n          type=\"target\"\n          position={Position.Top}\n          className=\"w-4 h-4 !bg-red-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-red-300\"\n          style={{\n            left: '50%',\n            transform: 'translateX(-50%)',\n            zIndex: 1,\n            boxShadow: '0 2px 8px rgba(248, 113, 113, 0.4)'\n          }}\n          isConnectable={true}\n        />\n\n        {/* Right handles */}\n        <Handle\n          id=\"right\"\n          type=\"source\"\n          position={Position.Right}\n          className=\"w-4 h-4 !bg-red-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-red-300\"\n          style={{\n            top: '50%',\n            transform: 'translateY(-50%)',\n            zIndex: 2,\n            boxShadow: '0 2px 8px rgba(248, 113, 113, 0.4)'\n          }}\n          isConnectable={true}\n        />\n        <Handle\n          id=\"right\"\n          type=\"target\"\n          position={Position.Right}\n          className=\"w-4 h-4 !bg-red-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-red-300\"\n          style={{\n            top: '50%',\n            transform: 'translateY(-50%)',\n            zIndex: 1,\n            boxShadow: '0 2px 8px rgba(248, 113, 113, 0.4)'\n          }}\n          isConnectable={true}\n        />\n\n        {/* Bottom handles */}\n        <Handle\n          id=\"bottom\"\n          type=\"source\"\n          position={Position.Bottom}\n          className=\"w-4 h-4 !bg-red-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-red-300\"\n          style={{\n            left: '50%',\n            transform: 'translateX(-50%)',\n            zIndex: 2,\n            boxShadow: '0 2px 8px rgba(248, 113, 113, 0.4)'\n          }}\n          isConnectable={true}\n        />\n        <Handle\n          id=\"bottom\"\n          type=\"target\"\n          position={Position.Bottom}\n          className=\"w-4 h-4 !bg-red-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-red-300\"\n          style={{\n            left: '50%',\n            transform: 'translateX(-50%)',\n            zIndex: 1,\n            boxShadow: '0 2px 8px rgba(248, 113, 113, 0.4)'\n          }}\n          isConnectable={true}\n        />\n\n        {/* Left handles */}\n        <Handle\n          id=\"left\"\n          type=\"source\"\n          position={Position.Left}\n          className=\"w-4 h-4 !bg-red-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-red-300\"\n          style={{\n            top: '50%',\n            transform: 'translateY(-50%)',\n            zIndex: 2,\n            boxShadow: '0 2px 8px rgba(248, 113, 113, 0.4)'\n          }}\n          isConnectable={true}\n        />\n        <Handle\n          id=\"left\"\n          type=\"target\"\n          position={Position.Left}\n          className=\"w-4 h-4 !bg-red-400 !border-2 !border-white transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-red-300\"\n          style={{\n            top: '50%',\n            transform: 'translateY(-50%)',\n            zIndex: 1,\n            boxShadow: '0 2px 8px rgba(248, 113, 113, 0.4)'\n          }}\n          isConnectable={true}\n        />\n\n        {/* 🎯 PRIORITY INDICATOR with enhanced styling */}\n        {data.priority && (\n          <motion.div \n            initial={{ scale: 0, rotate: -180 }}\n            animate={{ scale: 1, rotate: 0 }}\n            className=\"absolute -top-3 -right-3\"\n          >\n            <div className={`w-8 h-8 rounded-full flex items-center justify-center border-3 border-white shadow-lg\n              ${data.priority === 'high' ? 'bg-red-500' : \n                data.priority === 'medium' ? 'bg-yellow-500' : 'bg-green-500'\n              }`}>\n              <Flag size={16} className=\"text-white\" />\n            </div>\n          </motion.div>\n        )}\n\n        {/* ✅ TASK HEADER with status icons */}\n        <div className=\"flex items-start justify-between mb-3\">\n          <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n            <div className=\"flex items-center gap-2 bg-white/20 rounded-xl px-3 py-2 backdrop-blur-sm\">\n              {data.status === 'completed' ? (\n                <motion.div\n                  initial={{ scale: 0 }}\n                  animate={{ scale: 1 }}\n                  transition={{ delay: 0.2 }}\n                >\n                  <CheckSquare size={20} className=\"text-green-300\" />\n                </motion.div>\n              ) : data.status === 'in_progress' ? (\n                <motion.div\n                  animate={{ rotate: [0, 360] }}\n                  transition={{ duration: 2, repeat: Infinity, ease: \"linear\" }}\n                >\n                  <Target size={20} className=\"text-blue-300\" />\n                </motion.div>\n              ) : (\n                <Zap size={20} className=\"text-yellow-300\" />\n              )}\n            </div>\n            <div className=\"font-bold text-lg text-white leading-tight\">\n              {data.label}\n            </div>\n          </div>\n          \n          {data.onDelete && (\n            <motion.button\n              whileHover={{ scale: 1.1 }}\n              whileTap={{ scale: 0.95 }}\n              onClick={(e) => {\n                e.preventDefault();\n                const deleteTimeout = setTimeout(() => {\n                  e.stopPropagation();\n                  data.onDelete();\n                }, 300);\n                e.currentTarget.deleteTimeout = deleteTimeout;\n              }}\n              onDoubleClick={(e) => {\n                if (e.currentTarget.deleteTimeout) {\n                  clearTimeout(e.currentTarget.deleteTimeout);\n                  e.currentTarget.deleteTimeout = null;\n                }\n              }}\n              className=\"p-2 hover:bg-white/20 rounded-lg transition-all duration-200 backdrop-blur-sm\"\n            >\n              <X size={16} className=\"text-white\" />\n            </motion.button>\n          )}\n        </div>\n\n        {/* 📝 TASK DESCRIPTION */}\n        {data.description && (\n          <div className=\"text-sm text-white/90 mb-3 p-3 bg-white/15 rounded-xl backdrop-blur-sm leading-relaxed\">\n            {data.description}\n          </div>\n        )}\n\n        {/* 📅 DUE DATE & PRIORITY INFO */}\n        <div className=\"grid grid-cols-2 gap-3 mb-3\">\n          {data.due_date && (\n            <div className=\"flex items-center gap-2 text-sm text-white/90 bg-white/15 rounded-lg p-2 backdrop-blur-sm\">\n              <Clock size={14} className=\"text-white\" />\n              <span className=\"font-medium\">{data.due_date}</span>\n            </div>\n          )}\n\n          {data.priority && (\n            <div className=\"flex items-center gap-2 text-sm text-white/90 bg-white/15 rounded-lg p-2 backdrop-blur-sm\">\n              <Flag size={14} className=\"text-white\" />\n              <span className=\"font-medium capitalize\">{data.priority}</span>\n            </div>\n          )}\n        </div>\n\n        {/* 📊 PROGRESS RING for tasks with subtasks */}\n        {data.total_subtasks && data.total_subtasks > 0 && (\n          <div className=\"flex items-center justify-between\">\n            <span className=\"text-sm font-medium text-white/90\">Subtasks</span>\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-sm font-bold text-white\">\n                {data.completed_subtasks || 0}/{data.total_subtasks}\n              </span>\n              <div className=\"relative w-6 h-6\">\n                <svg className=\"w-6 h-6 transform -rotate-90\" viewBox=\"0 0 24 24\">\n                  <circle\n                    cx=\"12\"\n                    cy=\"12\"\n                    r=\"8\"\n                    stroke=\"rgba(255,255,255,0.3)\"\n                    strokeWidth=\"2\"\n                    fill=\"none\"\n                  />\n                  <motion.circle\n                    cx=\"12\"\n                    cy=\"12\"\n                    r=\"8\"\n                    stroke=\"white\"\n                    strokeWidth=\"2\"\n                    fill=\"none\"\n                    strokeDasharray={`${2 * Math.PI * 8}`}\n                    strokeDashoffset={`${2 * Math.PI * 8 * (1 - ((data.completed_subtasks || 0) / data.total_subtasks))}`}\n                    initial={{ strokeDashoffset: 2 * Math.PI * 8 }}\n                    animate={{ \n                      strokeDashoffset: 2 * Math.PI * 8 * (1 - ((data.completed_subtasks || 0) / data.total_subtasks))\n                    }}\n                    transition={{ duration: 1, ease: \"easeOut\" }}\n                  />\n                </svg>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* 🕐 LAST UPDATED with enhanced styling */}\n        {data.updated_at && (\n          <div className=\"absolute bottom-2 right-2 opacity-60 group-hover:opacity-100 transition-opacity duration-300\">\n            <div className=\"w-6 h-6 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm\">\n              <Clock size={12} className=\"text-white\" />\n            </div>\n          </div>\n        )}\n      </div>\n    </motion.div>\n  );\n};\n\nexport default TaskNode;","import React, { useState, useEffect } from 'react';\nimport { Handle, Position } from '@xyflow/react';\nimport { BookOpen, X, FileText, Users, Calendar, Quote } from 'lucide-react';\nimport { motion } from 'framer-motion';\n\nconst LiteratureNode = ({ data, selected }) => {\n  const [isVisible, setIsVisible] = useState(data.skipAnimation || false);\n  \n  // Entry animation with the longest delay for final polish - only if not skipping animations\n  useEffect(() => {\n    if (!data.skipAnimation) {\n      const timer = setTimeout(() => setIsVisible(true), 250);\n      return () => clearTimeout(timer);\n    }\n  }, [data.skipAnimation]);\n\n  return (\n    <motion.div\n      initial={data.skipAnimation ? { opacity: 1, scale: 1 } : { opacity: 0, scale: 0.9, x: 20, rotate: -1 }}\n      animate={{ opacity: 1, scale: 1, x: 0, rotate: 0 }}\n      exit={{ opacity: 0, scale: 0.9, x: -20, rotate: 1 }}\n      transition={{ \n        duration: 0.5, \n        ease: [0.175, 0.885, 0.32, 1.275],\n        delay: data.skipAnimation ? 0 : 0.25\n      }}\n      whileHover={{ \n        scale: 1.03, \n        y: -2,\n        rotate: 0.5,\n        transition: { duration: 0.2 }\n      }}\n      className={`group relative min-w-[180px] max-w-[220px] cursor-pointer ${selected ? 'z-10' : 'z-0'}`}\n    >\n      {/* 🎨 ARTISTIC PAPER CONTAINER with academic styling */}\n      <div\n        className={`\n          relative px-3 py-3 rounded-lg backdrop-blur-sm\n          border-2 transition-all duration-400 overflow-hidden\n          shadow-lg hover:shadow-xl text-slate-800\n          ${selected\n            ? 'border-amber-300 shadow-amber-200/40 ring-4 ring-amber-200/30' \n            : 'border-amber-200/60 hover:border-amber-300/80'\n          }\n        `}\n        style={{\n          background: 'linear-gradient(145deg, #fefbf3 0%, #faf7f0 30%, #f7f3e9 70%, #f4f0e6 100%)',\n          fontFamily: '\"Crimson Text\", \"Times New Roman\", serif',\n          boxShadow: selected \n            ? '0 8px 25px -5px rgba(217, 119, 6, 0.2), 0 6px 12px -6px rgba(217, 119, 6, 0.15)'\n            : '0 4px 15px -3px rgba(217, 119, 6, 0.1), 0 2px 6px -3px rgba(217, 119, 6, 0.05)',\n          filter: 'drop-shadow(0 1px 3px rgba(0,0,0,0.1))'\n        }}\n      >\n        {/* 🌟 SUBTLE PAPER TEXTURE OVERLAY */}\n        <div \n          className={`\n            absolute inset-0 rounded-lg opacity-0 group-hover:opacity-100 \n            transition-opacity duration-400 pointer-events-none\n          `}\n          style={{\n            background: `\n              radial-gradient(circle at 20% 10%, rgba(245, 158, 11, 0.05) 0%, transparent 50%),\n              url(\"data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23d97706' fill-opacity='0.02'%3E%3Cpath d='M20 20.5V18H0v-2h20v-2H0v-2h20v-2H0V8h20V6H0V4h20V2H0V0h22v20h2V0h2v20h2V0h2v20h2V0h2v20h2V0h2v22H20v-1.5z'/%3E%3C/g%3E%3C/svg%3E\")\n            `\n          }}\n        />\n\n        {/* 🔗 ENHANCED CONNECTION HANDLES with amber theme */}\n        {/* Top handles */}\n        <Handle\n          id=\"top\"\n          type=\"source\"\n          position={Position.Top}\n          className=\"w-4 h-4 !bg-amber-500 !border-2 !border-slate-700 transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-amber-400\"\n          style={{\n            left: '50%',\n            transform: 'translateX(-50%)',\n            zIndex: 2,\n            boxShadow: '0 2px 8px rgba(217, 119, 6, 0.4)'\n          }}\n          isConnectable={true}\n        />\n        <Handle\n          id=\"top\"\n          type=\"target\"\n          position={Position.Top}\n          className=\"w-4 h-4 !bg-amber-500 !border-2 !border-slate-700 transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-amber-400\"\n          style={{\n            left: '50%',\n            transform: 'translateX(-50%)',\n            zIndex: 1,\n            boxShadow: '0 2px 8px rgba(217, 119, 6, 0.4)'\n          }}\n          isConnectable={true}\n        />\n\n        {/* Right handles */}\n        <Handle\n          id=\"right\"\n          type=\"source\"\n          position={Position.Right}\n          className=\"w-4 h-4 !bg-amber-500 !border-2 !border-slate-700 transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-amber-400\"\n          style={{\n            top: '50%',\n            transform: 'translateY(-50%)',\n            zIndex: 2,\n            boxShadow: '0 2px 8px rgba(217, 119, 6, 0.4)'\n          }}\n          isConnectable={true}\n        />\n        <Handle\n          id=\"right\"\n          type=\"target\"\n          position={Position.Right}\n          className=\"w-4 h-4 !bg-amber-500 !border-2 !border-slate-700 transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-amber-400\"\n          style={{\n            top: '50%',\n            transform: 'translateY(-50%)',\n            zIndex: 1,\n            boxShadow: '0 2px 8px rgba(217, 119, 6, 0.4)'\n          }}\n          isConnectable={true}\n        />\n\n        {/* Bottom handles */}\n        <Handle\n          id=\"bottom\"\n          type=\"source\"\n          position={Position.Bottom}\n          className=\"w-4 h-4 !bg-amber-500 !border-2 !border-slate-700 transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-amber-400\"\n          style={{\n            left: '50%',\n            transform: 'translateX(-50%)',\n            zIndex: 2,\n            boxShadow: '0 2px 8px rgba(217, 119, 6, 0.4)'\n          }}\n          isConnectable={true}\n        />\n        <Handle\n          id=\"bottom\"\n          type=\"target\"\n          position={Position.Bottom}\n          className=\"w-4 h-4 !bg-amber-500 !border-2 !border-slate-700 transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-amber-400\"\n          style={{\n            left: '50%',\n            transform: 'translateX(-50%)',\n            zIndex: 1,\n            boxShadow: '0 2px 8px rgba(217, 119, 6, 0.4)'\n          }}\n          isConnectable={true}\n        />\n\n        {/* Left handles */}\n        <Handle\n          id=\"left\"\n          type=\"source\"\n          position={Position.Left}\n          className=\"w-4 h-4 !bg-amber-500 !border-2 !border-slate-700 transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-amber-400\"\n          style={{\n            top: '50%',\n            transform: 'translateY(-50%)',\n            zIndex: 2,\n            boxShadow: '0 2px 8px rgba(217, 119, 6, 0.4)'\n          }}\n          isConnectable={true}\n        />\n        <Handle\n          id=\"left\"\n          type=\"target\"\n          position={Position.Left}\n          className=\"w-4 h-4 !bg-amber-500 !border-2 !border-slate-700 transition-all duration-300 hover:scale-125 cursor-pointer opacity-0 group-hover:opacity-100 hover:!bg-amber-400\"\n          style={{\n            top: '50%',\n            transform: 'translateY(-50%)',\n            zIndex: 1,\n            boxShadow: '0 2px 8px rgba(217, 119, 6, 0.4)'\n          }}\n          isConnectable={true}\n        />\n\n        {/* 📚 COMPACT ACADEMIC HEADER */}\n        <div className=\"flex items-start justify-between mb-3\">\n          <div className=\"flex items-center gap-2 flex-1 min-w-0\">\n            <div className=\"flex items-center gap-1 bg-amber-100/80 rounded px-2 py-1 border border-amber-200/60\">\n              <FileText size={14} className=\"text-amber-800\" />\n              <BookOpen size={12} className=\"text-amber-700\" />\n            </div>\n            <div className=\"font-bold text-sm text-slate-800 leading-tight line-clamp-2\" style={{ fontFamily: '\"Crimson Text\", serif' }}>\n              {data.title || data.label}\n            </div>\n          </div>\n          \n          {data.onDelete && (\n            <motion.button\n              whileHover={{ scale: 1.1 }}\n              whileTap={{ scale: 0.95 }}\n              onClick={(e) => {\n                e.preventDefault();\n                const deleteTimeout = setTimeout(() => {\n                  e.stopPropagation();\n                  data.onDelete();\n                }, 300);\n                e.currentTarget.deleteTimeout = deleteTimeout;\n              }}\n              onDoubleClick={(e) => {\n                if (e.currentTarget.deleteTimeout) {\n                  clearTimeout(e.currentTarget.deleteTimeout);\n                  e.currentTarget.deleteTimeout = null;\n                }\n              }}\n              className=\"p-1 hover:bg-amber-100 rounded-lg transition-all duration-200\"\n            >\n              <X size={14} className=\"text-slate-600\" />\n            </motion.button>\n          )}\n        </div>\n\n        {/* 👨‍💼 COMPACT AUTHORS & YEAR */}\n        {data.authors && (\n          <div className=\"flex items-center gap-2 mb-2 text-xs text-slate-700\">\n            <Users size={12} className=\"text-amber-700\" />\n            <span className=\"italic font-medium truncate\">\n              {(() => {\n                const authors = Array.isArray(data.authors) ? data.authors.join(', ') : data.authors;\n                return authors.length > 30 ? `${authors.substring(0, 30)}...` : authors;\n              })()}\n            </span>\n            {data.year && <span className=\"text-slate-600 font-semibold\">({data.year})</span>}\n          </div>\n        )}\n\n        {/* � COMPACT JOURNAL INFO */}\n        {data.journal && (\n          <div className=\"text-xs text-slate-700 bg-amber-50/60 rounded px-2 py-1 mb-2 truncate\">\n            <span className=\"font-medium italic\">{data.journal}</span>\n            {data.volume && <span className=\"ml-1 text-slate-600\">Vol.{data.volume}</span>}\n          </div>\n        )}\n\n        {/* 🏷️ COMPACT KEYWORDS */}\n        {(() => {\n          const keywordsOrTags = data.keywords || data.tags || [];\n          const keywords = Array.isArray(keywordsOrTags) ? keywordsOrTags : [];\n          \n          return keywords.length > 0 && (\n            <div className=\"flex flex-wrap gap-1 mb-2\">\n              {keywords.slice(0, 2).map((keyword, index) => (\n                <span\n                  key={index}\n                  className=\"text-xs bg-slate-200/60 text-slate-700 px-1.5 py-0.5 rounded border border-slate-300/40\"\n                >\n                  {keyword.length > 12 ? `${keyword.substring(0, 12)}...` : keyword}\n                </span>\n              ))}\n              {keywords.length > 2 && (\n                <span className=\"text-xs bg-slate-200/60 text-slate-700 px-1.5 py-0.5 rounded border border-slate-300/40\">\n                  +{keywords.length - 2}\n                </span>\n              )}\n            </div>\n          );\n        })()}\n\n        {/* 📊 COMPACT CITATION TOOLTIP */}\n        <motion.div\n          initial={{ opacity: 0, y: 5 }}\n          animate={{ \n            opacity: 1, \n            y: 0,\n            transition: { delay: 0.3 }\n          }}\n          className=\"opacity-0 group-hover:opacity-100 transition-all duration-300 mt-2\"\n        >\n          <div className=\"text-xs bg-slate-700 text-white rounded py-1 px-2 border border-slate-600\">\n            <div className=\"italic line-clamp-1\">\n              {data.authors && Array.isArray(data.authors) ? data.authors[0] : 'Author'} et al. \n              {data.year && ` (${data.year})`}\n              {data.journal && `, ${data.journal.substring(0, 20)}...`}\n            </div>\n          </div>\n        </motion.div>\n\n        {/* 🕐 LAST UPDATED with academic styling */}\n        {data.updated_at && (\n          <div className=\"absolute bottom-2 right-2 opacity-50 group-hover:opacity-100 transition-opacity duration-300\">\n            <div className=\"w-6 h-6 bg-amber-100/80 rounded-full flex items-center justify-center border border-amber-200/60\">\n              <Calendar size={12} className=\"text-amber-700\" />\n            </div>\n          </div>\n        )}\n      </div>\n    </motion.div>\n  );\n};\n\nexport default LiteratureNode;","// Central export for all node components\nexport { default as TopicNode } from './TopicNode';\nexport { default as CaseNode } from './CaseNode';\nexport { default as TaskNode } from './TaskNode';\nexport { default as LiteratureNode } from './LiteratureNode';\n\n// Node types configuration\nimport TopicNode from './TopicNode';\nimport CaseNode from './CaseNode';\nimport TaskNode from './TaskNode';\nimport LiteratureNode from './LiteratureNode';\n\nexport const nodeTypes = {\n  topic: TopicNode,\n  case: CaseNode,\n  task: TaskNode,\n  literature: LiteratureNode,\n};","// Performance optimizations for mind map rendering\nimport { useMemo, useCallback } from 'react';\n\n// Memoized node data to prevent unnecessary re-renders\nexport const useMemoizedNodeData = (data, dependencies = []) => {\n  return useMemo(() => data, dependencies);\n};\n\n// Throttled layout calculation to prevent excessive computations\nexport const useThrottledLayout = (layoutFunction, delay = 100) => {\n  return useCallback(\n    throttle(layoutFunction, delay),\n    [layoutFunction, delay]\n  );\n};\n\n// Throttle function implementation\nfunction throttle(func, delay) {\n  let timeoutId;\n  let lastExecTime = 0;\n  \n  return function (...args) {\n    const currentTime = Date.now();\n    \n    if (currentTime - lastExecTime > delay) {\n      func.apply(this, args);\n      lastExecTime = currentTime;\n    } else {\n      clearTimeout(timeoutId);\n      timeoutId = setTimeout(() => {\n        func.apply(this, args);\n        lastExecTime = Date.now();\n      }, delay - (currentTime - lastExecTime));\n    }\n  };\n}\n\n// Optimized data conversion with chunking for large datasets\nexport const convertDataInChunks = (data, chunkSize = 50) => {\n  return new Promise((resolve) => {\n    const chunks = [];\n    const allItems = [\n      ...data.topics.map(item => ({ ...item, type: 'topic' })),\n      ...data.cases.map(item => ({ ...item, type: 'case' })),\n      ...data.tasks.map(item => ({ ...item, type: 'task' })),\n      ...data.literature.map(item => ({ ...item, type: 'literature' }))\n    ];\n    \n    for (let i = 0; i < allItems.length; i += chunkSize) {\n      chunks.push(allItems.slice(i, i + chunkSize));\n    }\n    \n    resolve(chunks);\n  });\n};\n\n// Fast initial layout without force simulation\nexport const getQuickLayout = (nodes) => {\n  const gridSize = Math.ceil(Math.sqrt(nodes.length));\n  const nodeSpacing = 200;\n  \n  return nodes.map((node, index) => ({\n    ...node,\n    position: {\n      x: (index % gridSize) * nodeSpacing,\n      y: Math.floor(index / gridSize) * nodeSpacing\n    }\n  }));\n};\n\n// Memory-efficient edge creation\nexport const createOptimizedEdges = (connections, nodeIds) => {\n  const nodeIdSet = new Set(nodeIds);\n  \n  return connections\n    .filter(conn => nodeIdSet.has(conn.source) && nodeIdSet.has(conn.target))\n    .map(conn => ({\n      id: conn.id,\n      source: conn.source,\n      target: conn.target,\n      label: conn.label,\n      type: 'floating',\n      style: {\n        strokeWidth: 2,\n        stroke: '#64748b',\n        opacity: 0.85\n      },\n      animated: false,\n      updatable: true\n    }));\n};\n","// Sample literature data for testing the enhanced Literature modal\nexport const sampleLiteratureData = [\n  {\n    id: 1,\n    title: \"Efficacy of Cognitive Behavioral Therapy for Depression: A Meta-Analysis\",\n    authors: \"Smith, J.A., Johnson, B.K., Williams, C.D.\",\n    year: \"2023\",\n    type: \"meta-analysis\",\n    journal: \"Journal of Clinical Psychology\",\n    volume: \"79\",\n    pages: \"234-251\",\n    doi: \"10.1002/jclp.23456\",\n    abstract: \"This meta-analysis examines the efficacy of cognitive behavioral therapy (CBT) for treating major depressive disorder across 45 randomized controlled trials involving 3,242 participants. Results indicate that CBT shows significant effectiveness with a large effect size (d = 0.85) compared to control conditions. The analysis also reveals that individual CBT may be more effective than group CBT for severe depression cases.\",\n    keywords: \"cognitive behavioral therapy, depression, meta-analysis, psychotherapy, mental health\",\n    notes: \"\",\n    pdf_url: \"https://example.com/sample-cbt-meta-analysis.pdf\",\n    position: { x: 300, y: 100 }\n  },\n  {\n    id: 2,\n    title: \"DSM-5-TR Clinical Cases\",\n    authors: \"American Psychiatric Association\",\n    year: \"2022\",\n    type: \"guideline\",\n    journal: \"American Psychiatric Publishing\",\n    abstract: \"A comprehensive collection of clinical cases that illustrate the diagnostic criteria and clinical features of mental disorders as defined in the DSM-5-TR. Each case includes detailed patient presentations, differential diagnoses, and treatment considerations.\",\n    keywords: \"DSM-5, diagnosis, clinical cases, psychiatric disorders, differential diagnosis\",\n    notes: \"Essential reference for diagnostic clarity\",\n    position: { x: 500, y: 200 }\n  },\n  {\n    id: 3,\n    title: \"Pharmacological Treatment of Bipolar Disorder: Current Evidence\",\n    authors: \"Rodriguez, M.L., Chen, K.H., Anderson, P.R.\",\n    year: \"2023\",\n    type: \"review\",\n    journal: \"Bipolar Disorders\",\n    volume: \"25\",\n    pages: \"123-145\",\n    doi: \"10.1111/bdi.13289\",\n    abstract: \"This comprehensive review examines current evidence for pharmacological treatments of bipolar disorder, including mood stabilizers, antipsychotics, and adjunctive therapies. The review covers efficacy, safety profiles, and treatment-resistant cases.\",\n    keywords: \"bipolar disorder, pharmacotherapy, mood stabilizers, lithium, antipsychotics\",\n    notes: \"Important for medication management decisions\",\n    position: { x: 700, y: 150 }\n  },\n  {\n    id: 4,\n    title: \"Mindfulness-Based Interventions for Anxiety Disorders: A Systematic Review\",\n    authors: \"Taylor, S.M., Brown, A.J., Davis, L.K.\",\n    year: \"2023\",\n    type: \"review\",\n    journal: \"Clinical Psychology Review\",\n    volume: \"88\",\n    pages: \"102-118\",\n    abstract: \"Systematic review of mindfulness-based interventions for treating various anxiety disorders. Analysis of 28 studies shows moderate to large effect sizes for reducing anxiety symptoms, with particular effectiveness for generalized anxiety disorder.\",\n    keywords: \"mindfulness, anxiety disorders, meditation, systematic review, GAD\",\n    notes: \"Good evidence for mindfulness approaches\",\n    position: { x: 400, y: 300 }\n  },\n  {\n    id: 5,\n    title: \"Case Study: Treatment-Resistant Schizophrenia with Clozapine\",\n    authors: \"Wilson, K.R., Martinez, E.S.\",\n    year: \"2022\",\n    type: \"case-study\",\n    journal: \"Schizophrenia Bulletin\",\n    volume: \"48\",\n    pages: \"567-572\",\n    abstract: \"Detailed case study of a 28-year-old male with treatment-resistant schizophrenia who showed significant improvement after clozapine initiation. The case discusses monitoring protocols, side effect management, and long-term outcomes.\",\n    keywords: \"schizophrenia, clozapine, treatment-resistant, case study, antipsychotics\",\n    notes: \"Useful for understanding clozapine protocols\",\n    position: { x: 600, y: 400 }\n  }\n];\n\n// Sample connections between literature and other nodes\nexport const sampleConnections = [\n  {\n    id: \"conn-1\",\n    source: \"literature-1\",\n    target: \"case-101\", // Depression case\n    label: \"Treatment approach\"\n  },\n  {\n    id: \"conn-2\", \n    source: \"literature-2\",\n    target: \"topic-201\", // Diagnostic criteria topic\n    label: \"Reference guide\"\n  },\n  {\n    id: \"conn-3\",\n    source: \"literature-3\",\n    target: \"case-102\", // Bipolar case\n    label: \"Medication guidance\"\n  },\n  {\n    id: \"conn-4\",\n    source: \"literature-4\",\n    target: \"case-103\", // Anxiety case\n    label: \"Treatment option\"\n  },\n  {\n    id: \"conn-5\",\n    source: \"literature-5\",\n    target: \"case-104\", // Schizophrenia case\n    label: \"Treatment protocol\"\n  }\n];\n\n// Enhanced literature node factory\nexport const createLiteratureNode = (data) => ({\n  ...data,\n  label: data.title || 'Literature Item',\n  created_at: new Date().toISOString(),\n  updated_at: new Date().toISOString()\n});\n","// Utility to populate sample literature data for testing\nimport { sampleLiteratureData, sampleConnections } from '../data/sampleLiteratureData';\n\nexport const populateSampleLiteratureData = (setMindMapData, autoSaveMindMapData, addToast) => {\n  setMindMapData(prevData => {\n    // Add sample literature items if they don't already exist\n    const existingIds = new Set(prevData.literature.map(item => item.id));\n    const newLiterature = sampleLiteratureData.filter(item => !existingIds.has(item.id));\n    \n    if (newLiterature.length === 0) {\n      addToast('Sample literature data already exists', 'info');\n      return prevData;\n    }\n\n    // Create sample case and topic nodes to connect with literature\n    const sampleCases = [\n      {\n        id: 101,\n        label: 'Major Depression Case',\n        primary_diagnosis: 'Major Depressive Disorder',\n        chief_complaint: 'Persistent sadness and loss of interest',\n        secondary_diagnoses: ['Anxiety', 'Insomnia'],\n        position: { x: 100, y: 100 }\n      },\n      {\n        id: 102,\n        label: 'Bipolar Disorder Case', \n        primary_diagnosis: 'Bipolar I Disorder',\n        chief_complaint: 'Mood swings and impulsivity',\n        position: { x: 200, y: 200 }\n      },\n      {\n        id: 103,\n        label: 'Generalized Anxiety Case',\n        primary_diagnosis: 'Generalized Anxiety Disorder',\n        chief_complaint: 'Excessive worry and restlessness',\n        position: { x: 300, y: 300 }\n      },\n      {\n        id: 104,\n        label: 'Schizophrenia Case',\n        primary_diagnosis: 'Schizophrenia',\n        chief_complaint: 'Auditory hallucinations and delusions',\n        position: { x: 400, y: 400 }\n      }\n    ];\n\n    const sampleTopics = [\n      {\n        id: 201,\n        title: 'Diagnostic Criteria',\n        category: 'Assessment',\n        tags: ['DSM-5', 'diagnosis', 'criteria'],\n        position: { x: 150, y: 50 }\n      }\n    ];\n\n    // Filter out existing cases and topics\n    const existingCaseIds = new Set(prevData.cases.map(item => item.id));\n    const existingTopicIds = new Set(prevData.topics.map(item => item.id));\n    \n    const newCases = sampleCases.filter(item => !existingCaseIds.has(item.id));\n    const newTopics = sampleTopics.filter(item => !existingTopicIds.has(item.id));\n\n    // Add sample connections\n    const existingConnectionIds = new Set(prevData.connections.map(conn => conn.id));\n    const newConnections = sampleConnections.filter(conn => !existingConnectionIds.has(conn.id));\n\n    const updatedData = {\n      ...prevData,\n      literature: [...prevData.literature, ...newLiterature],\n      cases: [...prevData.cases, ...newCases],\n      topics: [...prevData.topics, ...newTopics],\n      connections: [...prevData.connections, ...newConnections]\n    };\n\n    // Save the updated data\n    autoSaveMindMapData(updatedData);\n    addToast(`Added ${newLiterature.length} literature items, ${newCases.length} cases, and ${newTopics.length} topics`, 'success');\n    \n    return updatedData;\n  });\n};\n\nexport const clearSampleData = (setMindMapData, autoSaveMindMapData, addToast) => {\n  setMindMapData(prevData => {\n    // Remove sample data based on IDs\n    const sampleLiteratureIds = new Set(sampleLiteratureData.map(item => item.id));\n    const sampleConnectionIds = new Set(sampleConnections.map(conn => conn.id));\n    const sampleCaseIds = new Set([101, 102, 103, 104]);\n    const sampleTopicIds = new Set([201]);\n\n    const updatedData = {\n      ...prevData,\n      literature: prevData.literature.filter(item => !sampleLiteratureIds.has(item.id)),\n      cases: prevData.cases.filter(item => !sampleCaseIds.has(item.id)),\n      topics: prevData.topics.filter(item => !sampleTopicIds.has(item.id)),\n      connections: prevData.connections.filter(conn => !sampleConnectionIds.has(conn.id))\n    };\n\n    autoSaveMindMapData(updatedData);\n    addToast('Sample literature data cleared', 'success');\n    \n    return updatedData;\n  });\n};\n","import React, { useState, useEffect, useCallback, useRef, useMemo, Suspense, lazy } from 'react';\nimport '@xyflow/react/dist/style.css';\nimport './App.css';\nimport axios from 'axios';\nimport { motion, AnimatePresence } from 'framer-motion';\n\n// Import timeline test component\nimport TimelineTestPage from './components/timeline-test/TimelineTestPage';\nimport {\n  ReactFlow,\n  addEdge,\n  Controls,\n  MiniMap,\n  useNodesState,\n  useEdgesState,\n  ReactFlowProvider,\n  Panel,\n  Handle,\n  Position,\n  useReactFlow,\n} from '@xyflow/react';\n\n// Lazy load heavy D3 dependencies\nconst loadD3Force = () => import('d3-force');\n\n// 🎨 ARTISTIC COMPONENTS\nimport ArtisticBackground from './components/ArtisticBackground';\nimport './components/ArtisticStyles.css';\nconst loadDagre = () => import('dagre');\n\nimport {\n  Plus,\n  Brain,\n  Users,\n  CheckSquare,\n  Edit3,\n  Save,\n  ArrowLeft,\n  FileText,\n  Calendar,\n  Target,\n  BookOpen,\n  Trash2,\n  X,\n  Shuffle,\n  Download,\n  Cloud,\n  CheckCircle,\n  Tag,\n  Clock,\n  AlertCircle,\n  Info,\n  Star,\n  Zap,\n  Settings,\n  Eye,\n  Upload,\n  Bell,\n  CheckCircle2,\n  Loader2,\n  Sparkles,\n  Search, // Added for global search functionality\n  Heart,\n  Bookmark,\n  User,\n  Clipboard,\n  StickyNote,\n  Paperclip,\n  ChevronDown,\n  ChevronUp,\n  ArrowDown\n} from 'lucide-react';\n\n// Lazy load components for better initial load time\nimport { RichTextEditor, LiteratureModal } from './components/LazyComponents';\nimport CaseModal from './components/CaseModal';\nimport TopicModal from './components/TopicModal';\nimport TaskModal from './components/TaskModal';\nimport FloatingEdge from './components/FloatingEdge'; // Import the custom FloatingEdge component\nimport EnhancedEdge from './components/EnhancedEdge'; // Import the enhanced edge component\nimport ConnectionLine from './components/ConnectionLine'; // Import the custom connection line for previews\nimport OptimizedLoadingScreen from './components/OptimizedLoadingScreen';\n\n// Import node components\nimport { nodeTypes } from './components/nodes';\n\n// Import performance utilities\nimport { \n  useMemoizedNodeData, \n  convertDataInChunks, \n  getQuickLayout, \n  createOptimizedEdges \n} from './utils/performanceUtils';\nimport { populateSampleLiteratureData, clearSampleData } from './utils/sampleDataUtils';\n\n// Use the environment variable for the backend URL, but provide a fallback\n// to the local server for development. This is a more robust pattern.\n// The .replace() call removes any trailing slashes to prevent \"404 Not Found\"\n// errors caused by double slashes in the request path (e.g., \"//api/\").\nconst BACKEND_URL = (process.env.REACT_APP_BACKEND_URL || 'http://localhost:8000').replace(/\\/$/, '');\nconst API = `${BACKEND_URL}/api`;\n\n// Fix ResizeObserver error that prevents React Flow from working\nconst debounce = (func, wait) => {\n  let timeout;\n  return function executedFunction(...args) {\n    const later = () => {\n      clearTimeout(timeout);\n      func(...args);\n    };\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n};\n\n// Suppress ResizeObserver errors that don't affect functionality\nconst originalError = console.error;\nconsole.error = (...args) => {\n  if (args[0] && args[0].includes && args[0].includes('ResizeObserver loop')) {\n    return;\n  }\n  originalError(...args);\n};\n\n// Toast Notification System\nconst Toast = ({ message, type = 'success', onClose, duration = 3000 }) => {\n  useEffect(() => {\n    const timer = setTimeout(onClose, duration);\n    return () => clearTimeout(timer);\n  }, [onClose, duration]);\n\n  const getToastStyles = () => {\n    const baseStyles = \"fixed top-4 right-4 z-50 px-6 py-3 rounded-lg shadow-lg transition-all duration-500 transform\";\n    const typeStyles = {\n      success: \"bg-green-600 text-white border-l-4 border-green-400\",\n      error: \"bg-red-600 text-white border-l-4 border-red-400\",\n      info: \"bg-blue-600 text-white border-l-4 border-blue-400\",\n      saving: \"bg-purple-600 text-white border-l-4 border-purple-400\"\n    };\n    return `${baseStyles} ${typeStyles[type]}`;\n  };\n\n  const getIcon = () => {\n    switch (type) {\n      case 'success': return <CheckCircle2 size={16} className=\"mr-2\" />;\n      case 'error': return <AlertCircle size={16} className=\"mr-2\" />;\n      case 'info': return <Info size={16} className=\"mr-2\" />;\n      case 'saving': return <Loader2 size={16} className=\"mr-2 animate-spin\" />;\n      default: return <CheckCircle2 size={16} className=\"mr-2\" />;\n    }\n  };\n\n  return (\n    <div className={getToastStyles()}>\n      <div className=\"flex items-center\">\n        {getIcon()}\n        <span className=\"text-sm font-medium\">{message}</span>\n        <button\n          onClick={onClose}\n          className=\"ml-4 text-white hover:text-gray-200 transition-colors\"\n        >\n          <X size={14} />\n        </button>\n      </div>\n    </div>\n  );\n};\n\n// Enhanced Loading Button Component\nconst LoadingButton = ({ onClick, loading, disabled, children, className, icon: Icon, ...props }) => {\n  return (\n    <button\n      onClick={onClick}\n      disabled={disabled || loading}\n      className={`${className} transform transition-all duration-200 hover:scale-105 active:scale-95 ${disabled || loading ? 'cursor-not-allowed opacity-50' : 'hover:shadow-lg'\n        }`}\n      {...props}\n    >\n      <div className=\"flex items-center gap-2\">\n        {loading ? (\n          <Loader2 size={16} className=\"animate-spin\" />\n        ) : Icon ? (\n          <Icon size={16} />\n        ) : null}\n        {children}\n      </div>\n    </button>\n  );\n};\n\n// localStorage utilities with enhanced feedback\nconst STORAGE_KEY = 'pgy3_mindmap_data';\nconst STORAGE_VERSION = '1.1';\n\nconst localStorageUtils = {\n  // Save data to localStorage with debouncing and callback for UI feedback\n  save: (() => {\n    let timeoutId;\n    return (data, onSaveStart, onSaveComplete, isAnimating = false) => {\n      clearTimeout(timeoutId);\n\n      if (onSaveStart) onSaveStart();\n\n      // Increase debounce delay during animations\n      const debounceDelay = isAnimating ? 1200 : 800;\n\n      timeoutId = setTimeout(() => {\n        try {\n          const storageData = {\n            version: STORAGE_VERSION,\n            timestamp: new Date().toISOString(),\n            data: data\n          };\n          localStorage.setItem(STORAGE_KEY, JSON.stringify(storageData));\n          console.log('Mind map data auto-saved to localStorage');\n          if (onSaveComplete) onSaveComplete(true);\n        } catch (error) {\n          console.error('Error saving to localStorage:', error);\n          if (onSaveComplete) onSaveComplete(false, error);\n\n          if (error.name === 'QuotaExceededError') {\n            console.warn('localStorage quota exceeded, clearing old data...');\n            try {\n              localStorage.removeItem(STORAGE_KEY);\n            } catch (clearError) {\n              console.error('Error clearing localStorage:', clearError);\n            }\n          }\n        }\n      }, debounceDelay); // Variable debounce delay\n    };\n  })(),\n\n  // Load data from localStorage\n  load: () => {\n    try {\n      const stored = localStorage.getItem(STORAGE_KEY);\n      if (!stored) {\n        console.log('No localStorage data found');\n        return null;\n      }\n\n      const storageData = JSON.parse(stored);\n\n      // Version check\n      if (storageData.version !== STORAGE_VERSION) {\n        console.log('localStorage version mismatch, clearing old data');\n        localStorage.removeItem(STORAGE_KEY);\n        return null;\n      }\n\n      console.log('Mind map data loaded from localStorage', storageData.timestamp);\n      return storageData.data;\n    } catch (error) {\n      console.error('Error loading from localStorage:', error);\n      // Clear corrupted data\n      try {\n        localStorage.removeItem(STORAGE_KEY);\n      } catch (clearError) {\n        console.error('Error clearing corrupted localStorage:', clearError);\n      }\n      return null;\n    }\n  },\n\n  // Clear stored data\n  clear: () => {\n    try {\n      localStorage.removeItem(STORAGE_KEY);\n      console.log('localStorage data cleared');\n    } catch (error) {\n      console.error('Error clearing localStorage:', error);\n    }\n  },\n\n  // Get storage info\n  getStorageInfo: () => {\n    try {\n      const stored = localStorage.getItem(STORAGE_KEY);\n      if (!stored) return null;\n\n      const data = JSON.parse(stored);\n      return {\n        version: data.version,\n        timestamp: data.timestamp,\n        size: new Blob([stored]).size\n      };\n    } catch (error) {\n      return null;\n    }\n  }\n};\n\n// Enhanced CSV export utilities\nconst csvUtils = {\n  generatePatientCasesCSV: (cases, onProgress) => {\n    if (!cases || cases.length === 0) {\n      return '';\n    }\n\n    if (onProgress) onProgress(10, 'Preparing headers...');\n\n    // Enhanced CSV headers with more detailed information\n    const headers = [\n      'Case ID',\n      'Encounter Date',\n      'Primary Diagnosis',\n      'Secondary Diagnoses',\n      'Age',\n      'Gender',\n      'Chief Complaint',\n      'History of Present Illness',\n      'Medical History',\n      'Medications',\n      'Mental Status Exam',\n      'Assessment & Plan',\n      'Status',\n      'Notes',\n      'Created Date',\n      'Updated Date',\n      'Linked Topics Count',\n      'Last Modified By'\n    ];\n\n    if (onProgress) onProgress(30, 'Processing case data...');\n\n    // Convert cases to CSV rows with enhanced data\n    const rows = cases.map((caseItem, index) => {\n      if (onProgress) onProgress(30 + (index / cases.length) * 50, `Processing case ${index + 1}/${cases.length}...`);\n\n      return [\n        caseItem.case_id || '',\n        caseItem.encounter_date ? new Date(caseItem.encounter_date).toLocaleDateString() : '',\n        caseItem.primary_diagnosis || '',\n        Array.isArray(caseItem.secondary_diagnoses) ? caseItem.secondary_diagnoses.join('; ') : '',\n        caseItem.age || '',\n        caseItem.gender || '',\n        caseItem.chief_complaint || '',\n        caseItem.history_present_illness || '',\n        caseItem.medical_history || '',\n        Array.isArray(caseItem.medications) ? caseItem.medications.join('; ') : '',\n        caseItem.mental_status_exam || '',\n        caseItem.assessment_plan || '',\n        caseItem.status || '',\n        caseItem.notes || '',\n        caseItem.created_at ? new Date(caseItem.created_at).toLocaleDateString() : '',\n        caseItem.updated_at ? new Date(caseItem.updated_at).toLocaleDateString() : '',\n        Array.isArray(caseItem.linked_topics) ? caseItem.linked_topics.length : '0',\n        'PGY-3 System'\n      ];\n    });\n\n    if (onProgress) onProgress(85, 'Formatting CSV content...');\n\n    // Escape CSV values and join\n    const escapeCsvValue = (value) => {\n      const stringValue = String(value);\n      if (stringValue.includes(',') || stringValue.includes('\"') || stringValue.includes('\\n')) {\n        return `\"${stringValue.replace(/\"/g, '\"\"')}\"`;\n      }\n      return stringValue;\n    };\n\n    const csvContent = [\n      headers.map(escapeCsvValue).join(','),\n      ...rows.map(row => row.map(escapeCsvValue).join(','))\n    ].join('\\n');\n\n    if (onProgress) onProgress(100, 'CSV generation complete!');\n\n    return csvContent;\n  },\n\n  downloadCSV: (csvContent, filename = 'patient_cases.csv') => {\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n\n    link.setAttribute('href', url);\n    link.setAttribute('download', filename);\n    link.style.visibility = 'hidden';\n\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n\n    URL.revokeObjectURL(url);\n  },\n\n  // Generate summary statistics\n  generateCasesSummary: (cases) => {\n    if (!cases || cases.length === 0) return null;\n\n    const diagnoses = {};\n    const statuses = {};\n    const ageGroups = { '18-30': 0, '31-50': 0, '51-70': 0, '70+': 0, 'Unknown': 0 };\n    const genders = {};\n\n    cases.forEach(caseItem => {\n      // Diagnoses\n      if (caseItem.primary_diagnosis) {\n        diagnoses[caseItem.primary_diagnosis] = (diagnoses[caseItem.primary_diagnosis] || 0) + 1;\n      }\n\n      // Status\n      if (caseItem.status) {\n        statuses[caseItem.status] = (statuses[caseItem.status] || 0) + 1;\n      }\n\n      // Age groups\n      if (caseItem.age) {\n        if (caseItem.age <= 30) ageGroups['18-30']++;\n        else if (caseItem.age <= 50) ageGroups['31-50']++;\n        else if (caseItem.age <= 70) ageGroups['51-70']++;\n        else ageGroups['70+']++;\n      } else {\n        ageGroups['Unknown']++;\n      }\n\n      // Gender\n      if (caseItem.gender) {\n        genders[caseItem.gender] = (genders[caseItem.gender] || 0) + 1;\n      }\n    });\n\n    return {\n      totalCases: cases.length,\n      diagnoses,\n      statuses,\n      ageGroups,\n      genders\n    };\n  }\n};\n\n// Enhanced Custom Node Components - extracted to separate files for better maintainability\n\n\n\n// Enhanced Dedicated Editing Form Component\nconst EnhancedEditingForm = ({ type, data, onClose, onSave, onDelete }) => {\n  // Initialize formData with proper field structure based on node type\n  const getInitialFormData = (type, data) => {\n    const baseData = data || {};\n    \n    switch (type) {\n      case 'case':\n        return {\n          case_id: '',\n          age: '',\n          primary_diagnosis: '',\n          gender: '',\n          chiefComplaint: '',\n          initialPresentation: '',\n          currentPresentation: '',\n          medicationHistory: '',\n          therapyProgress: '',\n          defensePatterns: '',\n          clinicalReflection: '',\n          ...baseData // Existing data takes precedence\n        };\n      case 'topic':\n        return {\n          title: '',\n          category: '',\n          color: '#3B82F6',\n          description: '',\n          notes: '',\n          tags: [],\n          ...baseData\n        };\n      case 'task':\n        return {\n          title: '',\n          description: '',\n          status: 'pending',\n          priority: 'medium',\n          due_date: '',\n          ...baseData\n        };\n      case 'literature':\n        return {\n          title: '',\n          authors: '',\n          year: '',\n          doi: '',\n          abstract: '',\n          notes: '',\n          tags: [],\n          ...baseData\n        };\n      default:\n        return baseData;\n    }\n  };\n\n  const [formData, setFormData] = useState(() => getInitialFormData(type, data));\n  const [activeTab, setActiveTab] = useState('basic');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [errors, setErrors] = useState({});\n\n  // Update formData when data prop changes\n  useEffect(() => {\n    setFormData(getInitialFormData(type, data));\n  }, [type, data]);\n\n  const tabs = {\n    basic: 'Basic Info',\n    details: 'Details',\n    notes: 'Notes & Tags',\n    history: 'History'\n  };\n\n  const validateForm = () => {\n    const newErrors = {};\n\n    switch (type) {\n      case 'topic':\n        if (!formData.title?.trim()) newErrors.title = 'Title is required';\n        if (!formData.category?.trim()) newErrors.category = 'Category is required';\n        break;\n      case 'case':\n        if (!formData.case_id?.trim()) newErrors.case_id = 'Case ID is required';\n        if (!formData.primary_diagnosis?.trim()) newErrors.primary_diagnosis = 'Primary diagnosis is required';\n        break;\n      case 'task':\n        if (!formData.title?.trim()) newErrors.title = 'Title is required';\n        break;\n      case 'literature':\n        if (!formData.title?.trim()) newErrors.title = 'Title is required';\n        if (!formData.authors?.trim()) newErrors.authors = 'Authors are required';\n        break;\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async () => {\n    if (!validateForm()) return;\n\n    setIsSubmitting(true);\n    try {\n      await onSave(formData);\n    } catch (error) {\n      console.error('Error saving:', error);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const updateFormData = (field, value) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n    if (errors[field]) {\n      setErrors(prev => ({ ...prev, [field]: null }));\n    }\n  };\n\n  const renderBasicTab = () => {\n    switch (type) {\n      case 'topic':\n        return (\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Title *</label>\n              <input\n                type=\"text\"\n                value={formData.title || ''}\n                onChange={(e) => updateFormData('title', e.target.value)}\n                className={`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 ${errors.title ? 'border-red-500' : 'border-gray-300'\n                  }`}\n                placeholder=\"Enter topic title\"\n              />\n              {errors.title && <p className=\"text-red-500 text-xs mt-1\">{errors.title}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Category *</label>\n              <select\n                value={formData.category || ''}\n                onChange={(e) => updateFormData('category', e.target.value)}\n                className={`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 ${errors.category ? 'border-red-500' : 'border-gray-300'\n                  }`}\n              >\n                <option value=\"\">Select category</option>\n                <option value=\"Mood Disorders\">Mood Disorders</option>\n                <option value=\"Anxiety Disorders\">Anxiety Disorders</option>\n                <option value=\"Psychotic Disorders\">Psychotic Disorders</option>\n                <option value=\"Personality Disorders\">Personality Disorders</option>\n                <option value=\"Substance Use Disorders\">Substance Use Disorders</option>\n                <option value=\"Other\">Other</option>\n              </select>\n              {errors.category && <p className=\"text-red-500 text-xs mt-1\">{errors.category}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Color Theme</label>\n              <div className=\"flex gap-2\">\n                {['#3B82F6', '#EF4444', '#10B981', '#F59E0B', '#8B5CF6', '#EC4899'].map(color => (\n                  <button\n                    key={color}\n                    onClick={() => updateFormData('color', color)}\n                    className={`w-8 h-8 rounded-full border-2 ${formData.color === color ? 'border-gray-800' : 'border-gray-300'\n                      }`}\n                    style={{ backgroundColor: color }}\n                  />\n                ))}\n              </div>\n            </div>\n          </div>\n        );\n\n      case 'case':\n        return (\n          <div className=\"space-y-4\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Case ID *</label>\n                <input\n                  type=\"text\"\n                  value={formData.case_id || ''}\n                  onChange={(e) => updateFormData('case_id', e.target.value)}\n                  className={`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 ${errors.case_id ? 'border-red-500' : 'border-gray-300'\n                    }`}\n                  placeholder=\"CASE-001\"\n                />\n                {errors.case_id && <p className=\"text-red-500 text-xs mt-1\">{errors.case_id}</p>}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Age</label>\n                <input\n                  type=\"number\"\n                  value={formData.age || ''}\n                  onChange={(e) => updateFormData('age', e.target.value)}\n                  className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  min=\"0\"\n                  max=\"120\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Primary Diagnosis *</label>\n              <input\n                type=\"text\"\n                value={formData.primary_diagnosis || ''}\n                onChange={(e) => updateFormData('primary_diagnosis', e.target.value)}\n                className={`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 ${errors.primary_diagnosis ? 'border-red-500' : 'border-gray-300'\n                  }`}\n                placeholder=\"Enter primary diagnosis\"\n              />\n              {errors.primary_diagnosis && <p className=\"text-red-500 text-xs mt-1\">{errors.primary_diagnosis}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Gender</label>\n              <select\n                value={formData.gender || ''}\n                onChange={(e) => updateFormData('gender', e.target.value)}\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n              >\n                <option value=\"\">Select gender</option>\n                <option value=\"Male\">Male</option>\n                <option value=\"Female\">Female</option>\n                <option value=\"Non-binary\">Non-binary</option>\n                <option value=\"Other\">Other</option>\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Chief Complaint</label>\n              <textarea\n                value={formData.chiefComplaint || ''}\n                onChange={(e) => updateFormData('chiefComplaint', e.target.value)}\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                rows={2}\n                placeholder=\"Describe the primary concern\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Initial Presentation</label>\n              <textarea\n                value={formData.initialPresentation || ''}\n                onChange={(e) => updateFormData('initialPresentation', e.target.value)}\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                rows={3}\n                placeholder=\"Symptoms and context at first visit\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Current Presentation</label>\n              <textarea\n                value={formData.currentPresentation || ''}\n                onChange={(e) => updateFormData('currentPresentation', e.target.value)}\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                rows={3}\n                placeholder=\"Describe how the case looks now\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Medication History</label>\n              <textarea\n                value={formData.medicationHistory || ''}\n                onChange={(e) => updateFormData('medicationHistory', e.target.value)}\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                rows={2}\n                placeholder=\"e.g. SSRI trials, mood stabilizers, etc.\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Therapy Progress</label>\n              <textarea\n                value={formData.therapyProgress || ''}\n                onChange={(e) => updateFormData('therapyProgress', e.target.value)}\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                rows={2}\n                placeholder=\"How the patient has responded to therapy\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Defense Patterns</label>\n              <textarea\n                value={formData.defensePatterns || ''}\n                onChange={(e) => updateFormData('defensePatterns', e.target.value)}\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                rows={2}\n                placeholder=\"e.g. projection, denial, rationalization\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Clinical Reflection</label>\n              <textarea\n                value={formData.clinicalReflection || ''}\n                onChange={(e) => updateFormData('clinicalReflection', e.target.value)}\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                rows={3}\n                placeholder=\"Your thoughts or questions about the case\"\n              />\n            </div>\n          </div>\n        );\n\n      default:\n        return <div>Basic form for {type}</div>;\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm\">\n      <div className=\"bg-white rounded-xl shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden\">\n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6\">\n          <div className=\"flex items-center justify-between\">\n            <h2 className=\"text-xl font-semibold capitalize flex items-center gap-2\">\n              <Sparkles size={20} />\n              Enhanced {type} Editor\n            </h2>\n            <button\n              onClick={onClose}\n              className=\"text-white hover:text-gray-200 transition-colors\"\n            >\n              <X size={24} />\n            </button>\n          </div>\n        </div>\n\n        {/* Tabs */}\n        <div className=\"border-b border-gray-200\">\n          <div className=\"flex\">\n            {Object.entries(tabs).map(([key, label]) => (\n              <button\n                key={key}\n                onClick={() => setActiveTab(key)}\n                className={`px-6 py-3 text-sm font-medium transition-colors ${activeTab === key\n                    ? 'border-b-2 border-blue-500 text-blue-600 bg-blue-50'\n                    : 'text-gray-500 hover:text-gray-700'\n                  }`}\n              >\n                {label}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-6 overflow-y-auto max-h-[calc(90vh-200px)]\">\n          {activeTab === 'basic' && renderBasicTab()}\n          {activeTab === 'details' && <div>Details content for {type}</div>}\n          {activeTab === 'notes' && <div>Notes and tags content</div>}\n          {activeTab === 'history' && <div>History content</div>}\n        </div>\n\n        {/* Footer */}\n        <div className=\"bg-gray-50 px-6 py-4 flex items-center justify-between border-t\">\n          <div className=\"flex gap-2\">\n            {onDelete && (\n              <LoadingButton\n                onClick={onDelete}\n                icon={Trash2}\n                className=\"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg\"\n              >\n                Delete\n              </LoadingButton>\n            )}\n          </div>\n\n          <div className=\"flex gap-2\">\n            <button\n              onClick={onClose}\n              className=\"px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors\"\n            >\n              Cancel\n            </button>\n            <LoadingButton\n              onClick={handleSubmit}\n              loading={isSubmitting}\n              icon={isSubmitting ? Loader2 : Save}\n              className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg\"\n            >\n              {isSubmitting ? 'Saving...' : 'Save Changes'}\n            </LoadingButton>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\nconst NodeSelector = ({ isOpen, onClose, onSelect }) => {\n  const [selectedNodeType, setSelectedNodeType] = useState(null);\n\n  // When the modal is closed, reset the internal state\n  useEffect(() => {\n    if (!isOpen) {\n      // Add a small delay to allow the closing animation to finish before state reset\n      const timer = setTimeout(() => setSelectedNodeType(null), 300);\n      return () => clearTimeout(timer);\n    }\n  }, [isOpen]);\n\n  if (!isOpen) return null;\n\n  // 🎨 ENHANCED NODE TYPES with artistic styling\n  const nodeTypes = [\n    { \n      type: 'topic', \n      label: 'Psychiatric Topic', \n      icon: Brain, \n      gradient: 'from-midnight-900 to-indigo-600', \n      shadowColor: 'shadow-indigo-500/30',\n      description: 'Add a new psychiatric topic or disorder',\n      bgPattern: 'gradient-midnight'\n    },\n    { \n      type: 'literature', \n      label: 'Literature', \n      icon: BookOpen, \n      gradient: 'from-amber-600 to-orange-500', \n      shadowColor: 'shadow-amber-500/30',\n      description: 'Add research papers, articles, or references',\n      bgPattern: 'gradient-parchment'\n    },\n    { \n      type: 'case', \n      label: 'Patient Case', \n      icon: Users, \n      gradient: 'from-violet-800 to-purple-600', \n      shadowColor: 'shadow-violet-500/30',\n      description: 'Add a new patient case study',\n      bgPattern: 'gradient-plum'\n    },\n    { \n      type: 'task', \n      label: 'Task', \n      icon: CheckSquare, \n      gradient: 'from-red-500 to-pink-500', \n      shadowColor: 'shadow-red-500/30',\n      description: 'Add a task or to-do item',\n      bgPattern: 'gradient-coral'\n    }\n  ];\n\n  const handleNodeTypeSelect = (nodeType) => {\n    setSelectedNodeType(nodeType);\n  };\n\n  const handleFinalSelect = () => {\n    onSelect(selectedNodeType);\n    onClose();\n  };\n\n  return (\n    <motion.div \n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      className=\"fixed inset-0 bg-black/70 flex items-center justify-center z-50 backdrop-blur-md\"\n    >\n      <motion.div \n        initial={{ scale: 0.9, opacity: 0, y: 20 }}\n        animate={{ scale: 1, opacity: 1, y: 0 }}\n        exit={{ scale: 0.9, opacity: 0, y: 20 }}\n        transition={{ \n          type: \"spring\", \n          stiffness: 300, \n          damping: 30\n        }}\n        className=\"bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl p-8 max-w-lg w-full mx-4 border border-white/20\"\n        style={{\n          background: 'linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(248,250,252,0.95) 100%)',\n          boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(255, 255, 255, 0.2)'\n        }}\n      >\n        {/* 🎨 ARTISTIC HEADER */}\n        <div className=\"flex items-center justify-between mb-8\">\n          <div className=\"flex items-center gap-4\">\n            {selectedNodeType && (\n              <motion.button\n                whileHover={{ scale: 1.1, x: -2 }}\n                whileTap={{ scale: 0.9 }}\n                onClick={() => setSelectedNodeType(null)}\n                className=\"text-gray-400 hover:text-gray-600 p-2 rounded-xl hover:bg-gray-100 transition-all\"\n              >\n                <ArrowLeft size={20} />\n              </motion.button>\n            )}\n            <div className=\"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg\">\n              <motion.div\n                animate={selectedNodeType ? { rotate: 45 } : { rotate: [0, 10, -10, 0] }}\n                transition={{ \n                  duration: selectedNodeType ? 0.3 : 2, \n                  repeat: selectedNodeType ? 0 : Infinity, \n                  ease: \"easeInOut\" \n                }}\n              >\n                <Plus size={24} className=\"text-white\" />\n              </motion.div>\n            </div>\n            <div>\n              <h2 className=\"text-2xl font-bold text-gray-800 mb-1\">\n                {selectedNodeType ? `Create ${selectedNodeType}` : 'Add New Node'}\n              </h2>\n              <p className=\"text-gray-600\">\n                {selectedNodeType ? 'Configure your new node' : 'Choose the type of content to add'}\n              </p>\n            </div>\n          </div>\n          <motion.button\n            whileHover={{ scale: 1.1 }}\n            whileTap={{ scale: 0.9 }}\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 p-2 rounded-xl hover:bg-gray-100 transition-all\"\n          >\n            <X size={24} />\n          </motion.button>\n        </div>\n\n        <div className=\"relative overflow-hidden\" style={{ minHeight: '200px' }}>\n          {/* View 1: Node Type Selection */}\n          <div className={`transition-transform duration-300 ease-in-out ${selectedNodeType ? '-translate-x-full opacity-0' : 'translate-x-0 opacity-100'}`}>\n            <div className=\"space-y-4\">\n              {nodeTypes.map(({ type, label, icon: Icon, gradient, shadowColor, description }) => (\n                <motion.button\n                  key={type}\n                  onClick={() => handleNodeTypeSelect(type)}\n                  whileHover={{ scale: 1.02, y: -2 }}\n                  whileTap={{ scale: 0.98 }}\n                  className={`\n                    w-full flex items-center gap-4 p-5 rounded-2xl border-2 border-transparent \n                    hover:border-white/30 transition-all text-left overflow-hidden relative\n                    bg-gradient-to-r ${gradient} text-white shadow-lg hover:shadow-xl ${shadowColor}\n                    group\n                  `}\n                >\n                  {/* Glow effect overlay */}\n                  <div className=\"absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none bg-gradient-to-r from-white/10 to-transparent\" />\n                  \n                  <div className=\"bg-white/20 p-3 rounded-xl backdrop-blur-sm border border-white/30 relative z-10\">\n                    <Icon size={24} className=\"text-white\" />\n                  </div>\n                  <div className=\"relative z-10\">\n                    <div className=\"font-bold text-lg text-white mb-1\">{label}</div>\n                    <div className=\"text-sm text-white/80 leading-relaxed\">{description}</div>\n                  </div>\n                </motion.button>\n              ))}\n            </div>\n          </div>\n\n          {/* View 2: Node Creation */}\n          <div className={`absolute top-0 left-0 w-full transition-transform duration-300 ease-in-out ${selectedNodeType ? 'translate-x-0 opacity-100' : 'translate-x-full opacity-0'}`}>\n            {selectedNodeType && (\n              <div className=\"space-y-3\">\n                {/* Create Blank Option */}\n                <button\n                  onClick={() => handleFinalSelect()}\n                  className=\"w-full flex items-center gap-4 p-4 rounded-lg border-2 border-dashed border-gray-300 hover:border-blue-400 hover:bg-blue-50 transition-all text-left\"\n                >\n                  <div className=\"bg-gray-200 p-2 rounded-lg text-gray-600\">\n                    <Plus size={20} />\n                  </div>\n                  <div>\n                    <div className=\"font-medium text-gray-800\">Create Blank {selectedNodeType}</div>\n                    <div className=\"text-sm text-gray-500\">Start with an empty node.</div>\n                  </div>\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      </motion.div>\n    </motion.div>\n  );\n};\n\n// Edge Label Modal Component\nconst EdgeLabelModal = ({ edge, isOpen, onClose, onSave }) => {\n  const [label, setLabel] = useState(edge?.label || '');\n\n  // Update label when edge changes\n  useEffect(() => {\n    setLabel(edge?.label || '');\n  }, [edge]);\n\n  const handleSave = () => {\n    onSave(edge.id, label);\n    onClose();\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      handleSave();\n    } else if (e.key === 'Escape') {\n      onClose();\n    }\n  };\n\n  if (!isOpen || !edge) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm\">\n      <div className=\"bg-white rounded-xl shadow-2xl p-6 max-w-md w-full mx-4 transform transition-all\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h3 className=\"text-xl font-semibold text-gray-800\">Edit Connection Label</h3>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 p-1 transition-colors\"\n          >\n            <X size={20} />\n          </button>\n        </div>\n\n        <div className=\"mb-6\">\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Connection Label\n          </label>\n          <input\n            type=\"text\"\n            value={label}\n            onChange={(e) => setLabel(e.target.value)}\n            onKeyPress={handleKeyPress}\n            placeholder=\"Enter a label for this connection...\"\n            className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"\n            autoFocus\n          />\n          <p className=\"text-xs text-gray-500 mt-1\">\n            Press Enter to save, Escape to cancel\n          </p>\n        </div>\n\n        <div className=\"flex items-center justify-end gap-3\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={handleSave}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2\"\n          >\n            <Save size={16} />\n            Save Label\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Enhanced Main Dashboard Component with improved visual effects\nconst DashboardComponent = () => {\n  const { fitView, setCenter, zoomTo, getViewport } = useReactFlow();\n\n  const [nodes, setNodes, onNodesChange] = useNodesState([]);\n  const [edges, setEdges, onEdgesChange] = useEdgesState([]);\n\n  // State for forcing node updates\n  const [nodeUpdateTrigger, setNodeUpdateTrigger] = useState(0);\n\n  const [mindMapData, setMindMapData] = useState({\n    topics: [],\n    cases: [],\n    tasks: [],\n    literature: [],\n    connections: []\n  });\n\n  const [isEditing, setIsEditing] = useState(false);\n  const [selectedNode, setSelectedNode] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [loadingProgress, setLoadingProgress] = useState(0);\n  const [loadingMessage, setLoadingMessage] = useState('Initializing...');\n  const [isInitialLoad, setIsInitialLoad] = useState(true);\n  const [focusedCategory, setFocusedCategory] = useState(null);\n  const [showNodeSelector, setShowNodeSelector] = useState(false);\n  // Specialized modal state for each node type with stable data references\n  const [caseModal, setCaseModal] = useState({ isOpen: false, data: null });\n  const [topicModal, setTopicModal] = useState({ isOpen: false, data: null });\n  const [taskModal, setTaskModal] = useState({ isOpen: false, data: null });\n  const caseModalStableData = useRef(null);\n  const topicModalStableData = useRef(null);\n  const taskModalStableData = useRef(null);\n  const [isReactFlowReady, setIsReactFlowReady] = useState(false);\n  const [hasAppliedInitialLayout, setHasAppliedInitialLayout] = useState(false);\n  const [isExportingCSV, setIsExportingCSV] = useState(false);\n  const [lastSaved, setLastSaved] = useState(null);\n  const [isSaving, setIsSaving] = useState(false);\n  const [edgeModal, setEdgeModal] = useState({ isOpen: false, edge: null });\n  const [toasts, setToasts] = useState([]);\n  const [literatureModal, setLiteratureModal] = useState({ isOpen: false, data: null });\n  const [isAnimating, setIsAnimating] = useState(false); // Track animation state\n  const [modalAnimationStates, setModalAnimationStates] = useState({\n    case: false,\n    topic: false,\n    task: false,\n    literature: false\n  });\n  const addToast = useCallback((message, type = 'success', duration = 3000) => {\n    const id = Date.now();\n    const newToast = { id, message, type, duration };\n    setToasts(prev => [...prev, newToast]);\n  }, []);\n\n  const removeToast = useCallback((id) => {\n    setToasts(prev => prev.filter(toast => toast.id !== id));\n  }, []);\n\n  const autoSaveMindMapData = useCallback((data) => {\n    // Enhanced animation and modal state checking\n    const anyModalOpen = caseModal.isOpen || topicModal.isOpen || taskModal.isOpen || literatureModal.isOpen;\n    const anyModalAnimating = Object.values(modalAnimationStates).some(state => state);\n    const anyModalTransitioning = (caseModal.isOpen && caseModal.data?.isTabTransitioning) || \n                                  (topicModal.isOpen && topicModal.data?.isTabTransitioning) ||\n                                  (taskModal.isOpen && taskModal.data?.isTabTransitioning);\n    \n    if (isAnimating || anyModalOpen || anyModalTransitioning || anyModalAnimating) {\n      console.log('Deferring auto-save during animation, modal interaction, or tab transition');\n      // Use a longer delay and exponential backoff for persistent animation states\n      const delay = anyModalTransitioning || anyModalAnimating ? 2000 : 1000;\n      setTimeout(() => autoSaveMindMapData(data), delay);\n      return;\n    }\n\n    const onSaveStart = () => setIsSaving(true);\n    const onSaveComplete = (success, error) => {\n      setIsSaving(false);\n      if (success) {\n        setLastSaved(new Date());\n        // Reduce toast frequency during auto-save to prevent UI distractions\n        // addToast('Data auto-saved', 'saving', 1000);\n      } else {\n        addToast('Auto-save failed', 'error', 4000);\n        console.error('Auto-save error:', error);\n      }\n    };\n\n    localStorageUtils.save(data, onSaveStart, onSaveComplete, isAnimating);\n    // Use requestIdleCallback for backend saves to avoid blocking animations\n    if (window.requestIdleCallback) {\n      window.requestIdleCallback(() => {\n        // Double-check animation state before backend save\n        const stillAnimating = isAnimating || Object.values(modalAnimationStates).some(state => state);\n        if (!stillAnimating) {\n          saveToBackend(data);\n        }\n      }, { timeout: 5000 });\n    } else {\n      setTimeout(() => {\n        const stillAnimating = isAnimating || Object.values(modalAnimationStates).some(state => state);\n        if (!stillAnimating) {\n          saveToBackend(data);\n        }\n      }, 100); // Longer delay fallback\n    }\n  }, [addToast, isAnimating, modalAnimationStates, caseModal.isOpen, topicModal.isOpen, taskModal.isOpen, literatureModal.isOpen]);\n\n  // Separate function for position-only updates (more frequent, less critical)\n  const autoSavePositionData = useCallback((data) => {\n    // Enhanced checks for animation states\n    const anyModalOpen = caseModal.isOpen || topicModal.isOpen || taskModal.isOpen || literatureModal.isOpen;\n    const anyModalAnimating = Object.values(modalAnimationStates).some(state => state);\n    if (isAnimating || anyModalOpen || anyModalAnimating) return;\n    \n    // Save to localStorage immediately\n    localStorageUtils.save(data, null, null, isAnimating);\n    \n    // Also save to backend with a small delay to batch updates\n    clearTimeout(window.positionBackendSaveTimeout);\n    window.positionBackendSaveTimeout = setTimeout(() => {\n      // Call saveToBackend indirectly to avoid initialization issues\n      autoSaveMindMapData(data);\n    }, 800); // 800ms delay to batch multiple position changes\n  }, [isAnimating, modalAnimationStates, caseModal.isOpen, topicModal.isOpen, taskModal.isOpen, literatureModal.isOpen, autoSaveMindMapData]);\n\n  // Stable data effects to prevent modal re-renders during auto-save\n  useEffect(() => {\n    if (caseModal.isOpen && caseModal.data) {\n      // Store stable reference when modal opens\n      caseModalStableData.current = { ...caseModal.data };\n    } else if (!caseModal.isOpen) {\n      // Clear reference when modal closes\n      caseModalStableData.current = null;\n    }\n  }, [caseModal.isOpen, caseModal.data?.id]);\n\n  useEffect(() => {\n    if (topicModal.isOpen && topicModal.data) {\n      topicModalStableData.current = { ...topicModal.data };\n    } else if (!topicModal.isOpen) {\n      topicModalStableData.current = null;\n    }\n  }, [topicModal.isOpen, topicModal.data?.id]);\n\n  useEffect(() => {\n    if (taskModal.isOpen && taskModal.data) {\n      taskModalStableData.current = { ...taskModal.data };\n    } else if (!taskModal.isOpen) {\n      taskModalStableData.current = null;\n    }\n  }, [taskModal.isOpen, taskModal.data?.id]);\n\nconst handleDeleteNode = useCallback((fullNodeId) => {\n  // fullNodeId is always in the format `${nodeType}-${id}`\n  console.log(`Deleting node with full ID:`, fullNodeId);\n\n  // Extract nodeType and id from fullNodeId\n  const [nodeType, ...idParts] = fullNodeId.split('-');\n  const nodeId = idParts.join('-');\n  const collectionKey = nodeType === 'literature' ? 'literature' : `${nodeType}s`;\n\n  setMindMapData(prevData => {\n    // Remove the node from its collection\n    const updatedCollection = (prevData[collectionKey] || []).filter(item => String(item.id) !== nodeId);\n    // Remove any connections that are attached to the deleted node\n    const updatedConnections = (prevData.connections || []).filter(\n      conn => conn.source !== fullNodeId && conn.target !== fullNodeId\n    );\n    const newData = {\n      ...prevData,\n      [collectionKey]: updatedCollection,\n      connections: updatedConnections,\n    };\n    autoSaveMindMapData(newData);\n    addToast(`${nodeType.charAt(0).toUpperCase() + nodeType.slice(1)} deleted.`, 'success');\n    return newData;\n  });\n  // Remove the node from the visual state\n  setNodes((nds) => nds.filter((node) => node.id !== fullNodeId));\n  // Remove edges referencing this node\n  setEdges((eds) => eds.filter((edge) => edge.source !== fullNodeId && edge.target !== fullNodeId));\n}, [setMindMapData, autoSaveMindMapData, addToast, setNodes, setEdges]);\n\n// Handle literature node click to open modal\nconst handleLiteratureClick = useCallback((literatureData) => {\n  setIsAnimating(true); // Set animation state\n  setLiteratureModal({ isOpen: true, data: literatureData });\n  // Clear animation state after modal animation completes\n  setTimeout(() => setIsAnimating(false), 700); // 600ms modal animation + 100ms buffer\n}, []);\n\n// Enhanced node sync function that forces React Flow re-renders\nconst syncNodeData = useCallback(() => {\n  console.log('syncNodeData called - syncing node colors and labels');\n  \n  setNodes(currentNodes => {\n    let hasChanges = false;\n    const updatedNodes = currentNodes.map(node => {\n      const nodeType = node.id.split('-')[0];\n      const nodeId = node.id.split('-')[1];\n      \n      let newLabel = node.data.label;\n      let newColor = node.data.color;\n      let needsUpdate = false;\n      \n      // Find the corresponding data item and sync properties\n      if (nodeType === 'case') {\n        const caseData = mindMapData.cases?.find(c => String(c.id) === nodeId);\n        if (caseData) {\n          const expectedLabel = caseData.primaryDiagnosis || caseData.primary_diagnosis || caseData.title || 'Untitled Case';\n          if (expectedLabel !== node.data.label) {\n            newLabel = expectedLabel;\n            needsUpdate = true;\n          }\n        }\n      } else if (nodeType === 'topic') {\n        const topicData = mindMapData.topics?.find(t => String(t.id) === nodeId);\n        if (topicData) {\n          const expectedLabel = topicData.title || 'Untitled Topic';\n          const expectedColor = topicData.color || '#3B82F6';\n          \n          if (expectedLabel !== node.data.label) {\n            newLabel = expectedLabel;\n            needsUpdate = true;\n          }\n          \n          if (expectedColor !== node.data.color) {\n            newColor = expectedColor;\n            needsUpdate = true;\n            console.log(`Topic ${nodeId}: Color changing from ${node.data.color} to ${expectedColor}`);\n          }\n        }\n      } else if (nodeType === 'task') {\n        const taskData = mindMapData.tasks?.find(t => String(t.id) === nodeId);\n        if (taskData) {\n          const expectedLabel = taskData.title || 'Untitled Task';\n          if (expectedLabel !== node.data.label) {\n            newLabel = expectedLabel;\n            needsUpdate = true;\n          }\n        }\n      } else if (nodeType === 'literature') {\n        const literatureData = mindMapData.literature?.find(l => String(l.id) === nodeId);\n        if (literatureData) {\n          const expectedLabel = literatureData.title || 'Untitled Literature';\n          if (expectedLabel !== node.data.label) {\n            newLabel = expectedLabel;\n            needsUpdate = true;\n          }\n        }\n      }\n      \n      // Create entirely new node object if something changed (forces React Flow re-render)\n      if (needsUpdate) {\n        hasChanges = true;\n        // Force React to treat this as a completely new object\n        const timestamp = Date.now();\n        const newNode = {\n          id: node.id,\n          type: node.type,\n          position: { ...node.position },\n          data: {\n            ...node.data,\n            label: newLabel,\n            color: newColor,\n            // Add timestamp to force re-render\n            lastUpdated: timestamp\n          },\n          // Force new style object for topic nodes\n          style: nodeType === 'topic' ? {\n            backgroundColor: newColor,\n            color: 'white',\n            boxShadow: `0 4px 20px ${newColor}20`,\n            transition: 'all 0.7s cubic-bezier(0.34, 1.56, 0.64, 1), transform 0.3s ease',\n            // Force React to detect change\n            zIndex: timestamp % 1000\n          } : node.style,\n          // Add a rendering key to force React Flow update\n          key: `${node.id}-${timestamp}`\n        };\n        \n        return newNode;\n      }\n      \n      return node;\n    });\n    \n    if (hasChanges) {\n      console.log('syncNodeData: Changes detected, updating nodes with forced re-render');\n      // Return completely new array to force React Flow update\n      return [...updatedNodes];\n    } else {\n      console.log('syncNodeData: No changes needed');\n      return currentNodes;\n    }\n  });\n}, [mindMapData, setNodes]);\n\n// Trigger auto-sync when mindMapData changes with enhanced detection\nuseEffect(() => {\n  const hasData = mindMapData && (mindMapData.cases?.length > 0 || mindMapData.topics?.length > 0 || \n                                 mindMapData.tasks?.length > 0 || mindMapData.literature?.length > 0);\n  \n  if (hasData) {\n    // Add small delay to ensure state has settled\n    const timeoutId = setTimeout(() => {\n      console.log('useEffect triggered syncNodeData due to mindMapData change');\n      syncNodeData();\n    }, 50);\n    \n    // If we don't have nodes but we have data, convert data to React Flow\n    if (nodes.length === 0) {\n      console.log('Converting data to React Flow nodes due to data change');\n      // Use a timeout to avoid dependency issues and ensure state is stable\n      setTimeout(() => {\n        convertDataToReactFlow(mindMapData, false); // CHANGED: Don't apply force layout automatically\n      }, 100);\n    }\n    \n    return () => clearTimeout(timeoutId);\n  }\n}, [mindMapData, syncNodeData, nodes.length]); // Updated to use syncNodeData\n\n// Force node update when trigger changes\nuseEffect(() => {\n  if (nodeUpdateTrigger > 0) {\n    console.log('Force update triggered by nodeUpdateTrigger:', nodeUpdateTrigger);\n    setTimeout(() => {\n      syncNodeData();\n    }, 100);\n  }\n}, [nodeUpdateTrigger, syncNodeData]);\n\n  const convertDataToReactFlow = useCallback(async (data, applyLayoutImmediately = false) => {\n    // Use optimized quick layout for initial load\n    const allItems = [\n      ...data.topics.map(item => ({ ...item, type: 'topic' })),\n      ...data.cases.map(item => ({ ...item, type: 'case' })),\n      ...data.tasks.map(item => ({ ...item, type: 'task' })),\n      ...data.literature.map(item => ({ ...item, type: 'literature' }))\n    ];\n\n    // If we have data and need immediate layout, apply force layout to positions\n    let layoutNodes;\n    \n    // Check if nodes already have positions - if they do, don't override with force layout\n    const hasExistingPositions = allItems.some(item => \n      item.position && typeof item.position.x === 'number' && typeof item.position.y === 'number'\n    );\n    \n    if (allItems.length > 0 && applyLayoutImmediately && !hasExistingPositions) {\n      try {\n        // Lazy load D3 force simulation for initial positioning\n        const { \n          forceSimulation, \n          forceManyBody, \n          forceLink, \n          forceCenter, \n          forceCollide \n        } = await loadD3Force();\n\n        // Create nodes for simulation\n        const simulationNodes = allItems.map((item, index) => ({\n          id: `${item.type}-${item.id}`,\n          x: item.position?.x || (Math.random() - 0.5) * 200,\n          y: item.position?.y || (Math.random() - 0.5) * 200,\n          type: item.type\n        }));\n\n        // Create D3-compatible edge objects\n        const d3Edges = (data.connections || []).map(edge => ({\n          source: edge.source,\n          target: edge.target,\n          id: edge.id\n        })).filter(edge => {\n          const nodeIds = new Set(simulationNodes.map(n => n.id));\n          return nodeIds.has(edge.source) && nodeIds.has(edge.target);\n        });\n\n        // Run simulation synchronously for initial layout\n        const simulation = forceSimulation(simulationNodes)\n          .force('link', forceLink(d3Edges).id(d => d.id).distance(200).strength(0.5))\n          .force('charge', forceManyBody().strength(-800).distanceMax(400))\n          .force('center', forceCenter(window.innerWidth / 3, window.innerHeight / 2))\n          .force('collision', forceCollide().radius(80))\n          .stop();\n\n        // Run enough ticks to get a good layout\n        for (let i = 0; i < 300; i++) {\n          simulation.tick();\n        }\n\n        // Create a map of positioned nodes\n        const positionMap = new Map();\n        simulationNodes.forEach(node => {\n          positionMap.set(node.id, { x: node.x, y: node.y });\n        });\n\n        layoutNodes = allItems.map(item => {\n          const nodeId = `${item.type}-${item.id}`;\n          const position = positionMap.get(nodeId) || { x: 0, y: 0 };\n          return { ...item, position };\n        });\n      } catch (error) {\n        console.warn('Failed to apply initial layout, using fallback positioning:', error);\n        layoutNodes = allItems;\n      }\n    } else {\n      layoutNodes = allItems;\n    }\n\n    // Quick layout without expensive calculations - ensure all nodes get proper positions\n    const quickNodes = (layoutNodes || allItems).map((item, index) => {\n      const nodeId = `${item.type}-${item.id}`;\n      \n      // Convert case fields efficiently\n      const nodeData = item.type === 'case' ? {\n        ...item,\n        chiefComplaint: item.chiefComplaint || item.chief_complaint || '',\n        initialPresentation: item.initialPresentation || item.initial_presentation || '',\n        currentPresentation: item.currentPresentation || item.current_presentation || '',\n        medicationHistory: item.medicationHistory || item.medication_history || '',\n        therapyProgress: item.therapyProgress || item.therapy_progress || '',\n        defensePatterns: item.defensePatterns || item.defense_patterns || '',\n        clinicalReflection: item.clinicalReflection || item.clinical_reflection || ''\n      } : item;\n\n      // Ensure proper positioning: use existing position, or create grid-based position\n      let position;\n      if (item.position && typeof item.position.x === 'number' && typeof item.position.y === 'number') {\n        position = item.position;\n      } else {\n        // Create grid-based layout for nodes without positions\n        const gridSize = Math.ceil(Math.sqrt(allItems.length));\n        const nodeSpacing = 250;\n        const offsetX = 300; // Offset from left sidebar\n        const offsetY = 150; // Offset from top\n        \n        position = {\n          x: (index % gridSize) * nodeSpacing + offsetX,\n          y: Math.floor(index / gridSize) * nodeSpacing + offsetY\n        };\n      }\n\n      return {\n        id: nodeId,\n        type: item.type,\n        position: position,\n        data: { \n          ...nodeData, \n          label: item.title || item.label || `Untitled ${item.type}`, // Ensure label matches title\n          color: item.color || '#3B82F6', // Include color in data\n          onDelete: () => handleDeleteNode(nodeId),\n          onLiteratureClick: item.type === 'literature' ? handleLiteratureClick : undefined,\n          skipAnimation: isInitialLoad // Use the isInitialLoad state\n        },\n        style: item.type === 'topic' ? {\n          backgroundColor: item.color || '#3B82F6' // Set style for topic nodes\n        } : undefined\n      };\n    });\n\n    // Create optimized edges\n    const optimizedEdges = createOptimizedEdges(\n      data.connections || [], \n      quickNodes.map(n => n.id)\n    );\n\n    // Set nodes and edges immediately for fast UI response\n    setNodes(quickNodes);\n    setEdges(optimizedEdges);\n  }, [setNodes, setEdges, handleDeleteNode, handleLiteratureClick, isInitialLoad]);\n\n  const saveToBackend = useCallback(async (data) => {\n    // Deep clone the data to avoid modifying the original\n    const cleanData = {\n      topics: JSON.parse(JSON.stringify(data.topics || [])),\n      cases: JSON.parse(JSON.stringify(data.cases || [])),\n      tasks: JSON.parse(JSON.stringify(data.tasks || [])),\n      literature: JSON.parse(JSON.stringify(data.literature || [])),\n      connections: JSON.parse(JSON.stringify(data.connections || []))\n    };\n    \n    try {\n      \n      // Current timestamp for created_at/updated_at fields\n      const now = new Date().toISOString();\n      \n      // Clean and validate topics\n      cleanData.topics = cleanData.topics.map((topic, index) => {\n        // Ensure all required fields exist\n        return {\n          id: String(topic.id || `${Date.now()}-${index}-topic`),\n          title: topic.title || \"Untitled Topic\",\n          description: topic.description || \"\",\n          category: topic.category || \"Uncategorized\",\n          color: topic.color || \"#3B82F6\",\n          position: {\n            x: Number(topic.position?.x) || 0,\n            y: Number(topic.position?.y) || 0\n          },\n          flashcard_count: Number(topic.flashcard_count) || 0,\n          completed_flashcards: Number(topic.completed_flashcards) || 0,\n          resources: Array.isArray(topic.resources) ? topic.resources : [],\n          created_at: topic.created_at || now,\n          updated_at: now\n        };\n      });\n      \n      // Clean and validate cases\n      cleanData.cases = cleanData.cases.map((caseItem, index) => {\n        // Ensure all required fields exist, handle both camelCase and snake_case\n        return {\n          id: String(caseItem.id || `${Date.now()}-${index}-case`),\n          case_id: caseItem.case_id || `CASE-${Date.now()}-${index}`,\n          encounter_date: caseItem.encounter_date || now,\n          primary_diagnosis: caseItem.primary_diagnosis || \"Unspecified\",\n          secondary_diagnoses: Array.isArray(caseItem.secondary_diagnoses) ? caseItem.secondary_diagnoses : [],\n          age: caseItem.age !== undefined ? Number(caseItem.age) : null,\n          gender: caseItem.gender || null,\n          // Handle both camelCase (frontend) and snake_case (backend) field names\n          chief_complaint: caseItem.chiefComplaint || caseItem.chief_complaint || \"\",\n          initial_presentation: caseItem.initialPresentation || caseItem.initial_presentation || \"\",\n          current_presentation: caseItem.currentPresentation || caseItem.current_presentation || \"\",\n          medication_history: caseItem.medicationHistory || caseItem.medication_history || \"\",\n          therapy_progress: caseItem.therapyProgress || caseItem.therapy_progress || \"\",\n          defense_patterns: caseItem.defensePatterns || caseItem.defense_patterns || \"\",\n          clinical_reflection: caseItem.clinicalReflection || caseItem.clinical_reflection || \"\",\n          history_present_illness: caseItem.history_present_illness || null,\n          medical_history: caseItem.medical_history || null,\n          medications: Array.isArray(caseItem.medications) ? caseItem.medications : [],\n          mental_status_exam: caseItem.mental_status_exam || null,\n          assessment_plan: caseItem.assessment_plan || null,\n          notes: caseItem.notes || null,\n          status: caseItem.status || \"active\",\n          linked_topics: Array.isArray(caseItem.linked_topics) ? caseItem.linked_topics : [],\n          position: {\n            x: Number(caseItem.position?.x) || 0,\n            y: Number(caseItem.position?.y) || 0\n          },\n          created_at: caseItem.created_at || now,\n          updated_at: now\n        };\n      });\n      \n      // Clean and validate tasks\n      cleanData.tasks = cleanData.tasks.map((task, index) => {\n        // Ensure all required fields exist\n        return {\n          id: String(task.id || `${Date.now()}-${index}-task`),\n          title: task.title || \"Untitled Task\",\n          description: task.description || null,\n          status: task.status || \"pending\",\n          priority: task.priority || \"medium\",\n          due_date: task.due_date || null,\n          linked_case_id: task.linked_case_id || null,\n          linked_topic_id: task.linked_topic_id || null,\n          position: {\n            x: Number(task.position?.x) || 0,\n            y: Number(task.position?.y) || 0\n          },\n          created_at: task.created_at || now,\n          updated_at: now\n        };\n      });\n      \n      // Clean and validate literature\n      cleanData.literature = cleanData.literature.map((lit, index) => {\n        // Ensure all required fields exist\n        return {\n          id: String(lit.id || `${Date.now()}-${index}-lit`),\n          title: lit.title || \"Untitled Literature\",\n          authors: lit.authors || null,\n          publication: lit.publication || null,\n          year: lit.year !== undefined ? Number(lit.year) : null,\n          doi: lit.doi || null,\n          abstract: lit.abstract || null,\n          notes: lit.notes || null,\n          pdf_path: lit.pdf_path || null,\n          linked_topics: Array.isArray(lit.linked_topics) ? lit.linked_topics : [],\n          position: {\n            x: Number(lit.position?.x) || 0,\n            y: Number(lit.position?.y) || 0\n          },\n          created_at: lit.created_at || now,\n          updated_at: now\n        };\n      });\n      \n      // Clean and validate connections\n      cleanData.connections = cleanData.connections.map((conn, index) => {\n        // For connections, we only need these basic properties\n        return {\n          id: String(conn.id || `${Date.now()}-${index}-conn`),\n          source: conn.source || \"\",\n          target: conn.target || \"\",\n          label: conn.label || \"\"\n        };\n      });\n      \n      // Filter out any items with empty or invalid source/target\n      cleanData.connections = cleanData.connections.filter(conn => \n        conn.source && conn.target && \n        typeof conn.source === 'string' && \n        typeof conn.target === 'string' && \n        conn.source.length > 0 && \n        conn.target.length > 0\n      );\n      \n      console.log('Sending cleaned data to backend:', cleanData);\n      \n      const response = await axios.put(`${API}/mindmap-data`, cleanData, {\n        headers: { 'Content-Type': 'application/json' }\n      });\n      \n      console.log('Backend save successful:', response.data);\n    } catch (err) {\n      console.error('Failed to save to backend:', err.response?.data || err.message);\n      \n      // Log detailed validation errors\n      if (err.response?.status === 422 && err.response?.data?.detail) {\n        console.error('Validation errors:');\n        console.error(JSON.stringify(err.response.data.detail, null, 2));\n        \n        // Log the request data that caused the error\n        console.error('Request data that caused validation error:');\n        console.error(JSON.stringify(cleanData, null, 2));\n      }\n      \n      // Don't throw the error to prevent breaking the app\n    }\n  }, []);\n\n  const onConnect = useCallback((params) => {\n    const edgeId = `conn-${Date.now()}`;\n    const newEdge = { \n      ...params, \n      id: edgeId,\n      type: 'floating', // Use our high-performance floating edge type\n      style: { \n        strokeWidth: 2, \n        stroke: '#64748b',\n        opacity: 0.85,\n        transition: 'none' // Critical: disable transitions for immediate updates\n      },\n      // Add a unique timestamp to force React to re-render this edge when source or target nodes move\n      data: { __forceUpdate: Date.now() },\n      interactionWidth: 20 // Wider area for interaction\n    };\n    setEdges((eds) => addEdge(newEdge, eds));\n    setMindMapData(prev => {\n      const newConnections = [...prev.connections, { \n        id: newEdge.id, \n        source: params.source, \n        target: params.target, \n        label: '' \n      }];\n      const newData = { ...prev, connections: newConnections };\n      autoSaveMindMapData(newData);\n      return newData;\n    });\n  }, [setEdges, setMindMapData, autoSaveMindMapData]);\n\n  const onNodeClick = useCallback((event, node) => {\n    setSelectedNode(node);\n    // Visual feedback - highlight selected node\n    setNodes(currentNodes => currentNodes.map(n => ({\n      ...n,\n      selected: n.id === node.id\n    })));\n  }, [setNodes]);\n\n  const onNodeDoubleClick = useCallback((event, node) => {\n    // Handle multi-part IDs correctly by joining all parts after the type\n    const parts = node.id.split('-');\n    const type = parts[0];\n    const id = parts.slice(1).join('-'); // Join all parts after the first one\n    \n    // Prevent multiple rapid clicks by checking if modal is already open\n    if (type === 'case' && caseModal.isOpen) return;\n    if (type === 'topic' && topicModal.isOpen) return;\n    if (type === 'task' && taskModal.isOpen) return;\n    if (type === 'literature' && literatureModal.isOpen) return;\n    \n    // Route to appropriate specialized modal based on node type\n    if (type === 'literature') {\n      const dataItem = mindMapData.literature.find(item => String(item.id) === id);\n      if (dataItem) {\n        setLiteratureModal({ isOpen: true, data: dataItem });\n      }\n      return;\n    }\n    \n    if (type === 'case') {\n      const dataItem = mindMapData.cases.find(item => String(item.id) === id);\n      if (dataItem) {\n        setModalAnimationStates(prev => ({ ...prev, case: true }));\n        setCaseModal({ isOpen: true, data: dataItem });\n        // Clear animation state after modal animation completes\n        setTimeout(() => {\n          setModalAnimationStates(prev => ({ ...prev, case: false }));\n        }, 800);\n      }\n      return;\n    }\n    \n    if (type === 'topic') {\n      const dataItem = mindMapData.topics.find(item => String(item.id) === id);\n      if (dataItem) {\n        setModalAnimationStates(prev => ({ ...prev, topic: true }));\n        setTopicModal({ isOpen: true, data: dataItem });\n        // Clear animation state after modal animation completes\n        setTimeout(() => {\n          setModalAnimationStates(prev => ({ ...prev, topic: false }));\n        }, 800);\n      }\n      return;\n    }\n    \n    if (type === 'task') {\n      const dataItem = mindMapData.tasks.find(item => String(item.id) === id);\n      if (dataItem) {\n        setModalAnimationStates(prev => ({ ...prev, task: true }));\n        setTaskModal({ isOpen: true, data: dataItem });\n        // Clear animation state after modal animation completes\n        setTimeout(() => {\n          setModalAnimationStates(prev => ({ ...prev, task: false }));\n        }, 800);\n      }\n      return;\n    }\n  }, [mindMapData, caseModal.isOpen, topicModal.isOpen, taskModal.isOpen, literatureModal.isOpen]);\n\n  const onEdgeDoubleClick = useCallback((event, edge) => {\n    // Double-click to delete edge immediately\n    setEdges(eds => eds.filter(e => e.id !== edge.id));\n    setMindMapData(prev => {\n      const newConnections = prev.connections.filter(conn => conn.id !== edge.id);\n      const newData = { ...prev, connections: newConnections };\n      autoSaveMindMapData(newData);\n      addToast('Connection deleted', 'success');\n      return newData;\n    });\n  }, [setEdges, setMindMapData, autoSaveMindMapData, addToast]);\n\n  const onEdgeContextMenu = useCallback((event, edge) => {\n    // Right-click to edit edge label\n    event.preventDefault();\n    setEdgeModal({ isOpen: true, edge: edge });\n  }, []);\n\n  const handleSaveEdgeLabel = useCallback((edgeId, label) => {\n    setEdges(eds =>\n      eds.map(edge =>\n        edge.id === edgeId ? { ...edge, label: label } : edge\n      )\n    );\n    setMindMapData(prev => {\n      const newConnections = prev.connections.map(conn =>\n        conn.id === edgeId ? { ...conn, label: label } : conn\n      );\n      const newData = { ...prev, connections: newConnections };\n      autoSaveMindMapData(newData);\n      return newData;\n    });\n  }, [setEdges, setMindMapData, autoSaveMindMapData]);\n\n  // Edge hover handlers for highlighting\n  const onEdgeMouseEnter = useCallback((event, edge) => {\n    setEdges(eds =>\n      eds.map(e =>\n        e.id === edge.id ? { ...e, className: 'highlighted' } : e\n      )\n    );\n  }, [setEdges]);\n\n  const onEdgeMouseLeave = useCallback((event, edge) => {\n    setEdges(eds =>\n      eds.map(e =>\n        e.id === edge.id ? { ...e, className: '' } : e\n      )\n    );\n  }, [setEdges]);\n\n  // Lazy-loaded force-directed layout for better performance\n  const forceLayout = useCallback(async () => {\n    if (nodes.length === 0) return;\n\n    try {\n      // Lazy load D3 force simulation\n      const { \n        forceSimulation, \n        forceManyBody, \n        forceLink, \n        forceCenter, \n        forceCollide \n      } = await loadD3Force();\n\n      // Preserve the current edges before layout\n      const currentEdges = [...edges];\n      \n      // Create a set of valid node IDs for fast lookup\n      const nodeIdSet = new Set(nodes.map(node => node.id));\n      \n      // Filter edges to only include those with both source and target nodes present\n      const validEdges = currentEdges.filter(edge => \n        nodeIdSet.has(edge.source) && nodeIdSet.has(edge.target)\n      );\n\n      // Create D3-compatible edge objects for the force simulation\n      const d3Edges = validEdges.map(edge => ({\n        source: edge.source,\n        target: edge.target,\n        id: edge.id\n      }));\n\n      // Create a copy of nodes for simulation (D3 mutates the objects)\n      const simulationNodes = nodes.map(node => ({ \n        id: node.id,\n        x: node.position.x, \n        y: node.position.y,\n        fx: null, // Remove any fixed positions\n        fy: null\n      }));\n\n      // Create simulation with optimized forces for mind map layout\n      const simulation = forceSimulation(simulationNodes)\n        .force('link', forceLink(d3Edges).id(d => d.id).distance(200).strength(0.5))\n        .force('charge', forceManyBody().strength(-800).distanceMax(400))\n        .force('center', forceCenter(window.innerWidth / 3, window.innerHeight / 2))\n        .force('collision', forceCollide().radius(80))\n        .stop();\n\n      // Run simulation in chunks to prevent blocking\n      const ticksPerFrame = 50;\n      const totalTicks = 400;\n      let currentTick = 0;\n\n      const runSimulationChunk = () => {\n        const remainingTicks = Math.min(ticksPerFrame, totalTicks - currentTick);\n        for (let i = 0; i < remainingTicks; i++) {\n          simulation.tick();\n        }\n        currentTick += remainingTicks;\n\n        if (currentTick < totalTicks) {\n          requestAnimationFrame(runSimulationChunk);\n        } else {\n          // Simulation complete, update nodes\n          const updatedNodes = simulationNodes.map(simNode => {\n            const originalNode = nodes.find(n => n.id === simNode.id);\n            return {\n              ...originalNode,\n              position: { x: simNode.x, y: simNode.y },\n            };\n          });\n          \n          // Update both nodes and edges in a single batch\n          setNodes(updatedNodes);\n          setEdges(validEdges);\n\n          // Update mindMapData with new positions\n          setMindMapData(currentData => {\n            const updatedData = { ...currentData };\n            \n            updatedNodes.forEach(node => {\n              const [type, id] = node.id.split('-');\n              const key = type === 'literature' ? 'literature' : `${type}s`;\n              const item = updatedData[key]?.find(i => String(i.id) === id);\n              if (item) {\n                item.position = node.position;\n              }\n            });\n            \n            return updatedData;\n          });\n\n          // Smooth camera transition to fit the new layout\n          setTimeout(() => {\n            fitView({ duration: 800, padding: 0.2 });\n          }, 200);\n        }\n      };\n\n      // Start simulation in next frame\n      requestAnimationFrame(runSimulationChunk);\n    } catch (error) {\n      console.error('Force layout failed:', error);\n      addToast('Layout calculation failed', 'error');\n    }\n  }, [nodes, edges, setNodes, setEdges, setMindMapData, fitView, addToast]);\n\n  // applyForceLayout wrapper function (defined after forceLayout)\n  const applyForceLayout = useCallback(() => {\n    try {\n      forceLayout();\n      addToast('Nodes realigned successfully', 'success');\n    } catch (error) {\n      console.error('Force layout error:', error);\n      addToast('Failed to realign nodes', 'error');\n    }\n  }, [forceLayout, addToast]);\n\n  const handleClearMap = useCallback(() => {\n    if (!window.confirm('Are you sure you want to clear the entire mind map?')) return;\n\n    const empty = { topics: [], cases: [], tasks: [], literature: [], connections: [] };\n    setMindMapData(empty);\n    setNodes([]);\n    setEdges([]);\n    setSelectedNode(null);\n    // Clear all modal states\n    setCaseModal({ isOpen: false, data: null });\n    setTopicModal({ isOpen: false, data: null });\n    setTaskModal({ isOpen: false, data: null });\n    setLiteratureModal({ isOpen: false, data: null });\n    setFocusedCategory(null);\n    autoSaveMindMapData(empty);\n    addToast('Mind map cleared successfully', 'success');\n  }, [setNodes, setEdges, autoSaveMindMapData, addToast]);\n\n  const addNewNode = useCallback((nodeType) => {\n    const dataId = Date.now();\n    const id = `${nodeType}-${dataId}`;\n    \n    // Create node data object with appropriate fields based on type\n    let nodeData = { id: dataId, label: `New ${nodeType}` };\n    \n    // For case nodes, add structured fields\n    if (nodeType === 'case') {\n      nodeData = {\n        ...nodeData,\n        chiefComplaint: '',\n        initialPresentation: '',\n        currentPresentation: '',\n        medicationHistory: '',\n        therapyProgress: '',\n        defensePatterns: '',\n        clinicalReflection: ''\n      };\n    }\n    \n    // Calculate grid-based position for new nodes to avoid clustering\n    // Use current data count instead of nodes.length for more accurate positioning\n    const currentDataCount = (mindMapData.topics?.length || 0) + \n                           (mindMapData.cases?.length || 0) + \n                           (mindMapData.tasks?.length || 0) + \n                           (mindMapData.literature?.length || 0);\n    \n    const gridSize = Math.ceil(Math.sqrt(currentDataCount + 1));\n    const nodeSpacing = 280;\n    const offsetX = 400; // Offset from left sidebar\n    const offsetY = 150; // Offset from top\n    \n    const gridPosition = {\n      x: (currentDataCount % gridSize) * nodeSpacing + offsetX,\n      y: Math.floor(currentDataCount / gridSize) * nodeSpacing + offsetY\n    };\n    \n    const newNode = {\n      id,\n      type: nodeType,\n      position: gridPosition,\n      data: { ...nodeData, onDelete: () => handleDeleteNode(id) }\n    };\n\n    setMindMapData(d => {\n      const key = nodeType === 'literature' ? 'literature' : `${nodeType}s`;\n      const dataToAdd = { ...newNode.data, position: newNode.position };\n      delete dataToAdd.onDelete;\n      const updatedData = {\n        ...d,\n        [key]: [...(d[key] || []), dataToAdd]\n      };\n      autoSaveMindMapData(updatedData);\n      return updatedData;\n    });\n\n    setNodes(n => n.concat(newNode));\n    addToast(`${nodeType.charAt(0).toUpperCase() + nodeType.slice(1)} added successfully`, 'success');\n  }, [mindMapData, handleDeleteNode, setMindMapData, autoSaveMindMapData, setNodes, addToast]);\n\n  const handleNodesChange = useCallback((changes) => {\n    // Apply the node changes to React Flow state immediately - this is critical!\n    onNodesChange(changes);\n    \n    // Skip heavy operations during animations to prevent interference\n    if (isAnimating) {\n      console.log('Skipping position updates during animation');\n      return;\n    }\n\n\n    \n    // Process position changes for data persistence - SIMPLIFIED\n    const positionChanges = changes.filter(change => \n      change.type === 'position' && change.position\n    );\n    \n    if (positionChanges.length > 0) {\n      console.log('Processing position changes:', positionChanges);\n      \n      // Update mindMapData immediately without complex debouncing\n      setMindMapData(currentData => {\n        const updatedData = { ...currentData };\n        \n        positionChanges.forEach(change => {\n          if (change.position) {\n            const [type, id] = change.id.split('-');\n            const key = type === 'literature' ? 'literature' : `${type}s`;\n            const item = updatedData[key]?.find(i => String(i.id) === id);\n            \n            if (item) {\n              item.position = { ...change.position };\n              console.log(`Updated ${type} ${id} position to:`, change.position);\n            }\n          }\n        });\n        \n        // Save to localStorage immediately\n        localStorageUtils.save(updatedData, null, null, false);\n        \n        return updatedData;\n      });\n      \n      // Simple auto-save without complex timeouts\n      setTimeout(() => {\n        autoSaveMindMapData(mindMapData);\n      }, 500);\n    }\n  }, [onNodesChange, setMindMapData, isAnimating, autoSaveMindMapData, mindMapData]);\n\n  const handleNodeDragStop = useCallback((event, node) => {\n    // Debounce the auto-save to prevent excessive backend calls\n    // Position updates are already handled in handleNodesChange during dragging\n    clearTimeout(window.dragSaveTimeout);\n    window.dragSaveTimeout = setTimeout(() => {\n      setMindMapData(currentData => {\n        autoSaveMindMapData(currentData);\n        return currentData;\n      });\n    }, 500);\n  }, [autoSaveMindMapData]);\n\n  const loadMindMapData = useCallback(async () => {\n    setLoading(true);\n    setLoadingProgress(10);\n    setLoadingMessage('Checking local data...');\n    \n    try {\n      // First, try loading from localStorage for instant startup\n      const local = localStorageUtils.load();\n      if (local) {\n        setLoadingProgress(30);\n        setLoadingMessage('Loading from cache...');\n        \n        if (!local.connections) local.connections = [];\n        setMindMapData(local);\n        \n        setLoadingProgress(60);\n        setLoadingMessage('Applying layout...');\n        \n        await convertDataToReactFlow(local, true); // Apply layout immediately\n        \n        setLoadingProgress(90);\n        setLoadingMessage('Finalizing...');\n        \n        setLoading(false);\n        setIsInitialLoad(false);\n        setLoadingProgress(100);\n        \n        // Background sync with backend without blocking UI\n        setTimeout(async () => {\n          try {\n            const response = await axios.get(`${API}/mindmap-data`);\n            if (JSON.stringify(response.data) !== JSON.stringify(local)) {\n              // Only update if data has changed\n              if (!response.data.connections) response.data.connections = [];\n              setMindMapData(response.data);\n              await convertDataToReactFlow(response.data);\n              autoSaveMindMapData(response.data);\n              addToast('Data synchronized with server', 'info');\n            }\n          } catch (err) {\n            console.warn('Background sync failed:', err);\n          }\n        }, 500);\n        \n        return;\n      }\n\n      // If no local data, load from backend\n      setLoadingProgress(20);\n      setLoadingMessage('Loading from server...');\n      \n      try {\n        const response = await axios.get(`${API}/mindmap-data`);\n        if (!response.data.connections) response.data.connections = [];\n        \n        setLoadingProgress(50);\n        setLoadingMessage('Processing data...');\n        \n        setMindMapData(response.data);\n        \n        setLoadingProgress(80);\n        setLoadingMessage('Applying layout...');\n        \n        await convertDataToReactFlow(response.data, true); // Apply layout immediately\n        autoSaveMindMapData(response.data);\n        \n        setLoadingProgress(100);\n        setLoading(false);\n        setIsInitialLoad(false);\n      } catch (backendError) {\n        console.warn('Backend loading failed, populating with sample data:', backendError);\n        \n        // If backend fails, populate with sample data for better UX\n        setLoadingProgress(60);\n        setLoadingMessage('Loading sample data...');\n        \n        // Populate sample data\n        const emptyData = { topics: [], cases: [], tasks: [], literature: [], connections: [] };\n        \n        setMindMapData(emptyData);\n        \n        // Populate sample data\n        setTimeout(() => {\n          populateSampleLiteratureData(setMindMapData, autoSaveMindMapData, addToast);\n        }, 100);\n        \n        setLoadingProgress(100);\n        setLoading(false);\n        setIsInitialLoad(false);\n      }\n    } catch (err) {\n      console.error('Error loading mind map:', err);\n      addToast('Failed to load mind map', 'error');\n      setLoading(false);\n      setIsInitialLoad(false);\n    }\n  }, [addToast, autoSaveMindMapData, convertDataToReactFlow]);\n\n  useEffect(() => {\n    // Load initial mind map data\n    loadMindMapData();\n  }, []); // Run only once on mount\n\n  // Helper function to check if a node matches the search query\n  const nodeMatchesSearch = useCallback((node, query) => {\n    // Guard against null/undefined node\n    if (!node || !node.id || !node.data) return false;\n    \n    // Return early if no query\n    if (!query) return true;\n    \n    // Normalize and trim query\n    const searchTerm = query.toLowerCase().trim();\n    if (!searchTerm) return true;\n    \n    try {\n      // Safely extract node type and ID\n      const parts = node.id.split('-');\n      const nodeType = parts.length > 0 ? parts[0] : '';\n      const nodeId = parts.length > 1 ? parts[1] : '';\n      \n      // Start with no match\n      let hasMatch = false;\n      \n      // 1. Basic title/label matching - most common searches\n      if (!hasMatch && node.data.label) {\n        const label = node.data.label.toLowerCase();\n        hasMatch = label.includes(searchTerm);\n      }\n      \n      // 2. Node type matching\n      if (!hasMatch && nodeType) {\n        hasMatch = nodeType.includes(searchTerm);\n      }\n      \n      // 3. Case ID pattern matching for case nodes\n      if (!hasMatch && nodeType === 'case' && nodeId) {\n        hasMatch = (`case-${nodeId}`).toLowerCase().includes(searchTerm);\n      }\n      \n      // 4. Type-specific content matching\n      if (!hasMatch) {\n        if (nodeType === 'case') {\n          const diagnosis = (node.data.primary_diagnosis || node.data.primaryDiagnosis || '').toLowerCase();\n          hasMatch = diagnosis.includes(searchTerm);\n        } else if (nodeType === 'topic') {\n          const title = (node.data.title || '').toLowerCase();\n          hasMatch = title.includes(searchTerm);\n        } else if (nodeType === 'literature') {\n          const title = (node.data.title || '').toLowerCase();\n          const authors = (node.data.authors || '').toLowerCase();\n          hasMatch = title.includes(searchTerm) || authors.includes(searchTerm);\n        }\n      }\n      \n      // 5. Psychiatric category matching for all node types\n      if (!hasMatch && node.data.category) {\n        const category = node.data.category.toLowerCase();\n        hasMatch = category.includes(searchTerm);\n      }\n      \n      return hasMatch;\n    } catch (error) {\n      console.error('Error in nodeMatchesSearch for node:', node.id, error);\n      return false;\n    }\n  }, []);\n\n  // Keyboard shortcuts\n  useEffect(() => {\n    const handleKeyDown = (event) => {\n      // Only trigger shortcuts when not typing in input fields\n      if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA') return;\n      \n      if (event.ctrlKey || event.metaKey) {\n        switch (event.key) {\n          case 'n':\n            event.preventDefault();\n            setShowNodeSelector(true);\n            break;\n          case 'e':\n            event.preventDefault();\n            setIsEditing(!isEditing);\n            break;\n          case 'r':\n            event.preventDefault();\n            applyForceLayout();\n            break;\n          case 'f':\n            event.preventDefault();\n            // Focus the search box\n            document.querySelector('input[type=\"text\"][placeholder*=\"Search\"]')?.focus();\n            break;\n          default:\n            break;\n        }\n      }\n      \n      if (event.key === 'Escape') {\n        setSelectedNode(null);\n        // Close all modals\n        setCaseModal({ isOpen: false, data: null });\n        setTopicModal({ isOpen: false, data: null });\n        setTaskModal({ isOpen: false, data: null });\n        setLiteratureModal({ isOpen: false, data: null });\n        setShowNodeSelector(false);\n        \n        // Clear search if no modals are open\n        if (!caseModal.isOpen && !topicModal.isOpen && !taskModal.isOpen && \n            !literatureModal.isOpen && !showNodeSelector) {\n          // Search functionality removed\n        }\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [applyForceLayout, caseModal, topicModal, taskModal, literatureModal]);\n\n  useEffect(() => {\n    // DISABLED automatic force layout to prevent overriding individual node positions\n    // Force layout should only be applied manually via \"Realign Nodes\" button\n    if (isReactFlowReady && !hasAppliedInitialLayout && nodes.length > 0) {\n      // Just mark as applied without applying force layout \n      setHasAppliedInitialLayout(true);\n    } else if (isInitialLoad && nodes.length > 0) {\n      // For initial load, just mark as applied since layout was already done in convertDataToReactFlow\n      setHasAppliedInitialLayout(true);\n    }\n  }, [isReactFlowReady, hasAppliedInitialLayout, nodes, isInitialLoad]); // Removed forceLayout from dependencies\n\n  // Simplified search and category filtering - no style interference\n  useEffect(() => {\n    if (nodes.length === 0) return;\n    \n    // Skip during animations to prevent interference\n    const anyModalAnimating = Object.values(modalAnimationStates).some(state => state);\n    if (isAnimating || anyModalAnimating) return;\n    \n  }, [focusedCategory, nodes, nodeMatchesSearch, isAnimating, modalAnimationStates]);\n  \n  // CSS-based search filtering - no direct style manipulation\n  useEffect(() => {\n    if (!isReactFlowReady) return;\n    \n    // Apply CSS classes instead of direct style manipulation\n    const styleSheet = document.getElementById('search-filter-styles') || document.createElement('style');\n    styleSheet.id = 'search-filter-styles';\n    \n    if (!document.getElementById('search-filter-styles')) {\n      document.head.appendChild(styleSheet);\n    }\n    \n    // Generate CSS for search filtering\n    let css = `\n      /* Default node styling */\n      .react-flow__node {\n        transition: opacity 0.3s ease, transform 0.3s ease, filter 0.3s ease !important;\n      }\n      \n      /* Search dimmed nodes */\n      .react-flow__node.search-dimmed {\n        opacity: 0.15 !important;\n        filter: grayscale(0.7) !important;\n        transform: scale(0.9) !important;\n      }\n      \n      /* Selected node highlighting */\n      .react-flow__node.search-selected {\n        box-shadow: 0 0 0 2px #10b981, 0 0 20px rgba(16, 185, 129, 0.6) !important;\n        z-index: 1000 !important;\n      }\n      \n      /* Ensure dragging still works */\n      .react-flow__node.search-dimmed {\n        pointer-events: auto !important;\n      }\n    `;\n    \n    styleSheet.textContent = css;\n    \n  }, [isReactFlowReady]);\n\n  // Optionally: handle layout setup on first render if needed\n\n  // Show optimized loading screen during initial load\n  if (loading) {\n    return <OptimizedLoadingScreen message={loadingMessage} progress={loadingProgress} />;\n  }\n\n  // Sophisticated Animation Variants (matching Literature modal quality)\n  const modalVariants = {\n    hidden: {\n      opacity: 0,\n      scale: 0.3,\n      y: 50,\n      rotate: -5,\n    },\n    visible: {\n      opacity: 1,\n      scale: 1,\n      y: 0,\n      rotate: 0,\n      transition: {\n        type: \"spring\",\n        damping: 25,\n        stiffness: 300,\n        duration: 0.6,\n      }\n    },\n    exit: {\n      opacity: 0,\n      scale: 0.7,\n      y: 30,\n      rotate: -3,\n      transition: {\n        type: \"easeInOut\",\n        duration: 0.4,\n      }\n    }\n  };\n\n  const backdropVariants = {\n    hidden: { opacity: 0 },\n    visible: { \n      opacity: 1,\n      transition: { duration: 0.3 }\n    },\n    exit: { \n      opacity: 0,\n      transition: { duration: 0.4 }\n    }\n  };\n\n  const contentVariants = {\n    hidden: {\n      opacity: 0,\n      y: 20,\n      scale: 0.95,\n    },\n    visible: {\n      opacity: 1,\n      y: 0,\n      scale: 1,\n      transition: {\n        type: \"easeOut\",\n        duration: 0.3,\n        delay: 0.1,\n      }\n    },\n    exit: {\n      opacity: 0,\n      y: -10,\n      scale: 1.02,\n      transition: {\n        type: \"easeIn\",\n        duration: 0.2,\n      }\n    }\n  };\n\n  const buttonVariants = {\n    inactive: {\n      scale: 1,\n    },\n    active: {\n      scale: 1.05,\n      transition: {\n        type: \"spring\",\n        damping: 20,\n        stiffness: 300,\n      }\n    },\n    hover: {\n      scale: 1.03,\n      transition: {\n        type: \"easeOut\",\n        duration: 0.2,\n      }\n    }\n  };\n\n  // All modal components are now imported from separate files\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex\">\n      {/* --- Left Sidebar --- */}\n      <div className=\"w-80 bg-gradient-to-b from-slate-800 to-slate-900 text-white p-6 shadow-2xl flex flex-col\">\n        <div className=\"mb-8\">\n          <div className=\"text-3xl font-bold tracking-wide text-white\">PGY-3 HQ</div>\n          <div className=\"text-sm text-slate-300 mt-2\">Psychiatry Resident Dashboard</div>\n        </div>\n\n        {/* --- Category Filters --- */}\n        <div className=\"mb-6\">\n          <h3 className=\"text-sm font-semibold text-slate-300 mb-3\">Filter by Category</h3>\n          <div className=\"grid grid-cols-2 gap-2\">\n            <button\n              onClick={() => setFocusedCategory(null)}\n              className={`px-3 py-2 rounded-lg text-xs transition-all ${\n                focusedCategory === null\n                  ? 'bg-teal-600 text-white'\n                  : 'bg-slate-700 text-slate-300 hover:bg-slate-600'\n              }`}\n            >\n              All\n            </button>\n            <button\n              onClick={() => setFocusedCategory('topic')}\n              className={`px-3 py-2 rounded-lg text-xs transition-all flex items-center gap-1 ${\n                focusedCategory === 'topic'\n                  ? 'bg-blue-600 text-white'\n                  : 'bg-slate-700 text-slate-300 hover:bg-slate-600'\n              }`}\n            >\n              <Brain size={12} />\n              Topics\n            </button>\n            <button\n              onClick={() => setFocusedCategory('case')}\n              className={`px-3 py-2 rounded-lg text-xs transition-all flex items-center gap-1 ${\n                focusedCategory === 'case'\n                  ? 'bg-indigo-600 text-white'\n                  : 'bg-slate-700 text-slate-300 hover:bg-slate-600'\n              }`}\n            >\n              <Users size={12} />\n              Cases\n            </button>\n            <button\n              onClick={() => setFocusedCategory('task')}\n              className={`px-3 py-2 rounded-lg text-xs transition-all flex items-center gap-1 ${\n                focusedCategory === 'task'\n                  ? 'bg-amber-600 text-white'\n                  : 'bg-slate-700 text-slate-300 hover:bg-slate-600'\n              }`}\n            >\n              <CheckSquare size={12} />\n              Tasks\n            </button>\n            <button\n              onClick={() => setFocusedCategory('literature')}\n              className={`px-3 py-2 rounded-lg text-xs transition-all flex items-center gap-1 ${\n                focusedCategory === 'literature'\n                  ? 'bg-purple-600 text-white'\n                  : 'bg-slate-700 text-slate-300 hover:bg-slate-600'\n              }`}\n            >\n              <BookOpen size={12} />\n              Literature\n            </button>\n          </div>\n        </div>\n\n        {/* --- Auto-save Status --- */}\n        <div className=\"mb-4 p-3 bg-slate-700 bg-opacity-50 rounded-lg\">\n          <div className=\"flex items-center gap-2 text-xs\">\n            {isSaving ? (\n              <>\n                <Loader2 size={12} className=\"animate-spin\" />\n                <span className=\"text-amber-300\">Saving...</span>\n              </>\n            ) : lastSaved ? (\n              <>\n                <CheckCircle size={12} className=\"text-green-400\" />\n                <span className=\"text-slate-300\">\n                  Last saved: {lastSaved.toLocaleTimeString()}\n                </span>\n              </>\n            ) : (\n              <>\n                <Cloud size={12} className=\"text-slate-400\" />\n                <span className=\"text-slate-400\">Auto-save enabled</span>\n              </>\n            )}\n          </div>\n        </div>\n\n        {/* --- Controls --- */}\n        <div className=\"space-y-3 mb-6\">\n          <LoadingButton onClick={applyForceLayout} icon={Shuffle} className=\"w-full bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md text-sm\">\n            Realign Nodes\n          </LoadingButton>\n          <LoadingButton \n            onClick={() => populateSampleLiteratureData(setMindMapData, autoSaveMindMapData, addToast)} \n            icon={BookOpen} \n            className=\"w-full bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-md text-sm\"\n          >\n            Add Sample Literature\n          </LoadingButton>\n          \n          {/* Individual Node Creation Buttons */}\n          <div className=\"space-y-2\">\n            <div className=\"text-xs font-semibold text-slate-400 uppercase tracking-wide mb-2\">Add Nodes</div>\n            <LoadingButton \n              onClick={() => addNewNode('topic')} \n              icon={Brain} \n              className=\"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm flex items-center gap-2\"\n            >\n              <Brain size={16} />\n              Add Topic\n            </LoadingButton>\n            <LoadingButton \n              onClick={() => addNewNode('case')} \n              icon={Users} \n              className=\"w-full bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md text-sm flex items-center gap-2\"\n            >\n              <Users size={16} />\n              Add Case\n            </LoadingButton>\n            <LoadingButton \n              onClick={() => addNewNode('task')} \n              icon={CheckSquare} \n              className=\"w-full bg-amber-600 hover:bg-amber-700 text-white px-4 py-2 rounded-md text-sm flex items-center gap-2\"\n            >\n              <CheckSquare size={16} />\n              Add Task\n            </LoadingButton>\n            <LoadingButton \n              onClick={() => addNewNode('literature')} \n              icon={BookOpen} \n              className=\"w-full bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md text-sm flex items-center gap-2\"\n            >\n              <BookOpen size={16} />\n              Add Literature\n            </LoadingButton>\n          </div>\n          \n          <LoadingButton onClick={handleClearMap} icon={Trash2} className=\"w-full bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md text-sm\">\n            Clear All Data\n          </LoadingButton>\n        </div>\n\n        {/* --- Selected Node Panel --- */}\n        {selectedNode && (\n          <div className=\"mt-auto p-4 bg-slate-700 bg-opacity-50 rounded-lg\">\n            <h3 className=\"text-sm font-semibold text-slate-300 mb-2\">Selected Node</h3>\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center gap-2\">\n                {selectedNode.type === 'topic' && <Brain size={14} className=\"text-blue-400\" />}\n                {selectedNode.type === 'case' && <Users size={14} className=\"text-indigo-400\" />}\n                {selectedNode.type === 'task' && <CheckSquare size={14} className=\"text-amber-400\" />}\n                {selectedNode.type === 'literature' && <BookOpen size={14} className=\"text-purple-400\" />}\n                <span className=\"text-sm text-white font-medium truncate\">\n                  {selectedNode.data.label}\n                </span>\n              </div>\n              {selectedNode.data.category && (\n                <div className=\"text-xs text-slate-400\">\n                  Category: {selectedNode.data.category}\n                </div>\n              )}\n              {selectedNode.data.status && (\n                <div className=\"text-xs text-slate-400\">\n                  Status: {selectedNode.data.status}\n                </div>\n              )}\n              <button\n                onClick={() => {\n                  const [type, id] = selectedNode.id.split('-');\n                  const key = type === 'literature' ? 'literature' : `${type}s`;\n                  const dataItem = mindMapData[key].find(item => String(item.id) === id);\n                  if (dataItem) {\n                    // Route to appropriate specialized modal\n                    if (type === 'case') {\n                      setCaseModal({ isOpen: true, data: dataItem });\n                    } else if (type === 'topic') {\n                      setTopicModal({ isOpen: true, data: dataItem });\n                    } else if (type === 'task') {\n                      setTaskModal({ isOpen: true, data: dataItem });\n                    } else if (type === 'literature') {\n                      handleLiteratureClick(dataItem);\n                    }\n                  }\n                }}\n                className=\"w-full mt-2 px-3 py-2 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded-lg transition-colors flex items-center gap-2\"\n              >\n                <Eye size={12} />\n                View Details\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* --- Keyboard Shortcuts Help --- */}\n        {!selectedNode && (\n          <div className=\"mt-auto p-3 bg-slate-700 bg-opacity-30 rounded-lg\">\n            <h4 className=\"text-xs font-semibold text-slate-300 mb-2\">Keyboard Shortcuts</h4>\n            <div className=\"space-y-1 text-xs text-slate-400\">\n              <div>Ctrl+N - Add Node</div>\n              <div>Ctrl+E - Toggle Edit Mode</div>\n              <div>Ctrl+R - Realign Nodes</div>\n              <div>Esc - Clear Selection</div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* --- Main Mind Map Workspace --- */}\n      <div className=\"flex-1 relative\">\n        <ReactFlowErrorBoundary>\n          <ReactFlow\n            nodes={nodes}\n            edges={edges}\n            onNodesChange={handleNodesChange}\n            onEdgesChange={onEdgesChange}\n            onConnect={onConnect}\n            onNodeClick={onNodeClick}\n            onNodeDoubleClick={onNodeDoubleClick}\n            onNodeDragStop={handleNodeDragStop}\n            onEdgeDoubleClick={onEdgeDoubleClick}\n            onEdgeContextMenu={onEdgeContextMenu}\n            onEdgeMouseEnter={onEdgeMouseEnter}\n            onEdgeMouseLeave={onEdgeMouseLeave}\n            nodeTypes={nodeTypes}\n            edgeTypes={{ floating: FloatingEdge, enhanced: EnhancedEdge }}\n            connectionLineComponent={ConnectionLine}\n            nodesDraggable={true}\n            nodesConnectable={true}\n            elementsSelectable={true}\n            onInit={(reactFlowInstance) => {\n              setIsReactFlowReady(true);\n              // Store reference for error recovery\n              window.reactFlowInstance = reactFlowInstance;\n            }}\n            onError={(id, message) => {\n              console.warn('React Flow Error:', id, message);\n              // Ignore dimension-related errors during animations\n              if (isAnimating && message.includes('dimensions')) {\n                return;\n              }\n            }}\n            fitView\n            snapToGrid={false}\n            snapGrid={[15, 15]}\n            elevateEdgesOnSelect={false}\n            connectionLineStyle={{\n              stroke: '#3b82f6', // Use a bright blue color for better visibility during connection\n              strokeWidth: 3.5, // Slightly thicker than regular edges\n              opacity: 0.9,\n              strokeLinecap: 'round',\n              strokeDasharray: '5,3', // Shorter dash pattern for more modern look\n              filter: 'drop-shadow(0 0 6px rgba(59, 130, 246, 0.6))', // Softer glow\n              animation: 'flowingDash 1s linear infinite' // Add flowing animation\n            }}\n          defaultEdgeOptions={{\n            type: 'floating', // Use our floating edge with proper type-based styling\n            style: { \n              strokeWidth: 2.5, \n              stroke: '#64748b',\n              opacity: 0.9,\n              strokeLinecap: 'round',\n              transition: 'none'\n            }\n            // Remove pathOptions - this is not a standard React Flow prop\n          }}\n          className=\"bg-gradient-to-br from-blue-50 to-indigo-100\"\n        >\n          {/* 🎨 ARTISTIC RADIAL BACKGROUND */}\n          <ArtisticBackground \n            variant=\"radial\"\n            color=\"#e2e8f0\"\n            showRadialLines={true}\n            showConcentricCircles={true}\n          />\n          <Controls />\n          <MiniMap />\n        </ReactFlow>\n        </ReactFlowErrorBoundary>\n      </div>\n      \n      {/* --- Modals --- */}\n      {/* Literature Modal */}\n      {literatureModal.isOpen && (\n        <LiteratureModal\n          isOpen={literatureModal.isOpen}\n          onClose={() => {\n            setIsAnimating(true); // Set animation state for closing\n            setLiteratureModal({ isOpen: false, data: null });\n            // Clear animation state after modal close animation completes\n            setTimeout(() => setIsAnimating(false), 500); // 400ms close animation + 100ms buffer\n          }}\n          onAnimationStart={() => setIsAnimating(true)}\n          onAnimationEnd={() => setIsAnimating(false)}\n          literatureData={literatureModal.data}\n          allNodes={nodes}\n          connections={mindMapData.connections || []}\n          setMindMapData={setMindMapData}\n          autoSaveMindMapData={autoSaveMindMapData}\n          addToast={addToast}\n        />\n      )}\n      {/* Specialized Modals with optimized rendering */}\n      <AnimatePresence mode=\"wait\">\n        {caseModal.isOpen && (\n          <CaseModal \n            key={`case-modal-${caseModal.data?.id || 'default'}`}\n            isOpen={caseModal.isOpen} \n            data={caseModalStableData.current || caseModal.data} \n            onClose={() => {\n              setModalAnimationStates(prev => ({ ...prev, case: true }));\n              setCaseModal({ isOpen: false, data: null });\n            }}\n            onAnimationStart={() => {\n              setIsAnimating(true);\n              setModalAnimationStates(prev => ({ ...prev, case: true }));\n            }}\n            onAnimationEnd={() => {\n              setIsAnimating(false);\n              setModalAnimationStates(prev => ({ ...prev, case: false }));\n            }}\n            setMindMapData={setMindMapData}\n            autoSaveMindMapData={autoSaveMindMapData}\n            addToast={addToast}\n          />\n        )}\n      </AnimatePresence>\n      \n      <AnimatePresence mode=\"wait\">\n        {topicModal.isOpen && (\n          <TopicModal \n            key={`topic-modal-${topicModal.data?.id || 'default'}`}\n            isOpen={topicModal.isOpen} \n            data={topicModalStableData.current || topicModal.data} \n            onClose={() => {\n              setModalAnimationStates(prev => ({ ...prev, topic: true }));\n              setTopicModal({ isOpen: false, data: null });\n            }}\n            onAnimationStart={() => {\n              setIsAnimating(true);\n              setModalAnimationStates(prev => ({ ...prev, topic: true }));\n            }}\n            onAnimationEnd={() => {\n              setIsAnimating(false);\n              setModalAnimationStates(prev => ({ ...prev, topic: false }));\n            }}\n            setMindMapData={setMindMapData}\n            autoSaveMindMapData={autoSaveMindMapData}\n            addToast={addToast}\n            syncNodeData={syncNodeData}\n            forceNodeUpdate={() => setNodeUpdateTrigger(prev => prev + 1)}\n          />\n        )}\n      </AnimatePresence>\n      \n      <AnimatePresence mode=\"wait\">\n        {taskModal.isOpen && (\n          <TaskModal \n            key={`task-modal-${taskModal.data?.id || 'default'}`}\n            isOpen={taskModal.isOpen} \n            data={taskModalStableData.current || taskModal.data} \n            onClose={() => {\n              setModalAnimationStates(prev => ({ ...prev, task: true }));\n              setTaskModal({ isOpen: false, data: null });\n            }}\n            onAnimationStart={() => {\n              setIsAnimating(true);\n              setModalAnimationStates(prev => ({ ...prev, task: true }));\n            }}\n            onAnimationEnd={() => {\n              setIsAnimating(false);\n              setModalAnimationStates(prev => ({ ...prev, task: false }));\n            }}\n            setMindMapData={setMindMapData}\n            autoSaveMindMapData={autoSaveMindMapData}\n            addToast={addToast}\n          />\n        )}\n      </AnimatePresence>\n\n      <EdgeLabelModal \n        isOpen={edgeModal.isOpen} \n        edge={edgeModal.edge} \n        onClose={() => setEdgeModal({ isOpen: false, edge: null })} \n        onSave={handleSaveEdgeLabel} \n      />\n\n      {loading && (\n        <div className=\"absolute inset-0 bg-white bg-opacity-80 flex items-center justify-center z-50\">\n          <Loader2 size={48} className=\"animate-spin text-blue-600\" />\n        </div>\n      )}\n      \n      {toasts.map(toast => (\n        <Toast\n          key={toast.id}\n          message={toast.message}\n          type={toast.type}\n          duration={toast.duration}\n          onClose={() => removeToast(toast.id)}\n        />\n      ))}\n    </div>\n  );\n};\n\n// Error Boundary for React Flow\nclass ReactFlowErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error) {\n    // Check if it's a React Flow dimension error\n    if (error.message && error.message.includes('dimensions')) {\n      console.warn('React Flow dimension error caught, recovering...');\n      return { hasError: false }; // Don't show error, just recover\n    }\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    if (error.message && error.message.includes('dimensions')) {\n      // For dimension errors, try to recover\n      setTimeout(() => {\n        if (window.reactFlowInstance) {\n          window.reactFlowInstance.fitView();\n        }\n      }, 100);\n      return;\n    }\n    console.error('React Flow Error:', error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div className=\"flex-1 flex items-center justify-center\">\n          <div className=\"text-center\">\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Mind Map Temporarily Unavailable</h3>\n            <p className=\"text-gray-600 mb-4\">There was an issue with the mind map. Please refresh the page.</p>\n            <button \n              onClick={() => window.location.reload()} \n              className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n            >\n              Refresh Page\n            </button>\n          </div>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nconst Dashboard = () => (\n  <ReactFlowProvider>\n    <DashboardComponent />\n  </ReactFlowProvider>\n);\n\nfunction App() {\n  // Check for timeline test parameter\n  const urlParams = new URLSearchParams(window.location.search);\n  const showTimelineTest = urlParams.get('timeline-test') === 'true';\n  \n  if (showTimelineTest) {\n    return <TimelineTestPage />;\n  }\n  \n  return <Dashboard />;\n}\n\nexport default App;","import React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nconst root = ReactDOM.createRoot(document.getElementById(\"root\"));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n);\n","// Enhanced Task Modal with tabbed interface and advanced animations\nimport React, { useState, useEffect, useMemo, useCallback, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  X, \n  CheckSquare, \n  Clock, \n  AlertTriangle, \n  Flag, \n  Calendar, \n  Link2, \n  Target,\n  Edit3,\n  Trash2,\n  Save,\n  Loader2,\n  Star,\n  Play,\n  Pause,\n  RotateCcw,\n  TrendingUp,\n  Users,\n  BookOpen,\n  FileText,\n  Tag\n} from 'lucide-react';\n\n// Animation variants for Framer Motion\nconst modalVariants = {\n  hidden: {\n    opacity: 0,\n    scale: 0.3,\n    y: 50,\n    rotate: -5,\n  },\n  visible: {\n    opacity: 1,\n    scale: 1,\n    y: 0,\n    rotate: 0,\n    transition: {\n      type: \"spring\",\n      damping: 25,\n      stiffness: 300,\n      duration: 0.6,\n    }\n  },\n  exit: {\n    opacity: 0,\n    scale: 0.7,\n    y: 30,\n    rotate: -3,\n    transition: {\n      type: \"easeInOut\",\n      duration: 0.4,\n    }\n  }\n};\n\nconst backdropVariants = {\n  hidden: { \n    opacity: 0,\n    backdropFilter: 'blur(0px)'\n  },\n  visible: { \n    opacity: 1,\n    backdropFilter: 'blur(8px)',\n    transition: {\n      duration: 0.4,\n      ease: \"easeOut\"\n    }\n  },\n  exit: { \n    opacity: 0,\n    backdropFilter: 'blur(0px)',\n    transition: {\n      duration: 0.3,\n      ease: \"easeIn\"\n    }\n  }\n};\n\nconst contentVariants = {\n  hidden: {\n    opacity: 0,\n    y: 20,\n    scale: 0.95,\n  },\n  visible: {\n    opacity: 1,\n    y: 0,\n    scale: 1,\n    transition: {\n      type: \"easeOut\",\n      duration: 0.3,\n      delay: 0.1,\n    }\n  },\n  exit: {\n    opacity: 0,\n    y: -10,\n    scale: 1.02,\n    transition: {\n      type: \"easeIn\",\n      duration: 0.2,\n    }\n  }\n};\n\nconst TaskModal = ({ \n  isOpen, \n  data, \n  onClose,\n  onAnimationStart,\n  onAnimationEnd,\n  setMindMapData,\n  autoSaveMindMapData,\n  addToast\n}) => {\n  const [isAnimating, setIsAnimating] = useState(false);\n  const [isVisible, setIsVisible] = useState(false);\n  const [isClosing, setIsClosing] = useState(false);\n  const [isEditing, setIsEditing] = useState(false);\n  const [editData, setEditData] = useState({});\n  const [isLoading, setIsLoading] = useState(false);\n  const [hasInitialized, setHasInitialized] = useState(false);\n  const [activeTab, setActiveTab] = useState('overview');\n  const [isTabTransitioning, setIsTabTransitioning] = useState(false);\n\n  useEffect(() => {\n    if (isOpen && data && !hasInitialized) {\n      setIsVisible(true);\n      setEditData({ \n        ...data,\n        status: data.status || 'pending',\n        priority: data.priority || 'medium'\n      });\n      setHasInitialized(true);\n      setIsAnimating(true);\n      if (onAnimationStart) onAnimationStart();\n      \n      setTimeout(() => {\n        setIsAnimating(false);\n        if (onAnimationEnd) onAnimationEnd();\n      }, 600);\n    } else if (!isOpen && hasInitialized) {\n      setHasInitialized(false);\n    }\n  }, [isOpen, hasInitialized, onAnimationStart, onAnimationEnd]);\n\n  // Separate effect for data updates when modal is already open\n  useEffect(() => {\n    if (isOpen && data && hasInitialized && !isEditing && !isLoading && !isTabTransitioning && !isAnimating) {\n      setEditData({ \n        ...data,\n        status: data.status || 'pending',\n        priority: data.priority || 'medium'\n      });\n    }\n  }, [data?.id, isOpen, hasInitialized, isEditing, isLoading, isTabTransitioning, isAnimating]);\n\n  const priorityConfig = useMemo(() => ({\n    low: { color: 'green', label: 'Low Priority', icon: Flag },\n    medium: { color: 'yellow', label: 'Medium Priority', icon: Flag },\n    high: { color: 'red', label: 'High Priority', icon: Flag },\n    urgent: { color: 'purple', label: 'Urgent', icon: AlertTriangle }\n  }), []);\n\n  const statusConfig = useMemo(() => ({\n    pending: { color: 'gray', label: 'Pending', icon: Clock },\n    in_progress: { color: 'blue', label: 'In Progress', icon: Play },\n    completed: { color: 'green', label: 'Completed', icon: CheckSquare },\n    paused: { color: 'orange', label: 'Paused', icon: Pause }\n  }), []);\n\n  const isOverdue = useMemo(() => {\n    if (!editData.due_date) return false;\n    const dueDate = new Date(editData.due_date);\n    const today = new Date();\n    return dueDate < today && editData.status !== 'completed';\n  }, [editData.due_date, editData.status]);\n\n  const handleClose = useCallback(() => {\n    if (isAnimating || isClosing) return;\n    \n    setIsAnimating(true);\n    setIsClosing(true);\n    if (onAnimationStart) onAnimationStart();\n    \n    // Set visibility to false to trigger exit animation\n    setIsVisible(false);\n  }, [onAnimationStart, isAnimating, isClosing]);\n\n  const handleSave = useCallback(async () => {\n    if (isLoading) return;\n    \n    setIsLoading(true);\n    try {\n      setMindMapData(prevData => {\n        const updatedTasks = prevData.tasks.map(task =>\n          String(task.id) === String(data?.id) ? { ...task, ...editData } : task\n        );\n        const newData = { ...prevData, tasks: updatedTasks };\n        autoSaveMindMapData(newData);\n        return newData;\n      });\n      \n      setIsEditing(false);\n      addToast('Task updated successfully', 'success');\n    } catch (error) {\n      console.error('Error saving task:', error);\n      addToast('Failed to save task', 'error');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [data?.id, editData, setMindMapData, autoSaveMindMapData, addToast, isLoading]);\n\n  const handleDelete = useCallback(async () => {\n    if (isLoading) return;\n    \n    if (!window.confirm('Are you sure you want to delete this task?')) return;\n    \n    setIsLoading(true);\n    try {\n      setMindMapData(prevData => {\n        const updatedTasks = prevData.tasks.filter(task => String(task.id) !== String(data?.id));\n        const newData = { ...prevData, tasks: updatedTasks };\n        autoSaveMindMapData(newData);\n        return newData;\n      });\n      \n      addToast('Task deleted successfully', 'success');\n      handleClose();\n    } catch (error) {\n      console.error('Error deleting task:', error);\n      addToast('Failed to delete task', 'error');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [data?.id, setMindMapData, autoSaveMindMapData, addToast, handleClose, isLoading]);\n\n  const handleStatusChange = useCallback((newStatus) => {\n    setEditData(prev => ({ ...prev, status: newStatus }));\n  }, []);\n\n  const updateField = useCallback((field, value) => {\n    setEditData(prev => ({ ...prev, [field]: value }));\n  }, []);\n\n  const renderField = (label, field, type = 'text', options = {}) => {\n    const value = editData[field] || '';\n    \n    if (!isEditing) {\n      if (type === 'textarea') {\n        return (\n          <div className=\"space-y-2\">\n            <label className=\"block text-sm font-medium text-gray-700\">{label}</label>\n            <div className=\"p-3 bg-gray-50 rounded-lg border min-h-[2.5rem] text-gray-800\">\n              {value || <span className=\"text-gray-400 italic\">Not specified</span>}\n            </div>\n          </div>\n        );\n      }\n      \n      if (type === 'select') {\n        return (\n          <div className=\"space-y-2\">\n            <label className=\"block text-sm font-medium text-gray-700\">{label}</label>\n            <div className=\"p-3 bg-gray-50 rounded-lg border text-gray-800\">\n              {value || <span className=\"text-gray-400 italic\">Not specified</span>}\n            </div>\n          </div>\n        );\n      }\n      \n      if (type === 'date') {\n        return (\n          <div className=\"space-y-2\">\n            <label className=\"block text-sm font-medium text-gray-700\">{label}</label>\n            <div className=\"p-3 bg-gray-50 rounded-lg border text-gray-800\">\n              {value ? new Date(value).toLocaleDateString() : <span className=\"text-gray-400 italic\">Not set</span>}\n            </div>\n          </div>\n        );\n      }\n      \n      return (\n        <div className=\"space-y-2\">\n          <label className=\"block text-sm font-medium text-gray-700\">{label}</label>\n          <div className=\"p-3 bg-gray-50 rounded-lg border text-gray-800\">\n            {value || <span className=\"text-gray-400 italic\">Not specified</span>}\n          </div>\n        </div>\n      );\n    }\n\n    // Editing mode\n    if (type === 'textarea') {\n      return (\n        <div className=\"space-y-2\">\n          <label className=\"block text-sm font-medium text-gray-700\">{label}</label>\n          <textarea\n            value={value}\n            onChange={(e) => updateField(field, e.target.value)}\n            className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors\"\n            rows={options.rows || 3}\n            placeholder={`Enter ${label.toLowerCase()}...`}\n          />\n        </div>\n      );\n    }\n\n    if (type === 'select' && options.choices) {\n      return (\n        <div className=\"space-y-2\">\n          <label className=\"block text-sm font-medium text-gray-700\">{label}</label>\n          <select\n            value={value}\n            onChange={(e) => updateField(field, e.target.value)}\n            className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors\"\n          >\n            <option value=\"\">Select {label.toLowerCase()}...</option>\n            {options.choices.map(choice => (\n              <option key={choice.value} value={choice.value}>{choice.label}</option>\n            ))}\n          </select>\n        </div>\n      );\n    }\n\n    if (type === 'date') {\n      return (\n        <div className=\"space-y-2\">\n          <label className=\"block text-sm font-medium text-gray-700\">{label}</label>\n          <input\n            type=\"date\"\n            value={value}\n            onChange={(e) => updateField(field, e.target.value)}\n            className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors\"\n          />\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"space-y-2\">\n        <label className=\"block text-sm font-medium text-gray-700\">{label}</label>\n        <input\n          type={type}\n          value={value}\n          onChange={(e) => updateField(field, type === 'number' ? Number(e.target.value) : e.target.value)}\n          className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors\"\n          placeholder={`Enter ${label.toLowerCase()}...`}\n        />\n      </div>\n    );\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence mode=\"wait\" onExitComplete={() => {\n      setIsAnimating(false);\n      setIsClosing(false);\n      setHasInitialized(false);\n      onClose();\n      if (onAnimationEnd) onAnimationEnd();\n    }}>\n      {isVisible && (\n        <motion.div\n          key={`task-modal-${data?.id || 'default'}`}\n          initial=\"hidden\"\n          animate=\"visible\"\n          exit=\"exit\"\n          variants={backdropVariants}\n          className=\"fixed inset-0 bg-black flex items-center justify-center z-50\"\n          style={{ \n            willChange: 'backdrop-filter, opacity',\n            backfaceVisibility: 'hidden',\n            transform: 'translate3d(0, 0, 0)'\n          }}\n          onClick={(e) => e.target === e.currentTarget && handleClose()}\n        >\n          <motion.div\n            initial=\"hidden\"\n            animate=\"visible\"\n            exit=\"exit\"\n            variants={modalVariants}\n            className=\"bg-white rounded-2xl shadow-2xl max-w-4xl w-full mx-4 max-h-[85vh] overflow-hidden\"\n            style={{ \n              willChange: 'transform, opacity, scale',\n              backfaceVisibility: 'hidden'\n            }}\n            onClick={(e) => e.stopPropagation()}\n            onAnimationStart={() => {\n              setIsAnimating(true);\n              if (onAnimationStart) onAnimationStart();\n            }}\n            onAnimationComplete={() => {\n              setIsAnimating(false);\n              if (onAnimationEnd) onAnimationEnd();\n            }}\n          >\n            <motion.div \n              initial=\"hidden\"\n              animate=\"visible\"\n              exit=\"exit\"\n              variants={contentVariants}\n              className=\"bg-gradient-to-br from-slate-900 to-slate-800 text-white px-6 py-4 flex items-center justify-between\"\n            >\n              <div className=\"flex items-center gap-3\">\n                <CheckSquare size={24} />\n                <h2 className=\"text-xl font-semibold\">Task Details</h2>\n                {isOverdue && (\n                  <motion.div\n                    animate={{ scale: [1, 1.1, 1] }}\n                    transition={{ duration: 1, repeat: Infinity }}\n                    className=\"flex items-center gap-1 px-2 py-1 bg-red-500 rounded-full text-xs font-medium\"\n                  >\n                    <AlertTriangle size={12} />\n                    Overdue\n                  </motion.div>\n                )}\n              </div>\n              <div className=\"flex items-center gap-2\">\n                {!isEditing && !isLoading && (\n                  <>\n                    <button\n                      onClick={() => setIsEditing(true)}\n                      className=\"text-white hover:text-gray-200 p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-all\"\n                      title=\"Edit\"\n                    >\n                      <Edit3 size={20} />\n                    </button>\n                    <button\n                      onClick={handleDelete}\n                      className=\"text-white hover:text-red-200 p-2 rounded-full hover:bg-red-500 hover:bg-opacity-30 transition-all\"\n                      title=\"Delete\"\n                    >\n                      <Trash2 size={20} />\n                    </button>\n                  </>\n                )}\n                <button onClick={handleClose} className=\"text-white hover:text-gray-200 p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-all\">\n                  <X size={20} />\n                </button>\n              </div>\n            </motion.div>\n\n            {/* Tab Navigation */}\n            <div className=\"bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 border-b border-slate-600\">\n              <nav className=\"flex flex-wrap gap-2 px-6 py-4\">\n                {[\n                  { key: 'overview', label: 'Overview', icon: CheckSquare },\n                  { key: 'progress', label: 'Progress', icon: TrendingUp },\n                  { key: 'connections', label: 'Connections', icon: Link2 },\n                  { key: 'details', label: 'Details', icon: FileText }\n                ].map(({ key, label, icon: Icon }) => (\n                  <motion.button\n                    key={key}\n                    onClick={() => {\n                      if (isTabTransitioning) return;\n                      setIsTabTransitioning(true);\n                      setActiveTab(key);\n                      setTimeout(() => setIsTabTransitioning(false), 300);\n                    }}\n                    className={`relative flex items-center gap-2 px-4 py-3 rounded-xl font-medium text-sm transition-all duration-300 ${\n                      activeTab === key\n                        ? 'bg-gradient-to-r from-emerald-500 to-teal-600 text-white shadow-lg shadow-emerald-500/25'\n                        : 'text-slate-300 hover:text-white hover:bg-slate-700/50 hover:shadow-md'\n                    }`}\n                    whileHover={{ scale: activeTab === key ? 1 : 1.02 }}\n                    whileTap={{ scale: 0.98 }}\n                    initial={false}\n                    animate={{\n                      scale: activeTab === key ? 1.05 : 1,\n                      boxShadow: activeTab === key \n                        ? '0 8px 25px rgba(16, 185, 129, 0.3), 0 0 20px rgba(20, 184, 166, 0.2)' \n                        : '0 2px 8px rgba(0, 0, 0, 0.1)'\n                    }}\n                    transition={{ duration: 0.3, ease: \"easeOut\" }}\n                  >\n                    <Icon size={16} className={activeTab === key ? 'drop-shadow-sm' : ''} />\n                    {label}\n                    \n                    {activeTab === key && (\n                      <motion.div\n                        layoutId=\"taskTabGlow\"\n                        className=\"absolute inset-0 bg-gradient-to-r from-emerald-400/20 to-teal-500/20 rounded-xl blur-sm\"\n                        initial={false}\n                        transition={{ type: \"spring\", bounce: 0.2, duration: 0.6 }}\n                      />\n                    )}\n                  </motion.button>\n                ))}\n              </nav>\n            </div>\n            \n            {/* Tab Content */}\n            <motion.div \n              className=\"relative overflow-hidden bg-gradient-to-br from-slate-50 to-slate-100\"\n              layout=\"position\"\n              layoutRoot\n              transition={{ \n                layout: { duration: 0.4, ease: \"easeInOut\" },\n                height: { duration: 0.4, ease: \"easeInOut\" }\n              }}\n            >\n              <AnimatePresence mode=\"wait\" initial={false} onExitComplete={() => setIsTabTransitioning(false)}>\n                {/* Overview Tab */}\n                {activeTab === 'overview' && (\n                  <motion.div\n                    key=\"overview\"\n                    initial={{ opacity: 0, x: -30 }}\n                    animate={{ opacity: 1, x: 0 }}\n                    exit={{ opacity: 0, x: 30 }}\n                    transition={{ duration: 0.4, ease: \"easeOut\" }}\n                    layout=\"position\"\n                    layoutId=\"tabContent\"\n                    className=\"p-6 overflow-y-auto max-h-[calc(85vh-200px)] scrollbar-thin scrollbar-thumb-slate-400 scrollbar-track-slate-200\"\n                  >\n                    <div className=\"space-y-6\">\n                      <div className=\"bg-white rounded-xl p-6 shadow-lg border border-slate-200\">\n                        <h3 className=\"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2\">\n                          <Target size={20} className=\"text-emerald-600\" />\n                          Task Information\n                        </h3>\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                          {renderField('Title', 'title')}\n                          {renderField('Priority', 'priority', 'select', {\n                            choices: [\n                              { value: 'low', label: 'Low Priority' },\n                              { value: 'medium', label: 'Medium Priority' },\n                              { value: 'high', label: 'High Priority' },\n                              { value: 'urgent', label: 'Urgent' }\n                            ]\n                          })}\n                        </div>\n                        <div className=\"mt-6\">\n                          {renderField('Description', 'description', 'textarea', { rows: 4 })}\n                        </div>\n                      </div>\n                      \n                      <div className=\"bg-white rounded-xl p-6 shadow-lg border border-slate-200\">\n                        <h3 className=\"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2\">\n                          <Clock size={20} className=\"text-blue-600\" />\n                          Status & Timeline\n                        </h3>\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                          {renderField('Status', 'status', 'select', {\n                            choices: [\n                              { value: 'pending', label: 'Pending' },\n                              { value: 'in_progress', label: 'In Progress' },\n                              { value: 'completed', label: 'Completed' },\n                              { value: 'paused', label: 'Paused' }\n                            ]\n                          })}\n                          {renderField('Due Date', 'due_date', 'date')}\n                        </div>\n                        \n                        {/* Status Change Buttons */}\n                        <div className=\"mt-6\">\n                          <label className=\"block text-sm font-medium text-gray-700 mb-3\">Quick Status Update</label>\n                          <div className=\"flex flex-wrap gap-3\">\n                            {Object.entries(statusConfig).map(([status, config]) => {\n                              const Icon = config.icon;\n                              const isActive = editData.status === status;\n                              return (\n                                <motion.button\n                                  key={status}\n                                  onClick={() => handleStatusChange(status)}\n                                  disabled={!isEditing}\n                                  whileHover={isEditing ? { scale: 1.05 } : {}}\n                                  whileTap={isEditing ? { scale: 0.95 } : {}}\n                                  className={`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${\n                                    isActive\n                                      ? `bg-${config.color}-100 text-${config.color}-800 border-2 border-${config.color}-300`\n                                      : `bg-gray-100 text-gray-600 border-2 border-gray-200 ${isEditing ? 'hover:bg-gray-200' : 'cursor-not-allowed opacity-50'}`\n                                  }`}\n                                >\n                                  <Icon size={16} />\n                                  {config.label}\n                                </motion.button>\n                              );\n                            })}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </motion.div>\n                )}\n\n                {/* Progress Tab */}\n                {activeTab === 'progress' && (\n                  <motion.div\n                    key=\"progress\"\n                    initial={{ opacity: 0, x: -30 }}\n                    animate={{ opacity: 1, x: 0 }}\n                    exit={{ opacity: 0, x: 30 }}\n                    transition={{ duration: 0.4, ease: \"easeOut\" }}\n                    layout=\"position\"\n                    layoutId=\"tabContent\"\n                    className=\"p-6 overflow-y-auto max-h-[calc(85vh-200px)] scrollbar-thin scrollbar-thumb-slate-400 scrollbar-track-slate-200\"\n                  >\n                    <div className=\"bg-white rounded-xl p-6 shadow-lg border border-slate-200\">\n                      <h3 className=\"text-lg font-semibold text-slate-800 mb-6 flex items-center gap-2\">\n                        <TrendingUp size={20} className=\"text-blue-600\" />\n                        Task Progress\n                      </h3>\n                      \n                      {/* Status Overview */}\n                      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n                        <motion.div\n                          whileHover={{ scale: 1.02 }}\n                          className={`p-4 rounded-lg border-2 ${\n                            editData.status === 'completed' \n                              ? 'bg-green-50 border-green-200' \n                              : 'bg-gray-50 border-gray-200'\n                          }`}\n                        >\n                          <div className=\"flex items-center gap-3 mb-2\">\n                            <CheckSquare size={20} className={editData.status === 'completed' ? 'text-green-600' : 'text-gray-400'} />\n                            <span className={`font-medium ${editData.status === 'completed' ? 'text-green-800' : 'text-gray-600'}`}>\n                              Completion\n                            </span>\n                          </div>\n                          <div className={`text-2xl font-bold ${editData.status === 'completed' ? 'text-green-700' : 'text-gray-700'}`}>\n                            {editData.status === 'completed' ? '100%' : '0%'}\n                          </div>\n                        </motion.div>\n                        \n                        <motion.div\n                          whileHover={{ scale: 1.02 }}\n                          className={`p-4 rounded-lg border-2 ${\n                            isOverdue \n                              ? 'bg-red-50 border-red-200' \n                              : 'bg-blue-50 border-blue-200'\n                          }`}\n                        >\n                          <div className=\"flex items-center gap-3 mb-2\">\n                            <Calendar size={20} className={isOverdue ? 'text-red-600' : 'text-blue-600'} />\n                            <span className={`font-medium ${isOverdue ? 'text-red-800' : 'text-blue-800'}`}>\n                              Due Date\n                            </span>\n                          </div>\n                          <div className={`text-lg font-bold ${isOverdue ? 'text-red-700' : 'text-blue-700'}`}>\n                            {editData.due_date ? new Date(editData.due_date).toLocaleDateString() : 'Not set'}\n                          </div>\n                          {isOverdue && (\n                            <div className=\"text-sm text-red-600 mt-1\">Overdue</div>\n                          )}\n                        </motion.div>\n                        \n                        <motion.div\n                          whileHover={{ scale: 1.02 }}\n                          className={`p-4 rounded-lg border-2 ${\n                            editData.priority === 'urgent' || editData.priority === 'high'\n                              ? 'bg-orange-50 border-orange-200'\n                              : 'bg-gray-50 border-gray-200'\n                          }`}\n                        >\n                          <div className=\"flex items-center gap-3 mb-2\">\n                            <Flag size={20} className={\n                              editData.priority === 'urgent' || editData.priority === 'high' \n                                ? 'text-orange-600' \n                                : 'text-gray-600'\n                            } />\n                            <span className={`font-medium ${\n                              editData.priority === 'urgent' || editData.priority === 'high' \n                                ? 'text-orange-800' \n                                : 'text-gray-800'\n                            }`}>\n                              Priority\n                            </span>\n                          </div>\n                          <div className={`text-lg font-bold ${\n                            editData.priority === 'urgent' || editData.priority === 'high' \n                              ? 'text-orange-700' \n                              : 'text-gray-700'\n                          }`}>\n                            {priorityConfig[editData.priority]?.label || 'Not set'}\n                          </div>\n                        </motion.div>\n                      </div>\n                    </div>\n                  </motion.div>\n                )}\n\n                {/* Connections Tab */}\n                {activeTab === 'connections' && (\n                  <motion.div\n                    key=\"connections\"\n                    initial={{ opacity: 0, x: -30 }}\n                    animate={{ opacity: 1, x: 0 }}\n                    exit={{ opacity: 0, x: 30 }}\n                    transition={{ duration: 0.4, ease: \"easeOut\" }}\n                    layout=\"position\"\n                    layoutId=\"tabContent\"\n                    className=\"p-6 overflow-y-auto max-h-[calc(85vh-200px)] scrollbar-thin scrollbar-thumb-slate-400 scrollbar-track-slate-200\"\n                  >\n                    <div className=\"bg-white rounded-xl p-6 shadow-lg border border-slate-200\">\n                      <h3 className=\"text-lg font-semibold text-slate-800 mb-6 flex items-center gap-2\">\n                        <Link2 size={20} className=\"text-indigo-600\" />\n                        Related Content\n                      </h3>\n                      \n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                        {renderField('Linked Case ID', 'linked_case_id')}\n                        {renderField('Linked Topic ID', 'linked_topic_id')}\n                      </div>\n                      \n                      <div className=\"mt-8 text-center py-8 text-gray-500\">\n                        <Link2 size={48} className=\"mx-auto mb-3 text-gray-300\" />\n                        <p>No connections found</p>\n                        <p className=\"text-sm mt-1\">Link this task to cases or topics to create connections</p>\n                      </div>\n                    </div>\n                  </motion.div>\n                )}\n\n                {/* Details Tab */}\n                {activeTab === 'details' && (\n                  <motion.div\n                    key=\"details\"\n                    initial={{ opacity: 0, x: -30 }}\n                    animate={{ opacity: 1, x: 0 }}\n                    exit={{ opacity: 0, x: 30 }}\n                    transition={{ duration: 0.4, ease: \"easeOut\" }}\n                    layout=\"position\"\n                    layoutId=\"tabContent\"\n                    className=\"p-6 overflow-y-auto max-h-[calc(85vh-200px)] scrollbar-thin scrollbar-thumb-slate-400 scrollbar-track-slate-200\"\n                  >\n                    <div className=\"bg-white rounded-xl p-6 shadow-lg border border-slate-200\">\n                      <h3 className=\"text-lg font-semibold text-slate-800 mb-6 flex items-center gap-2\">\n                        <FileText size={20} className=\"text-gray-600\" />\n                        Additional Details\n                      </h3>\n                      \n                      <div className=\"space-y-6\">\n                        <div className=\"text-sm text-gray-600 bg-slate-50 p-4 rounded-lg\">\n                          <p className=\"font-medium mb-2\">Task Details</p>\n                          <div className=\"space-y-2\">\n                            <p><span className=\"font-medium\">Created:</span> {data?.created_at ? new Date(data.created_at).toLocaleString() : 'Unknown'}</p>\n                            <p><span className=\"font-medium\">Last Updated:</span> {data?.updated_at ? new Date(data.updated_at).toLocaleString() : 'Unknown'}</p>\n                            <p><span className=\"font-medium\">Task ID:</span> {data?.id || 'Unknown'}</p>\n                          </div>\n                        </div>\n                        \n                        <div className=\"p-4 bg-blue-50 rounded-lg border border-blue-200\">\n                          <h4 className=\"font-medium text-blue-800 mb-2\">Task Management Tips</h4>\n                          <ul className=\"text-blue-700 text-sm space-y-1\">\n                            <li>• Break large tasks into smaller, manageable subtasks</li>\n                            <li>• Set realistic due dates to maintain accountability</li>\n                            <li>• Link tasks to relevant cases or topics for better organization</li>\n                            <li>• Update status regularly to track progress</li>\n                          </ul>\n                        </div>\n                      </div>\n                    </div>\n                  </motion.div>\n                )}\n              </AnimatePresence>\n            </motion.div>\n\n            {isEditing && (\n              <div className=\"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex items-center justify-between\">\n                <div className=\"text-sm text-gray-500\">\n                  Changes will be auto-saved\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  <button\n                    onClick={() => {\n                      setIsEditing(false);\n                      setEditData({ ...data });\n                    }}\n                    disabled={isLoading}\n                    className=\"px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    onClick={handleSave}\n                    disabled={isLoading}\n                    className=\"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors flex items-center gap-2\"\n                  >\n                    {isLoading ? <Loader2 size={16} className=\"animate-spin\" /> : <Save size={16} />}\n                    {isLoading ? 'Saving...' : 'Save Changes'}\n                  </button>\n                </div>\n              </div>\n            )}\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n};\n\nexport default React.memo(TaskModal, (prevProps, nextProps) => {\n  return (\n    prevProps.isOpen === nextProps.isOpen &&\n    prevProps.data?.id === nextProps.data?.id &&\n    prevProps.data?.updated_at === nextProps.data?.updated_at\n  );\n});\n","// Enhanced Case Modal with tabbed interface and advanced animations\nimport React, { useState, useEffect, useMemo, useCallback, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  X, \n  Users, \n  FileText, \n  Pill, \n  Brain, \n  Link2,\n  Edit3,\n  Trash2,\n  Save,\n  Loader2,\n  Plus,\n  Check,\n  Calendar,\n  Clock,\n  AlertCircle,\n  BookOpen,\n  Target,\n  Heart,\n  ChevronDown,\n  ChevronRight,\n  Activity\n} from 'lucide-react';\n\n// Import the Vertical Timeline component\nimport VerticalTimeline from './timeline-test/VerticalTimeline';\n\n// Utility function for debouncing\nconst debounce = (func, delay) => {\n  let timeoutId;\n  return (...args) => {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => func.apply(null, args), delay);\n  };\n};\n\n// Animation variants for Framer Motion\nconst modalVariants = {\n  hidden: {\n    opacity: 0,\n    scale: 0.3,\n    y: 50,\n    rotate: -5,\n  },\n  visible: {\n    opacity: 1,\n    scale: 1,\n    y: 0,\n    rotate: 0,\n    transition: {\n      type: \"spring\",\n      damping: 25,\n      stiffness: 300,\n      duration: 0.6,\n    }\n  },\n  exit: {\n    opacity: 0,\n    scale: 0.7,\n    y: 30,\n    rotate: -3,\n    transition: {\n      type: \"easeInOut\",\n      duration: 0.4,\n    }\n  }\n};\n\nconst backdropVariants = {\n  hidden: { \n    opacity: 0,\n    backdropFilter: 'blur(0px)'\n  },\n  visible: { \n    opacity: 1,\n    backdropFilter: 'blur(8px)',\n    transition: {\n      duration: 0.4,\n      ease: \"easeOut\"\n    }\n  },\n  exit: { \n    opacity: 0,\n    backdropFilter: 'blur(0px)',\n    transition: {\n      duration: 0.3,\n      ease: \"easeIn\"\n    }\n  }\n};\n\nconst contentVariants = {\n  hidden: {\n    opacity: 0,\n    y: 20,\n    scale: 0.95,\n  },\n  visible: {\n    opacity: 1,\n    y: 0,\n    scale: 1,\n    transition: {\n      type: \"easeOut\",\n      duration: 0.3,\n      delay: 0.1,\n    }\n  },\n  exit: {\n    opacity: 0,\n    y: -10,\n    scale: 1.02,\n    transition: {\n      type: \"easeIn\",\n      duration: 0.2,\n    }\n  }\n};\n\n// Card animation variants for sections\nconst cardVariants = {\n  hidden: { opacity: 0, y: 20, scale: 0.95 },\n  visible: { \n    opacity: 1, \n    y: 0, \n    scale: 1,\n    transition: {\n      duration: 0.4,\n      ease: \"easeOut\"\n    }\n  },\n  edit: { \n    scale: 1.02,\n    boxShadow: \"0 8px 25px rgba(59, 130, 246, 0.15)\",\n    transition: {\n      duration: 0.3,\n      ease: \"easeOut\"\n    }\n  },\n  saved: {\n    scale: 1,\n    boxShadow: \"0 4px 15px rgba(34, 197, 94, 0.15)\",\n    transition: {\n      duration: 0.3,\n      ease: \"easeOut\"\n    }\n  }\n};\n\nconst CaseModal = ({ \n  isOpen, \n  data, \n  onClose,\n  onAnimationStart,\n  onAnimationEnd,\n  setMindMapData,\n  autoSaveMindMapData,\n  addToast\n}) => {\n  const [isAnimating, setIsAnimating] = useState(false);\n  const [isVisible, setIsVisible] = useState(false);\n  const [isClosing, setIsClosing] = useState(false);\n  const [editData, setEditData] = useState({});\n  const [isLoading, setIsLoading] = useState(false);\n  const [hasInitialized, setHasInitialized] = useState(false);\n  const [activeTab, setActiveTab] = useState('overview');\n  const [isTabTransitioning, setIsTabTransitioning] = useState(false);\n  \n  // Individual section edit states\n  const [editingSections, setEditingSections] = useState({});\n  const [sectionData, setSectionData] = useState({});\n  \n  // Tab-specific scroll positions\n  const [scrollPositions, setScrollPositions] = useState({});\n  const contentRefs = useRef({});\n  \n  // Form states for different tabs\n  const [newMedication, setNewMedication] = useState({ name: '', dosage: '', frequency: '', effect: '' });\n  const [showMedicationForm, setShowMedicationForm] = useState(false);\n\n  useEffect(() => {\n    if (isOpen && data && !hasInitialized) {\n      setIsVisible(true);\n      const initialData = { \n        ...data,\n        narrative_summary: data.narrative_summary || '',\n        medications: data.medications || [],\n        therapeutic_highlights: data.therapeutic_highlights || '',\n        timeline: data.timeline || [], // Initialize timeline\n        last_updated: data.last_updated || new Date().toISOString()\n      };\n      setEditData(initialData);\n      setHasInitialized(true);\n      setIsAnimating(true);\n      if (onAnimationStart) onAnimationStart();\n      \n      setTimeout(() => {\n        setIsAnimating(false);\n        if (onAnimationEnd) onAnimationEnd();\n      }, 600);\n    } else if (!isOpen && hasInitialized) {\n      setHasInitialized(false);\n      setScrollPositions({});\n      setEditingSections({});\n      setSectionData({});\n    }\n  }, [isOpen, data, hasInitialized, onAnimationStart, onAnimationEnd]);\n\n  // Enhanced effect for instant feedback - updates editData immediately when data changes\n  useEffect(() => {\n    if (isOpen && data && hasInitialized) {\n      // Update editData with latest data for instant feedback\n      setEditData(prevEditData => {\n        const updatedData = { \n          ...prevEditData, // Keep any local edits\n          ...data, // Override with latest data from parent\n        };\n        return updatedData;\n      });\n    }\n  }, [data, isOpen, hasInitialized]);\n\n  const handleClose = useCallback(() => {\n    if (isAnimating || isClosing) return;\n    \n    setIsAnimating(true);\n    setIsClosing(true);\n    if (onAnimationStart) onAnimationStart();\n    \n    // Set visibility to false to trigger exit animation\n    setIsVisible(false);\n  }, [onAnimationStart, isAnimating, isClosing]);\n\n  // Escape key handling to close modal - MOVED AFTER handleClose definition\n  useEffect(() => {\n    const handleKeyDown = (event) => {\n      if (event.key === 'Escape') {\n        handleClose();\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('keydown', handleKeyDown);\n      return () => {\n        document.removeEventListener('keydown', handleKeyDown);\n      };\n    }\n  }, [isOpen, handleClose]);\n\n  const handleSave = useCallback(async () => {\n    if (isLoading) return;\n    \n    setIsLoading(true);\n    try {\n      const updatedData = {\n        ...editData,\n        last_updated: new Date().toISOString()\n      };\n      \n      setMindMapData(prevData => {\n        const updatedCases = prevData.cases.map(caseItem =>\n          String(caseItem.id) === String(data?.id) ? { ...caseItem, ...updatedData } : caseItem\n        );\n        const newData = { ...prevData, cases: updatedCases };\n        autoSaveMindMapData(newData);\n        return newData;\n      });\n      \n      setEditData(updatedData);\n      addToast('Case updated successfully', 'success');\n    } catch (error) {\n      console.error('Error saving case:', error);\n      addToast('Failed to save case', 'error');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [data?.id, editData, setMindMapData, autoSaveMindMapData, addToast, isLoading]);\n\n  // Save current tab's scroll position before switching\n  const saveScrollPosition = useCallback((tabId) => {\n    const contentRef = contentRefs.current[tabId];\n    if (contentRef) {\n      setScrollPositions(prev => ({\n        ...prev,\n        [tabId]: contentRef.scrollTop\n      }));\n    }\n  }, []);\n\n  // Restore scroll position when switching to a tab\n  const restoreScrollPosition = useCallback((tabId) => {\n    setTimeout(() => {\n      const contentRef = contentRefs.current[tabId];\n      const savedPosition = scrollPositions[tabId];\n      if (contentRef && savedPosition) {\n        contentRef.scrollTop = savedPosition;\n      }\n    }, 100); // Small delay to ensure content is rendered\n  }, [scrollPositions]);\n\n  // Handle tab switching with scroll position preservation\n  const handleTabSwitch = useCallback((newTabId) => {\n    if (newTabId === activeTab || isTabTransitioning) return;\n    \n    // Save current tab's scroll position\n    saveScrollPosition(activeTab);\n    \n    setIsTabTransitioning(true);\n    setActiveTab(newTabId);\n    \n    setTimeout(() => {\n      setIsTabTransitioning(false);\n      // Restore new tab's scroll position\n      restoreScrollPosition(newTabId);\n    }, 300);\n  }, [activeTab, isTabTransitioning, saveScrollPosition, restoreScrollPosition]);\n\n  // Section editing functionality\n  const toggleEditSection = useCallback((sectionId) => {\n    setEditingSections(prev => ({\n      ...prev,\n      [sectionId]: !prev[sectionId]\n    }));\n    \n    // Initialize section data if starting to edit\n    if (!editingSections[sectionId]) {\n      setSectionData(prev => ({\n        ...prev,\n        [sectionId]: {\n          // Initialize with current values from editData\n          ...(sectionId === 'basic_info' && {\n            label: editData.label || editData.title || '',\n            status: editData.status || 'active'\n          }),\n          ...(sectionId === 'chief_complaint' && {\n            content: editData.chiefComplaint || editData.chief_complaint || ''\n          }),\n          ...(sectionId === 'initial_presentation' && {\n            content: editData.initialPresentation || editData.initial_presentation || ''\n          }),\n          ...(sectionId === 'narrative' && {\n            content: editData.narrative_summary || ''\n          }),\n          ...(sectionId === 'therapeutic_highlights' && {\n            therapeutic_highlights: editData.therapeutic_highlights || ''\n          })\n        }\n      }));\n    }\n  }, [editingSections, editData]);\n\n  const updateSectionData = useCallback((sectionId, field, value) => {\n    // Update sectionData for temporary editing state\n    setSectionData(prev => ({\n      ...prev,\n      [sectionId]: {\n        ...prev[sectionId],\n        [field]: value\n      }\n    }));\n  }, []);\n\n  const cancelEdit = useCallback((sectionId) => {\n    setEditingSections(prev => ({\n      ...prev,\n      [sectionId]: false\n    }));\n    setSectionData(prev => {\n      const newData = { ...prev };\n      delete newData[sectionId];\n      return newData;\n    });\n  }, []);\n\n  const saveSection = useCallback(async (sectionId) => {\n    if (isLoading) return;\n    \n    setIsLoading(true);\n    try {\n      const sectionChanges = sectionData[sectionId] || {};\n      let updatedData = { ...editData };\n      \n      // Apply section-specific changes\n      if (sectionId === 'basic_info') {\n        if (sectionChanges.label) {\n          updatedData.label = sectionChanges.label;\n          updatedData.title = sectionChanges.label; // Also update title for compatibility\n        }\n        if (sectionChanges.status) {\n          updatedData.status = sectionChanges.status;\n        }\n      } else if (sectionId === 'chief_complaint') {\n        if (sectionChanges.content !== undefined) {\n          updatedData.chief_complaint = sectionChanges.content;\n          updatedData.chiefComplaint = sectionChanges.content;\n        }\n      } else if (sectionId === 'initial_presentation') {\n        if (sectionChanges.content !== undefined) {\n          updatedData.initial_presentation = sectionChanges.content;\n          updatedData.initialPresentation = sectionChanges.content;\n        }\n      } else if (sectionId === 'narrative') {\n        if (sectionChanges.content !== undefined) {\n          updatedData.narrative_summary = sectionChanges.content;\n        }\n      }\n      \n      updatedData.last_updated = new Date().toISOString();\n      \n      // Update editData immediately for instant feedback\n      setEditData(updatedData);\n      \n      // Update parent data\n      setMindMapData(prevData => {\n        const updatedCases = prevData.cases.map(caseItem =>\n          String(caseItem.id) === String(data?.id) ? { ...caseItem, ...updatedData } : caseItem\n        );\n        const newData = { ...prevData, cases: updatedCases };\n        autoSaveMindMapData(newData);\n        return newData;\n      });\n      \n      // Clear editing state\n      setEditingSections(prev => ({\n        ...prev,\n        [sectionId]: false\n      }));\n      setSectionData(prev => {\n        const newData = { ...prev };\n        delete newData[sectionId];\n        return newData;\n      });\n      \n      addToast('Case information updated successfully', 'success');\n      \n    } catch (error) {\n      console.error('Error saving section:', error);\n      addToast('Failed to save changes', 'error');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [sectionData, editData, data?.id, setMindMapData, autoSaveMindMapData, addToast, isLoading]);\n\n  const handleDelete = useCallback(async () => {\n    if (isLoading) return;\n    \n    if (!window.confirm('Are you sure you want to delete this case?')) return;\n    \n    setIsLoading(true);\n    try {\n      setMindMapData(prevData => {\n        const updatedCases = prevData.cases.filter(caseItem => String(caseItem.id) !== String(data?.id));\n        const newData = { ...prevData, cases: updatedCases };\n        autoSaveMindMapData(newData);\n        return newData;\n      });\n      \n      addToast('Case deleted successfully', 'success');\n      handleClose();\n    } catch (error) {\n      console.error('Error deleting case:', error);\n      addToast('Failed to delete case', 'error');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [data?.id, setMindMapData, autoSaveMindMapData, addToast, handleClose, isLoading]);\n\n  // Individual section edit functions\n  const startEditingSection = useCallback((sectionId) => {\n    setEditingSections(prev => ({ ...prev, [sectionId]: true }));\n    // Initialize section data with current values\n    setSectionData(prev => ({\n      ...prev,\n      [sectionId]: { ...editData }\n    }));\n  }, [editData]);\n\n  const cancelEditingSection = useCallback((sectionId) => {\n    setEditingSections(prev => ({ ...prev, [sectionId]: false }));\n    setSectionData(prev => {\n      const newData = { ...prev };\n      delete newData[sectionId];\n      return newData;\n    });\n  }, []);\n\n  const saveSectionEdit = useCallback(async (sectionId) => {\n    if (isLoading) return;\n    \n    const sectionChanges = sectionData[sectionId];\n    if (!sectionChanges) return;\n    \n    setIsLoading(true);\n    try {\n      const updatedData = {\n        ...editData,\n        ...sectionChanges,\n        last_updated: new Date().toISOString()\n      };\n      \n      // Update editData immediately for instant feedback\n      setEditData(updatedData);\n      \n      setMindMapData(prevData => {\n        const updatedCases = prevData.cases.map(caseItem =>\n          String(caseItem.id) === String(data?.id) ? { ...caseItem, ...updatedData } : caseItem\n        );\n        const newData = { ...prevData, cases: updatedCases };\n        autoSaveMindMapData(newData);\n        return newData;\n      });\n      \n      setEditingSections(prev => ({ ...prev, [sectionId]: false }));\n      setSectionData(prev => {\n        const newData = { ...prev };\n        delete newData[sectionId];\n        return newData;\n      });\n      \n      addToast('Section updated successfully', 'success');\n    } catch (error) {\n      console.error('Error saving section:', error);\n      addToast('Failed to save section', 'error');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [sectionData, editData, data?.id, setMindMapData, autoSaveMindMapData, addToast, isLoading]);\n\n  const updateSectionField = useCallback((sectionId, field, value) => {\n    setSectionData(prev => ({\n      ...prev,\n      [sectionId]: {\n        ...prev[sectionId],\n        [field]: value\n      }\n    }));\n  }, []);\n\n  // Medication management functions\n  const addMedication = useCallback(() => {\n    if (!newMedication.name.trim()) return;\n    \n    const updatedMedications = [...(editData.medications || []), { \n      id: Date.now(),\n      ...newMedication,\n      dateAdded: new Date().toISOString()\n    }];\n    \n    const updatedData = {\n      ...editData,\n      medications: updatedMedications,\n      last_updated: new Date().toISOString()\n    };\n    \n    setEditData(updatedData);\n    \n    setMindMapData(prevData => {\n      const updatedCases = prevData.cases.map(caseItem =>\n        String(caseItem.id) === String(data?.id) ? { ...caseItem, ...updatedData } : caseItem\n      );\n      const newData = { ...prevData, cases: updatedCases };\n      autoSaveMindMapData(newData);\n      return newData;\n    });\n    \n    setNewMedication({ name: '', dosage: '', frequency: '', effect: '' });\n    setShowMedicationForm(false);\n    addToast('Medication added successfully', 'success');\n  }, [newMedication, editData, data?.id, setMindMapData, autoSaveMindMapData, addToast]);\n\n  const removeMedication = useCallback((medicationId) => {\n    const updatedMedications = (editData.medications || []).filter(med => med.id !== medicationId);\n    const updatedData = {\n      ...editData,\n      medications: updatedMedications,\n      last_updated: new Date().toISOString()\n    };\n    \n    setEditData(updatedData);\n    \n    setMindMapData(prevData => {\n      const updatedCases = prevData.cases.map(caseItem =>\n        String(caseItem.id) === String(data?.id) ? { ...caseItem, ...updatedData } : caseItem\n      );\n      const newData = { ...prevData, cases: updatedCases };\n      autoSaveMindMapData(newData);\n      return newData;\n    });\n    \n    addToast('Medication removed successfully', 'success');\n  }, [editData, data?.id, setMindMapData, autoSaveMindMapData, addToast]);\n\n  // Enhanced timeline management with debounced auto-save and better backend integration\n  const timelineEntries = useMemo(() => {\n    // Ensure timeline data is properly structured for the VerticalTimeline component\n    const timeline = editData.timeline || [];\n    console.log(`Timeline entries for case ${data?.id}:`, timeline);\n    return timeline;\n  }, [editData.timeline, data?.id]);\n  \n  // Debounced timeline save function with enhanced error handling\n  const debouncedTimelineSave = useCallback(\n    debounce(async (updatedTimeline, retryCount = 0) => {\n      try {\n        // Validate timeline data structure\n        const validatedTimeline = updatedTimeline.map((entry, index) => ({\n          id: entry.id || `timeline-${data?.id}-${Date.now()}-${index}`,\n          title: entry.title || `Timeline Entry ${index + 1}`,\n          type: entry.type || 'timeline_entry',\n          timestamp: entry.timestamp || entry.date || new Date().toISOString(),\n          date: entry.date || entry.timestamp || new Date().toISOString(),\n          patient_narrative: entry.patient_narrative || entry.patientData?.notes || '',\n          clinical_notes: entry.clinical_notes || entry.clinicalData?.notes || '',\n          content: entry.content || entry.patient_narrative || entry.clinical_notes || '',\n          symptoms: entry.symptoms || [],\n          orderIndex: entry.orderIndex !== undefined ? entry.orderIndex : index,\n          x: entry.x || 400, // Default center position\n          y: entry.y || (100 + (index * 200)), // Default spacing\n          created_at: entry.created_at || new Date().toISOString(),\n          updated_at: new Date().toISOString(),\n          // Keep original data for backward compatibility\n          ...entry\n        }));\n\n        const updatedData = {\n          ...editData,\n          timeline: validatedTimeline,\n          last_updated: new Date().toISOString()\n        };\n        \n        // Update editData immediately for instant feedback\n        setEditData(updatedData);\n        \n        // Enhanced mind map data update with better timeline integration\n        setMindMapData(prevData => {\n          const updatedCases = prevData.cases.map(caseItem => {\n            if (String(caseItem.id) === String(data?.id)) {\n              return { \n                ...caseItem, \n                ...updatedData,\n                // Ensure timeline data is properly structured for backend\n                timeline: validatedTimeline.map(entry => ({\n                  id: String(entry.id || `${Date.now()}-${caseItem.id}-timeline-${entry.orderIndex || 0}`),\n                  title: entry.title || `Timeline Entry ${(entry.orderIndex || 0) + 1}`,\n                  type: entry.type || 'timeline_entry',\n                  timestamp: entry.timestamp || entry.date || new Date().toISOString(),\n                  date: entry.date || entry.timestamp || new Date().toISOString(),\n                  patient_narrative: entry.patient_narrative || '',\n                  clinical_notes: entry.clinical_notes || '',\n                  content: entry.content || entry.patient_narrative || entry.clinical_notes || '',\n                  symptoms: entry.symptoms || [],\n                  orderIndex: entry.orderIndex !== undefined ? entry.orderIndex : 0,\n                  x: Number(entry.x) || 400,\n                  y: Number(entry.y) || 100,\n                  created_at: entry.created_at || new Date().toISOString(),\n                  updated_at: new Date().toISOString()\n                }))\n              };\n            }\n            return caseItem;\n          });\n          const newData = { ...prevData, cases: updatedCases };\n          autoSaveMindMapData(newData);\n          return newData;\n        });\n        \n        return { success: true, data: updatedData };\n      } catch (error) {\n        console.error('Timeline save error:', error);\n        \n        // Retry logic - up to 3 attempts\n        if (retryCount < 3) {\n          console.log(`Retrying timeline save (attempt ${retryCount + 1}/3)`);\n          return debouncedTimelineSave(updatedTimeline, retryCount + 1);\n        }\n        \n        return { success: false, error };\n      }\n    }, 500), // 500ms debounce\n    [editData, data?.id, setMindMapData, autoSaveMindMapData]\n  );\n  \n  const updateTimeline = useCallback(async (updatedTimeline, options = {}) => {\n    if (isLoading && !options.force) return;\n    \n    // Enhanced validation - check for meaningful content or position changes\n    const hasContent = updatedTimeline.some(entry => \n      (entry.patient_narrative && entry.patient_narrative.trim()) ||\n      (entry.clinical_notes && entry.clinical_notes.trim()) ||\n      (entry.content && entry.content.trim()) ||\n      entry.x !== 400 || entry.y !== 100 // Position has changed from default\n    );\n    \n    // Always save if forced or if there's meaningful content/changes\n    if (!hasContent && !options.force) {\n      console.log('Skipping timeline save - no meaningful content or changes');\n      return { success: true, skipped: true };\n    }\n    \n    console.log(`Updating timeline for case ${data?.id} with ${updatedTimeline.length} entries`);\n    return debouncedTimelineSave(updatedTimeline);\n  }, [debouncedTimelineSave, isLoading, data?.id]);\n\n  // Get connected nodes for Related tab\n  const connectedNodes = useMemo(() => {\n    if (!data?.id) return { topics: [], literature: [], cases: [] };\n    \n    // This would typically come from your mind map connections data\n    // For now, return empty arrays - you can implement based on your data structure\n    return {\n      topics: [],\n      literature: [],\n      cases: []\n    };\n  }, [data?.id]);\n\n  // Tab configuration\n  const tabs = [\n    { id: 'overview', label: 'Overview', icon: Users },\n    { id: 'medications', label: 'Medications', icon: Pill },\n    { id: 'therapy', label: 'Therapy & Insights', icon: Brain },\n    { id: 'timeline', label: 'Timeline', icon: Clock },\n    { id: 'related', label: 'Related', icon: Link2 }\n  ];\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence mode=\"wait\" onExitComplete={() => {\n      setIsAnimating(false);\n      setIsClosing(false);\n      setHasInitialized(false);\n      onClose();\n      if (onAnimationEnd) onAnimationEnd();\n    }}>\n      {isVisible && (\n        <motion.div\n          key={`case-modal-${data?.id || 'default'}`}\n          initial=\"hidden\"\n          animate=\"visible\"\n          exit=\"exit\"\n          variants={backdropVariants}\n          className=\"fixed inset-0 bg-black flex items-center justify-center z-50\"\n          style={{ \n            willChange: 'backdrop-filter, opacity',\n            backfaceVisibility: 'hidden',\n            transform: 'translate3d(0, 0, 0)'\n          }}\n          onClick={(e) => e.target === e.currentTarget && handleClose()}\n        >\n          <motion.div\n            initial=\"hidden\"\n            animate=\"visible\"\n            exit=\"exit\"\n            variants={modalVariants}\n            className={`bg-white rounded-2xl shadow-2xl w-full mx-4 max-h-[90vh] overflow-hidden transition-all duration-500 ease-in-out ${\n              activeTab === 'timeline' ? 'max-w-7xl' : 'max-w-4xl'\n            }`}\n            style={{ \n              willChange: 'transform, opacity, scale',\n              backfaceVisibility: 'hidden'\n            }}\n            onClick={(e) => e.stopPropagation()}\n            onAnimationStart={() => {\n              setIsAnimating(true);\n              if (onAnimationStart) onAnimationStart();\n            }}\n            onAnimationComplete={() => {\n              setIsAnimating(false);\n              if (onAnimationEnd) onAnimationEnd();\n            }}\n          >\n            <motion.div \n              initial=\"hidden\"\n              animate=\"visible\"\n              exit=\"exit\"\n              variants={contentVariants}\n              className=\"bg-gradient-to-br from-slate-900 to-slate-800 text-white px-6 py-4 flex items-center justify-between\"\n            >\n              <div className=\"flex items-center gap-3\">\n                <Users size={24} />\n                <h2 className=\"text-xl font-semibold\">Case Details</h2>\n              </div>\n              <button\n                onClick={handleClose}\n                className=\"text-slate-400 hover:text-white transition-colors\"\n              >\n                <X size={24} />\n              </button>\n            </motion.div>\n\n            {/* Tab Navigation */}\n            <div className=\"bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 border-b border-slate-600\">\n              <nav className=\"flex flex-wrap gap-2 px-6 py-4\">\n                {tabs.map(({ id, label, icon: Icon }) => (\n                  <motion.button\n                    key={id}\n                    onClick={() => handleTabSwitch(id)}\n                    className={`relative flex items-center gap-2 px-4 py-3 rounded-xl font-medium text-sm transition-all duration-300 ${\n                      activeTab === id\n                        ? 'bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-lg shadow-blue-500/25'\n                        : 'text-slate-300 hover:text-white hover:bg-slate-700/50 hover:shadow-md'\n                    }`}\n                    whileHover={{ scale: activeTab === id ? 1 : 1.02 }}\n                    whileTap={{ scale: 0.98 }}\n                    disabled={isTabTransitioning}\n                  >\n                    <Icon size={16} className={activeTab === id ? 'drop-shadow-sm' : ''} />\n                    {label}\n                    \n                    {activeTab === id && (\n                      <motion.div\n                        layoutId=\"caseActiveTab\"\n                        className=\"absolute inset-0 bg-gradient-to-r from-blue-400/20 to-indigo-500/20 rounded-xl blur-sm\"\n                        initial={false}\n                        transition={{ duration: 0.3, ease: \"easeOut\" }}\n                      />\n                    )}\n                  </motion.button>\n                ))}\n              </nav>\n            </div>\n\n            {/* Dark Content Area */}\n            <motion.div\n              className=\"flex-1 bg-gradient-to-br from-slate-900 to-slate-800 overflow-hidden\"\n              animate={{ opacity: isTabTransitioning ? 0.7 : 1 }}\n              transition={{ duration: 0.2 }}\n            >\n              <AnimatePresence mode=\"wait\">\n                {/* Overview Tab */}\n                {activeTab === 'overview' && (\n                  <motion.div\n                    key=\"overview\"\n                    ref={el => contentRefs.current.overview = el}\n                    initial={{ opacity: 0, x: -20 }}\n                    animate={{ opacity: 1, x: 0 }}\n                    exit={{ opacity: 0, x: 20 }}\n                    transition={{ duration: 0.3 }}\n                    className=\"h-full overflow-y-auto p-6 space-y-6\"\n                  >\n                    {/* Case Title and Basic Info */}\n                    <motion.div \n                      variants={cardVariants}\n                      initial=\"hidden\"\n                      animate=\"visible\"\n                      className=\"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700\"\n                    >\n                      <div className=\"flex items-center justify-between mb-4\">\n                        <h3 className=\"text-lg font-semibold text-white\">Case Information</h3>\n                        <motion.button\n                          whileHover={{ scale: 1.05 }}\n                          whileTap={{ scale: 0.95 }}\n                          onClick={() => toggleEditSection('basic_info')}\n                          className=\"text-blue-400 hover:text-blue-300 transition-colors p-2 rounded-lg hover:bg-slate-700/50\"\n                          title=\"Edit case information\"\n                        >\n                          <Edit3 size={16} />\n                        </motion.button>\n                      </div>\n                      \n                      {editingSections.basic_info ? (\n                        <div className=\"space-y-4\">\n                          <div className=\"grid md:grid-cols-2 gap-4\">\n                            <div>\n                              <label className=\"block text-sm font-medium text-slate-300 mb-2\">Case Title/Label</label>\n                              <input\n                                type=\"text\"\n                                value={sectionData.basic_info?.label !== undefined ? sectionData.basic_info.label : (editData.label || editData.title || '')}\n                                onChange={(e) => updateSectionData('basic_info', 'label', e.target.value)}\n                                className=\"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white placeholder-slate-400 focus:ring-2 focus:ring-blue-400 focus:border-blue-400\"\n                                placeholder=\"Enter case title/label\"\n                              />\n                            </div>\n                            <div>\n                              <label className=\"block text-sm font-medium text-slate-300 mb-2\">Status</label>\n                              <select\n                                value={sectionData.basic_info?.status !== undefined ? sectionData.basic_info.status : (editData.status || 'active')}\n                                onChange={(e) => updateSectionData('basic_info', 'status', e.target.value)}\n                                className=\"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-400 focus:border-blue-400\"\n                              >\n                                <option value=\"active\">Active</option>\n                                <option value=\"archived\">Archived</option>\n                                <option value=\"follow_up\">Follow-up</option>\n                                <option value=\"completed\">Completed</option>\n                              </select>\n                            </div>\n                          </div>\n                          \n                          {/* Action buttons area - consistent height */}\n                          <div className=\"flex gap-2 justify-end min-h-[44px] items-center\">\n                            <motion.button\n                              whileHover={{ scale: 1.05 }}\n                              whileTap={{ scale: 0.95 }}\n                              onClick={() => cancelEdit('basic_info')}\n                              className=\"px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-500 transition-colors\"\n                            >\n                              Cancel\n                            </motion.button>\n                            <motion.button\n                              whileHover={{ scale: 1.05 }}\n                              whileTap={{ scale: 0.95 }}\n                              onClick={() => saveSection('basic_info')}\n                              className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2\"\n                            >\n                              <Save size={16} />\n                              Save Changes\n                            </motion.button>\n                          </div>\n                        </div>\n                      ) : (\n                        <div className=\"space-y-4\">\n                          <div className=\"grid md:grid-cols-2 gap-4\">\n                            <div>\n                              <label className=\"block text-sm font-medium text-slate-300 mb-2\">Case Title/Label</label>\n                              <div className={`bg-slate-700/50 rounded-lg p-3 ${editData.label || editData.title ? 'text-white' : 'text-slate-400 italic'}`}>\n                                {editData.label || editData.title || 'Untitled case'}\n                              </div>\n                            </div>\n                            <div>\n                              <label className=\"block text-sm font-medium text-slate-300 mb-2\">Status</label>\n                              <div className=\"text-white bg-slate-700/50 rounded-lg p-3\">\n                                {editData.status || 'Active'}\n                              </div>\n                            </div>\n                          </div>\n                          \n                          {/* Reserved space for action buttons - maintains consistent height */}\n                          <div className=\"flex gap-2 justify-end min-h-[44px] items-center\">\n                            {/* Empty space to maintain layout consistency */}\n                          </div>\n                        </div>\n                      )}\n                    </motion.div>\n\n                    {/* Narrative Summary */}\n                    <motion.div \n                      variants={cardVariants}\n                      initial=\"hidden\"\n                      animate=\"visible\"\n                      className=\"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700\"\n                    >\n                      <div className=\"flex items-center justify-between mb-4\">\n                        <h3 className=\"text-lg font-semibold text-white flex items-center gap-2\">\n                          <FileText size={20} className=\"text-blue-400\" />\n                          Case Narrative\n                        </h3>\n                        <motion.button\n                          whileHover={{ scale: 1.05 }}\n                          whileTap={{ scale: 0.95 }}\n                          onClick={() => toggleEditSection('narrative')}\n                          className=\"text-blue-400 hover:text-blue-300 transition-colors p-2 rounded-lg hover:bg-slate-700/50\"\n                          title=\"Edit narrative summary\"\n                        >\n                          <Edit3 size={16} />\n                        </motion.button>\n                      </div>\n                      \n                      {editingSections.narrative ? (\n                        <div className=\"space-y-4\">\n                          <textarea\n                            value={sectionData.narrative?.content !== undefined ? sectionData.narrative.content : (editData.narrative_summary || '')}\n                            onChange={(e) => updateSectionData('narrative', 'content', e.target.value)}\n                            rows={8}\n                            className=\"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white placeholder-slate-400 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 resize-none\"\n                            placeholder=\"Enter the narrative summary for this case...\"\n                          />\n                          \n                          {/* Action buttons area - consistent height */}\n                          <div className=\"flex gap-2 justify-end min-h-[44px] items-center\">\n                            <motion.button\n                              whileHover={{ scale: 1.05 }}\n                              whileTap={{ scale: 0.95 }}\n                              onClick={() => cancelEdit('narrative')}\n                              className=\"px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-500 transition-colors\"\n                            >\n                              Cancel\n                            </motion.button>\n                            <motion.button\n                              whileHover={{ scale: 1.05 }}\n                              whileTap={{ scale: 0.95 }}\n                              onClick={() => saveSection('narrative')}\n                              className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2\"\n                            >\n                              <Save size={16} />\n                              Save Changes\n                            </motion.button>\n                          </div>\n                        </div>\n                      ) : (\n                        <div className=\"space-y-4\">\n                          <div className={`leading-relaxed bg-slate-700/30 rounded-lg p-4 ${editData.narrative_summary ? 'text-slate-300' : 'text-slate-400 italic'}`}>\n                            {editData.narrative_summary || 'No narrative summary documented'}\n                          </div>\n                          \n                          {/* Reserved space for action buttons - maintains consistent height */}\n                          <div className=\"flex gap-2 justify-end min-h-[44px] items-center\">\n                            {/* Empty space to maintain layout consistency */}\n                          </div>\n                        </div>\n                      )}\n                    </motion.div>\n\n                    {/* Last Updated */}\n                    <div className=\"text-xs text-slate-500 text-right\">\n                      Last updated: {editData.last_updated ? new Date(editData.last_updated).toLocaleString() : 'Never'}\n                    </div>\n                  </motion.div>\n                )}\n\n                {/* Medications Tab */}\n                {activeTab === 'medications' && (\n                  <motion.div\n                    key=\"medications\"\n                    ref={el => contentRefs.current.medications = el}\n                    initial={{ opacity: 0, x: -20 }}\n                    animate={{ opacity: 1, x: 0 }}\n                    exit={{ opacity: 0, x: 20 }}\n                    transition={{ duration: 0.3 }}\n                    className=\"h-full overflow-y-auto p-6 space-y-6\"\n                  >\n                    {/* Medications List */}\n                    <motion.div \n                      variants={cardVariants}\n                      initial=\"hidden\"\n                      animate=\"visible\"\n                      className=\"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700\"\n                    >\n                      <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center gap-2\">\n                        <Pill size={20} className=\"text-green-400\" />\n                        Current Medications\n                      </h3>\n                      \n                      {/* Existing Medications */}\n                      <div className=\"space-y-4 mb-6\">\n                        <AnimatePresence>\n                          {(editData.medications || []).map((medication, index) => (\n                            <motion.div\n                              key={medication.id || index}\n                              initial={{ opacity: 0, scale: 0.8 }}\n                              animate={{ opacity: 1, scale: 1 }}\n                              exit={{ opacity: 0, scale: 0.8 }}\n                              className=\"bg-green-600/10 border border-green-600/20 rounded-lg p-4 group hover:bg-green-600/15 transition-colors\"\n                            >\n                              <div className=\"flex items-start justify-between\">\n                                <div className=\"flex-1\">\n                                  <div className=\"flex items-center gap-3 mb-2\">\n                                    <h4 className=\"font-semibold text-green-300\">{medication.name}</h4>\n                                    {medication.dosage && (\n                                      <span className=\"text-xs bg-green-600/20 text-green-300 px-2 py-1 rounded\">\n                                        {medication.dosage}\n                                      </span>\n                                    )}\n                                  </div>\n                                  <div className=\"space-y-1 text-sm text-slate-300\">\n                                    {medication.frequency && (\n                                      <div className=\"flex items-center gap-2\">\n                                        <Clock size={14} className=\"text-green-400\" />\n                                        <span>Frequency: {medication.frequency}</span>\n                                      </div>\n                                    )}\n                                    {medication.effect && (\n                                      <div className=\"flex items-center gap-2\">\n                                        <Activity size={14} className=\"text-green-400\" />\n                                        <span>Effect: {medication.effect}</span>\n                                      </div>\n                                    )}\n                                    {medication.dateAdded && (\n                                      <div className=\"flex items-center gap-2\">\n                                        <Calendar size={14} className=\"text-green-400\" />\n                                        <span>Added: {new Date(medication.dateAdded).toLocaleDateString()}</span>\n                                      </div>\n                                    )}\n                                  </div>\n                                </div>\n                                <motion.button\n                                  whileHover={{ scale: 1.1 }}\n                                  whileTap={{ scale: 0.9 }}\n                                  onClick={() => removeMedication(medication.id)}\n                                  className=\"text-green-400 hover:text-green-200 opacity-0 group-hover:opacity-100 transition-opacity p-1 rounded\"\n                                  title=\"Remove medication\"\n                                >\n                                  <Trash2 size={16} />\n                                </motion.button>\n                              </div>\n                            </motion.div>\n                          ))}\n                        </AnimatePresence>\n                      </div>\n                      \n                      {/* Add New Medication */}\n                      {!showMedicationForm ? (\n                        <motion.button\n                          whileHover={{ scale: 1.02 }}\n                          whileTap={{ scale: 0.98 }}\n                          onClick={() => setShowMedicationForm(true)}\n                          className=\"w-full flex items-center justify-center gap-2 p-4 border-2 border-dashed border-green-600/30 rounded-lg text-green-400 hover:border-green-600/50 hover:bg-green-600/5 transition-colors\"\n                        >\n                          <Plus size={16} />\n                          Add New Medication\n                        </motion.button>\n                      ) : (\n                        <motion.div\n                          initial={{ opacity: 0, y: 20 }}\n                          animate={{ opacity: 1, y: 0 }}\n                          className=\"bg-slate-700/30 rounded-lg p-4 space-y-4\"\n                        >\n                          <div className=\"grid md:grid-cols-2 gap-4\">\n                            <div>\n                              <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                                Medication Name <span className=\"text-red-400\">*</span>\n                              </label>\n                              <input\n                                type=\"text\"\n                                value={newMedication.name}\n                                onChange={(e) => setNewMedication(prev => ({ ...prev, name: e.target.value }))}\n                                className=\"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white placeholder-slate-400 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n                                placeholder=\"Enter medication name\"\n                              />\n                            </div>\n                            <div>\n                              <label className=\"block text-sm font-medium text-slate-300 mb-2\">Dosage</label>\n                              <input\n                                type=\"text\"\n                                value={newMedication.dosage}\n                                onChange={(e) => setNewMedication(prev => ({ ...prev, dosage: e.target.value }))}\n                                className=\"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white placeholder-slate-400 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n                                placeholder=\"e.g., 50mg\"\n                              />\n                            </div>\n                          </div>\n                          <div className=\"grid md:grid-cols-2 gap-4\">\n                            <div>\n                              <label className=\"block text-sm font-medium text-slate-300 mb-2\">Frequency</label>\n                              <input\n                                type=\"text\"\n                                value={newMedication.frequency}\n                                onChange={(e) => setNewMedication(prev => ({ ...prev, frequency: e.target.value }))}\n                                className=\"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white placeholder-slate-400 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n                                placeholder=\"e.g., Once daily\"\n                              />\n                            </div>\n                            <div>\n                              <label className=\"block text-sm font-medium text-slate-300 mb-2\">Effect/Notes</label>\n                              <input\n                                type=\"text\"\n                                value={newMedication.effect}\n                                onChange={(e) => setNewMedication(prev => ({ ...prev, effect: e.target.value }))}\n                                className=\"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white placeholder-slate-400 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n                                placeholder=\"e.g., Improved mood\"\n                              />\n                            </div>\n                          </div>\n                          <div className=\"flex justify-end gap-2\">\n                            <motion.button\n                              whileHover={{ scale: 1.02 }}\n                              whileTap={{ scale: 0.98 }}\n                              onClick={() => {\n                                setShowMedicationForm(false);\n                                setNewMedication({ name: '', dosage: '', frequency: '', effect: '' });\n                              }}\n                              className=\"px-4 py-2 text-slate-300 hover:text-white border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors\"\n                            >\n                              Cancel\n                            </motion.button>\n                            <motion.button\n                              whileHover={{ scale: 1.02 }}\n                              whileTap={{ scale: 0.98 }}\n                              onClick={addMedication}\n                              disabled={!newMedication.name.trim()}\n                              className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n                            >\n                              <Plus size={16} />\n                              Add Medication\n                            </motion.button>\n                          </div>\n                        </motion.div>\n                      )}\n                      \n                      {(editData.medications || []).length === 0 && !showMedicationForm && (\n                        <p className=\"text-slate-500 italic text-center py-8\">No medications documented yet</p>\n                      )}\n                    </motion.div>\n                  </motion.div>\n                )}\n\n                {/* Therapy & Insights Tab */}\n                {activeTab === 'therapy' && (\n                  <motion.div\n                    key=\"therapy\"\n                    ref={el => contentRefs.current.therapy = el}\n                    initial={{ opacity: 0, x: -20 }}\n                    animate={{ opacity: 1, x: 0 }}\n                    exit={{ opacity: 0, x: 20 }}\n                    transition={{ duration: 0.3 }}\n                    className=\"h-full overflow-y-auto p-6 space-y-6\"\n                  >\n                    {/* Therapeutic Highlights Section */}\n                    <motion.div \n                      variants={cardVariants}\n                      animate={editingSections.therapeutic_highlights ? \"edit\" : \"visible\"}\n                      className=\"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700\"\n                    >\n                      <div className=\"flex items-center justify-between mb-4\">\n                        <h3 className=\"text-lg font-semibold text-white flex items-center gap-2\">\n                          <Brain size={20} className=\"text-purple-400\" />\n                          Therapeutic Highlights\n                        </h3>\n                        {!editingSections.therapeutic_highlights && (\n                          <motion.button\n                            whileHover={{ scale: 1.1 }}\n                            whileTap={{ scale: 0.9 }}\n                            onClick={() => startEditingSection('therapeutic_highlights')}\n                            className=\"text-slate-400 hover:text-white transition-colors p-1 rounded\"\n                            title=\"Edit therapeutic highlights\"\n                          >\n                            <Edit3 size={16} />\n                          </motion.button>\n                        )}\n                      </div>\n                      \n                      {editingSections.therapeutic_highlights ? (\n                        <motion.div \n                          className=\"space-y-4\"\n                          initial={{ opacity: 0, y: 10 }}\n                          animate={{ opacity: 1, y: 0 }}\n                          transition={{ duration: 0.3 }}\n                        >\n                          <textarea\n                            value={sectionData.therapeutic_highlights?.therapeutic_highlights !== undefined ? sectionData.therapeutic_highlights.therapeutic_highlights : (editData.therapeutic_highlights || '')}\n                            onChange={(e) => updateSectionField('therapeutic_highlights', 'therapeutic_highlights', e.target.value)}\n                            rows={10}\n                            className=\"w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-3 text-white placeholder-slate-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none\"\n                            placeholder=\"Enter key therapeutic moments, insights, breakthroughs, or notes on therapy process...\"\n                          />\n                          <div className=\"flex justify-end gap-2\">\n                            <motion.button\n                              whileHover={{ scale: 1.02 }}\n                              whileTap={{ scale: 0.98 }}\n                              onClick={() => cancelEditingSection('therapeutic_highlights')}\n                              className=\"px-3 py-2 text-slate-300 hover:text-white border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors text-sm\"\n                            >\n                              Cancel\n                            </motion.button>\n                            <motion.button\n                              whileHover={{ scale: 1.02 }}\n                              whileTap={{ scale: 0.98 }}\n                              onClick={() => saveSectionEdit('therapeutic_highlights')}\n                              disabled={isLoading}\n                              className=\"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm flex items-center gap-2\"\n                            >\n                              {isLoading ? <Loader2 size={14} className=\"animate-spin\" /> : <Save size={14} />}\n                              Save\n                            </motion.button>\n                          </div>\n                        </motion.div>\n                      ) : (\n                        <motion.div \n                          className=\"text-slate-300 leading-relaxed cursor-pointer hover:bg-slate-700/20 rounded-lg p-4 transition-colors min-h-[200px]\"\n                          whileHover={{ scale: 1.01 }}\n                          transition={{ duration: 0.2 }}\n                          onClick={() => startEditingSection('therapeutic_highlights')}\n                        >\n                          {editData.therapeutic_highlights ? (\n                            <div className=\"whitespace-pre-wrap\">{editData.therapeutic_highlights}</div>\n                          ) : (\n                            <span className=\"text-slate-500 italic\">Click to add therapeutic highlights, key moments, insights, breakthroughs, or therapy process notes...</span>\n                          )}\n                        </motion.div>\n                      )}\n                    </motion.div>\n                  </motion.div>\n                )}\n\n                {/* Timeline Tab */}\n                {activeTab === 'timeline' && (\n                  <motion.div\n                    key=\"timeline\"\n                    ref={el => contentRefs.current.timeline = el}\n                    initial={{ opacity: 0, x: -20 }}\n                    animate={{ opacity: 1, x: 0 }}\n                    exit={{ opacity: 0, x: 20 }}\n                    transition={{ duration: 0.3 }}\n                    className=\"h-full\"\n                  >\n                    <VerticalTimeline\n                      data={timelineEntries}\n                      caseId={data?.id}\n                      setMindMapData={setMindMapData}\n                      autoSaveMindMapData={autoSaveMindMapData}\n                      onDataChange={(timelineData) => {\n                        // Handle timeline data changes - the VerticalTimeline handles the save internally\n                        console.log('Timeline data updated:', timelineData);\n                        addToast('Timeline updated successfully', 'success');\n                      }}\n                    />\n                  </motion.div>\n                )}\n\n                {/* Related Tab */}\n                {activeTab === 'related' && (\n                  <motion.div\n                    key=\"related\"\n                    ref={el => contentRefs.current.related = el}\n                    initial={{ opacity: 0, x: -20 }}\n                    animate={{ opacity: 1, x: 0 }}\n                    exit={{ opacity: 0, x: 20 }}\n                    transition={{ duration: 0.3 }}\n                    className=\"h-full overflow-y-auto p-6 space-y-6\"\n                  >\n                    {/* Connected Nodes */}\n                    <motion.div \n                      variants={cardVariants}\n                      initial=\"hidden\"\n                      animate=\"visible\"\n                      className=\"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700\"\n                    >\n                      <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center gap-2\">\n                        <Link2 size={20} className=\"text-cyan-400\" />\n                        Connected Nodes\n                      </h3>\n                      \n                      {/* Topics */}\n                      <div className=\"mb-6\">\n                        <h4 className=\"text-md font-medium text-slate-300 mb-3 flex items-center gap-2\">\n                          <Brain size={16} className=\"text-blue-400\" />\n                          Related Topics\n                        </h4>\n                        {connectedNodes.topics.length > 0 ? (\n                          <div className=\"space-y-2\">\n                            {connectedNodes.topics.map((topic, index) => (\n                              <div key={index} className=\"flex items-center gap-3 p-3 bg-blue-600/10 border border-blue-600/20 rounded-lg\">\n                                <Brain size={16} className=\"text-blue-400\" />\n                                <span className=\"text-blue-300\">{topic.title}</span>\n                              </div>\n                            ))}\n                          </div>\n                        ) : (\n                          <p className=\"text-slate-500 italic text-sm\">No connected topics</p>\n                        )}\n                      </div>\n\n                      {/* Literature */}\n                      <div className=\"mb-6\">\n                        <h4 className=\"text-md font-medium text-slate-300 mb-3 flex items-center gap-2\">\n                          <BookOpen size={16} className=\"text-purple-400\" />\n                          Related Literature\n                        </h4>\n                        {connectedNodes.literature.length > 0 ? (\n                          <div className=\"space-y-2\">\n                            {connectedNodes.literature.map((lit, index) => (\n                              <div key={index} className=\"flex items-center gap-3 p-3 bg-purple-600/10 border border-purple-600/20 rounded-lg\">\n                                <BookOpen size={16} className=\"text-purple-400\" />\n                                <span className=\"text-purple-300\">{lit.title}</span>\n                              </div>\n                            ))}\n                          </div>\n                        ) : (\n                          <p className=\"text-slate-500 italic text-sm\">No connected literature</p>\n                        )}\n                      </div>\n\n                      {/* Other Cases */}\n                      <div>\n                        <h4 className=\"text-md font-medium text-slate-300 mb-3 flex items-center gap-2\">\n                          <Users size={16} className=\"text-green-400\" />\n                          Related Cases\n                        </h4>\n                        {connectedNodes.cases.length > 0 ? (\n                          <div className=\"space-y-2\">\n                            {connectedNodes.cases.map((caseNode, index) => (\n                              <div key={index} className=\"flex items-center gap-3 p-3 bg-green-600/10 border border-green-600/20 rounded-lg\">\n                                <Users size={16} className=\"text-green-400\" />\n                                <span className=\"text-green-300\">{caseNode.title}</span>\n                              </div>\n                            ))}\n                          </div>\n                        ) : (\n                          <p className=\"text-slate-500 italic text-sm\">No connected cases</p>\n                        )}\n                      </div>\n\n                      <div className=\"mt-6 p-4 bg-slate-700/20 rounded-lg border border-slate-600\">\n                        <p className=\"text-slate-400 text-sm italic\">\n                          Connected nodes will be automatically populated based on mind map relationships and connections created in the graph view.\n                        </p>\n                      </div>\n                    </motion.div>\n                  </motion.div>\n                )}\n              </AnimatePresence>\n            </motion.div>\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n};\n\nexport default CaseModal;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; (typeof current == 'object' || typeof current == 'function') && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + {\"213\":\"953ef4c7\",\"261\":\"de3004f3\",\"524\":\"7d493d91\"}[chunkId] + \".chunk.js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var inProgress = {};\nvar dataWebpackPrefix = \"frontend:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"./\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkfrontend\"] = self[\"webpackChunkfrontend\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [967,497,96], () => (__webpack_require__(8130)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_ref","data","onNodeClick","onNodeHover","onDataChange","caseId","autoSaveMindMapData","setMindMapData","nodes","setNodes","useState","hoveredNode","setHoveredNode","editingCards","setEditingCards","cardTexts","setCardTexts","isDragging","setIsDragging","isAnimatingNewNode","setIsAnimatingNewNode","isSaving","setIsSaving","lastSaved","setLastSaved","scrollProgress","setScrollProgress","timelineRef","useRef","nodeRefs","pathRefs","dragState","draggedNodeId","scrollContainerRef","saveTimeoutRef","NODE_SPACING","TIMELINE_WIDTH","CENTER_X","CARD_WIDTH","CARD_OFFSET","PATH_ANIMATION_EASE","scrollToNode","useCallback","nodeId","console","log","node","find","n","id","current","container","targetY","y","clientHeight","scrollTo","top","Math","max","behavior","scrollToTop","scrollToBottom","scrollHeight","scrollToLatestNode","length","latestNode","setTimeout","refreshScrollContainer","scrollTop","maxScroll","progress","round","min","totalHeight","useMemo","validYPositions","map","filter","maxY","spacingBasedHeight","positionBasedHeight","useEffect","scrollContainer","handleScroll","addEventListener","passive","removeEventListener","initialPositions","saveTimelineData","async","arguments","undefined","timelineData","index","_cardTexts$node$id","_node$patientData","_cardTexts$node$id2","_node$clinicalData","_cardTexts$node$id3","_cardTexts$node$id4","_cardTexts$node$id5","_node$patientData2","_cardTexts$node$id6","_node$clinicalData2","Date","now","title","type","timestamp","date","toISOString","orderIndex","patient_narrative","patient","patientData","notes","clinical_notes","clinical","clinicalData","content","symptoms","x","created_at","updated_at","prevData","updatedCases","cases","caseItem","String","timeline","last_updated","newData","standaloneData","_cardTexts$node$id7","_node$patientData3","_cardTexts$node$id8","_node$clinicalData3","version","localStorage","setItem","JSON","stringify","error","triggerAutoSave","clearTimeout","loadTimelineData","Array","isArray","timelineNodes","entry","baseY","prev","_entry$patientData","_entry$clinicalData","originalY","savedData","getItem","parsedData","parse","forEach","initialNodes","item","_item$patientData","_item$patientData2","_item$clinicalData","_item$clinicalData2","chiefComplaint","updateConnectionPaths","draggedPosition","_initialPositions$cur","draggedIndex","connectionsToUpdate","prevNode","push","sourceNode","targetNode","nextNode","connection","pathRef","x1","y1","x2","y2","pathD","gsap","to","attr","d","duration","ease","handleMouseDown","event","_timelineRef$current","preventDefault","currentNodeRef","getBoundingClientRect","initialPos","clientX","clientY","handleMouseMove","moveEvent","_timelineRef$current2","rect","mouseX","left","mouseY","constrainedX","constrainedY","style","transform","prevNodes","handleMouseUp","upEvent","_timelineRef$current3","fromTo","rotation","finalX","finalY","document","handleNodeClick","handleNodeHover","isHovering","handleTextChange","cardType","newText","handleClickOutside","shouldShowCards","_editingCards$nodeId","_editingCards$nodeId2","isHovered","isEditing","editingState","handleAddNode","newNodeId","newIndex","newNodeData","updatedNodes","newNodeElement","querySelector","scrollIntoView","block","inline","handleResetLayout","resetNode","nodeElement","patientCard","clinicalCard","handleManualSave","_jsxs","className","children","_jsx","motion","button","onClick","whileHover","scale","whileTap","initial","opacity","animate","transition","delay","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","disabled","ref","height","maxHeight","e","isClickOnCard","target","closest","isClickOnNode","isClickOnButton","window","innerHeight","minHeight","width","zIndex","join","strokeDasharray","offset","stopColor","stdDeviation","result","in","in2","operator","prevConnectionId","nextConnectionId","connectionKey","path","el","strokeOpacity","transformOrigin","pathLength","div","_node$patientData4","_editingCards$node$id","_editingCards$node$id2","_cardTexts$node$id9","_cardTexts$node$id0","_cardTexts$node$id1","_cardTexts$node$id10","_editingCards$node$id3","_editingCards$node$id4","_cardTexts$node$id11","_cardTexts$node$id12","_cardTexts$node$id13","_cardTexts$node$id14","borderRadius","background","boxShadow","border","display","alignItems","justifyContent","willChange","stiffness","damping","onMouseDown","nodeEl","currentTarget","stopPropagation","onMouseEnter","onMouseLeave","fillRule","clipRule","animation","borderLeft","toLocaleDateString","month","day","toLocaleTimeString","hour","minute","AnimatePresence","_Fragment","borderImage","padding","exit","value","onChange","onBlur","placeholder","backgroundImage","right","overflow","jsx","modalVariants","hidden","rotate","visible","backdropVariants","backdropFilter","contentVariants","cardVariants","edit","saved","_sectionData$title","_sectionData$definiti","_sectionData$diagnost","_sectionData$psychoth","isOpen","onClose","onAnimationStart","onAnimationEnd","addToast","syncNodeData","forceNodeUpdate","isAnimating","setIsAnimating","isVisible","setIsVisible","isClosing","setIsClosing","editData","setEditData","isLoading","setIsLoading","hasInitialized","setHasInitialized","activeTab","setActiveTab","isTabTransitioning","setIsTabTransitioning","editingSections","setEditingSections","sectionData","setSectionData","scrollPositions","setScrollPositions","contentRefs","expandedCriteria","setExpandedCriteria","newTags","setNewTags","newResource","setNewResource","showResourceForm","setShowResourceForm","categoryColors","primary","secondary","tabs","label","icon","BookOpen","Brain","Stethoscope","Pill","Link2","initialData","category","definition","diagnostic_criteria","comorbidities","differential_diagnoses","medications","psychotherapy_modalities","flashcard_count","completed_flashcards","prevEditData","progressPercentage","total","completed","handleClose","saveScrollPosition","updatedData","updatedTopics","topics","topic","tabId","contentRef","restoreScrollPosition","savedPosition","handleTabSwitch","newTabId","handleCategoryChange","_categoryColors$newCa","newCategory","newColor","Other","updatedEditData","color","startEditingSection","literature","confirm","sectionId","cancelEditingSection","saveSectionEdit","sectionChanges","updateSectionField","field","setNewTag","tag","_sectionData$sectionI","trim","currentTags","includes","tagToRemove","_sectionData$sectionI2","getNewTag","clearNewTag","addItemDirectly","currentItems","updatedItems","removeItemDirectly","itemToRemove","mode","onExitComplete","variants","backfaceVisibility","onAnimationComplete","size","X","_ref2","Icon","layoutId","overview","Edit3","Loader2","Save","h1","select","whileFocus","Object","keys","toLocaleString","concept","rows","FileText","ChevronDown","ChevronRight","split","criteria","Users","comorbidity","onKeyPress","key","Plus","Activity","diagnosis","treatment","medication","modality","connections","sampleVerticalTimelineData","currentStatus","SimpleGSAPTest","boxRef","backgroundColor","repeat","yoyo","Clock","VerticalTimeline","TimelineTestPage","showSimpleTest","setShowSimpleTest","showTimelineModal","setShowTimelineModal","timer","TimelineModal","ArtisticBackground","memo","variant","gap","showRadialLines","showConcentricCircles","enableParallax","RadialGrid","patternUnits","radius","cx","cy","r","from","_","angle","PI","cos","sin","slice","Infinity","DotGrid","backgroundSize","backgroundPosition","LineGrid","renderBackground","displayName","LoadingSpinner","message","LazyRichTextEditor","lazy","LazyTemplateManager","LazyLiteratureModal","LazyCaseModal","LazyTopicModal","LazyTaskModal","withLazyLoading","LazyComponent","fallbackMessage","props","Suspense","fallback","LiteratureModal","getIntersectionPoint","center","point","rectX","rectY","centerX","centerY","pointX","pointY","bottom","dx","dy","abs","side","slope","yIntercept","intersections","leftY","distance","hypot","rightY","topX","bottomX","validIntersections","intersection","intersectionDx","intersectionDy","sort","a","b","FloatingEdge","_sourceNode2","_targetNode2","_sourceNode3","_targetNode3","_sourceNode4","_sourceNode5","_targetNode4","_targetNode5","source","sourceX","sourceY","targetX","sourcePosition","targetPosition","markerEnd","markerStart","labelStyle","labelShowBg","labelBgStyle","getNode","useReactFlow","getEdgeStyles","_sourceNode","_targetNode","edgePath","labelX","labelY","__isAnimating","__forceUpdate","_sourceNode$dimension","_sourceNode$data","_sourceNode$style","_targetNode$dimension","_targetNode$data","_targetNode$style","_sourceNode$positionA","_sourceNode$positionA2","_targetNode$positionA","_targetNode$positionA2","sourceHasDimensions","Boolean","dimensions","targetHasDimensions","getNodeDimensions","_node$dimensions","_node$data","_node$dimensions2","_node$data2","defaultWidth","defaultHeight","sourceDims","targetDims","floatingEdgeData","options","sourceWidth","sourceHeight","targetWidth","targetHeight","sourceSide","targetSide","sourceCenter","targetCenter","sourceRect","targetRect","sourceIntersection","targetIntersection","sqrt","unitX","unitY","extensionAmount","debug","getFloatingEdgePath","positionAbsolute","position","sx","sy","tx","ty","deltaX","deltaY","controlDistance","warn","stopOpacity","BaseEdge","prevProps","nextProps","_prevProps$data","_nextProps$data","EnhancedEdge","sourceHandleId","targetHandleId","selected","animated","getBezierPath","EdgeLabelRenderer","fontSize","pointerEvents","fromX","fromY","toX","toY","connectionLineStyle","Sparkles","skipAnimation","completionPercentage","Handle","Position","Top","isConnectable","Right","Bottom","Left","Lightbulb","onDelete","deleteTimeout","onDoubleClick","description","Tag","toUpperCase","urgency","_data$chief_complaint","_data$diagnosis","complaint","chief_complaint","toLowerCase","some","keyword","getUrgencyLevel","AlertCircle","linked_topics","age","Calendar","status","getStatusColor","replace","tasks_count","CheckSquare","completed_tasks","Eye","statusStyles","ring","shadow","getStatusStyles","priorityRing","priority","getPriorityRing","Flag","Target","Zap","due_date","total_subtasks","completed_subtasks","circle","strokeDashoffset","nodeTypes","TopicNode","case","CaseNode","task","TaskNode","fontFamily","authors","substring","year","journal","volume","keywordsOrTags","keywords","tags","sampleLiteratureData","pages","doi","abstract","pdf_url","sampleConnections","populateSampleLiteratureData","existingIds","Set","newLiterature","has","existingCaseIds","existingTopicIds","newCases","primary_diagnosis","secondary_diagnoses","newTopics","existingConnectionIds","conn","newConnections","loadD3Force","API","process","originalError","_len2","args","_key2","Toast","success","info","saving","getIcon","CheckCircle2","Info","LoadingButton","loading","STORAGE_KEY","localStorageUtils","save","timeoutId","onSaveStart","onSaveComplete","storageData","name","removeItem","clearError","load","stored","clear","getStorageInfo","Blob","EdgeLabelModal","_ref7","edge","onSave","setLabel","handleSave","autoFocus","DashboardComponent","_caseModal$data2","_topicModal$data2","_taskModal$data2","_caseModal$data3","_topicModal$data3","_taskModal$data3","fitView","setCenter","zoomTo","getViewport","onNodesChange","useNodesState","edges","setEdges","onEdgesChange","useEdgesState","nodeUpdateTrigger","setNodeUpdateTrigger","mindMapData","tasks","setIsEditing","selectedNode","setSelectedNode","setLoading","loadingProgress","setLoadingProgress","loadingMessage","setLoadingMessage","isInitialLoad","setIsInitialLoad","focusedCategory","setFocusedCategory","showNodeSelector","setShowNodeSelector","caseModal","setCaseModal","topicModal","setTopicModal","taskModal","setTaskModal","caseModalStableData","topicModalStableData","taskModalStableData","isReactFlowReady","setIsReactFlowReady","hasAppliedInitialLayout","setHasAppliedInitialLayout","isExportingCSV","setIsExportingCSV","edgeModal","setEdgeModal","toasts","setToasts","literatureModal","setLiteratureModal","modalAnimationStates","setModalAnimationStates","newToast","removeToast","toast","_caseModal$data","_topicModal$data","_taskModal$data","anyModalOpen","anyModalAnimating","values","state","anyModalTransitioning","requestIdleCallback","saveToBackend","timeout","positionBackendSaveTimeout","handleDeleteNode","fullNodeId","nodeType","idParts","collectionKey","updatedCollection","updatedConnections","charAt","nds","eds","handleLiteratureClick","literatureData","currentNodes","hasChanges","newLabel","needsUpdate","_mindMapData$cases","caseData","c","expectedLabel","primaryDiagnosis","_mindMapData$topics","topicData","t","expectedColor","_mindMapData$tasks","taskData","_mindMapData$literatu","l","lastUpdated","_mindMapData$cases2","_mindMapData$topics2","_mindMapData$tasks2","_mindMapData$literatu2","convertDataToReactFlow","applyLayoutImmediately","allItems","layoutNodes","hasExistingPositions","forceSimulation","forceManyBody","forceLink","forceCenter","forceCollide","simulationNodes","_item$position","_item$position2","random","d3Edges","nodeIds","simulation","force","strength","distanceMax","innerWidth","stop","i","tick","positionMap","Map","set","get","quickNodes","nodeData","initialPresentation","initial_presentation","currentPresentation","current_presentation","medicationHistory","medication_history","therapyProgress","therapy_progress","defensePatterns","defense_patterns","clinicalReflection","clinical_reflection","gridSize","ceil","nodeSpacing","offsetY","floor","onLiteratureClick","optimizedEdges","createOptimizedEdges","nodeIdSet","updatable","cleanData","_topic$position","_topic$position2","Number","resources","_caseItem$position","_caseItem$position2","case_id","encounter_date","gender","history_present_illness","medical_history","mental_status_exam","assessment_plan","_task$position","_task$position2","linked_case_id","linked_topic_id","lit","_lit$position","_lit$position2","publication","pdf_path","response","axios","put","headers","err","_err$response","_err$response2","_err$response3","_err$response3$data","detail","onConnect","params","edgeId","newEdge","interactionWidth","addEdge","onNodeDoubleClick","parts","dataItem","onEdgeDoubleClick","onEdgeContextMenu","handleSaveEdgeLabel","onEdgeMouseEnter","onEdgeMouseLeave","forceLayout","currentEdges","validEdges","fx","fy","ticksPerFrame","totalTicks","currentTick","runSimulationChunk","remainingTicks","requestAnimationFrame","simNode","currentData","_updatedData$key","applyForceLayout","handleClearMap","empty","addNewNode","_mindMapData$topics3","_mindMapData$cases3","_mindMapData$tasks3","_mindMapData$literatu3","dataId","currentDataCount","gridPosition","newNode","dataToAdd","concat","handleNodesChange","changes","positionChanges","change","_updatedData$key2","handleNodeDragStop","dragSaveTimeout","loadMindMapData","local","backendError","nodeMatchesSearch","query","searchTerm","hasMatch","handleKeyDown","_document$querySelect","tagName","ctrlKey","metaKey","focus","styleSheet","getElementById","createElement","head","appendChild","textContent","OptimizedLoadingScreen","CheckCircle","Cloud","Shuffle","Trash2","ReactFlowErrorBoundary","ReactFlow","onNodeDragStop","edgeTypes","floating","enhanced","connectionLineComponent","ConnectionLine","nodesDraggable","nodesConnectable","elementsSelectable","onInit","reactFlowInstance","onError","snapToGrid","snapGrid","elevateEdgesOnSelect","defaultEdgeOptions","Controls","MiniMap","allNodes","CaseModal","TopicModal","TaskModal","React","constructor","super","this","hasError","getDerivedStateFromError","componentDidCatch","errorInfo","render","location","reload","Dashboard","ReactFlowProvider","URLSearchParams","search","ReactDOM","App","_priorityConfig$editD","priorityConfig","low","medium","high","urgent","AlertTriangle","statusConfig","pending","in_progress","Play","paused","Pause","isOverdue","updatedTasks","handleDelete","handleStatusChange","newStatus","updateField","renderField","choices","choice","TrendingUp","bounce","layout","layoutRoot","entries","_ref3","config","isActive","_prevProps$data2","_nextProps$data2","_sectionData$basic_in","_sectionData$basic_in2","_sectionData$narrativ","_sectionData$therapeu","newMedication","setNewMedication","dosage","frequency","effect","showMedicationForm","setShowMedicationForm","narrative_summary","therapeutic_highlights","toggleEditSection","updateSectionData","cancelEdit","saveSection","addMedication","updatedMedications","dateAdded","removeMedication","medicationId","med","timelineEntries","debouncedTimelineSave","debounce","func","_len","_key","apply","updatedTimeline","retryCount","validatedTimeline","connectedNodes","skipped","basic_info","narrative","therapy","related","caseNode","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","loaded","__webpack_modules__","m","deferred","O","chunkIds","fn","notFulfilled","fulfilled","j","every","splice","leafPrototypes","getProto","getPrototypeOf","obj","__esModule","then","ns","create","def","indexOf","getOwnPropertyNames","o","defineProperty","enumerable","f","chunkId","Promise","all","reduce","promises","u","miniCssF","g","globalThis","Function","prop","prototype","hasOwnProperty","call","inProgress","dataWebpackPrefix","url","done","script","needAttach","scripts","getElementsByTagName","s","getAttribute","charset","nc","setAttribute","src","onScriptComplete","onerror","onload","doneFns","parentNode","removeChild","bind","Symbol","toStringTag","nmd","paths","p","installedChunks","installedChunkData","promise","resolve","reject","Error","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}