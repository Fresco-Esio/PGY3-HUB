"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[261,524],{4524:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var r=a(5043),l=a(4596),s=a(3528),n=a(2382),o=a(8326),i=a(1360),d=a(8693),c=a(614),p=a(6261),m=a(579);const u={topic:[{name:"title",label:"Title",type:"text",placeholder:"e.g., Major Depressive Disorder"},{name:"description",label:"Description",type:"textarea",placeholder:"Enter a detailed description..."},{name:"category",label:"Category",type:"text",placeholder:"e.g., Mood Disorders"}],case:[{name:"primary_diagnosis",label:"Primary Diagnosis",type:"text",placeholder:"e.g., Bipolar I Disorder"},{name:"chiefComplaint",label:"Chief Complaint",type:"text",placeholder:'e.g., "I feel down all the time."'},{name:"initialPresentation",label:"Initial Presentation",type:"textarea",placeholder:"What symptoms led to intake or referral?"},{name:"currentPresentation",label:"Current Presentation",type:"textarea",placeholder:"What symptoms or behaviors are prominent now?"},{name:"medicationHistory",label:"Medication History",type:"textarea",placeholder:"Timeline of trials, responses, and side effects"},{name:"therapyProgress",label:"Therapy History & Progress",type:"textarea",placeholder:"Interventions, ruptures, breakthroughs"},{name:"defensePatterns",label:"Defense Patterns",type:"text",placeholder:"e.g., projection, denial, intellectualization"},{name:"clinicalReflection",label:"Your Clinical Reflection",type:"textarea",placeholder:"What stands out to you? What are you learning?"},{name:"assessment_plan",label:"Assessment & Plan",type:"textarea",placeholder:"Enter assessment and plan details..."}],task:[{name:"title",label:"Title",type:"text",placeholder:"e.g., Prepare presentation on SSRIs"},{name:"description",label:"Description",type:"textarea",placeholder:"Enter task details..."}],literature:[{name:"title",label:"Title",type:"text",placeholder:"e.g., The Neurobiology of..."},{name:"authors",label:"Authors",type:"text",placeholder:"e.g., Kandel, E. R."},{name:"abstract",label:"Abstract",type:"textarea",placeholder:"Paste or write the abstract here..."}]},g=e=>{let{field:t,value:a,onChange:l}=e;const s=a&&a.trim().length>0,[i,d]=(0,r.useState)(!s);return(0,m.jsxs)("div",{className:"border border-gray-200 rounded-lg mb-3 overflow-hidden",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 px-3 py-2 cursor-pointer",onClick:()=>{d(!i)},children:[(0,m.jsx)("label",{htmlFor:`template-${t.name}`,className:"block text-sm font-medium text-gray-700 cursor-pointer select-none",children:t.label}),i?(0,m.jsx)(o.A,{size:18,className:"text-gray-500"}):(0,m.jsx)(n.A,{size:18,className:"text-gray-500"})]}),!i&&(0,m.jsx)("div",{className:"p-3",children:"textarea"===t.type?(0,m.jsx)(p.default,{content:a,onChange:l,placeholder:t.placeholder,rows:5}):(0,m.jsx)("input",{type:t.type,id:`template-${t.name}`,value:a,onChange:e=>l(e.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:t.placeholder})})]},t.name)},h=e=>{let{isOpen:t,onClose:a,onCreate:n,onUpdate:o,templates:h,onDelete:x}=e;const[b,y]=(0,r.useState)(!1),[f,j]=(0,r.useState)(""),[v,N]=(0,r.useState)("topic"),[C,w]=(0,r.useState)({}),[k,A]=(0,r.useState)(null);if((0,r.useEffect)(()=>{k&&(j(k.name||""),N(k.nodeType||"topic"),w(k.data||{}),y(!0))},[k]),(0,r.useEffect)(()=>{b&&!k&&w({})},[v,b,k]),!t)return null;const T=(e,t)=>{w(a=>({...a,[e]:t}))};return(0,m.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm",onClick:a,children:(0,m.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full mx-4 max-h-[70vh] overflow-hidden flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,m.jsxs)("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,m.jsxs)("h2",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[(0,m.jsx)(s.A,{size:20}),b?k?"Edit Template":"Create New Template":"Template Manager"]}),(0,m.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-200 transition-colors",children:(0,m.jsx)(c.A,{size:20})})]}),(0,m.jsx)("div",{className:"p-6 overflow-y-auto",children:b?(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"template-name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Template Name"}),(0,m.jsx)("input",{type:"text",id:"template-name",value:f,onChange:e=>j(e.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Initial Psychiatric Evaluation"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"node-type",className:"block text-sm font-medium text-gray-700 mb-1",children:"Node Type"}),(0,m.jsx)("select",{id:"node-type",value:v,onChange:e=>N(e.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:["topic","case","task","literature"].map(e=>(0,m.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),u[v].map(e=>"case"===v?(0,m.jsx)(g,{field:e,value:C[e.name]||"",onChange:t=>T(e.name,t)},e.name):(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:`template-${e.name}`,className:"block text-sm font-medium text-gray-700 mb-1",children:e.label}),"textarea"===e.type?(0,m.jsx)(p.default,{content:C[e.name]||"",onChange:t=>T(e.name,t),placeholder:e.placeholder,rows:5}):(0,m.jsx)("input",{type:e.type,id:`template-${e.name}`,value:C[e.name]||"",onChange:t=>T(e.name,t.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:e.placeholder})]},e.name))]}):(0,m.jsx)(m.Fragment,{children:h&&h.length>0?(0,m.jsx)("ul",{children:h.map(e=>(0,m.jsxs)("li",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 last:border-b-0 hover:bg-gray-50 transition-colors",children:[(0,m.jsx)("span",{className:"text-gray-700",children:e.name}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[(0,m.jsx)("button",{onClick:()=>(e=>{A(e)})(e),className:"text-gray-400 hover:text-blue-600 p-1 rounded-full hover:bg-blue-100 transition-colors",title:`Edit ${e.name}`,children:(0,m.jsx)(l.A,{size:16})}),x&&(0,m.jsx)("button",{onClick:()=>x(e.id),className:"text-gray-400 hover:text-red-600 p-1 rounded-full hover:bg-red-100 transition-colors",title:`Delete ${e.name}`,children:(0,m.jsx)(c.A,{size:16})})]})]},e.id))}):(0,m.jsx)("p",{className:"text-gray-500",children:"No templates created yet."})})}),(0,m.jsx)("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4 flex items-center justify-end gap-3 mt-auto",children:b?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("button",{onClick:()=>{y(!1),A(null),j(""),N("topic"),w({})},className:"px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors",children:"Cancel"}),(0,m.jsxs)("button",{onClick:()=>{if(!f.trim())return void alert("Template name is required.");const e={id:k?k.id:void 0,name:f,nodeType:v,data:C};k?o(e):n(e),j(""),N("topic"),w({}),y(!1),A(null)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:bg-blue-300 disabled:cursor-not-allowed",disabled:!f.trim(),children:[(0,m.jsx)(d.A,{size:16}),k?"Update Template":"Save Template"]})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("button",{onClick:a,className:"px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors",children:"Close"}),(0,m.jsxs)("button",{onClick:()=>{A(null),j(""),N("topic"),w({}),y(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[(0,m.jsx)(i.A,{size:16}),"Create New"]})]})})]})})}},6261:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var r=a(5043),l=a(4990),s=a(954),n=a(1367),o=a(3728),i=a(2284),d=a(579);const c=e=>{let{editor:t}=e;if(!t)return null;const a=e=>{let{onClick:t,isActive:a,icon:r,title:l}=e;return(0,d.jsx)("button",{onClick:t,className:"p-2 rounded-md border transition-all duration-200 hover:shadow-md "+(a?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50 hover:border-gray-400"),title:l,type:"button",children:(0,d.jsx)(r,{size:16})})};return(0,d.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-gray-50 border border-gray-200 rounded-lg mb-3",children:[(0,d.jsx)(a,{onClick:()=>t.chain().focus().toggleBold().run(),isActive:t.isActive("bold"),icon:n.A,title:"Bold"}),(0,d.jsx)(a,{onClick:()=>t.chain().focus().toggleItalic().run(),isActive:t.isActive("italic"),icon:o.A,title:"Italic"}),(0,d.jsx)("div",{className:"w-px h-6 bg-gray-300 mx-1"}),(0,d.jsx)(a,{onClick:()=>t.chain().focus().toggleBulletList().run(),isActive:t.isActive("bulletList"),icon:i.A,title:"Bullet List"})]})},p=e=>{let{content:t,onChange:a,placeholder:n,rows:o=3}=e;const[i,p]=(0,r.useState)(!1),m=(0,l.hG)({extensions:[s.A],content:"",onUpdate:e=>{let{editor:t}=e;const r=t.getHTML();a(r)},editorProps:{attributes:{class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors prose prose-sm max-w-none",style:`min-height: ${1.5*o}rem;`}},onCreate:()=>{p(!0)}});return(0,r.useEffect)(()=>{if(m&&i){const e=m.getHTML(),a=t||"<p></p>";e!==a&&m.commands.setContent(a,!1)}},[t,m,i]),m?(0,d.jsxs)("div",{className:"rich-text-editor",children:[(0,d.jsx)(c,{editor:m}),(0,d.jsx)(l.$Z,{editor:m,className:"min-h-0",placeholder:n})]}):(0,d.jsx)("div",{className:"w-full p-3 border border-gray-300 rounded-lg bg-gray-50 animate-pulse",style:{minHeight:1.5*o+"rem"},children:(0,d.jsx)("div",{className:"text-gray-400 text-sm",children:"Loading editor..."})})}}}]);
//# sourceMappingURL=524.c4c81a9f.chunk.js.map